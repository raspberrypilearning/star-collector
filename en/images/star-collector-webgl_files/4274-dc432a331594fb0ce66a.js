(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4274],{34837:function(e){e.exports=e=>{const t=n("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAAQCAYAAAAoEfIQAAAAAXNSR0IArs4c6QAAActJREFUaIHtmttuwyAMQEm1//9l9kTEHGyMb4HVR6rSJYAdX8CDlpIkSZIkSbITFXxO5WTdT8fd9pe3AANqidWzGR3KxO7DNhpde4dj8mc6aPtYEO0zS0ZJJ3mXENvvbuQVI6zOdqPxOIE3a6MJXgv5fTvI7v5+m2ZbGHerPtXYHpM1vP+zoMCqEpr+UrT6WemwwwrU5EfqwrGrNpAlaMda9anG9iNZ6DhYAltAlYAcYHvvQOSOz3GmNIm58iksKgTpBGxVJXlMsJIEhPciJsMKrv39h+yPszLfDCzFItAmSNuwowKYI0Pz3hV8l2wkYv0i/DHSlfsO2D7LBZ7feK7AGqgAe7s0XSGynKYCdWRPdpnWEVGW9xPfqIqTVCCcDUgLqMlv1obrvz/9d03g/0RUEmOBP0pU2Ibq3xOVCB7VS9QmlKbP7L0fzz0TWOMA7EU8A4ebaFYbE9KxqTbcwKf6Nxkrcrms9Lf09UlVWynzFfoGS+BIR1FjvHWO6UHkSqx5zm0zYzaReJ1lnxo3V3etyPf++vzjcCzOgftxvP6PopLY8occeQ4sY1bCavpzx2CTDsWBjjjRVrutRKdtQibJ60QfZSVJkiQcfgHLRY8eT2qnRAAAAABJRU5ErkJggg=="),r=n("data:image/png;base64,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"),a={};r.onload=()=>{const e=r.width/8;" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split("").forEach(((t,r)=>{a[t]=[~~(r%e),~~(r/e)]}))};const o={pen:{cursor:"crosshair",key:"q",icon:0},erasor:{cursor:"crosshair",key:"w",icon:1},bucket:{cursor:"crosshair",key:"e",icon:2},rect:{cursor:"crosshair",key:"a",icon:3},circle:{cursor:"crosshair",key:"s",icon:4},line:{cursor:"crosshair",key:"d",icon:5},select:{cursor:"cell",key:"z",icon:6},move:{cursor:"move",key:"x",icon:7},eyedropper:{cursor:"crosshair",key:"c",icon:8}};function n(e,t){const r=new window.Image;return r.src=e,t&&(r.onload=()=>{t(r)}),r}function i(e,t,r){return Math.max(Math.min(e,r),t)}function s(e){return function(e){const t=new Image;return t.src=e,new Promise(((e,r)=>{t.onload=()=>{e(t)},t.onerror=()=>{r()}}))}(e).then((e=>c(e)))}const c=(e,t)=>{const r=document.createElement("canvas");let a=(()=>{if(e instanceof window.ImageData)return new window.ImageData(new Uint8ClampedArray(e.data),e.width,e.height);if(e instanceof window.Image){r.width=e.width,r.height=e.height;const t=r.getContext("2d");return t.drawImage(e,0,0),t.getImageData(0,0,e.width,e.height)}return new window.ImageData(new Uint8ClampedArray(e*t*4).fill(0),e,t)})();function o(){r.width=a.width,r.height=a.height;r.getContext("2d").putImageData(a,0,0)}function n(e,t){return 4*(t*a.width+e)}return{blend:"alpha",scissorRect:null,width:()=>a.width,height:()=>a.height,toImageData:()=>new window.ImageData(new Uint8ClampedArray(a.data),a.width,a.height),clone(){return c(this.toImageData())},clear(){a=new window.ImageData(new Uint8ClampedArray(a.width*a.height*4).fill(0),a.width,a.height)},set(e,t,r){if(!this.checkPt(e,t))return!1;const o=n(e,t);switch(this.blend){case"alpha":{const e=r[3]/255;a.data[o+0]=a.data[o+0]*(1-e)+r[0]*e,a.data[o+1]=a.data[o+1]*(1-e)+r[1]*e,a.data[o+2]=a.data[o+2]*(1-e)+r[2]*e,a.data[o+3]=a.data[o+3]*(1-e)+r[3]*e;break}case"replace":a.data[o+0]=r[0],a.data[o+1]=r[1],a.data[o+2]=r[2],a.data[o+3]=r[3];break;case"add":{const e=a.data[o+3]/255,t=r[3]/255;a.data[o+0]=a.data[o+0]*e+r[0]*t,a.data[o+1]=a.data[o+1]*e+r[1]*t,a.data[o+2]=a.data[o+2]*e+r[2]*t,a.data[o+3]=a.data[o+3]*e+r[3]*t;break}}return!0},get(e,t){const r=n(e,t);return[a.data[r+0],a.data[r+1],a.data[r+2],a.data[r+3]]},line(e,t,r,a,o){const n=r-e,i=a-t,s=Math.abs(n),c=Math.abs(i);let l=0;const d=n>0?1:-1,f=i>0?1:-1;if(s>c)for(let h=e,u=t;d<0?h>=r:h<=r;h+=d)this.set(h,u,o),l+=c,l<<1>=s&&(u+=f,l-=s);else for(let h=e,u=t;f<0?u>=a:u<=a;u+=f)this.set(h,u,o),l+=s,l<<1>=c&&(h+=d,l-=c)},fillRect(e,t,r,a,o){r<0&&(e+=r,r=-r),a<0&&(t+=a,a=-a);for(let n=e;n<e+r;n++)for(let e=t;e<t+a;e++)this.set(n,e,o)},strokeRect(e,t,r,a,o){r<0&&(e+=r,r=-r),a<0&&(t+=a,a=-a),this.line(e,t,e+r,t,o),this.line(e+r,t,e+r,t+a,o),this.line(e+r,t+a,e,t+a,o),this.line(e,t+a,e,t,o)},fillCircle(e,t,r,a){for(let o=e-(r=Math.abs(r));o<=e+r;o++)for(let n=t-r;n<=t+r;n++){Math.sqrt((o-e)**2+(n-t)**2)<=r&&this.set(o,n,a)}},bucket(e,t,r){if(!this.checkPt(e,t))return!1;const a=this.get(e,t);if(l(a,r))return!1;const o=[];for(o.push([e,t]);o.length;){const[e,t]=o.pop();this.checkPt(e,t)&&(l(this.get(e,t),a)&&(this.set(e,t,r),o.push([e,t-1]),o.push([e-1,t]),o.push([e+1,t]),o.push([e,t+1])))}return!0},merge(e,t=0,r=0){for(let o=0;o<a.width;o++)for(let n=0;n<a.height;n++){const i=e.get(o,n);i&&o+t>=0&&o+t<a.width&&n+r>=0&&n+r<a.height&&this.set(o+t,n+r,i)}},checkPt(e,t){if(this.scissorRect){const r=this.scissorRect;return e>=r[0][0]&&e<r[1][0]&&t>=r[0][1]&&t<r[1][1]}return e>=0&&e<a.width&&t>=0&&t<a.height},clampPt:e=>[i(e[0],0,a.width),i(e[1],0,a.height)],bbox(){let e=[0,0],t=[a.width-1,a.height-1];e:for(let r=e[0];r<=t[0];r++)for(let o=e[1];o<=t[1];o++){const t=n(r,o);if(0!==a.data[t+3]){e[0]=r;break e}}e:for(let r=t[0];r>=e[0];r--)for(let o=e[1];o<=t[1];o++){const e=n(r,o);if(0!==a.data[e+3]){t[0]=r;break e}}e:for(let r=e[1];r<=t[1];r++)for(let o=e[0];o<=t[0];o++){const t=n(o,r);if(0!==a.data[t+3]){e[1]=r;break e}}e:for(let r=t[1];r>=e[1];r--)for(let o=e[0];o<=t[0];o++){const e=n(o,r);if(0!==a.data[e+3]){t[1]=r;break e}}return[e,t]},crop(e,t){const r=t[0]-e[0]+1,o=t[1]-e[1]+1,n=c(r,o);for(let a=e[0];a<=t[0];a++)for(let r=e[1];r<=t[1];r++)n.set(a-e[0],r-e[1],this.get(a,r));a=n.toImageData()},toDataURL:()=>(o(),r.toDataURL("image/png")),toPNG(){const e=this.toDataURL().replace(/^data:image\/png;base64,/,""),t=window.atob(e),r=new Uint8Array(t.length);for(let a=0;a<r.length;a++)r[a]=t.charCodeAt(a);return r.buffer},drawable:()=>(o(),r),game(){const e=this.toImageData();for(let t=0;t<a.height;t++)for(let r=0;r<a.width;r++){let o=0,n=0,i=0,s=0;for(let e=-1;e<=1;e++)for(let c=-1;c<=1;c++)if((0!==e||0!==c)&&r-e>=0&&r+e<a.width&&t-c>=0&&t+c<a.height){const l=4*((t+c)*a.width+r+e);a.data[l+3]>0&&(n+=a.data[l+0],i+=a.data[l+1],s+=a.data[l+2],o++)}const c=4*(t*a.width+r);o<2||o>3?(e.data[c+0]=0,e.data[c+1]=0,e.data[c+2]=0,e.data[c+3]=0):3===o&&(e.data[c+0]=n/o,e.data[c+1]=i/o,e.data[c+2]=s/o,e.data[c+3]=255)}return c(e)}}};function l(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function d(e){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}const f=e.canvas,h=e.canvas.getContext("2d"),u={width:e.width,height:e.height,curFrame:0,frames:[c(e.width||64,e.height||64)],fCanvas:c(64|e.width,e.height||64),anims:{},tool:"pen",color:[0,0,0,255],palette:e.palette||[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],view:{offset:[0,0],scale:1},state:{stack:[],offset:0},modified:!1,readOnly:e.readOnly,events:{},curAnim:null,animTimer:0,animSpeed:200,gaming:!1,gameTimer:0,gameSpeed:100},m={mouseDown:!1,mousePressed:!1,mouseMoved:!1,mousePos:[0,0],mousePosPrev:[0,0],mouseStartPos:null,grabbin:!1,delCb:()=>{},hideUI:!1,loopID:null,time:0};b(),h.imageSmoothingEnabled=!1;const p={game:{icon:14,action:function(){u.gaming=!0,u.readOnly=!0,S()}},export:{icon:13,action:()=>O("export")},save:{icon:12,action:()=>O("save")},crop:{icon:9,action:function(){let e,t;u.frames.forEach((r=>{const[a,o]=r.bbox();e&&t?(e[0]=Math.min(e[0],a[0]),e[1]=Math.min(e[1],a[0]),t[0]=Math.max(t[0],o[0]),t[1]=Math.max(t[1],o[0])):(e=a,t=o)})),u.frames.forEach((r=>r.crop(e,t))),u.width=M().width(),u.height=M().height(),S()}},undo:{icon:10,key:"shift+z",action:D},redo:{icon:11,key:"meta+shift+z",action:F}},g=document.createElement("input");function w(e){return[~~((e[0]-u.view.offset[0])/u.view.scale),~~((e[1]-u.view.offset[1])/u.view.scale)]}function v(){u.view.scale<=2||(u.view.scale--,u.view.offset[0]+=u.width/2,u.view.offset[1]+=u.height/2)}function y(){u.view.scale>=64||(u.view.scale++,u.view.offset[0]-=u.width/2,u.view.offset[1]-=u.height/2)}function b(){const e=f.width,t=f.height,r=(e-120)/u.width,a=(t-120)/u.height;u.view.scale=~~Math.min(r,a),u.view.offset=[(e-u.width*u.view.scale)/2,(t-u.height*u.view.scale)/2]}function k(e=u.curFrame){u.frames.splice(u.curFrame,0,M().clone()),e===u.curFrame&&P(u.curFrame+1),S()}function E(e=u.curFrame){u.frames.length>1&&(u.frames.splice(e,1),u.curFrame===u.frames.length&&P(u.frames.length-1)),S()}function P(e){u.curFrame=e,m.delCb=()=>{confirm(`removed frame ${e}?`)&&E(e)}}function A(e){u.color=e,m.delCb=()=>{confirm("remove selected color?")&&(u.palette=u.palette.filter((e=>!l(e,u.color))),O("change",u.palette))}}function x(){P(0===u.curFrame?u.frames.length-1:u.curFrame-1)}function C(){P((u.curFrame+1)%u.frames.length)}function z(){const e=M(),[t,r]=e.scissorRect;e.blend="replace",e.fillRect(t[0],t[1],r[0]-t[0],r[1]-t[1],[0,0,0,0]),e.blend="alpha",S()}function O(e,...t){if(u.events[e])for(const r of u.events[e])r(...t)}function S(){u.state.stack.length>=64||(u.state.offset>0&&(u.state.stack.splice(u.state.stack.length-u.state.offset,u.state.offset),u.state.offset=0),u.state.stack.push({frames:I(),curFrame:u.curFrame}),O("change"))}function R(e){u.frames=e.frames.map(c),P(e.curFrame),O("change")}function D(){u.state.offset>=u.state.stack.length-1||(u.state.offset++,R(u.state.stack[u.state.stack.length-u.state.offset-1]))}function F(){0!==u.state.offset&&(u.state.offset--,R(u.state.stack[u.state.stack.length-u.state.offset-1]))}function I(){return u.frames.map((e=>e.toImageData()))}function U(){u.curAnim=null,u.animTimer=0,u.readOnly=e.readOnly}function T(e){u.curAnim?U():function(e){u.curAnim=e,u.animTimer=0,P(u.anims[e].from),u.readOnly=!0}(e)}g.type="color",g.addEventListener("change",(e=>{const t=function(e){const t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t,255]}(e.target.value.substring(1));u.palette.push(t),A(t),O("change",u.palette)})),m.loopID=window.requestAnimationFrame((function e(n){const i=n-m.time;if(m.time=n,u.gaming&&(u.gameTimer+=i,u.gameTimer>=u.gameSpeed&&(u.frames[u.curFrame]=M().game(),u.gameTimer=0)),u.curAnim&&(u.animTimer+=i,u.animTimer>=u.animSpeed)){const e=u.anims[u.curAnim];e.to<e.from?u.curFrame>e.to?x():P(e.from):u.curFrame<e.to?C():P(e.from),u.animTimer=0}let s=!1,c=!1,v=null;const y=M(),b=f.width,E=f.height,S=u.view.scale,R=u.view.offset[0],D=u.view.offset[1];function F(e,t,r={}){const a=r.lineWidth||2;let o;return{width:e,height:t,update(){o&&(r.click||r.hover)&&function(e,t,r,a){r<0&&(e+=r,r=-r),a<0&&(t+=a,a=-a);const[o,n]=m.mousePos;return o>=e&&o<=e+r&&n>=t&&n<=t+a}(o.x,o.y,e,t)&&(s=!0,r.hover&&r.hover(),m.mousePressed&&!c&&(r.click&&r.click(),c=!0))},draw(){o=h.getTransform().transformPoint(),this.update(),r.bg&&(h.fillStyle=d(r.bg),h.fillRect(0,0,e,t)),r.border&&(h.lineWidth=a,h.strokeStyle=d(r.border),h.strokeRect(0,0,e,t))}}}function I(e,t={}){const r=t.align||"left",a=t.margin||0,o=t.padding||0;let n=0,i=0;for(const d of e)d&&(n=Math.max(d.width,n),i+=d.height+a);const s=n+2*o,c=i+2*o,l=F(s,c,t);return{width:s,height:c,update(){e.reverse().forEach((e=>{e.update()}))},draw(){l.draw(),h.save(),h.translate(o,o),e.forEach((e=>{if(!e)return;const t=(()=>{switch(r){case"left":return 0;case"center":return(n-e.width)/2;case"left":return n-e.width}})();h.translate(t,0),e.draw(),h.translate(-t,e.height+a)})),h.restore()}}}function U(e,t={}){const r=t.align||"top",a=t.margin||0,o=t.padding||0;let n=0,i=0;for(const d of e)d&&(n+=d.width,i=Math.max(d.height,i));const s=n+2*o,c=i+2*o,l=F(s,c,t);return{width:s,height:c,update(){e.reverse().forEach((e=>{e.update()}))},draw(){l.draw(),h.save(),h.translate(o,o),e.forEach((e=>{if(!e)return;const t=(()=>{switch(r){case"top":return 0;case"center":return(i-2*o-e.height)/2;case"bottom":return i-2*o-e.height}})();h.translate(0,t),e.draw(),h.translate(e.width+a,-t)})),h.restore()}}}function L(e,t={}){const r=t.padding||0,a=t.sw||e.width,o=t.sh||e.height,n=(t.width||a)+2*r,i=(t.height||o)+2*r,s=n+2*r,c=i+2*r,l=t.sx||0,d=t.sy||0,f=(t.lineWidth,F(s,c,t));return{width:s,height:c,update(){f.update()},draw(){f.draw(),h.drawImage(e,l,d,a,o,r,r,n,i)}}}function Y(e,t={}){e+="";const o=t.size||12,n=t.padding||0,i=e.length*o+2*n,s=o+2*n,c=t.color||[0,0,0,255],l=(t.lineWidth,F(i,s,t));return{width:i,height:s,update(){l.update()},draw(){l.draw(),h.fillStyle=d(c);const t=e.split("");let i=0;for(const e of t)if(a[e]){const[t,s]=a[e];h.drawImage(r,8*t,8*s,8,8,n+i,n,o,o),i+=o}}}}function N(e,t,r){t||r?function(e,t,r,a={}){return{width:r.width,height:r.height,update(){r.update()},draw(){h.save(),h.translate(e,t),r.draw(),h.restore()}}}(t,r,e).draw():e.draw()}function j(e,t,r,a={}){const o=F(e,t,a);return{width:e,height:t,update(){r.reverse().forEach((([e])=>{e.update()}))},draw(){o.draw(),r.forEach((([e,[t,r]])=>{h.save(),h.translate(t,r),e.draw(),h.restore()}))}}}const K=F(b,E,{bg:[170,170,170,255]}),W=U([...u.frames.map(((e,t)=>{const r=t===u.curFrame;return Y(t,{padding:r?6:3,bg:r?[255,255,255,255]:[230,230,230,255],border:[0,0,0,255],size:16,click(){P(t)}})})),!u.readOnly&&Y("+",{padding:3,bg:[230,230,230,255],border:[0,0,0,255],size:16,click(){k()}})],{align:"bottom"}),q=F(y.width()*S,y.height()*S,{bg:[255,255,255,255]}),H=F(y.width()*S,y.height()*S,{border:[0,0,0,255]});function J(e,t={}){const r=t.dx||0,a=t.dy||0;return{width:e.width()*S,height:e.height()*S,draw(){h.save(),h.scale(S,S),h.translate(r,a),h.drawImage(e.drawable(),0,0),h.restore()}}}if(j(b,E,[[K,[0,0]],[q,[R,D]],[J(y),[R,D]],[(()=>{if("move"===u.tool&&m.mouseStartPos){const[e,t]=w(m.mousePos),[r,a]=w(m.mouseStartPos),[o,n]=[e-r,t-a];return J(u.fCanvas,{dx:o,dy:n})}return J(u.fCanvas)})(),[R,D]],[W,[R,D-W.height]],[H,[R,D]]]).draw(),y.scissorRect){const e=y.scissorRect[0],t=y.scissorRect[1];h.lineDashOffset=n/100,h.strokeStyle=d([0,0,0,255]),h.setLineDash([5,5]),h.strokeRect(e[0]*S+R,e[1]*S+D,(t[0]-e[0])*S,(t[1]-e[1])*S),h.strokeStyle=d([255,255,255,255]),h.setLineDash([0,5,5,0]),h.strokeRect(e[0]*S+R,e[1]*S+D,(t[0]-e[0])*S,(t[1]-e[1])*S),h.setLineDash([])}if(!u.readOnly){const[e,t]=w(m.mousePos),r=e*S+R,a=t*S+D;if(y.checkPt(e,t))switch(u.tool){case"pen":case"rect":case"line":case"circle":case"bucket":N(F(S,S,{bg:u.color}),r,a);break;case"erasor":N(F(S,S,{bg:[255,255,255,255],border:[0,0,0,255]}),r,a)}}const V={padding:3,size:16,bg:[255,255,255,255],border:[0,0,0,255]},G=I([...u.palette.map((e=>F(24,24,{bg:e,border:[0,0,0,255],lineWidth:l(e,u.color)?4:2,click(){A(e)}}))),Y("+",{size:24,bg:[255,255,255,255],border:[0,0,0,255],click(){g.click()}})]),X=I([...Object.keys(o).map((e=>{const r=o[e];return L(t,{sx:16*r.icon,sw:16,sh:16,width:32,height:32,bg:[255,255,255,255],border:[0,0,0,255],lineWidth:u.tool===e?4:2,click(){u.tool=e},hover(){v={msg:`${e} (${r.key})`,pos:[-1,1]}}})}))]),B=U([...Object.keys(p).map((e=>{const r=p[e];return L(t,{sx:16*r.icon,sw:16,sh:16,width:32,height:32,bg:[255,255,255,255],border:[0,0,0,255],click(){r.action()},hover(){v={msg:`${e}`,pos:[-1,-1]}}})}))]),Q=I([!u.readOnly&&Y("+",{...V,click(){const e=prompt("add anim:");e&&(u.anims[e]={from:0,to:0,loop:!0},O("change"))}}),...Object.keys(u.anims).map((e=>{const t=u.anims[e],r=e===u.curAnim;return U([Y((r?">":"")+e,{...V,lineWidth:r?4:2,click(){T(e)}}),Y(t.from,{...V,lineWidth:r?4:2,click(){t.from=(t.from+1)%u.frames.length,O("change")}}),Y(t.to,{...V,lineWidth:r?4:2,click(){t.to=(t.to+1)%u.frames.length,O("change")}})])}))]);if(m.hideUI||function(e,t,r,a={}){return j(e,t,r.filter((e=>e)).map((([r,a])=>[r,[a[0]*(e-r.width),a[1]*(t-r.height)]])),a)}(b,E,[!u.readOnly&&[G,[0,0]],!u.readOnly&&[X,[1,0]],!u.readOnly&&[B,[1,1]],[Q,[0,1]]]).draw(),v){const e=6,[t,r]=m.mousePos,a=Y(v.msg,{padding:3,bg:[255,255,255,255],border:[0,0,0,255]});N(a,t+(a.width*(v.pos[0]-1)/2+v.pos[0]*e),r+(a.height*(v.pos[1]-1)/2+v.pos[1]*e))}if(s?f.style.cursor="pointer":m.grabbin?f.style.cursor="grab":f.style.cursor=o[u.tool].cursor,m.mousePressed&&!c){const[e,t]=w(m.mousePos);if(m.mouseDown=!0,!u.readOnly)switch(u.tool){case"pen":y.set(e,t,u.color);break;case"erasor":y.blend="replace",y.set(e,t,[0,0,0,0]),y.blend="alpha";break;case"bucket":y.bucket(e,t,u.color);break;case"move":y.scissorRect&&(u.fCanvas.scissorRect=y.scissorRect,u.fCanvas.merge(y),u.fCanvas.scissorRect=null,z());break;case"eyedropper":u.color=y.get(e,t)}}m.mousePressed=!1,m.loopID=window.requestAnimationFrame(e)}));const L={wheel(e){e.preventDefault(),e.altKey?e.deltaY<0?y():e.deltaY>0&&v():(u.view.offset[0]-=e.deltaX,u.view.offset[1]-=e.deltaY)},mousedown(e){m.mousePressed=!0,m.mousePosPrev=[...m.mousePos],m.mousePos=[e.offsetX,e.offsetY],m.mouseStartPos=[...m.mousePos]},mousemove(e){if(u.readOnly)return;if(m.mousePosPrev=[...m.mousePos],m.mousePos=[e.offsetX,e.offsetY],m.mouseMoved=!0,m.grabbin&&(u.view.offset[0]+=e.movementX,u.view.offset[1]+=e.movementY),!m.mouseDown)return;const t=M(),[r,a]=w(m.mousePos),[o,n]=w(m.mousePosPrev),[i,s]=w(m.mouseStartPos);switch(u.tool){case"pen":t.line(o,n,r,a,u.color);break;case"erasor":t.blend="replace",t.line(o,n,r,a,[0,0,0,0]),t.blend="alpha";break;case"rect":u.fCanvas.clear(),u.fCanvas.fillRect(i,s,r-i,a-s,u.color);break;case"line":u.fCanvas.clear(),u.fCanvas.line(i,s,r,a,u.color);break;case"circle":u.fCanvas.clear(),u.fCanvas.fillCircle(i,s,Math.max(r-i,a-s),u.color);break;case"select":{const[e,o]=t.clampPt([i,s]),[n,c]=t.clampPt([r,a]);t.scissorRect=[[e,o],[n,c]];break}case"move":{const[e,i]=[r-o,a-n];t.scissorRect[0][0]+=e,t.scissorRect[1][0]+=e,t.scissorRect[0][1]+=i,t.scissorRect[1][1]+=i;break}}},mouseup(e){if(u.readOnly)return;m.mouseDown=!1,m.mousePosPrev=[m.mousePos,m.mousePos],m.mousePos=[e.offsetX,e.offsetY];const t=M(),[r,a]=w(m.mousePos),[o,n]=w(m.mouseStartPos);switch(m.mouseStartPos=null,u.tool){case"pen":case"erasor":case"bucket":S();break;case"rect":case"circle":case"line":t.merge(u.fCanvas),u.fCanvas.clear(),S();break;case"move":if(t.scissorRect){const[e,i]=[r-o,a-n];t.merge(u.fCanvas,e,i),u.fCanvas.clear(),S()}}},keydown(t){if(!t.metaKey)for(const e in o){if(o[e].key===t.key)return void(u.tool=e)}const r=M();switch(t.key){case"-":v();break;case"=":y();break;case"0":b();break;case"ArrowLeft":x();break;case"ArrowRight":C();break;case" ":m.grabbin=!0,t.preventDefault();break;case"Escape":U(),u.gaming=!1,u.gameTimer=0,u.readOnly=e.readOnly,D()}if(!u.readOnly)switch(t.key){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":A(u.palette[parseInt(t.key,10)-1]||u.color);break;case"+":k();break;case"_":E();break;case"z":t.metaKey&&(t.preventDefault(),t.shiftKey?F():D());break;case"s":t.metaKey&&(t.preventDefault(),O("save"));break;case"l":t.metaKey&&(t.preventDefault(),O("load"));break;case"Backspace":r.scissorRect?(z(),r.scissorRect=null):m.delCb();break;case"Escape":r.scissorRect=null;break;case"Tab":t.preventDefault(),m.hideUI=!m.hideUI}},keyup(e){switch(e.key){case" ":m.grabbin=!1}}};f.onselectstart=()=>!1;for(const W in L)f.addEventListener(W,L[W]);function M(){return u.frames[u.curFrame]}function Y(){return{version:"1",width:u.width,height:u.height,palette:u.palette,anims:u.anims,frames:u.frames.map((e=>e.toDataURL()))}}function N(e){return u.width=e.width,u.height=e.height,u.palette=e.palette,u.anims=e.anims,Promise.all(e.frames.map(((e,t)=>s(e).then((e=>{u.frames[t]=e}))))).then((()=>{u.frames.length=e.frames.length,P(0),K(),b()}))}function j(e,...t){const r=URL.createObjectURL(new Blob(...t)),a=document.createElement("a");a.href=r,a.download=e,a.click()}function K(){u.state.stack=[{frames:I(),curFrame:u.curFrame}]}return K(),e.data&&N(e.data),{frames:function(){return u.frames},curFrame:M,on:function(e,t){u.events[e]||(u.events[e]=[]),u.events[e].push(t)},setTool:function(e){if(!o[e])throw new Error(`no tool called ${e} bro`);u.tool=e},setColor:A,setPalette:function(e){u.palette=e},save:Y,load:N,undo:D,redo:F,pushState:S,scaleUp:y,scaleDown:v,scaleFit:b,newFrame:k,delFrame:E,prevFrame:x,nextFrame:C,download:function(e){j(e,[JSON.stringify(Y())])},downloadPNG:function(e){j(e,[M().toPNG()])},cleanUp:function(){for(const e in L)f.removeEventListener(e,L[e]);window.cancelAnimationFrame(m.loopID)}}}},94098:function(e){"use strict";e.exports={i8:"2.20.0"}},79367:function(e,t){var r,a,o;a=[e,t],void 0===(o="function"===typeof(r=function(e,t){"use strict";var r="function"===typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(r){return t[e.indexOf(r)]},set:function(r,a){-1===e.indexOf(r)&&(e.push(r),t.push(a))},delete:function(r){var a=e.indexOf(r);a>-1&&(e.splice(a,1),t.splice(a,1))}}}(),a=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(c){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t=null,o=null,n=null,i=function(){e.clientWidth!==o&&h()},s=function(t){window.removeEventListener("resize",i,!1),e.removeEventListener("input",h,!1),e.removeEventListener("keyup",h,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",h,!1),Object.keys(t).forEach((function(r){e.style[r]=t[r]})),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",h,!1),window.addEventListener("resize",i,!1),e.addEventListener("input",h,!1),e.addEventListener("autosize:update",h,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:s,update:h}),c()}function c(){var r=window.getComputedStyle(e,null);"vertical"===r.resize?e.style.resize="none":"both"===r.resize&&(e.style.resize="horizontal"),t="content-box"===r.boxSizing?-(parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)):parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),isNaN(t)&&(t=0),h()}function l(t){var r=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=r,e.style.overflowY=t}function d(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function f(){if(0!==e.scrollHeight){var r=d(e),a=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",o=e.clientWidth,r.forEach((function(e){e.node.scrollTop=e.scrollTop})),a&&(document.documentElement.scrollTop=a)}}function h(){f();var t=Math.round(parseFloat(e.style.height)),r=window.getComputedStyle(e,null),o="content-box"===r.boxSizing?Math.round(parseFloat(r.height)):e.offsetHeight;if(o<t?"hidden"===r.overflowY&&(l("scroll"),f(),o="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==r.overflowY&&(l("hidden"),f(),o="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),n!==o){n=o;var i=a("autosize:resized");try{e.dispatchEvent(i)}catch(s){}}}}function n(e){var t=r.get(e);t&&t.destroy()}function i(e){var t=r.get(e);t&&t.update()}var s=null;"undefined"===typeof window||"function"!==typeof window.getComputedStyle?((s=function(e){return e}).destroy=function(e){return e},s.update=function(e){return e}):((s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return o(e,t)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],n),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e}),t.default=s,e.exports=t.default})?r.apply(t,a):r)||(e.exports=o)},24561:function(e,t,r){"use strict";var a=r(67294),o=function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var n=function(){return Math.random().toString(36).substring(2)},i=function(e){var t=e.rtl,r=e.speed,i=e.interval,s=e.style,c=e.width,l=e.height,d=e.baseUrl,f=e.gradientRatio,h=e.animate,u=e.ariaLabel,m=e.children,p=e.className,g=e.uniquekey,w=e.primaryColor,v=e.primaryOpacity,y=e.secondaryColor,b=e.secondaryOpacity,k=e.preserveAspectRatio,E=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]])}return r}(e,["rtl","speed","interval","style","width","height","baseUrl","gradientRatio","animate","ariaLabel","children","className","uniquekey","primaryColor","primaryOpacity","secondaryColor","secondaryOpacity","preserveAspectRatio"]),P=g?g+"-idClip":n(),A=g?g+"-idGradient":n(),x=t?{transform:"scaleX(-1)"}:{},C="0; "+i+"; 1",z=r+"s";return(0,a.createElement)("svg",o({role:"img",style:o({},s,x),className:p,"aria-label":u||null,viewBox:"0 0 "+c+" "+l,preserveAspectRatio:k},E),u?(0,a.createElement)("title",null,u):null,(0,a.createElement)("rect",{x:"0",y:"0",width:c,height:l,clipPath:"url("+d+"#"+P+")",style:{fill:"url("+d+"#"+A+")"}}),(0,a.createElement)("defs",null,(0,a.createElement)("clipPath",{id:P},m),(0,a.createElement)("linearGradient",{id:A},(0,a.createElement)("stop",{offset:"0%",stopColor:w,stopOpacity:v},h&&(0,a.createElement)("animate",{attributeName:"offset",values:-f+"; "+-f+"; 1",keyTimes:C,dur:z,repeatCount:"indefinite"})),(0,a.createElement)("stop",{offset:"50%",stopColor:y,stopOpacity:b},h&&(0,a.createElement)("animate",{attributeName:"offset",values:-f/2+"; "+-f/2+"; "+(1+f/2),keyTimes:C,dur:z,repeatCount:"indefinite"})),(0,a.createElement)("stop",{offset:"100%",stopColor:w,stopOpacity:v},h&&(0,a.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+f),keyTimes:C,dur:z,repeatCount:"indefinite"})))))},s={animate:!0,ariaLabel:"Loading interface...",baseUrl:"",gradientRatio:2,height:130,interval:.25,preserveAspectRatio:"none",primaryColor:"#f0f0f0",primaryOpacity:1,rtl:!1,secondaryColor:"#e0e0e0",secondaryOpacity:1,speed:2,style:{},width:400},c=function(e){return(0,a.createElement)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:e.width,height:e.height})},l=function(e){var t=o({},s,e);return(0,a.createElement)(i,o({},t),e.children||(0,a.createElement)(c,o({},t)))};t.ZP=l},16496:function(e){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],r="undefined"!==typeof window,a=r&&null!=window.mozInnerScreenX;function o(e,o,n){if(!r)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var i=n&&n.debug||!1;if(i){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var l=c.style,d=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,f="INPUT"===e.nodeName;l.whiteSpace="pre-wrap",f||(l.wordWrap="break-word"),l.position="absolute",i||(l.visibility="hidden"),t.forEach((function(e){f&&"lineHeight"===e?l.lineHeight=d.height:l[e]=d[e]})),a?e.scrollHeight>parseInt(d.height)&&(l.overflowY="scroll"):l.overflow="hidden",c.textContent=e.value.substring(0,o),f&&(c.textContent=c.textContent.replace(/\s/g,"\xa0"));var h=document.createElement("span");h.textContent=e.value.substring(o)||".",c.appendChild(h);var u={top:h.offsetTop+parseInt(d.borderTopWidth),left:h.offsetLeft+parseInt(d.borderLeftWidth),height:parseInt(d.lineHeight)};return i?h.style.backgroundColor="#aaa":document.body.removeChild(c),u}"undefined"!=typeof e.exports?e.exports=o:r&&(window.getCaretCoordinates=o)}()}}]);