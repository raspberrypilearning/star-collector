(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9350],{41968:function(e,t,r){"use strict";r.d(t,{i:function(){return x},ZP:function(){return O}});var n=r(35944),i=r(26265),o=r(65988),l=r(67294),a=r(30853),s=r(25763),c=r(61910),u=r(67645),d=r(82951),p=r(41664),f=r(49153),m=r(48854),h=r(87644),g=r(11163),v=r(4170),b=r(25125);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(){return(0,n.BX)("div",{className:"jsx-3972755849",children:[(0,n.tZ)("div",{className:"jsx-3972755849 card"}),(0,n.tZ)("div",{className:"jsx-3972755849 footer",children:(0,n.tZ)("div",{className:"jsx-3972755849 avatar"})}),(0,n.tZ)(o.default,{id:"3972755849",children:[".card.jsx-3972755849{border-radius:var(--border-radius-8);background-color:var(--background-higher);height:".concat(196,"px;}"),".footer.jsx-3972755849{padding:var(--space-8) var(--space-8) 0;color:var(--foreground-dimmer);}",".avatar.jsx-3972755849{background-color:var(--background-default);position:relative;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:20px;height:20px;border-radius:50%;overflow:hidden;}"]})]})}function w(e){var t=e.user,r=e.showUsername,i=r?void 0:{"data-microtip-position":"right","aria-label":t.username,role:"tooltip"};return(0,n.tZ)(p.default,y(y({},(0,d.Ru)(t)),{},{children:(0,n.BX)("a",y(y({},i),{},{className:"jsx-1679249341 "+(i&&null!=i.className&&i.className||""),children:[(0,n.tZ)(v.Z,{size:20,alt:t.username,src:t.image}),r?(0,n.tZ)("span",{className:"jsx-1679249341 username",children:t.username}):null,(0,n.tZ)(o.default,{id:"1679249341",children:["a.jsx-1679249341{min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;font-size:var(--font-size-default);}",".username.jsx-1679249341{margin-left:8px;-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}"]})]}))}))}function j(e){var t=e.repl,r=t.owner,i=t.multiplayers;return r?i.length?(0,n.BX)(s.Ug,{spacing:1,align:"center",children:[(0,n.tZ)(w,{user:r}),t.multiplayers.length<2?i.map((function(e){return(0,n.tZ)(w,{user:e},e.id)})):null,i.length>2?(0,n.BX)(n.HY,{children:[(0,n.tZ)(w,{user:i[0]}),(0,n.BX)(u.Z,{"data-microtip-position":"right","aria-label":i.slice(1).map((function(e){return e.username})).join(", "),role:"tooltip",size:"small",foreground:2,children:["+",i.length-1]})]}):null]}):(0,n.tZ)(w,{showUsername:!0,user:r}):null}var k={styles:(0,n.tZ)(o.default,{id:"433262208",children:["img.jsx-433262208{position:absolute;top:0;left:0;width:100%;height:100%;max-width:100%;border-radius:var(--border-radius-8);}"]}),className:"jsx-433262208"};function O(e){var t=e.repl,r=e.showDialogOnClick,i=e.small,d=(0,g.useRouter)(),v=l.useRef(!1);l.useEffect((function(){v.current="ontouchstart"in window}),[]);var Z=v.current?void 0:{"data-keen-slider-pe":!0};return(0,n.BX)("div",{className:"jsx-3689132604 "+((i?"small":void 0)||""),children:[(0,n.tZ)(p.default,{as:t.url,href:{pathname:"/replView",query:{replUrl:t.url}},children:(0,n.BX)("a",{onClick:function(e){r&&(window.innerWidth<f.d||(0,m.Z)(e)||((0,h.track)(h.events.SPOTLIGHT_DIALOG_OPENED,{replUrl:t.url}),e.preventDefault(),d.push({pathname:d.pathname,query:y(y({},d.query),{},{dialogReplId:t.id})},t.url+"?v=1",{shallow:!0})))},className:"jsx-3689132604 main",children:[t.imageUrl?(0,n.tZ)(a.Z,{className:k.className,src:t.imageUrl,layout:"fill",objectFit:"cover"}):null,(0,n.tZ)("div",y(y({},Z),{},{className:"jsx-3689132604 "+(Z&&null!=Z.className&&Z.className||"content"),children:(0,n.tZ)("div",y(y({},Z),{},{className:"jsx-3689132604 title",children:t.title}))}))]})}),(0,n.tZ)("div",{className:"jsx-3689132604 footer",children:(0,n.tZ)("div",{className:"jsx-3689132604 meta",children:(0,n.BX)(s.Ug,{spacing:1,align:"center",justify:"space-between",wrap:"nowrap",children:[(0,n.tZ)(j,{repl:t}),(0,n.BX)(s.Ug,{spacing:1,align:"center",wrap:"nowrap",children:[(0,n.BX)(s.Ug,{spacing:"2px",wrap:"nowrap",align:"center",children:[(0,n.tZ)(b.Z,{}),(0,n.tZ)(u.Z,{foreground:2,size:"xsmall",children:t.likeCount})]}),(0,n.BX)(s.Ug,{spacing:"2px",wrap:"nowrap",align:"center",children:[(0,n.tZ)(c.Z,{}),(0,n.tZ)(u.Z,{foreground:2,size:"xsmall",children:t.runCount})]})]})]})})}),t.tags.length>0?(0,n.tZ)("div",{className:"jsx-3689132604 repl-card-tags",children:t.tags.map((function(e){return(0,n.tZ)("div",{className:"jsx-3689132604 repl-card-tag",children:(0,n.tZ)(p.default,{href:{pathname:"/apps/tag",query:{tag:e.id}},as:"/apps/".concat(e.id),children:(0,n.BX)("a",{className:"jsx-3689132604 repl-card-tag-text",children:["#",e.id]})})},e.id)}))}):null,k.styles,(0,n.tZ)(o.default,{id:"2952706334",children:[".main.jsx-3689132604{height:".concat(196,"px;}"),".small.jsx-3689132604 .main.jsx-3689132604{height:".concat(140,"px;}")]}),(0,n.tZ)(o.default,{id:"1591911083",children:["a.jsx-3689132604:hover,a.jsx-3689132604:focus,a.jsx-3689132604:active{-webkit-text-decoration:none;text-decoration:none;}","img.jsx-3689132604{object-fit:cover;}",".main.jsx-3689132604{position:relative;display:block;background-color:var(--background-default);box-shadow:var(--shadow-1);-webkit-transition:-webkit-transform 0.2s,box-shadow 0.2s;-webkit-transition:transform 0.2s,box-shadow 0.2s;transition:transform 0.2s,box-shadow 0.2s;}",".main.jsx-3689132604:hover{-webkit-transform:scale(1.025);-ms-transform:scale(1.025);transform:scale(1.025);box-shadow:var(--shadow-2);}",".is-touch-device .main.jsx-3689132604:hover{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}",".main.jsx-3689132604,.content.jsx-3689132604{border-radius:var(--border-radius-8);}",".content.jsx-3689132604{position:relative;width:100%;height:100%;color:var(--white);position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;background:linear-gradient( to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.1) 60% );z-index:1;}",".title.jsx-3689132604{font-size:var(--font-size-subhead-default);font-family:var(--font-family-default);font-weight:var(--font-weight-medium);color:var(--white);padding:var(--space-8) var(--space-16);text-overflow:ellipsis;overflow:hidden;}",".small.jsx-3689132604 .title.jsx-3689132604{font-size:var(--font-size-subhead-default);}",".footer.jsx-3689132604{padding:var(--space-8) var(--space-8) 0;color:var(--foreground-dimmer);}",".repl-card-tags.jsx-3689132604{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".repl-card-tags.jsx-3689132604>div.jsx-3689132604{margin:1px;}",".repl-card-tag.jsx-3689132604:hover{cursor:pointer;}",".repl-card-tag-text.jsx-3689132604{font-size:var(--font-size-small);color:var(--foreground-default);}",".repl-card-tag-text.jsx-3689132604:hover{color:var(--foreground-dimmer);}"]})]})}},49153:function(e,t,r){"use strict";r.d(t,{d:function(){return n}});var n=1080},22796:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(67294);function i(e){var t=(0,n.useState)(!1),r=t[0],i=t[1],o=(0,n.useRef)(0);return[r,(0,n.useMemo)((function(){return{onDragEnter:function(e){e.preventDefault(),o.current++,i(!0)},onDragLeave:function(e){e.preventDefault(),o.current--,0===o.current&&i(!1)},onDrop:function(t){var r,n;t.preventDefault(),o.current=0,i(!1),t.persist();var l=Array.from(null!==(r=null===t||void 0===t||null===(n=t.dataTransfer)||void 0===n?void 0:n.files)&&void 0!==r?r:[]);0!==l.length?e(l):e(null)},onDragOver:function(e){e.preventDefault()}}}),[e])]}},31949:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(32292),i=r(67294),o=r(27547),l=r(16496),a=r.n(l),s=r(14289),c=r(41756);var u=r(22796),d=r(809),p=r.n(d),f=r(28140),m=r(92447),h=r(75633),g=r(91340),v=r(53016);function b(e){var t=e.initialValue,r=e.textTriggers,l=(0,i.useState)(t||""),d=l[0],b=l[1],Z=(0,i.useRef)(null),y=(0,o.Z)().ref,x=function(e){var t=e.textTriggers,r=e.applySuggestion,o=(0,i.useRef)(null),l=(0,s.Z)(t),u=(0,n.Z)(l,2),d=u[0].suggestions,p=u[1],f=(0,c.Kb)({items:(null===d||void 0===d?void 0:d.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(d),onSelectedItemChange:function(e){var t=e.selectedItem;if(d&&t){var n=o.current;if(n){var i=d.applySuggestion({targetValue:n.value,suggestionValue:t.value}),l=i.fullValue,a=i.cursorIndex;r({fullValue:l,cursorIndex:a})}}}}),m=(0,i.useMemo)((function(){if(d&&o.current)return a()(o.current,d.textTrigger.index)}),[d]);return{ref:(0,i.useCallback)((function(e){o.current=e,p(e)}),[p]),suggestions:null===d||void 0===d?void 0:d.results,caretCoordinates:m,combobox:f}}({textTriggers:r,applySuggestion:function(e){var t=e.cursorIndex,r=e.fullValue;b(r),setTimeout((function(){Z.current&&Z.current.setSelectionRange(t,t)}))}}),w=x.combobox,j=x.caretCoordinates,k=x.suggestions,O=x.ref,C=function(e){var t=(0,i.useRef)(null),r=(0,g.Z)(e.onChange),n=(0,g.Z)(e.onError),o=(0,i.useCallback)((function(e){t.current=e}),[]),l=(0,i.useCallback)(function(){var e=(0,m.Z)(p().mark((function e(i){var o,l,a,s,c,u,d,m,g,b;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.current){e.next=3;break}return e.abrupt("return");case 3:return l=o.value,a=o.selectionStart?o.selectionStart:l.length,s=i.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),c=l.substr(0,a),u=l.substr(a),d=(0,f.Z)(s),c&&d.unshift(c),u&&d.push(u),r.current(d.join("\n")),m=[],e.prev=13,e.next=16,(0,h.Z)(i);case 16:m=e.sent,e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(13),n.current(e.t0),e.abrupt("return");case 23:return g=[],e.prev=24,e.next=27,Promise.all(m.map((function(e){return null==e?new Error("Could not read file"):(0,v.uz)("/data/images/upload",{image:e.result})})));case 27:g=e.sent,e.next=34;break;case 30:return e.prev=30,e.t1=e.catch(24),n.current(e.t1),e.abrupt("return");case 34:if(t.current){e.next=36;break}return e.abrupt("return");case 36:b=s.reduce((function(e,t,r){var n=i[r].name.replace(/\.[^/.]+$/,""),o=g[r],l=o instanceof Error?"Error uploading":o.url;return e.replace(t,"![".concat(n,"](").concat(l,")"))}),t.current.value),r.current(b);case 38:case"end":return e.stop()}}),e,null,[[13,19],[24,30]])})));return function(t){return e.apply(this,arguments)}}(),[r,n]),a=(0,i.useCallback)((function(e){var t=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));t.length&&l(t)}),[l]);return{ref:o,handleFiles:l,handlePaste:a}}({onChange:b,onError:function(){}}),P=C.handleFiles,R=C.handlePaste,S=C.ref,D=(0,u.Z)((function(e){null!==e&&P(e)})),N=(0,n.Z)(D,2)[1];return{ref:(0,i.useCallback)((function(e){Z.current=e,O(e),S(e),y(e)}),[O,S,y]),value:d,setValue:b,dropZoneHanlders:N,handlePaste:R,combobox:w,caretCoordinates:j,suggestions:k}}},48854:function(e,t,r){"use strict";function n(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}r.d(t,{Z:function(){return n}})},89350:function(e,t,r){"use strict";r.d(t,{Gu:function(){return nt},i8:function(){return tt},ZP:function(){return ot}});var n=r(28140),i=r(70917),o=r(35944),l=r(32292),a=r(26265),s=r(67294),c=r(55873),u=r(11646),d=r(809),p=r.n(d),f=r(92447),m=r(65988),h=r(94184),g=r.n(h),v=r(25763),b=r(62255),Z=r(21093),y=r(31949);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e,t){var r=e.initialValue,n=e.onSubmit,i=e.onCancel,a=e.isLoading,c=e.autoFocus,u=e.ctaText,d=e.placeholder,h=e.userSearch,g=e.formError,x=e.onFocus,j=e.hasTitle,O=e.initialTitleValue,C=s.useState(!1),P=(0,l.Z)(C,2),R=P[0],S=P[1],D=s.useState(O||""),N=(0,l.Z)(D,2),T=N[0],E=N[1],B=s.useRef(null);s.useEffect((function(){if(c&&r&&B.current){var e=r.length;B.current.setSelectionRange(e,e)}}),[r,c]);var _=(0,y.Z)({initialValue:r,textTriggers:{"@":function(){var e=(0,f.Z)(p().mark((function e(t){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({query:t||"",limit:5});case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return{icon:(0,o.tZ)(Z.Z,{url:e.image}),value:e.username}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),I=_.ref,U=_.value,X=_.setValue,A=_.dropZoneHanlders,V=_.handlePaste,z=_.combobox,F=_.caretCoordinates,L=_.suggestions;s.useImperativeHandle(t,(function(){return{reset:function(){return X("")}}}),[X]);var W=!U||a;return(0,o.BX)("form",{onSubmit:function(e){e.preventDefault(),n({title:T,body:U})},className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]]),children:[(0,o.BX)(v.gC,{spacing:1,align:"stretch",justify:"end",children:[j?(0,o.tZ)("div",{className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]])+" title-container",children:(0,o.tZ)("input",{value:T,onChange:function(e){E(e.currentTarget.value)},className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]])})}):null,(0,o.BX)("div",w(w({},z.getComboboxProps(A)),{},{className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]])+" textarea-container",children:[(0,o.tZ)("textarea",w(w({},z.getInputProps({autoFocus:c,placeholder:d,ref:function(e){I(e),B.current=e},onPaste:V,onFocus:function(){S(!0),x&&x()},onBlur:function(){S(!1),U||i()},onChange:function(e){X(e.currentTarget.value)},value:U,onKeyDown:function(e){z.isOpen||(e.nativeEvent.preventDownshiftDefault=!0),"Enter"===e.key&&e.metaKey&&(n({title:T,body:U}),e.currentTarget.blur())}})),{},{className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]])})),(0,o.tZ)("ul",w(w({},z.getMenuProps()),{},{className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]]),children:null!==L&&void 0!==L&&L.length?L.map((function(e,t){return(0,o.tZ)("li",w(w({},z.getItemProps({item:e,index:t,key:e.value})),{},{className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]])+" "+((z.highlightedIndex===t?"highlighted":void 0)||""),children:e.value}))})):null}))]})),g?(0,o.BX)("p",{className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]])+" warning-text",children:[g," For more information,\xa0",(0,o.tZ)("a",{href:" https://docs.replit.com/repls/apps-and-publishing",target:"_blank",className:"jsx-".concat(k.__hash)+" jsx-66521441 "+m.default.dynamic([["2971482618",[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0]]]),children:"check out the guidelines."})]}):null,R||U?(0,o.BX)(v.Ug,{justify:"end",spacing:"4px",children:[(0,o.tZ)(b.Z,{filled:!1,border:!1,onClick:function(){X(""),i()},children:"Cancel"}),(0,o.tZ)(b.Z,{filled:!0,disabled:W,color:"primary",type:"submit",children:u||"Comment"})]}):null]}),(0,o.tZ)(m.default,{id:k.__hash,children:k}),(0,o.tZ)(m.default,{id:"66521441",children:[".textarea-container.jsx-66521441{font-size:var(--font-size-default);position:relative;}",".warning-text.jsx-66521441{font-family:var(--font-family-default);font-size:var(--font-size-small);font-weight:var(--font-weight-regular);color:var(--accent-negative-default);}","ul.jsx-66521441{position:absolute;margin:0;padding:var(--space-4) 0;background-color:var(--background-default);border:1px solid var(--outline-dimmest);list-style:none;border-radius:var(--border-radius-4);overflow:hidden;z-index:1;}","ul.jsx-66521441:focus{box-shadow:0 0 2.5px var(--outline-dimmest) inset;}","li.jsx-66521441{padding:var(--space-4);}",".highlighted.jsx-66521441{background-color:var(--accent-primary-default);color:var(--white);}"]}),(0,o.tZ)(m.default,{id:"2971482618",dynamic:[F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",F?F.top+F.height:0,F?F.left:0],children:["ul.__jsx-style-dynamic-selector{visibility:".concat(F&&null!==L&&void 0!==L&&L.length?"visibile":"hidden",";top:").concat(F?F.top+F.height:0,"px;left:calc( ").concat(F?F.left:0,"px - var(--space-4) );}")]})]})},k=["input.jsx-3354765448{font-size:var(--font-size-subhead-default) !important;font-weight:var(--font-weight-medium) !important;}","input.jsx-3354765448,textarea.jsx-3354765448{border-radius:var(--border-radius-8);background-color:var(--interactive-background);border-width:1 px;border-style:solid;border-color:transparent;padding:var(--space-8);color:var(--foreground-default);outline:0 none;font-size:var(--font-size-default);font-family:inherit;display:block;width:100%;max-width:100%;-webkit-transition:0.1s box-shadow,0.2s background-color,0.2s border-color;transition:0.1s box-shadow,0.2s background-color,0.2s border-color;}","textarea.jsx-3354765448{resize:none;min-height:60px;max-height:240px;overflow-y:scroll;line-height:1.2em;resize:vertical;}",".jsx-3354765448::-webkit-input-placeholder{color:var(--foreground-dimmer);}",".jsx-3354765448::-moz-placeholder{color:var(--foreground-dimmer);}",".jsx-3354765448:-ms-input-placeholder{color:var(--foreground-dimmer);}",".jsx-3354765448::placeholder{color:var(--foreground-dimmer);}","input.jsx-3354765448:hover,textarea.jsx-3354765448:hover{border-color:var(--interactive-border--hover);}","input.jsx-3354765448:focus,input.jsx-3354765448:active,textarea.jsx-3354765448:focus,textarea.jsx-3354765448:active{background-color:var(--interactive-background--active);border-color:var(--accent-primary-default);}","input.jsx-3354765448:focus,textarea.jsx-3354765448:focus{box-shadow:var(--shadow-1);}"];k.__hash="3354765448";var O=s.forwardRef(j),C=r(87644);function P(e){var t=s.useState(null),r=(0,l.Z)(t,2),n=r[0],i=r[1],a=s.useRef(null),u=(0,c.QpW)({onCompleted:function(t){if("UserError"===t.createReplComment.__typename)i(t.createReplComment.message);else if("ReplComment"===t.createReplComment.__typename){var r;(0,C.track)(C.events.COMMENT_MADE,{source:"spotlight"}),e.onCreate(t.createReplComment),i(null),null===(r=a.current)||void 0===r||r.reset()}},onError:function(e){return i(e.message)}}),d=(0,l.Z)(u,2),p=d[0],f=d[1];return(0,o.tZ)(O,{onFocus:function(){return i(null)},ref:a,userSearch:e.userSearch,placeholder:e.placeholder,autoFocus:e.autoFocus,initialValue:e.initialValue,isLoading:f.loading,onCancel:function(){e.onCancel(),i(null)},onSubmit:function(t){var r=t.body;f.loading||(i(null),p({variables:{input:{replId:e.replId,body:r}}}))},formError:n})}function R(e){var t=s.useState(null),r=(0,l.Z)(t,2),n=r[0],i=r[1],a=s.useRef(null),u=(0,c.cTp)({onCompleted:function(t){if("UserError"===t.createReplCommentReply.__typename)i(t.createReplCommentReply.message);else if("ReplComment"===t.createReplCommentReply.__typename){var r;e.onCreate(t.createReplCommentReply),i(null),null===(r=a.current)||void 0===r||r.reset()}},onError:function(e){return i(e.message)}}),d=(0,l.Z)(u,2),p=d[0],f=d[1];return(0,o.tZ)(O,{onFocus:function(){return i(null)},ref:a,userSearch:e.userSearch,placeholder:e.placeholder,autoFocus:e.autoFocus,initialValue:e.initialValue,isLoading:f.loading,onCancel:function(){e.onCancel(),i(null)},onSubmit:function(t){var r=t.body;f.loading||(i(null),p({variables:{input:{replCommentId:e.replCommentId,body:r}}}))},formError:n})}var S=r(67645),D=r(39219),N=r(39218),T=r(86842),E=r(18466),B=r(90093),_=r(29472),I=r(30715),U=r(7868),X=r(46829),A=r(11163),V=r(2974),z=r(71570),F=r(22384),L=r(68953),W=r(36437);var M={name:"c6nuhq",styles:"word-break:break-all;flex-shrink:1"};function G(e){var t=e.title;return(0,o.tZ)(L.Z,{css:[W.l0.flex.row,W.l0.py(8),"",""],children:(0,o.BX)(F.Z,{background:"higher",css:[W.l0.borderRadius(16),W.l0.rowWithGap(8),W.l0.align.center,W.l0.p(8),"flex-shrink:1;",""],children:[(0,o.tZ)(z.x,{variant:"subheadDefault",multiline:!0,css:M,children:t}),(0,o.tZ)(z.x,{color:"dimmer",css:[W.l0.borderRadius(16),W.l0.p(4),{border:"1px solid "+W.TV.outlineDimmer},"",""],children:"Post"})]})})}var H=r(37424),q=r(42436),K=r(49433);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=(0,L.K)("label");function $(e){var t=e.children;return(0,o.tZ)(L.Z,{css:[W.l0.rowWithGap(8),W.l0.align.center,"",""],children:t})}function ee(e){var t,r=e.postId,n=(0,H.H)(),i=(0,c.pDS)({variables:{postId:r}}),a=i.data,s=i.loading,u=(0,c.dB7)(),d=(0,l.Z)(u,2),p=d[0],f=d[1];if(s)return null;var m="Post"===(null===a||void 0===a||null===(t=a.post)||void 0===t?void 0:t.__typename)?a.post:null,h=null===a||void 0===a?void 0:a.boards;if(!m||!h)return(0,o.tZ)(z.x,{children:"Something went wrong"});var g={isPinned:n("isPinned"),isHidden:n("isHidden"),boardId:n("boardId")};function v(e){f.loading||m&&p({variables:{input:Q({id:m.id},e)}})}return(0,o.BX)(F.Z,{elevated:!0,css:[W.l0.colWithGap(8),W.l0.p(8),W.l0.borderRadius(8),"",""],children:[(0,o.BX)($,{children:[(0,o.tZ)(q.Z,{id:g.isPinned,checked:Boolean(m.isPinned),onChange:function(){return v({isPinned:!m.isPinned})}}),(0,o.tZ)(J,{htmlFor:g.isPinned,children:"Pin post to Talk feed"})]}),m.canHide?(0,o.BX)($,{children:[(0,o.tZ)(q.Z,{id:g.isHidden,checked:Boolean(m.isHidden),onChange:function(e){return v({isHidden:e.target.checked})}}),(0,o.tZ)(J,{htmlFor:g.isHidden,children:"Hide post from listing"})]}):null,m.canChangeBoard?(0,o.BX)($,{children:[(0,o.tZ)(K.Z,{id:g.boardId,placeholder:"Select a board",items:h.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:m.board?{value:m.board,title:m.board.name}:void 0,onChange:function(e){return v({boardId:e.value.id})}}),(0,o.tZ)(J,{htmlFor:g.isHidden,children:"Change board (requires reload)"})]}):null]})}var te=r(82951),re=r(70815),ne=r(36027),ie=r(36507),oe=r(28270),le=(0,L.K)("textarea"),ae=(0,L.K)("form"),se=(0,i.iv)([ie.gU.filled,W.l0.p(8),{color:W.TV.foregroundDefault,outline:"0 none",fontSize:W.TV.fontSizeDefault,fontFamily:"inherit",lineHeight:"16px",display:"block",width:"100%",maxWidth:"100%","::placeholder":{color:W.TV.foregroundDimmer},":not([disabled])":{cursor:"text"}}],"","");function ce(e){var t=e.postId,r=e.onDone,n=(0,s.useState)(""),i=n[0],a=n[1],u=(0,B.Z)().showConfirm,d=(0,c.wkt)({variables:{postId:t,reason:i},onCompleted:function(){u("Post reported"),r()}}),p=(0,l.Z)(d,2),f=p[0],m=p[1].loading;return(0,o.BX)(F.Z,{background:"default",css:[W.l0.p(16),W.l0.colWithGap(16),W.l0.borderRadius(8),"",""],children:[(0,o.tZ)(z.x,{variant:"subheadBig",children:"Report this post"}),(0,o.BX)(ae,{onSubmit:function(e){e.preventDefault(),f()},css:[W.l0.colWithGap(32),"",""],children:[(0,o.tZ)(L.Z,{css:[W.l0.colWithGap(8),"",""],children:(0,o.tZ)(le,{placeholder:"More details about why this post is inappropriate",value:i,onChange:function(e){return a(e.currentTarget.value)},css:[se,"resize:none;min-height:120px;",""]})}),(0,o.BX)(L.Z,{css:[W.l0.rowWithGap(8),W.l0.justify.end,"",""],children:[(0,o.tZ)(L.Z,{children:(0,o.tZ)(oe.zx,{type:"button",text:"Cancel",onClick:function(){return r()}})}),(0,o.tZ)(L.Z,{children:(0,o.tZ)(oe.zx,{disabled:m,colorway:"primary",text:m?"Reporting..":"Report post",type:"submit",onClick:function(){return r()}})})]})]})]})}function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e){var t=e.totalCount;return e.areCommentsEnabled?t&&t>0?(0,o.BX)(v.Ug,{spacing:"4px",children:[(0,o.tZ)(S.Z,{foreground:1,fontWeight:"medium",size:"medium",children:t}),(0,o.tZ)(S.Z,{foreground:2,size:"medium",children:1===t?"comment":"comments"})]}):(0,o.tZ)(S.Z,{foreground:2,size:"medium",children:"No comments yet"}):(0,o.tZ)(S.Z,{foreground:2,size:"medium",children:"Adding comments has been turned off for this repl."})}function fe(e){var t,r,n,i,a,u,d,p=e.comment,f=e.onDelete,h=e.userSearch,Z=e.onRepliesToggle,y=e.repliesExpanded,x=e.replyCount,w=e.replId,j=e.replyToId,k=e.onReply,C=e.linkedToCommentId,P=e.currentUser,D=e.parentAuthor,E=e.areCommentsEnabled,X=s.useState(!1),A=(0,l.Z)(X,2),V=A[0],z=A[1],F=s.useState(!1),L=(0,l.Z)(F,2),W=L[0],M=L[1],H=s.useState(!1),q=(0,l.Z)(H,2),K=q[0],Y=q[1],Q=s.useState(!1),J=(0,l.Z)(Q,2),$=J[0],ie=J[1],oe=s.useState(null),le=(0,l.Z)(oe,2),ae=le[0],se=le[1],ue=s.useState(!1),pe=(0,l.Z)(ue,2),fe=pe[0],me=pe[1],he=p.user,ge=p.timeCreated,ve=(0,B.Z)(),be=ve.showConfirm,Ze=ve.showError,ye=s.useRef(null),xe=s.useRef(C),we=[];null!==(t=p.currentUserPermissions)&&void 0!==t&&t.edit&&we.push({label:"Edit"}),null!==(r=p.currentUserPermissions)&&void 0!==r&&r.delete&&we.push({label:"Delete",isDestructive:!0}),s.useEffect((function(){if(xe.current===p.id){var e=!1;return setTimeout((function(){if(!e&&ye.current){M(!0);var t=ye.current.getBoundingClientRect().top+window.scrollY-120;window.scroll({top:t,behavior:"smooth"})}})),function(){e=!0}}}),[p,M]);var je=s.useRef(null),ke=(0,c.kz4)({onError:function(e){return Ze(e.message)}}),Oe=(0,l.Z)(ke,2),Ce=Oe[0],Pe=Oe[1],Re=(0,c.gaR)({onCompleted:function(e){if("UserError"===e.updateReplComment.__typename)Ze(e.updateReplComment.message);else if("ReplComment"===e.updateReplComment.__typename){var t;be("Comment updated"),null===(t=je.current)||void 0===t||t.reset()}},onError:function(e){return Ze(e.message)}}),Se=(0,l.Z)(Re,2),De=Se[0],Ne=Se[1],Te=p.post;return(0,o.BX)("div",{ref:ye,className:"jsx-905672075 "+(g()("comment-item",{"is-action-menu-open":V})||""),children:[W?(0,o.tZ)("div",{className:"jsx-905672075 highlight"}):null,(0,o.BX)("div",{className:"jsx-905672075 content-container",children:[(0,o.BX)(v.Ug,{wrap:"nowrap",justify:"space-between",spacing:1,children:[he?(0,o.tZ)(re.Z,{username:he.username,children:(0,o.tZ)(te.ZP,{user:he,children:(0,o.tZ)("a",{className:"jsx-905672075",children:(0,o.tZ)(ne.Z,{username:he.username,src:he.image,size:32})})})}):null,(0,o.BX)("div",{className:"jsx-905672075 content",children:[(0,o.BX)(v.gC,{spacing:"8px",align:"stretch",children:[(0,o.BX)(v.Ug,{wrap:"nowrap",align:"center",spacing:"4px",children:[he?(0,o.tZ)(re.Z,{inline:!0,username:he.username,children:(0,o.tZ)(te.ZP,{user:he,children:(0,o.tZ)("a",{className:"jsx-905672075",children:he.username})})}):null,Te?(0,o.tZ)(S.Z,{size:"small",foreground:2,children:"shared this Repl"}):null,(0,o.tZ)(S.Z,{foreground:3,size:"xsmall",children:(new Date).getTime()-new Date(ge).getTime()<1e3?"just now":(0,N.F)(ge)})]}),fe?(0,o.tZ)(O,{ref:je,ctaText:"Save ".concat(Te?"post":"comment"),userSearch:h,placeholder:"Edit ".concat(Te?"post":"comment","..."),initialValue:p.body,hasTitle:Boolean(Te),initialTitleValue:null===Te||void 0===Te?void 0:Te.title,onCancel:function(){return me(!1)},onSubmit:function(e){var t=e.title,r=e.body;t&&Te&&Ce({variables:{input:{id:Te.id,title:t}},optimisticResponse:{updatePost:{post:de(de({},Te),{},{title:t})}}}),De({variables:{input:{id:p.id,body:r}},optimisticResponse:{updateReplComment:de(de({__typename:"ReplComment"},p),{},{body:r})}}),me(!1)},autoFocus:!0,isLoading:Ne.loading||Pe.loading}):(0,o.BX)(o.HY,{children:[p.post?(0,o.tZ)(G,{title:p.post.title}):null,(0,o.tZ)(_.Z,{source:p.body})]})]}),(0,o.BX)("footer",{className:"jsx-905672075",children:[null!==ae&&P?(0,o.tZ)(R,{userSearch:h,placeholder:ae?"Reply to ".concat(ae):"Reply",autoFocus:!0,replId:w,replCommentId:j,onCancel:function(){return se(null)},onCreate:function(){k(),se(null)},initialValue:ae}):null,null===ae?(0,o.tZ)("div",{className:"jsx-905672075 footer-actions",children:(0,o.BX)(v.Ug,{spacing:"2px",children:[P&&E?(0,o.tZ)("div",{className:"jsx-905672075",children:(0,o.tZ)(b.Z,{size:"small",color:"primary",filled:!1,border:!1,onClick:function(){var e=p.user&&p.user.id!==P.id?[p.user.username]:[];null!==D&&void 0!==D&&D.username&&D.id!==P.id&&!e.includes(D.username)&&e.unshift(D.username),se(e.map((function(e){return"@".concat(e)})).join(" ")+" ")},children:"Reply"})}):null,x>0?(0,o.tZ)("div",{className:"jsx-905672075 replies-toogle",children:(0,o.tZ)(b.Z,{size:"small",border:!1,filled:!1,onClick:Z,children:(0,o.BX)(v.Ug,{wrap:"nowrap",align:"center",spacing:"2px",children:[(0,o.BX)("div",{className:"jsx-905672075",children:[y?"Hide":"View"," ",x," ",1===x?"reply":"replies"]}),(0,o.tZ)("div",{className:"jsx-905672075 "+(g()("toggle-icon",{"replies-expanded":y})||""),children:(0,o.tZ)(U.Z,{size:"small"})})]})})}):null,null!==(n=p.post)&&void 0!==n&&n.canPin||null!==(i=p.post)&&void 0!==i&&i.canChangeBoard||null!==(a=p.post)&&void 0!==a&&a.canHide?(0,o.tZ)("div",{className:"jsx-905672075",children:(0,o.tZ)(b.Z,{size:"small",filled:!1,border:!1,onClick:function(){Y(!K)},children:"Settings"})}):null,null!==(u=p.post)&&void 0!==u&&u.canReport?(0,o.tZ)("div",{className:"jsx-905672075",children:(0,o.tZ)(b.Z,{size:"small",filled:!1,border:!1,onClick:function(){ie(!0)},children:"Report"})}):null,null!==(d=p.post)&&void 0!==d&&d.hasReported?(0,o.tZ)("div",{className:"jsx-905672075",children:(0,o.tZ)(b.Z,{disabled:!0,size:"small",filled:!1,border:!1,children:"Reported"})}):null]})}):null,K&&p.post?(0,o.tZ)("div",{className:"jsx-905672075 repl-post-settings",children:(0,o.tZ)(ee,{postId:p.post.id})}):null]})]}),we.length?(0,o.tZ)("div",{className:"jsx-905672075 actions",children:(0,o.tZ)(I.Z,{onOpenChange:z,items:we,onItemClick:function(e){switch(e.label){case"Edit":return void me(!0);case"Delete":f(p)}}})}):null]}),(0,o.tZ)(T.ZP,{isOpen:$,onRequestClose:function(){return ie(!1)},children:p.post?(0,o.tZ)(ce,{postId:p.post.id,onDone:function(){return ie(!1)}}):null})]}),(0,o.tZ)(m.default,{id:"905672075",children:[".comment-item.jsx-905672075{position:relative;padding:var(--space-8);}",".repl-post-settings.jsx-905672075{padding:var(--space-8) 0;}",".content-container.jsx-905672075{position:relative;}",".highlight.jsx-905672075{opacity:0;position:absolute;background-color:var(--accent-primary-dimmest);z-index:0;top:0;left:0;width:100%;height:100%;border-radius:var(--border-radius-4);pointer-events:none;-webkit-animation:fadeInOut-jsx-905672075 2s ease-in 500ms forwards;animation:fadeInOut-jsx-905672075 2s ease-in 500ms forwards;}","@-webkit-keyframes fadeInOut-jsx-905672075{0%{opacity:0;}5%{opacity:1;}85%{opacity:1;}100%{opacity:0;}}","@keyframes fadeInOut-jsx-905672075{0%{opacity:0;}5%{opacity:1;}85%{opacity:1;}100%{opacity:0;}}","a.jsx-905672075{font-size:var(--font-size-default);color:var(--foreground-default);font-weight:var(--font-weight-medium);-webkit-text-decoration:none !important;text-decoration:none !important;-webkit-transition:color 0.2s;transition:color 0.2s;}","a.jsx-905672075:hover{color:var(--accent-primary-default);}",".actions.jsx-905672075{position:relative;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;opacity:0;}",".comment-item.jsx-905672075:focus-within .actions.jsx-905672075,.comment-item.jsx-905672075:hover .actions.jsx-905672075,.is-action-menu-open.jsx-905672075 .actions.jsx-905672075,.is-touch-device .actions.jsx-905672075{opacity:1;}",".content.jsx-905672075{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}",".comment-item.jsx-905672075 .rendered-markdown{background:unset;font-size:var(--font-size-default);}",".comment-item.jsx-905672075 .rendered-markdown pre{padding:var(--space-4) !important;}",".comment-item.jsx-905672075 .rendered-markdown pre,.comment-item.jsx-905672075 .rendered-markdown pre code{background-color:var(--background-default);}","footer.jsx-905672075{position:relative;padding-top:var(--space-4);}",".replies-toogle.jsx-905672075{opacity:0.7;}",".toggle-icon.jsx-905672075{-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg);}",".toggle-icon.replies-expanded.jsx-905672075{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}",".replies-toogle.jsx-905672075:hover{opacity:1;}",".footer-actions.jsx-905672075{position:relative;left:calc(var(--space-4) * -1);}"]})]})}function me(e){var t=e.comment,r=e.onDelete,n=e.userSearch,i=e.replies,a=e.replId,c=e.refetch,u=e.linkedToCommentId,d=e.currentUser,p=e.areCommentsEnabled,f=s.useState((function(){return!!u&&(t.id===u||i.some((function(e){return e.id===u})))})),h=(0,l.Z)(f,2),g=h[0],b=h[1];return(0,o.BX)(F.Z,{css:[W.l0.borderRadius(8),"",""],elevated:Boolean(t.post),children:[(0,o.tZ)(fe,{onReply:function(){c(),b(!0)},replId:a,replyCount:i.length,repliesExpanded:g,onRepliesToggle:function(){return b(!g)},userSearch:n,comment:t,replyToId:t.id,onDelete:r,linkedToCommentId:u,currentUser:d,parentAuthor:null,areCommentsEnabled:p}),g&&i.length>0?(0,o.tZ)("div",{className:"jsx-1889986635 replies",children:(0,o.tZ)(v.gC,{spacing:2,align:"stretch",children:i.map((function(e){return(0,o.tZ)("div",{className:"jsx-1889986635",children:(0,o.tZ)(fe,{currentUser:d,linkedToCommentId:u,onReply:c,replId:a,userSearch:n,onDelete:r,comment:e,replyToId:t.id,replyCount:0,repliesExpanded:!1,onRepliesToggle:function(){return null},parentAuthor:t.user||null,areCommentsEnabled:p})},e.id)}))})}):null,(0,o.tZ)(m.default,{id:"1889986635",children:[".replies.jsx-1889986635{padding-left:var(--space-48);}"]})]})}function he(e){var t,r,i=e.replId,u=(0,A.useRouter)().query,d=s.useState(!1),h=(0,l.Z)(d,2),g=h[0],b=h[1],Z=(0,B.Z)(),y=Z.showConfirm,x=Z.showError,w=(0,c.ex8)({variables:{replId:i,after:u.after?u.after.toString():void 0}}),j=w.data,k=w.loading,O=w.fetchMore,C=w.refetch,R=u.c?Number(u.c):void 0,N=s.useState(null),_=(0,l.Z)(N,2),I=_[0],U=_[1],z=(0,c.cqY)({onCompleted:function(e){"UserError"===e.deleteReplComment.__typename?x(e.deleteReplComment.message):"ReplComment"===e.deleteReplComment.__typename&&(y("Comment deleted"),C(),U(null))},onError:function(e){return x(e.message)}}),F=(0,l.Z)(z,1)[0],L=(0,c.h_k)({onError:function(e){return x(e.message)},onCompleted:function(e){var t=e.setReplCommentSettings;if("UserError"===t.__typename)x(t.message);else if("Repl"===t.__typename){var r;null!==(r=t.commentSettings)&&void 0!==r&&r.enabled?y("Comments enabled!"):y("Comments disabled!")}}}),W=(0,l.Z)(L,1)[0],M="Repl"===(null===j||void 0===j?void 0:j.repl.__typename)?j.repl:null,G=null===j||void 0===j?void 0:j.currentUser,H=null===M||void 0===M||!M.commentSettings||M.commentSettings.enabled,q=s.useMemo((function(){var e;return(null===M||void 0===M||null===(e=M.comments)||void 0===e?void 0:e.items)||[]}),[null===M||void 0===M?void 0:M.comments.items]),K=null===M||void 0===M||null===(t=M.comments)||void 0===t?void 0:t.pageInfo,Y=s.useMemo((function(){var e;if(!M)return[];var t="User"===(null===(e=M.owner)||void 0===e?void 0:e.__typename)?(0,a.Z)({},M.owner.username,M.owner):{};return M.comments.items.forEach((function(e){e.user&&(t[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){null!==e&&void 0!==e&&e.user&&(t[e.user.username]=e.user)}))})),M.multiplayers.forEach((function(e){t[e.username]=e})),G&&delete t[G.username],Object.values(t)}),[M,G]),Q=(0,X.useApolloClient)(),J=s.useCallback(function(){var e=(0,f.Z)(p().mark((function e(t){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.query.toLowerCase(),!((n=Y.filter((function(e){var t;return!r||e.username.toLowerCase().includes(r)||(null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(r))}))).length<t.limit&&t.query)){e.next=7;break}return e.next=5,Q.query({query:c.RaF,variables:t});case 5:e.sent.data.usernameSearch.forEach((function(e){n.some((function(t){return t.username===e.username}))||n.push(e)}));case 7:return e.abrupt("return",n.slice(0,t.limit));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Q,Y]),$=s.useMemo((function(){return q?q.reduce((function(e,t){return e+(1+t.replies.length)}),0):null}),[q]);return(0,o.BX)(o.HY,{children:[(0,o.BX)(v.gC,{spacing:3,align:"stretch",children:[(0,o.BX)(v.gC,{spacing:2,align:"stretch",children:[(0,o.BX)(v.Ug,{justify:"space-between",align:"center",children:[(0,o.tZ)(pe,{totalCount:$,areCommentsEnabled:H}),(null===M||void 0===M||null===(r=M.currentUserPermissions)||void 0===r?void 0:r.changeCommentSettings)&&(0,o.BX)(v.Ug,{align:"center",spacing:2,children:[(0,o.tZ)(S.Z,{children:"Allow comments"}),(0,o.tZ)(D.Z,{isOn:H,onChange:function(){return W({variables:{input:{replId:M.id,enabled:!H}},optimisticResponse:{setReplCommentSettings:de(de({},M),{},{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!H}})}})}})]})]}),G&&H?(0,o.tZ)(P,{onCreate:function(){return C()},placeholder:M?"Say something about ".concat(M.title):"",replId:i,onCancel:function(){return null},userSearch:J}):null,G||k?null:(0,o.BX)("div",{className:"jsx-3776558785 auth-cta",children:[(0,o.tZ)("button",{onClick:function(){return b(!0)},className:"jsx-3776558785",children:"Sign up"})," ","to comment",(0,o.tZ)(T.ZP,{isOpen:g,onRequestClose:function(){b(!1)},children:(0,o.tZ)(V.Z,{onSuccess:function(){window.location.reload()},source:"comment"})})]})]}),q.map((function(e){return(0,o.tZ)(me,{linkedToCommentId:R,refetch:C,replId:i,replies:e.replies,comment:e,onDelete:U,userSearch:J,currentUser:G||null,areCommentsEnabled:H},e.id)})),null!==K&&void 0!==K&&K.nextCursor&&M?(0,o.tZ)("div",{className:"jsx-3776558785 load-more",children:(0,o.tZ)("a",{href:M.url+"?after="+K.nextCursor,onClick:function(e){e.preventDefault(),k||O({variables:{after:K.nextCursor},updateQuery:function(e,t){if(!t||!t.fetchMoreResult)return e;var r="Repl"===e.repl.__typename?e.repl:null;if(!r)return e;var i=t.fetchMoreResult,o="Repl"===i.repl.__typename?i.repl:null;return o?de(de({},i),{},{repl:de(de({},o),{},{comments:de(de({},o.comments),{},{items:[].concat((0,n.Z)(r.comments.items),(0,n.Z)(o.comments.items))})})}):e}})},className:"jsx-3776558785",children:k?"Loading...":"Load more comments"})}):null]}),(0,o.tZ)(T.ZP,{isOpen:null!==I,onRequestClose:function(){return U(null)},children:I?(0,o.tZ)(E.Z,{delete:function(){if(null===I)throw new Error("Expected pendingDelete");F({variables:{id:I.id}})},entityType:I.post?"Post":"Comment",hideModal:function(){return U(null)}}):null}),(0,o.tZ)(m.default,{id:"3776558785",children:[".auth-cta.jsx-3776558785{padding:var(--space-16);border-radius:var(--border-radius-4);background-color:var(--accent-primary-dimmest);}",".auth-cta.jsx-3776558785 button.jsx-3776558785{cursor:pointer;color:var(--accent-primary-default);font-size:inherit;padding:1px 2px;border-radius:var(--border-radius-4);border:0 none;-webkit-transition:0.2s background-color;transition:0.2s background-color;-webkit-text-decoration:none !important;text-decoration:none !important;font-weight:var(--font-weight-medium);background-color:transparent;}",".auth-cta.jsx-3776558785 button.jsx-3776558785:hover{background-color:var(--background-higher);}",".load-more.jsx-3776558785{padding-left:var(--space-48);}",".load-more.jsx-3776558785 a.jsx-3776558785{color:var(--accent-primary-default);font-size:var(--font-size-default);padding:1px 2px;border-radius:var(--border-radius-4);-webkit-transition:0.2s background-color;transition:0.2s background-color;-webkit-text-decoration:none !important;text-decoration:none !important;font-weight:var(--font-weight-medium);}",".load-more.jsx-3776558785 a.jsx-3776558785:hover{background-color:var(--background-higher);}"]})]})}var ge=r(41968),ve=r(27409),be=r(81024),Ze=r(63502),ye=r(30135),xe=r(51537),we=r(80320),je=r(54313),ke=r(41664);function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e){var t=e.repl,r=t.title,n=t.owner;return n?(0,o.BX)("div",{className:"jsx-3156424841 fork-card",children:[(0,o.tZ)(ke.default,Ce(Ce({},(0,we.aq)(t)),{},{children:(0,o.tZ)("a",{className:"jsx-3156424841 link-blanket"})})),(0,o.BX)("div",{className:"jsx-3156424841 content",children:[(0,o.tZ)("div",{className:"jsx-3156424841 repl-title",children:r}),(0,o.BX)(v.Ug,{wrap:"nowrap",align:"center",spacing:"2px",children:[(0,o.tZ)(ke.default,Ce(Ce({},(0,te.Ru)(n)),{},{children:(0,o.tZ)("a",{onClick:function(e){return e.stopPropagation()},className:"jsx-3156424841",children:(0,o.tZ)(Z.Z,{size:"s",url:n.image})})})),(0,o.tZ)(ke.default,Ce(Ce({},(0,te.Ru)(n)),{},{children:(0,o.tZ)("a",{onClick:function(e){return e.stopPropagation()},className:"jsx-3156424841 username",children:n.username})}))]})]}),(0,o.tZ)(m.default,{id:"3156424841",children:[".fork-card.jsx-3156424841{position:relative;padding:var(--space-8);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);background-color:var(--background-default);pointer-events:none;}",".content.jsx-3156424841{position:relative;}",".fork-card.jsx-3156424841 a.jsx-3156424841{pointer-events:all;}",".link-blanket.jsx-3156424841{position:absolute;top:0;left:0;width:100%;height:100%;}",".repl-title.jsx-3156424841{color:var(--accent-primary-default);font-size:var(--font-size-subhead-default);font-weight:bold;padding-bottom:var(--space-4);}",".repl-title.jsx-3156424841,.username.jsx-3156424841{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}",".repl-title.jsx-3156424841{font-weight:var(--font-weight-medium);}","a.jsx-3156424841:hover{-webkit-text-decoration:none;text-decoration:none;}",".username.jsx-3156424841{font-size:var(--font-size-default);color:var(--foreground-dimmer);}","a.username.jsx-3156424841:hover{color:var(--foreground-default);}"]})]}):null}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e){var t=e.replId,r=(0,c.zWW)({variables:{replId:t,count:100}}),i=r.data,l=r.fetchMore,a=r.loading,s="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?i.repl:null,u=s?s.publicForks:null,d=s?s.publicForkCount:null;return(0,o.BX)("div",{className:m.default.dynamic([["2086705271",[xe.j.mobileMax]]])+" repl-forks",children:[(0,o.tZ)("div",{className:m.default.dynamic([["2086705271",[xe.j.mobileMax]]])+" heading",children:(0,o.BX)(v.Ug,{spacing:"4px",children:[null!==d?(0,o.BX)(o.HY,{children:[(0,o.tZ)(S.Z,{fontWeight:"medium",size:"medium",children:d}),(0,o.tZ)(S.Z,{foreground:2,size:"medium",children:1!==d?"forks":"fork"})]}):null,a?(0,o.tZ)(S.Z,{foreground:3,fontWeight:"medium",size:"medium",children:"Loading forks..."}):null]})}),(0,o.BX)("div",{className:m.default.dynamic([["2086705271",[xe.j.mobileMax]]]),children:[(0,o.tZ)("div",{className:m.default.dynamic([["2086705271",[xe.j.mobileMax]]])+" forks-list",children:u?u.items.map((function(e){return(0,o.tZ)("div",{className:m.default.dynamic([["2086705271",[xe.j.mobileMax]]])+" fork-card",children:(0,o.tZ)(Pe,{repl:e})},e.id)})):null}),(0,o.tZ)("div",{className:m.default.dynamic([["2086705271",[xe.j.mobileMax]]]),children:null!==u&&void 0!==u&&u.pageInfo.nextCursor?(0,o.tZ)(b.Z,{disabled:a,border:!1,color:"primary",filled:!1,fullWidth:!0,onClick:function(){a||l({variables:{after:u.pageInfo.nextCursor},updateQuery:function(e,t){if(!t||!t.fetchMoreResult)return e;var r="Repl"===e.repl.__typename?e.repl:null;if(!r)return e;var i=t.fetchMoreResult,o="Repl"===i.repl.__typename?i.repl:null;return o?Se(Se({},i),{},{repl:Se(Se({},o),{},{publicForks:Se(Se({},o.publicForks),{},{items:[].concat((0,n.Z)(r.publicForks.items),(0,n.Z)(o.publicForks.items))})})}):e}})},children:a?"Loading...":"Load more"}):null})]}),(0,o.tZ)(m.default,{id:"2086705271",dynamic:[xe.j.mobileMax],children:[".repl-forks.__jsx-style-dynamic-selector{padding:var(--space-16);overflow-y:auto;height:500px;}",".heading.__jsx-style-dynamic-selector{padding:var(--space-8) 0;}",".forks-list.__jsx-style-dynamic-selector{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:var(--space-16);padding-bottom:var(--space-16);}","@media screen and (min-width:".concat(xe.j.mobileMax,"px){.forks-list.__jsx-style-dynamic-selector{grid-template-columns:repeat(2,minmax(0,1fr));}}")]})]})}var Ne=r(79122),Te=r(12836),Ee=r(95078);function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ie=(0,L.K)("a"),Ue={template:{background:W.TV.yellowDimmest,foreground:W.TV.yellowStrongest},app:{background:W.TV.accentPrimaryDimmest,foreground:W.TV.accentPrimaryStrongest}};function Xe(e){var t=e.colorway,r=e.text;return(0,o.tZ)(L.Z,{css:[{backgroundColor:t.background},W.l0.borderRadius(8),W.l0.px(4),W.l0.py(2),"",""],children:(0,o.tZ)(L.Z,{css:[{color:t.foreground,fontSize:W.TV.fontSizeSmall},"",""],children:r})})}var Ae={name:"1i7zuxv",styles:"&& > .rendered-markdown{background-color:transparent;}"};function Ve(e){var t,r,n,i,l,a,s=e.repl,u=s.owner,d=s.lastPublishedAt||(null===(t=s.deployment)||void 0===t||null===(r=t.activeRelease)||void 0===r?void 0:r.timeCreated);return(0,o.BX)(L.Z,{css:[W.l0.colWithGap(32),"",""],children:[(0,o.BX)(L.Z,{css:[W.l0.colWithGap(16),"",""],children:[(0,o.tZ)(L.Z,{css:[W.l0.rowWithGap(8),W.l0.align.start,"",""],children:(0,o.BX)(L.Z,{css:[W.l0.colWithGap(8),W.l0.flex.growAndShrink(1),"",""],children:[(0,o.tZ)(L.Z,{css:[W.l0.rowWithGap(8),W.l0.align.center,"",""],children:u?(0,o.tZ)(re.Z,{inline:!0,username:u.username,children:(0,o.tZ)(te.ZP,{user:u,children:(0,o.tZ)(Ie,{css:[W.l0.color.foregroundDefault,"",""],children:(0,o.tZ)(Ee.Z,{username:u.username,src:(null===u||void 0===u?void 0:u.image)||null})})})}):(0,o.tZ)(Ee.Z,{small:!0,src:null,username:"[deleted]"})}),(0,o.BX)(L.Z,{css:[W.l0.rowWithGap(8),W.l0.align.center,"",""],children:[s.publishedAs===c.O2h.Template?(0,o.tZ)(Xe,{colorway:Ue.template,text:"Template"}):null,s.publishedAs===c.O2h.App?(0,o.tZ)(Xe,{colorway:Ue.app,text:"App"}):null,d?(0,o.BX)(z.x,{color:"dimmer",variant:"small",children:["Published on"," ",new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null,(null===(n=s.source)||void 0===n||null===(i=n.deployment)||void 0===i||null===(l=i.repl)||void 0===l?void 0:l.owner)&&(0,o.BX)(z.x,{color:"dimmer",variant:"small",children:["Made with"," ",(0,o.tZ)(ke.default,_e(_e({},(0,we.aq)(s.source.deployment.repl)),{},{children:(0,o.tZ)("a",{children:s.source.deployment.repl.templateLabel})}))]}),null!==(a=s.origin)&&void 0!==a&&a.owner?(0,o.BX)(z.x,{color:"dimmer",variant:"small",children:["Forked from"," ",(0,o.tZ)(te.ZP,{user:s.origin.owner,children:(0,o.tZ)("a",{children:s.origin.owner.username})}),"/",(0,o.tZ)(ke.default,_e(_e({},(0,we.aq)(s.origin)),{},{children:(0,o.tZ)("a",{children:s.origin.title})}))]}):null]})]})}),s.tags.length?(0,o.tZ)(L.Z,{children:(0,o.tZ)(L.Z,{css:[{flexWrap:"wrap",margin:"calc(".concat(W.TV.space4," * -1)")},W.l0.flex.row,"",""],children:s.tags.map((function(e){return(0,o.tZ)(ke.default,{href:{pathname:"/apps/tag",query:{tag:e.id}},as:"/apps/".concat(e.id),children:(0,o.tZ)("a",{css:[{margin:W.TV.space4},""],children:(0,o.BX)(Te.Z,{children:["#",e.id]})})},e.id)}))})}):null,s.description?(0,o.tZ)(Ne.Z,{children:(0,o.tZ)(L.Z,{css:Ae,children:(0,o.tZ)(_.Z,{source:s.description})})}):(0,o.tZ)(z.x,{color:"dimmest",children:"This repl has no description"})]}),(0,o.tZ)(L.Z,{css:[{borderBottom:"1px solid ".concat(W.TV.outlineDefault)},"",""]})]})}var ze=r(12039),Fe=r(82747);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(e){return(0,o.BX)(L.Z,{css:[W.l0.rowWithGap(4),W.l0.flex.growAndShrink(1),"",""],children:[(0,o.tZ)(oe.ZP,{colorway:e.colorway,iconLeft:e.icon,stretch:!0,onClick:e.onClick,text:e.text,css:[W.l0.flex.growAndShrink(1),W.l0.borderRadius(8,4,4,8),"",""]}),(0,o.tZ)(oe.ZP,{colorway:e.colorway,onClick:e.onCountClick,text:(0,ze.d)(e.count),css:[W.l0.borderRadius(4,8,8,4),"",""]})]})}var Ge,He,qe,Ke=function(e){return"@media (max-width: ".concat(e,"px)")},Ye={mobile:Ke(xe.j.tabletMin),small:(He=xe.j.tabletMin+1,qe=xe.j.tabletMax,"@media (min-width: ".concat(He,"px) and (max-width: ").concat(qe,"px)")),smallAndMobile:Ke(xe.j.tabletMax),desktop:(Ge=xe.j.tabletMax+1,"@media (min-width: ".concat(Ge,"px)"))},Qe=function(e){return{name:e,gridArea:(0,i.iv)({gridArea:e},"","")}},Je={header:Qe("header"),cta:Qe("cta"),main:Qe("main"),secondary:Qe("secondary"),auxiliary:Qe("auxiliary")},$e={mobile:(0,i.iv)({gridTemplateAreas:'\n      "'.concat(Je.header.name,'"\n      "').concat(Je.cta.name,'"\n      "').concat(Je.main.name,'"\n      "').concat(Je.auxiliary.name,'"\n      "').concat(Je.secondary.name,'"\n      ')},"",""),small:(0,i.iv)({gridTemplateColumns:"1fr auto auto 25%",gridTemplateRows:"auto",gridTemplateAreas:'\n      "'.concat(Je.header.name," ").concat(Je.header.name," ").concat(Je.cta.name," ").concat(Je.cta.name,'"\n      "').concat(Je.main.name," ").concat(Je.main.name," ").concat(Je.main.name," ").concat(Je.main.name,'"\n      "').concat(Je.secondary.name," ").concat(Je.secondary.name," ").concat(Je.secondary.name," ").concat(Je.auxiliary.name,'"\n      ')},"",""),desktop:(0,i.iv)({columnGap:W.TV.space32,alignItems:"baseline",gridTemplateColumns:"1fr 25%",gridTemplateRows:"auto auto auto auto 1fr",gridTemplateAreas:'\n      "'.concat(Je.header.name," ").concat(Je.cta.name,'"\n      "').concat(Je.main.name," ").concat(Je.cta.name,'"\n      "').concat(Je.main.name," ").concat(Je.auxiliary.name,'"\n      "').concat(Je.main.name," ").concat(Je.auxiliary.name,'"\n      "').concat(Je.secondary.name," ").concat(Je.auxiliary.name,'"\n      ')},"","")},et=function(e){var t,r=e.withSidebar;return(0,i.iv)([W.l0.px(16),W.l0.py(32),(t={maxWidth:1200,margin:"0 auto",display:"grid",gap:W.TV.space16},(0,a.Z)(t,Ye.mobile,$e.mobile),(0,a.Z)(t,Ye.small,[W.l0.px(16),$e.small]),(0,a.Z)(t,Ye.desktop,[W.l0.px(32),W.l0.py(64),r?$e.desktop:$e.small]),t)],"","")};function tt(e){var t=e.repl;return(0,o.BX)(L.Z,{css:[W.l0.rowWithGap(8),W.l0.align.center,"",""],children:[(0,o.tZ)(ve.Z,{alt:t.title,size:32,iconUrl:t.iconUrl}),(0,o.tZ)(z.h,{variant:"headerBig",level:1,css:[W.l0.flex.growAndShrink(1),"word-break:break-all;",""],children:t.title})]})}function rt(e){var t,r,n,u=e.repl,d=e.isLoggedIn,p=s.useState(!1),f=(0,l.Z)(p,2),m=f[0],h=f[1],g=s.useState(!1),v=(0,l.Z)(g,2),b=v[0],Z=v[1],y=(0,je.Z)(),x=(0,l.Z)(y,2),w=x[0],j=x[1].loading,k=u.currentUserPermissions.containerWrite?(0,o.tZ)(oe.ZP,We({colorway:"primary",iconLeft:(0,o.tZ)(ye.Z,{}),stretch:!0,text:"Edit in workspace"},(0,we.aq)(u))):null;function O(){var e,t;d?j||w({originId:u.id,replReleaseId:(null===(e=u.deployment)||void 0===e||null===(t=e.activeRelease)||void 0===t?void 0:t.id)||void 0,trackingData:{forkSource:"replViewHeader",isApp:u.publishedAs===c.O2h.App,isTemplate:u.publishedAs===c.O2h.Template}}):Z(!0)}var C=u.publishedAs===c.O2h.Template?{text:j?"Creating...":"Use Template",icon:(0,o.tZ)(be.Z,{}),count:u.publicReleasesForkCount}:{text:j?"Forking...":"Fork repl",icon:(0,o.tZ)(Ze.Z,{}),count:u.publicForkCount},P=(0,o.tZ)(Me,We(We({},C),{},{onClick:O,icon:(0,o.tZ)(Ze.Z,{}),colorway:null===k?"primary":void 0,onCountClick:function(){return h(!0)}})),R=(0,o.tZ)(T.ZP,{isOpen:m,onRequestClose:function(){return h(!1)},children:(0,o.tZ)(De,{replId:u.id})});return k?(0,o.BX)(o.HY,{children:[(0,o.BX)(L.Z,{css:[(t={},(0,a.Z)(t,Ye.smallAndMobile,[W.l0.flex.row,{flexDirection:"row-reverse"}]),(0,a.Z)(t,Ye.desktop,W.l0.colWithGap(8)),t),"",""],children:[(0,o.tZ)(L.Z,{css:(0,i.iv)((r={},(0,a.Z)(r,Ye.mobile,[W.l0.width("50%")]),(0,a.Z)(r,Ye.smallAndMobile,[W.l0.pl(4)]),r),"",""),children:k}),(0,o.tZ)(L.Z,{css:(0,i.iv)((n={},(0,a.Z)(n,Ye.mobile,[W.l0.width("50%")]),(0,a.Z)(n,Ye.smallAndMobile,[W.l0.pr(4)]),n),"",""),children:P})]}),R]}):(0,o.BX)(o.HY,{children:[P,(0,o.tZ)(T.ZP,{isOpen:b,onRequestClose:function(){Z(!1)},children:(0,o.tZ)(V.Z,{title:"Sign up or log in to fork this repl",onSuccess:function(){return O()},source:"fork"})}),R]})}function nt(e){var t=e.title,r=e.withSidebar,i=void 0===r||r;return(0,o.tZ)(L.Z,{css:[W.l0.flex.row,W.l0.flex.growAndShrink(1),"",""],children:(0,o.BX)(L.Z,{css:[W.l0.p(16),W.l0.flex.growAndShrink(1),et({withSidebar:i}),"",""],children:[(0,o.BX)(L.Z,{css:[Je.header.gridArea,W.l0.rowWithGap(8),W.l0.align.center,"",""],children:[(0,o.tZ)(F.Z,{elevated:!0,css:[W.l0.width(32),W.l0.height(32),W.l0.borderRadius("full"),"",""]}),(0,o.tZ)(z.h,{color:"dimmest",variant:"headerBig",level:1,css:[W.l0.flex.growAndShrink(1),"word-break:break-all;",""],children:t||"Loading..."})]}),(0,o.tZ)(L.Z,{css:[Je.cta.gridArea,"",""],children:(0,o.tZ)(oe.ZP,{disabled:!0,text:" "})}),(0,o.tZ)(L.Z,{css:[Je.main.gridArea,W.l0.colWithGap(16),"",""],children:(0,o.tZ)(F.Z,{elevated:!0,css:[W.l0.height(500),W.l0.borderRadius(8),"",""]})}),(0,o.tZ)(L.Z,{css:[Je.auxiliary.gridArea,W.l0.colWithGap(16),"",""],children:(0,o.BX)(L.Z,{css:W.l0.colWithGap(16),children:[(0,o.tZ)(z.x,{color:"dimmest",variant:"subheadDefault",children:"Loading..."}),(0,o.tZ)(L.Z,{css:W.l0.colWithGap(16),children:(0,n.Z)(Array(3)).map((function(e,t){return(0,o.tZ)(F.Z,{elevated:!0,css:[W.l0.height(100),W.l0.borderRadius(8),""]},t.toString())}))})]})}),(0,o.tZ)(L.Z,{css:[Je.secondary.gridArea,"",""]})]})})}var it={name:"1uhx80p",styles:"height:500px;> *{height:100%;}"};function ot(e){var t=e.repl,r=e.currentUser,n=e.withSidebar,i=void 0===n||n;return s.useEffect((function(){r&&!t.currentUserPermissions.containerWrite&&(0,C.track)(C.events.REPL_GUEST_VIEW,{page:"replView"})}),[r,t.currentUserPermissions.containerWrite]),(0,o.tZ)(L.Z,{css:[W.l0.flex.row,W.l0.flex.growAndShrink(1),"",""],children:(0,o.BX)(L.Z,{css:[W.l0.p(16),W.l0.flex.growAndShrink(1),et({withSidebar:i}),"",""],children:[(0,o.tZ)(L.Z,{css:[Je.header.gridArea,"",""],children:(0,o.tZ)(tt,{repl:t})}),(0,o.tZ)(L.Z,{css:[Je.cta.gridArea,"",""],children:(0,o.tZ)(rt,{repl:t,isLoggedIn:Boolean(r)})}),(0,o.BX)(L.Z,{css:[Je.main.gridArea,W.l0.colWithGap(16),"",""],children:[(0,o.tZ)(L.Z,{css:it,children:(0,o.tZ)(u.Z,{repl:t,currentUser:r})}),(0,o.tZ)(Ve,{repl:t})]}),(0,o.tZ)(L.Z,{css:[Je.auxiliary.gridArea,W.l0.colWithGap(16),"",""],children:t.relatedRepls.map((function(e){var t=e.name,r=e.repls;return(0,o.BX)(L.Z,{css:W.l0.colWithGap(16),children:[(0,o.tZ)(z.x,{variant:"subheadDefault",children:t}),(0,o.tZ)(L.Z,{css:W.l0.colWithGap(16),children:r.map((function(e){return e.publishedAs===c.O2h.Template?(0,o.tZ)(Fe.Z,{repl:e},e.id):e.publishedAs===c.O2h.App?(0,o.tZ)(ge.ZP,{showDialogOnClick:!1,repl:e,small:!0},e.id):null}))})]})}))}),(0,o.tZ)(L.Z,{css:[Je.secondary.gridArea,"",""],children:(0,o.tZ)(he,{replId:t.id})})]})})}},79122:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(35944),i=r(32292),o=r(67294),l=r(68953),a=r(36437),s=r(7868),c=r(82265);var u=(0,r(70917).iv)([a.l0.py(8),a.l0.rowWithGap(4),{textTransform:"uppercase",cursor:"pointer",fontSize:a.TV.fontSizeSmall,fontWeight:a.TV.fontWeightMedium,border:"0 none",outline:"0",width:"100%",backgroundColor:a.TV.backgroundRoot,textAlign:"left",color:a.TV.foregroundDimmest,":hover":{color:a.TV.foregroundDefault}}],"",""),d=(0,l.K)("div"),p={name:"bjn8wh",styles:"position:relative"};function f(e){var t=e.children,r=o.useState(!0),a=(0,i.Z)(r,2),f=a[0],m=a[1],h=o.useState(!0),g=(0,i.Z)(h,2),v=g[0],b=g[1],Z=(0,c.Z)((function(e){var t=e.height;void 0!==t&&m(t>56)}));return(0,n.BX)(l.Z,{css:p,children:[(0,n.tZ)(l.Z,{css:[v&&f&&{height:56,overflow:"hidden"},"",""],children:(0,n.tZ)(d,{ref:Z,children:t})}),f?(0,n.BX)(l.Z,{tag:"button",onClick:function(){return b(!v)},css:[u,v&&{position:"absolute",bottom:0,left:0},"",""],children:[(0,n.BX)(l.Z,{children:["Show ",v?"more":"less"," "]}),(0,n.tZ)(s.Z,{rotate:v?0:180})]}):null]})}},60801:function(e,t,r){"use strict";r.d(t,{G:function(){return Z},Z:function(){return y}});var n=r(35944),i=r(26265),o=r(32292),l=(r(67294),r(70917)),a=r(55873),s=r(68953),c=r(25125),u=r(71570),d=r(36437),p=r(87644),f=r(36507),m=r(8301),h=r(22384),g=r(12039);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=(0,l.iv)([f.gU.filled,d.l0.p(8),{width:"auto",height:"auto"}],"","");function y(e){var t=e.repl,r=e.currentUser,i=(0,a.lUA)(),l=(0,o.Z)(i,2),f=l[0],v=l[1].loading;return(0,n.BX)(s.Z,{css:[d.l0.rowWithGap(4),d.l0.align.center,"",""],children:[(0,n.tZ)(s.Z,{css:[d.l0.borderRadius(4,8,8,4),d.l0.center,d.l0.p(8),"",""],children:(0,n.tZ)(u.x,{children:(0,g.d)(t.likeCount)})}),(0,n.BX)(h.Z,{background:"default",css:[d.l0.borderRadius(8),"",""],children:[null!==r&&void 0!==r&&r.isVerified?(0,n.tZ)(m.Z,{alt:t.currentUserDidLike?"Unlike":"Like",css:Z,disabled:v,onClick:function(){t.currentUserDidLike||(0,p.track)(p.events.REACTED_TO_REPL,{replView:"https://replit.com"+t.url,reaction:"heart",isReplTalk:!1,item:"repl"}),f({variables:{input:{replId:t.id}},optimisticResponse:{toggleReplLike:b(b({},t),{},{likeCount:Math.max(0,t.likeCount+(t.currentUserDidLike?-1:1)),currentUserDidLike:!t.currentUserDidLike})}})},children:(0,n.tZ)(c.Z,{filled:t.currentUserDidLike})}):null,r&&!r.isVerified?(0,n.tZ)(m.Z,{alt:"Verify your email to like",css:Z,disabled:!0,children:(0,n.tZ)(c.Z,{})}):null,r?null:(0,n.tZ)(m.Z,{alt:"Login to like",css:Z,disabled:!0,children:(0,n.tZ)(c.Z,{})})]})]})}},29472:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(35944),i=(r(67294),r(38965)),o=r(82558),l=r.n(o),a=r(18946),s=r(62448),c=r(86714);function u(e){var t=e.source;return(0,n.tZ)(i.Z,{source:t,skipHtml:!0,unwrapDisallowed:!0,allowedTypes:["link","linkReference","text","code","inlineCode","strong","emphasis","paragraph","list","image"],renderers:{code:s.Z,linkReference:a.NY,link:a._,list:a.xe},plugins:[c.markdownMentionPlugin,l()]})}},11646:function(e,t,r){"use strict";r.d(t,{Z:function(){return at}});var n=r(26265),i=r(70917),o=r(35944),l=r(67294),a=r(55873),s=r(22384),c=r(36437),u=r(68953),d=r(28270),p=r(61910),f=r(71570),m=r(32292),h=r(22796),g=r(50882),v=r(56095),b=r(86842),Z=r(10034),y=r(8301),x=r(30853),w=r(98906),j=r(87644);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C={name:"1b4920d",styles:"position:absolute;top:0;left:0;width:100%;height:100%"};function P(e){var t=e.src,r=e.alt;return(0,o.BX)(u.Z,{css:[C,"border-bottom-left-radius:8px;border-bottom-right-radius:8px;overflow:hidden;",""],children:[(0,o.tZ)(x.Z,{objectFit:"cover",layout:"fill",src:t,alt:r}),(0,o.tZ)(u.Z,{css:[C,"background:radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6));background-repeat:no-repeat;",""]})]})}function R(e){var t=e.onClick;return(0,o.tZ)(u.Z,{onClick:function(){(0,j.track)(j.events.RUN_BUTTON_CLICKED,{context:"replView",overlay:!0}),t()},css:[C,c.l0.center,{":hover > svg":{transform:"scale(1.2)"},"> svg":{transition:"transform 200ms",width:64,height:"auto",cursor:"pointer",filter:c.TV.shadowDefault}},"",""],children:(0,o.tZ)(p.Z,{filled:!0,color:c.TV.white})})}function S(e){var t=e.isPublished,r=e.onChangeClick,n=e.onRemoveClick,i=l.useState(!1),a=(0,m.Z)(i,2),s=a[0],p=a[1];return(0,o.BX)(u.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center,"",""],children:[(0,o.tZ)(d.ZP,{onClick:function(e){e.stopPropagation(),r()},text:"Change image"}),t?(0,o.tZ)(y.Z,{alt:"Cannot remove cover image of a published repl",disabled:!0,colorway:"negative",children:(0,o.tZ)(g.Z,{})}):null,t?null:(0,o.tZ)(u.Z,{children:(0,o.tZ)(y.Z,{alt:"Remove Image",colorway:"negative",onClick:function(){p(!0)},children:(0,o.tZ)(g.Z,{})})}),(0,o.tZ)(b.ZP,{isOpen:s,onRequestClose:function(){return p(!1)},children:(0,o.tZ)(v.Z,{title:"Remove image",isDestructive:!0,onConfirm:function(){n(),p(!1)},onCancel:function(){return p(!1)},children:"This will remove your repl's cover image. You can always add one back at any time."})})]})}function D(e){var t=e.onClick,r=e.isActive;return(0,o.BX)(u.Z,{css:[c.l0.colWithGap(16),c.l0.center,"",""],children:[(0,o.BX)(u.Z,{css:[c.l0.colWithGap(8),c.l0.center,"",""],children:[(0,o.tZ)(u.Z,{css:["> svg{width:44px;height:auto;}",r&&{color:c.TV.accentPrimaryDefault},"",""],children:(0,o.tZ)(w.Z,{})}),(0,o.tZ)(f.x,{children:"Drag and drop a cover image"})]}),(0,o.tZ)(u.Z,{children:(0,o.tZ)(d.ZP,{onClick:t,colorway:"primary",text:"Or select a file"})})]})}function N(e){var t=e.onClick,r=e.repl,n=l.useRef(null),s=l.useState(null),d=(0,m.Z)(s,2),p=d[0],f=d[1],g=l.useState(r.imageUrl),v=(0,m.Z)(g,2),b=v[0],y=v[1],x=(0,Z.Z)({onUpload:function(e){var t=e.url;j({variables:{input:{id:r.id,imageUrl:t}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:O(O({},r),{},{imageUrl:t})}}})},onUploadPreview:function(e){var t=e.dataUrl;y(t)},onError:function(e){f(e.message)}}),w=(0,a.wPL)({onCompleted:function(e){f(null),y(e.updateRepl.repl.imageUrl)}}),j=(0,m.Z)(w,1)[0],k=r.currentUserPermissions.changeImageUrl;function C(e){if(null!==e&&0!==e.length){var t=e.find((function(e){return e.type.startsWith("image/")}));t?(f(null),x.uploadImage(t)):f("Expected an image file")}}var N=(0,h.Z)(C),T=(0,m.Z)(N,2),E=T[0],B=T[1],_=!b&&k;return(0,o.BX)(u.Z,O(O({css:[c.l0.center,c.l0.flex.growAndShrink(1),!_&&{backgroundColor:c.TV.black},"border-bottom-left-radius:8px;border-bottom-right-radius:8px;position:relative;:hover .image-controls{opacity:1;}",""]},B),{},{children:[b?(0,o.tZ)(P,{src:b,alt:r.title}):null,_?null:(0,o.tZ)(R,{onClick:t}),b&&k?(0,o.BX)(u.Z,{className:"image-controls",css:[{position:"absolute",top:c.TV.space8,right:c.TV.space8,opacity:0,".is-touch-device &":{opacity:1}},"",""],children:[(0,o.tZ)(S,{onChangeClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},onRemoveClick:function(){j({variables:{input:{id:r.id,imageUrl:null}}})},isPublished:Boolean(r.lastPublishedAt)}),p?(0,o.tZ)("div",{className:"error",children:p}):null]}):null,_?(0,o.tZ)(D,{isActive:E,onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()}}):null,k?(0,o.tZ)("input",{css:(0,i.iv)({width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},"",""),ref:n,accept:"image/*",type:"file",onChange:function(e){var t=e.target,r=t.validity,n=t.files;r.valid&&C(n?Array.from(n):null)}}):null]}))}var T=r(49743),E=r(26830),B=r(79381),_=r(3105),I=r(809),U=r.n(I),X=r(92447),A=r(71371),V=r(11163),z=r(56479),F=r(14100),L=r(26921),W=r(86235),M=r(64181),G=r(54919),H=r(72031),q=r(25108);var K,Y=r(91340);function Q(e){var t=e.currentUser,r=e.repl,n=e.initialViewMode,i=void 0===n?K.Output:n,o=l.useState(""),s=(0,m.Z)(o,2),c=s[0],u=s[1],d=(0,l.useState)(E.e.DISCONNECTED),p=d[0],f=d[1],h=(0,l.useState)(B.A.OFFLINE),g=h[0],v=h[1],b=(0,l.useState)(null),Z=b[0],y=b[1],x=(0,l.useRef)(null),w=(0,l.useState)(null),k=w[0],O=w[1],C=(0,l.useState)(!1),P=C[0],R=C[1],S=l.useState(null),D=(0,m.Z)(S,2),N=D[0],T=D[1],I=(0,a.yo9)({variables:{replId:r.id}}),Q=(0,m.Z)(I,1)[0];function J(){if(x.current)return x.current;var e=function(e){var t=e.setBsodSentryEventId,r=(0,F.Z)({onUnrecoverableError:function(e){e.message.toLowerCase().includes("repl not found")?V.default.push("/home","~/"):A.$e((function(r){r.setTag("bsod","true"),r.setTag("replviewer","true"),q.error(e);var n=A.Tb(e);(0,M.Q)(e,r),t(n)}))}}),n=(0,z.Z)({container:r}),i=(0,W.Z)({container:r}),o=(0,H.Z)({container:r,fs:n}),l=(0,L.Z)({container:r,beforeRun:function(){var e=(0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.Z)(r,o);case 2:if(!e.sent){e.next=5;break}return e.next=5,i.installPackages();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{container:r,fs:n,runner:l,dotReplit:o,packager:i}}({setBsodSentryEventId:u});return x.current=e,y(e),e}var $=(0,Y.Z)(J);(0,l.useEffect)((function(){if(i!==K.Output){var e=$.current(),t=e.container,r=e.fs,n=e.dotReplit;O({type:"code",container:t,fs:r,dotReplit:n,path:""})}}),[i,$]),(0,l.useEffect)((function(){Z&&N&&O("server"!==N?{type:"vnc",container:Z.container,fs:Z.fs}:{type:"server",hostedUrl:r.devUrl})}),[Z,N,r.devUrl]),(0,l.useEffect)((function(){p!==E.e.CONNECTED&&T(null)}),[p]);var ee=(0,_.b)({repl:r,currentUser:t}),te=function(e){return!!["html","web_project","kaboom"].includes(e.lang.id)||Boolean(e.config.isServer)}(r);(0,l.useEffect)((function(){if(Z){var e=Z.container,t=Z.runner;e.connect({context:ee});var r=te?[e.close]:[t.onStateChanged(v),e.onConnectionStateChanged(f),e.onPortOpened((function(e){var t=e.isVnc;T(t?"vnc":"server")})),e.close];return function(){r.forEach((function(e){return e()}))}}}),[Z,ee,te]);var re=(0,l.useRef)(!1);return(0,l.useEffect)((function(){g===B.A.IDLE&&(re.current&&(re.current=!1,"terminal"===(null===k||void 0===k?void 0:k.type)&&$.current().runner.run()))}),[g,k,$]),{getFs:function(){return J().fs},openFile:function(e){var t=J(),r=t.container,n=t.fs,i=t.dotReplit,o=t.runner;"server"!==(null===k||void 0===k?void 0:k.type)&&"replboxDisplay"!==(null===k||void 0===k?void 0:k.type)||v(B.A.IDLE),O({type:"code",container:r,fs:n,path:e,dotReplit:i}),o.getRunState()===B.A.RUNNING&&o.stopRun()},viewState:k,runRepl:function(){if(R(!1),t&&Q(),(0,j.track)(j.events.REACTED_TO_REPL,{replView:"https://replit.com"+r.url,reaction:"repl_ran",isReplTalk:!1,item:"repl"}),te){var e,n,i=(null===(e=r.deployment)||void 0===e||null===(n=e.activeRelease)||void 0===n?void 0:n.hostedUrl)||r.devUrl;return O({type:"server",hostedUrl:i}),void v(B.A.RUNNING)}if(r.lang.canUseShellRunner){var o=J(),l=o.container,a=o.fs,s=o.runner,c=o.packager;return O("server"===N?{type:"server",hostedUrl:r.devUrl}:"vnc"===N?{type:"vnc",container:l,fs:a}:{type:"terminal",runner:s,packager:c}),s.getRunState()!==B.A.IDLE?void(re.current=!0):void s.run()}if(r.lang.hasReplboxWebview){var u=J().fs;return O({type:"replboxDisplay",fs:u}),void v(B.A.RUNNING)}O({type:"deprecationNotice"})},stopRepl:function(){if(O(null),R(!1),v(B.A.IDLE),!te){var e=J().runner;e.getRunState()===B.A.RUNNING&&e.stopRun()}},runState:g,isFileTreeOpen:P,setIsFileTreeOpen:R,didBsod:Boolean(c),showUrlOutput:te,devClearBsod:function(){u("")}}}!function(e){e.Code="Code",e.Output="Output"}(K||(K={}));var J=r(95151),$=r(65988),ee=r(82558),te=r.n(ee),re=r(51626),ne=r(38965),ie=r(8797),oe=r(3460),le=r(59137),ae=r(18946),se=r(51537),ce=se.j.tabletMin,ue=r(5152),de=r(89715);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=function(){var e=(0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([r.e(2738),r.e(4474)]).then(r.t.bind(r,74474,23)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=(0,ue.default)(me,{ssr:!1,loading:function(){return null}});function ge(e){var t=e.contents,r={scrollToContent:!0};try{r=fe(fe({},r),JSON.parse(t||"{}"))}catch(i){}var n=(0,de.Fg)();return(0,o.BX)("div",{className:"jsx-866328784 excalidraw-wrapper",children:[(0,o.tZ)(he,{viewModeEnabled:!0,zenModeEnabled:!0,initialData:r,theme:n===de.V2.replitLight?"light":"dark"}),(0,o.tZ)($.default,{id:"866328784",children:[".excalidraw-wrapper.jsx-866328784{cursor:all-scroll;height:100%;width:100%;}"]})]})}var ve=r(34837),be=r.n(ve),Ze=r(31046);function ye(e){var t=e.contents,r=e.isKbmsprite,n=l.useRef(null);return l.useEffect((function(){var e=n.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var i=JSON.parse(t),o=be()({canvas:e,data:r?(0,Ze.C)(i):i,readonly:!0});return function(){o.cleanUp()}}}),[t,r]),(0,o.tZ)("canvas",{ref:n,className:"jsx-1590318377 pedit",children:(0,o.tZ)($.default,{id:"1590318377",children:[".pedit.jsx-1590318377{width:100%;height:100%;}"]})})}var xe,we=r(43691),je=r(82438),ke=".lesson/lessonplan.md";function Oe(e){var t=e.fs,r=e.container,n=e.dotReplit,i=e.skip,o=e.preferredFile,a=l.useState(null),s=(0,m.Z)(a,2),c=s[0],u=s[1],d=function(e){var t,r=l.useState(null===(t=e.getContext())||void 0===t?void 0:t.repl.id),n=(0,m.Z)(r,2),i=n[0],o=n[1];return l.useEffect((function(){return e.onConnectionStateChanged((function(t){var r;t===F.e.CONNECTING&&o(null===(r=e.getContext())||void 0===r?void 0:r.repl.id)}))}),[e]),i}(r);return l.useEffect((function(){if(!i&&d){var e=!1;return Promise.all([(0,je.W)({replId:d,dotReplit:n,fs:t}),t.stat(ke)]).then((function(t){var r=(0,m.Z)(t,2),n=r[0],i=n.entrypoint,l=n.readmeFile,a=r[1];e||(o===xe.LessonPlan&&a.exists&&a.type===le.Tv.File?u(ke):o===xe.Readme&&l?u(l):i&&u(i))})),function(){e=!0}}}),[t,n,d,i,o]),c}!function(e){e.Entrypoint="Entrypoint",e.Readme="Readme",e.LessonPlan="LessonPlan"}(xe||(xe={}));var Ce=r(7230),Pe=r(97601),Re=r(30460);function Se(e){var t=e.fs,r=e.container,n=e.dotReplit,i=e.activeFilePath,a=e.onActiveFilePathChange,s=e.preferredDefaultFile,c=l.useState(i?{path:i,type:le.Tv.File}:null),u=(0,m.Z)(c,2),d=u[0],p=u[1],f=l.useRef(a);l.useEffect((function(){(null===d||void 0===d?void 0:d.type)===le.Tv.File&&f.current(d.path)}),[d]),l.useEffect((function(){f.current=a}),[a]),l.useLayoutEffect((function(){f.current(i||void 0)}),[i]);var h=Oe({fs:t,container:r,dotReplit:n,skip:Boolean(i),preferredFile:s});l.useEffect((function(){i||h&&p({path:h,type:le.Tv.File})}),[h,i]);var g=(0,we.Z)({fs:t,path:i||h||void 0}),v=(0,ae.mn)({fs:t}),b=l.useCallback((function(e){var t=e.src;return(0,o.tZ)(ae.TS,{previewFilePath:i||null,src:t,getImageContent:v})}),[v,i]);return(0,o.BX)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" file-viewer",children:[(0,o.BX)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" content",children:[g.result&&g.result.fileViewerType===Re.D.Media?(0,o.tZ)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" media",children:(0,o.tZ)(ie.A,{content:oe.Z.from(g.result.content).toString("base64"),mime:(0,re.yC)(g.result.path)})}):null,g.isLoading&&g.fileViewerType===Re.D.Media?(0,o.tZ)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" file-loader",children:(0,o.tZ)(Ce.Z,{})}):null,g.result&&g.result.fileViewerType===Re.D.Markdown?(0,o.tZ)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" markdown",children:(0,o.tZ)(ne.Z,{renderers:{image:b},plugins:[te()],source:g.result.content.toString()})}):null,g.isLoading&&g.fileViewerType===Re.D.Markdown?(0,o.tZ)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" file-loader",children:(0,o.tZ)(Ce.Z,{})}):null,g.result&&g.result.fileViewerType===Re.D.Draw?(0,o.tZ)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" draw",children:(0,o.tZ)(ge,{contents:g.result.content.toString()})}):null,g.isLoading&&g.fileViewerType===Re.D.Draw?(0,o.tZ)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" file-loader",children:(0,o.tZ)(Ce.Z,{})}):null,g.result&&g.result.fileViewerType===Re.D.Code?(0,o.tZ)(Pe.Z,{filePath:g.result.path,code:g.result.content.toString(),fontSize:14}):null,g.isLoading&&g.fileViewerType===Re.D.Code?(0,o.tZ)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" file-loader",children:(0,o.tZ)(Ce.Z,{})}):null,g.result&&g.result.fileViewerType===Re.D.Pedit?(0,o.tZ)(ye,{contents:g.result.content.toString(),isKbmsprite:!(null===i||void 0===i||!i.endsWith(".kbmsprite"))}):null,!g.isLoading&&g.error?(0,o.tZ)("div",{className:$.default.dynamic([["1621507236",[ce]]])+" error",children:(0,o.BX)("div",{className:$.default.dynamic([["1621507236",[ce]]]),children:["Could not load ",g.error.path]})}):null]}),(0,o.tZ)($.default,{id:"1621507236",dynamic:[ce],children:[".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%;}",".markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--space-16);overflow-y:auto;position:relative;height:100%;}",".draw.__jsx-style-dynamic-selector{height:100%;width:100%;}",".file-tree.__jsx-style-dynamic-selector{background-color:var(--background-root);border-radius:var(--border-radius-4);overflow:auto;display:none;}",".content.__jsx-style-dynamic-selector{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative;}",".file-loader.__jsx-style-dynamic-selector{width:100%;padding-top:var(--space-8);padding-left:var(--space-8);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn-__jsx-style-dynamic-selector ease 0s forwards;animation:fadeIn-__jsx-style-dynamic-selector ease 0s forwards;-webkit-animation-delay:200ms;animation-delay:200ms;}",".media.__jsx-style-dynamic-selector,.error.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;}","@-webkit-keyframes fadeIn-__jsx-style-dynamic-selector{0%{opacity:0;}100%{opacity:1;}}","@keyframes fadeIn-__jsx-style-dynamic-selector{0%{opacity:0;}100%{opacity:1;}}","@media screen and (min-width:".concat(ce,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px;}}")]})]})}var De=r(61951);function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e){return(0,o.tZ)(De.Z,Te(Te({},e),{},{children:(0,o.tZ)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"4",strokeWidth:"2"})}))}var Be=r(23541),_e=r(12039),Ie=r(56393),Ue=r(83502),Xe=(0,u.K)("div");function Ae(e){var t=e.replId,r=e.language,n=l.useState((function(){return(0,Ie.Z)({beforeRun:function(){return Promise.resolve()},getMainFileContents:function(){return(0,Ue.Z)({language:e.language,fs:e.fs})}})})),i=(0,m.Z)(n,1)[0],a=l.useRef(null);return l.useEffect((function(){if(a.current){var e=!1;return i.load({replId:t,language:r,iframeParent:a.current}).then((function(){e||i.run()})),function(){e=!0,i.getRunState()!==B.A.OFFLINE&&i.destroy()}}}),[i,t,r]),(0,o.tZ)(Xe,{ref:a,css:[c.l0.width("100%"),c.l0.height("100%"),{backgroundColor:"white",borderBottomRightRadius:8,borderBottomLeftRadius:8,iframe:[c.l0.width("100%"),c.l0.height("100%"),{display:"block",utline:"none",border:"none",borderBottomRightRadius:8,borderBottomLeftRadius:8}]},"",""]})}var Ve=r(45006),ze=r(19873),Fe=r(34834),Le=r(86718);var We={name:"1emh2t",styles:"overflow:auto;height:100%"};function Me(e){var t=e.fs,r=e.language,n=e.activePath,i=e.onNodeClick;return(0,o.tZ)(Fe.Z,{children:(0,o.BX)(u.Z,{css:[c.l0.flex.column,c.l0.p(8),We,"",""],children:[(0,o.tZ)(u.Z,{css:[c.l0.p(8),"",""],children:(0,o.tZ)(f.h,{level:3,variant:"subheadDefault",children:"Files"})}),(0,o.tZ)(ze.Z,{siblings:[],readOnly:!0,uploadFiles:function(){},onClick:function(){return null},pendingFileType:null,onRename:function(){return null},onDownload:function(){return null},onDuplicate:function(){return null},onDelete:function(){return null},getNodeType:(0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le.Tv.File);case 1:case"end":return e.stop()}}),e)}))),overwriteNode:function(){return null},setPendingFileType:function(){},activePath:n,onNodeClick:i,path:Ve.Q,transformChildren:(0,Le.Z)({language:r}),fs:t})]})})}var Ge=r(63169),He=r(82265),qe=r(60801);function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qe(e){return(0,o.tZ)(De.Z,Ye(Ye({},e),{},{children:(0,o.tZ)("path",{d:"M19.5 9H4.5C3.67157 9 3 8.32843 3 7.5V4.5C3 3.67157 3.67157 3 4.5 3H19.5C20.3284 3 21 3.67157 21 4.5V7.5C21 8.32843 20.3284 9 19.5 9ZM19.5 9H8.5C7.67157 9 7 9.67157 7 10.5V13.5C7 14.3284 7.67157 15 8.5 15M19.5 9C20.3284 9 21 9.67157 21 10.5V13.5C21 14.3284 20.3284 15 19.5 15M8.5 15H19.5M8.5 15C7.67157 15 7 15.6716 7 16.5V19.5C7 20.3284 7.67157 21 8.5 21H19.5C20.3284 21 21 20.3284 21 19.5V16.5C21 15.6716 20.3284 15 19.5 15",strokeWidth:"2",strokeLinejoin:"round"})}))}var Je="1px solid "+c.TV.outlineDimmer;function $e(e){var t=e.children;return(0,o.tZ)(u.Z,{tag:"header",css:[{borderBottom:Je},c.l0.p(8),c.l0.rowWithGap(8),c.l0.align.center,"",""],children:t})}var et=(0,u.K)("a");function tt(e){var t=e.runCount,r=e.runState,n=e.onClick,i=e.publishedAs,l=r===B.A.RUNNING?(0,o.tZ)(Ee,{fill:"currentColor"}):(0,o.tZ)(p.Z,{fill:"currentColor"}),s=i===a.O2h.Template?"Run example":"Run";return r===B.A.RUNNING&&(s="Stop"),(0,o.BX)(u.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center,"",""],children:[(0,o.tZ)(f.x,{children:(0,_e.d)(t)}),(0,o.tZ)(d.ZP,{colorway:r===B.A.RUNNING||i===a.O2h.Template?void 0:"positive",onClick:n,iconLeft:l,text:s})]})}function rt(e){var t=e.children;return(0,o.tZ)(s.Z,{elevated:!0,css:[{border:Je},c.l0.borderRadius(8),"",""],children:t})}function nt(e){var t=e.src;return(0,o.tZ)(u.Z,{css:[c.l0.width("100%"),c.l0.height("100%"),"",""],children:(0,o.tZ)(u.Z,{tag:"iframe",sandbox:"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals",src:t,css:[c.l0.width("100%"),c.l0.height("100%"),"border-bottom-right-radius:8px;border-bottom-left-radius:8px;position:absolute;background-color:white;display:block;border:none;top:0;left:0;",""]})})}var it={name:"7n5vuo",styles:"z-index:101;position:absolute;top:0;left:0;height:100%;overflow:hidden;border-bottom-left-radius:8px"};function ot(e){var t=e.getFs,r=e.isOpen,n=e.language,i=e.activePath,a=e.onFileClick,c=(0,l.useState)(r),d=c[0],p=c[1];return(0,l.useEffect)((function(){d||r&&p(!0)}),[r,d,p]),d?(0,o.tZ)(u.Z,{css:it,children:(0,o.tZ)(s.Z,{elevated:!0,css:[{height:"100%",width:200,transition:"transform ".concat(160,"ms"),transform:"translateX(".concat(r?0:-200,"px)")},"",""],children:(0,o.tZ)(Me,{fs:t(),language:n,activePath:i,onNodeClick:function(e){e.type!==le.Tv.Directory&&a(e.path)}})})}):null}var lt=(0,u.K)("div");function at(e){var t=e.repl,r=e.currentUser,p=Q({repl:t,currentUser:r,initialViewMode:t.publishedAs===a.O2h.Template||t.isProject?K.Code:K.Output}),m=p.openFile,h=p.viewState,g=p.getFs,v=p.runRepl,b=p.stopRepl,Z=p.runState,x=p.didBsod,w=p.devClearBsod,k=p.isFileTreeOpen,O=p.setIsFileTreeOpen,C=p.showUrlOutput,P=(0,l.useState)(!1),R=P[0],S=P[1],D=(0,He.Z)((function(e){void 0!==e.width&&S(e.width<=500)}));return x?(0,o.tZ)(T.Z,{devHide:w}):(0,o.BX)(rt,{children:[(0,o.BX)($e,{children:[(0,o.BX)(u.Z,{css:[c.l0.flex.growAndShrink(1),c.l0.rowWithGap(8),"",""],children:[(0,o.BX)(u.Z,{css:[c.l0.rowWithGap(4),c.l0.align.center,"",""],children:[(0,o.tZ)(d.ZP,{iconLeft:(0,o.tZ)(Qe,{}),text:k?"Hide files":"Show files",onClick:function(){return O((function(e){return!e}))},css:(0,i.iv)((0,n.Z)({},"@media (max-width: ".concat(se.j.mobileMax,"px)"),{display:"none"}),"","")}),(0,o.tZ)(s.Z,{background:"default",css:[c.l0.borderRadius(8),(0,n.Z)({},"@media (min-width: ".concat(se.j.mobileMax+1,"px)"),{display:"none"}),"",""],children:(0,o.tZ)(y.Z,{css:qe.G,alt:k?"Hide files":"Show files",onClick:function(){return O((function(e){return!e}))},children:(0,o.tZ)(Qe,{})})})]}),C?(0,o.tZ)(u.Z,{css:[c.l0.center,{borderLeft:"1px solid "+c.TV.outlineDimmest},"",""],children:(0,o.BX)(et,{css:[c.l0.rowWithGap(4),c.l0.color.foregroundDimmer,c.l0.px(8),"",""],href:t.prodUrl,target:"_blank",children:[(0,o.tZ)(Ge.Z,{}),(0,o.tZ)(f.x,{children:(0,o.tZ)("span",{css:(0,i.iv)((0,n.Z)({},"@media (max-width: ".concat(se.j.mobileMax+20,"px)"),{display:"none"}),"",""),children:"Open website"})})]})}):null]}),(0,o.BX)(u.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center,"",""],children:[(0,o.tZ)(qe.Z,{repl:t,currentUser:r}),(0,o.tZ)(tt,{runCount:t.runCount,runState:Z,publishedAs:t.publishedAs,onClick:function(){if(Z===B.A.IDLE||Z===B.A.OFFLINE)return(0,j.track)(j.events.RUN_BUTTON_CLICKED,{context:"replView"}),void v();Z===B.A.RUNNING&&b()}})]})]}),(0,o.BX)(lt,{ref:D,css:[c.l0.flex.growAndShrink(1),"position:relative;",""],children:[null===h?(0,o.tZ)(N,{repl:t,onClick:v}):null,"server"===(null===h||void 0===h?void 0:h.type)?(0,o.tZ)(nt,{src:h.hostedUrl}):null,"vnc"===(null===h||void 0===h?void 0:h.type)?(0,o.tZ)(J.Z,{fs:h.fs,container:h.container}):null,"replboxDisplay"===(null===h||void 0===h?void 0:h.type)?(0,o.tZ)(Ae,{replId:t.id,language:t.language,fs:h.fs}):null,"deprecationNotice"===(null===h||void 0===h?void 0:h.type)?(0,o.tZ)(u.Z,{css:[c.l0.center,c.l0.p(16),c.l0.height("100%"),"",""],children:(0,o.BX)(f.x,{multiline:!0,variant:"subheadDefault",children:['Running "',t.lang.displayName,'" is no longer supported.'," ",(0,o.tZ)("a",{href:"https://replit.canny.io/general-feedback/",target:"_blank",rel:"noopener",children:"Send feedback"})]})}):null,"terminal"===(null===h||void 0===h?void 0:h.type)?(0,o.tZ)(u.Z,{css:[c.l0.height("100%"),c.l0.width("100%"),c.l0.position.relative,"overflow:hidden;border-bottom-left-radius:8px;border-bottom-right-radius:8px;",""],children:(0,o.tZ)(Be.ZP,{packager:h.packager,runner:h.runner,languageHeader:t.lang.header||void 0})}):null,"code"===(null===h||void 0===h?void 0:h.type)?(0,o.tZ)(u.Z,{css:[c.l0.height("100%"),c.l0.flex.growAndShrink(1),{position:"relative",overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,transition:"margin ".concat(160,"ms"),marginLeft:k&&!R?200:0},"",""],children:(0,o.tZ)(Se,{preferredDefaultFile:t.isProject?xe.LessonPlan:xe.Readme,fs:h.fs,dotReplit:h.dotReplit,container:h.container,activeFilePath:h.path,onActiveFilePathChange:function(e){e&&m(e)}})}):null,(0,o.tZ)(ot,{isOpen:k,language:t.lang.id,activePath:"code"===(null===h||void 0===h?void 0:h.type)?h.path:null,onFileClick:function(e){m(e),R&&O(!1)},getFs:g})]})]})}},43691:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(32292),i=r(26265),o=r(67294),l=r(30460);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){return s(s({},e),t)}var u={isLoading:!1,result:null,error:null,fileViewerType:null};function d(e){var t=e.fs,r=e.path,i=o.useReducer(c,u),a=(0,n.Z)(i,2),s=a[0],d=a[1];return o.useEffect((function(){if(r){var e=!1,n=(0,l.V)(r);return d({isLoading:!0,fileViewerType:n}),t.readFile(r).then((function(t){e||(t.error?d({isLoading:!1,result:null,error:{path:r,fileViewerType:n,error:t.error}}):d({isLoading:!1,result:{path:r,fileViewerType:n,content:t.content},error:null}))})),function(){e=!0}}d(u)}),[t,r]),s}},86714:function(e){var t=/^@(\w+)/,r=function(e,r,n){var i=t.exec(r);if(i)return!!n||e(i[0])({type:"link",url:"/@"+i[1],children:[{type:"text",value:i[0],position:{start:e.now()}}]})};r.notInLink=!0,r.locator=function(e,t){var r=e.indexOf("@",t);return 0===r||-1===r||-1!==(r=e.indexOf(" @",t-1))&&r++,r},e.exports={markdownMentionPlugin:function(){var e=this.Parser,t=e.prototype.inlineTokenizers,n=e.prototype.inlineMethods;t.mention=r,n.splice(n.indexOf("text"),0,"mention")},usernameRegExp:t}},82558:function(e){"use strict";e.exports=function(){var e,t=this.Parser;if(!function(e){return Boolean(e&&e.prototype&&e.prototype.inlineTokenizers&&e.prototype.inlineTokenizers.break&&e.prototype.inlineTokenizers.break.locator)}(t))throw new Error("Missing parser to attach `remark-breaks` to");function r(e,t,r){for(var n,i=t.length,o=-1,l="";++o<i;){if("\n"===(n=t.charAt(o)))return!!r||e(l+=n)({type:"break"});if(" "!==n)return;l+=n}}e=t.prototype.inlineTokenizers,r.locator=e.break.locator,e.break=r}}}]);