(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7363],{71632:function(e){"use strict";e.exports=JSON.parse('{"RB":1,"tn":3,"E9":1,"xp":7}')},12375:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(35944),i=n(65988),a=(n(67294),n(94184)),o=n.n(a);function s(e){var t=e.unreadDot,n=e.size,a=void 0===n?12:n,s=e.count,l=void 0===s?null:s,c=l&&l>99,u=c?"99+":null===l||void 0===l?void 0:l.toString();return(0,r.BX)("span",{className:"jsx-2595643267",children:[(0,r.tZ)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-2595643267",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-2595643267"})}),t&&(0,r.tZ)("div",{className:"jsx-2595643267 unread-indicator"}),Boolean(l)&&(0,r.tZ)("div",{className:"jsx-2595643267 "+(o()("count",{overflow:c})||""),children:u}),(0,r.tZ)(i.default,{id:"2595643267",children:["span.jsx-2595643267{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".unread-indicator.jsx-2595643267{width:5px;height:5px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute;}",".count.jsx-2595643267{border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small);}",".overflow.jsx-2595643267{-webkit-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);transform:translate(25%,-50%);}"]})]})}},13162:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(35944),i=n(26265),a=n(32292),o=n(65988),s=n(67294),l=n(71371),c=n(25187),u=n(30332),d=n(81789),p=n(28140),f=n(41756),m=n(70765);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=e.root,n=e.initialValue,r=void 0===n?"":n,i=e.isOpen,o=s.useRef(null),l=s.useState(Boolean(r)),c=(0,a.Z)(l,2),u=c[0],d=c[1],h=s.useState(r),v=(0,a.Z)(h,2),b=v[0],y=v[1],x=s.useRef(r),w=s.useRef(""),k=s.useState(null),Z=(0,a.Z)(k,2),j=Z[0],O=Z[1],E=s.useState((function(){var e={command:t,token:{value:"",start:0,end:0},parent:null,meta:{match:!0,searchValue:""}};return{options:[],value:r,index:r.length,searchValue:"",matchedAncestors:[e],rootNode:e}})),_=(0,a.Z)(E,2),C=_[0],S=_[1],P=s.useState(C.matchedAncestors.slice(1)),N=(0,a.Z)(P,2),T=N[0],I=N[1],R=s.useRef(null);s.useEffect((function(){R.current=(0,m.Z)({root:t,onUpdate:function(e){x.current&&(x.current=""),S(e),d(!1)}})}),[t,r]);var D=s.useMemo((function(){return[].concat((0,p.Z)(T.map((function(e){return e.token.value}))),[b]).join(" ")}),[T,b]);s.useEffect((function(){if(!R.current)throw new Error("Expected completerRef. Did you pass in a root command?");d(!0),R.current({value:D,index:D.length})}),[t,D]);var A=(0,f.Kb)({isOpen:i,inputValue:b,initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return e?e.value:""},items:C.options,stateReducer:function(e,t){var n=t.type,r=t.changes;switch(n){case f.Kb.stateChangeTypes.MenuMouseLeave:return g(g({},r),{},{highlightedIndex:-1===e.highlightedIndex?0:e.highlightedIndex});case f.Kb.stateChangeTypes.InputKeyDownEscape:case f.Kb.stateChangeTypes.InputBlur:return g(g({},r),{},{highlightedIndex:0,selectedItem:null});default:return r}},onSelectedItemChange:function(e){e.selectedItem&&(I(e.selectedItem.path.slice(1)),y(""),A.reset(),o.current&&o.current.focus())}});s.useEffect((function(){w.current&&T.length&&(y(w.current),w.current="")}),[C,T]);return{getMenuProps:A.getMenuProps,getToggleButtonProps:A.getToggleButtonProps,getComboboxProps:A.getComboboxProps,getItemProps:A.getItemProps,highlightedIndex:A.highlightedIndex,selectItem:A.selectItem,getInputProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A.getInputProps(g(g({},e),{},{spellCheck:!1,autoComplete:"off",ref:function(t){"function"===typeof e.ref&&e.ref(t),o.current=t},onChange:function(t){x.current||(e.onChange&&e.onChange(t),j&&O(null),y(t.currentTarget.value))},onKeyDown:function(e){if(x.current&&1===e.key.length)w.current+=e.key;else{if(!R.current)throw new Error("Expceted completerRef. Did you pass in a root command?");if("Escape"!==e.key)if("a"===e.key&&T.length&&e.metaKey)O({start:0,end:T.length});else{if("Backspace"===e.key&&j&&j.start<T.length){O(null),I(T.slice(0,j.start));var t=e.currentTarget,n=t.selectionStart,r=t.selectionEnd;if("number"!==typeof n||"number"!==typeof r)return;return y(e.currentTarget.value.slice(r)),void setTimeout((function(){o.current&&o.current.setSelectionRange(n,n)}))}if("Backspace"===e.key&&0===e.currentTarget.selectionStart&&T.length)I(T.slice(0,T.length-1));else if("ArrowLeft"===e.key&&e.shiftKey&&e.metaKey)O({start:0,end:T.length});else if("ArrowLeft"===e.key&&e.shiftKey&&0===e.currentTarget.selectionStart&&T.length){var i=j?Math.max(j.start-1,0):T.length-1;O({start:i,end:T.length})}else if("ArrowLeft"!==e.key||j||0!==e.currentTarget.selectionStart||!T.length){if("ArrowRight"!==e.key||!e.shiftKey||!j){var a="number"===typeof A.highlightedIndex&&A.highlightedIndex<C.options.length?C.options[A.highlightedIndex]:null;return" "===e.key&&a&&1===C.options.length&&a.token.value===b?(A.selectItem(a),void e.preventDefault()):"ArrowRight"===e.key?(j&&O(null),void(a&&A.selectItem(a))):"Tab"===e.key&&a?(e.preventDefault(),void A.selectItem(a)):void("Enter"===e.key&&a&&A.selectItem(a))}var s=j.start+1;O(s===j.end?null:{start:s,end:j.end})}else I(T.slice(0,T.length-1))}else e.currentTarget.blur()}}}))},isLoading:u,virtualSelection:j,completer:C,matchedBlocks:T,setMatchedBlocks:I,inputValue:b,clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focus;I([]),y(""),A.reset(),t&&setTimeout((function(){o.current&&o.current.focus()}))}}}var b=n(11163),y=n(93435),x=n(5590),w=n(41422),k=n(67933),Z=n(62255),j=n(52577),O=n(51537);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=e.root,n=e.indentOptions,i=e.onIsOpenChange,p=e.initialValue,f=e.renderOutput,m=e.disableKeyboardShortcut,h=e.autoFocus,g=s.useState(!1),E=(0,a.Z)(g,2),C=E[0],S=E[1];s.useEffect((function(){S(!0)}),[]);var P=s.useState(!1),N=(0,a.Z)(P,2),T=N[0],I=N[1],R=v({root:t,isOpen:T,initialValue:p}),D=R.getMenuProps,A=R.getInputProps,L=R.getComboboxProps,B=R.highlightedIndex,M=R.completer,U=R.getItemProps,X=R.matchedBlocks,F=R.setMatchedBlocks,z=R.virtualSelection,V=R.inputValue,H=R.selectItem,G=R.clear,W=s.useRef(G);s.useEffect((function(){W.current=G}),[G]);var K=s.useRef(Boolean(p)),q=s.useRef(i),Y=s.useRef(null),Q=s.useRef(null),J=(0,b.useRouter)();s.useEffect((function(){q.current=i}),[i]),s.useEffect((function(){q.current&&q.current(T)}),[T]),s.useEffect((function(){if(!m){var e=function(e){(0,x.b)(e),"Escape"!==e.key?Y.current&&!e.altKey&&!e.shiftKey&&(0,w.jh)(e)&&(w.V5?"k"===e.key.toLowerCase():"."===e.key.toLowerCase())&&(e.preventDefault(),document.activeElement===Y.current?(Y.current.blur(),I(!1),Q.current&&Q.current.focus()):(Q.current=document.activeElement&&document.activeElement!==Y.current&&"function"===typeof document.activeElement.focus?document.activeElement:null,Y.current.focus())):I(!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[m]);var $=(0,y.Z)((function(){I(!1)}),[]);s.useEffect((function(){M.errors&&M.errors.forEach((function(e){l.$e((function(t){t.setTag("completer","true"),l.Tb(e)}))}))}),[M.errors]),s.useEffect((function(){if(p&&K.current&&M.options.length&&p===M.options[0].value){var e;K.current=!1;var t=(0,a.Z)(M.options,1)[0];if(!("basic"===(null===(e=t.command.data)||void 0===e?void 0:e.type)))return;H(t)}}),[p,M.options,H]);var ee=Boolean(V||X.length),te=X.length?X[X.length-1]:M.rootNode,ne=te.command&&"data"in te.command&&te.command.data&&"description"in te.command.data?te.command.data.description:void 0,re=s.useRef(f);return s.useEffect((function(){re.current=f}),[f]),s.useEffect((function(){var e,t,n,r=te.command;if("link"===(null===(e=r.data)||void 0===e?void 0:e.type)){var i=r.data.link;J.push(i.href,i.as)}else"action"===(null===(t=r.data)||void 0===t?void 0:t.type)?(r.data.run(),W.current(),I(!1),Y.current&&Y.current.blur()):"output"===(null===(n=r.data)||void 0===n?void 0:n.type)&&re.current&&(I(!1),re.current(r.data.output()),Y.current&&Y.current.blur())}),[te,J]),(0,r.BX)("div",{ref:$,className:o.default.dynamic([["2157069700",[O.j.tabletMin]]]),children:[(0,r.BX)("div",_(_({},L()),{},{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]])+" root-wrap",children:[(0,r.BX)("div",{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]])+" input-row",children:[X.length?X.map((function(e,t){var n=Boolean(z&&t>=z.start&&t<z.end);return(0,r.tZ)("div",{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]])+" block-wrap",children:(0,r.tZ)(c.Z,{node:e,isSelected:n,onClick:function(){F(X.slice(0,t+1))}})},e.token.value+t)})):(0,r.tZ)("div",{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]])+" prompt-icon",children:(0,r.tZ)(d.Z,{size:16,filled:!0,color:"var(--foreground-dimmest)"})}),(0,r.tZ)("input",_(_({},A({autoFocus:h,placeholder:ne,ref:function(e){Y.current=e},onFocus:function(){I(!0)}})),{},{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]])})),!C||ee||m?null:(0,r.tZ)("div",{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]])+" keyboard-shortcut-container",children:(0,r.tZ)(k.Z,{shortcut:{cmdOrCtrlKey:!0,key:w.V5?"k":"."}})}),ee?(0,r.tZ)(Z.Z,{Icon:j.Z,border:!1,filled:!1,onClick:function(){G({focus:!0})}}):null]}),(0,r.tZ)("div",_(_({},D()),{},{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]]),children:T&&M.options.length?(0,r.tZ)("div",{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]])+" menu",children:(0,r.tZ)("ul",{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]]),children:M.options.map((function(e,t){var i=B===t;return(0,r.tZ)("li",_(_({},U({key:e.value,item:e,index:t})),{},{className:o.default.dynamic([["2157069700",[O.j.tabletMin]]]),children:(0,r.tZ)(u.Z,{indentOptions:n,isActive:i,option:e,matchedBlocks:X})}))}))})}):null}))]})),(0,r.tZ)(o.default,{id:"2157069700",dynamic:[O.j.tabletMin],children:[".root-wrap.__jsx-style-dynamic-selector{font-size:var(--font-size-default);position:relative;}",".input-row.__jsx-style-dynamic-selector{border:1px solid transparent;border-radius:var(--border-radius-8) var(--border-radius-8) 0 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:42px;padding-left:var(--space-8);padding-right:var(--space-4);z-index:1;position:relative;color:var(--foreground-default);}","input.__jsx-style-dynamic-selector{font-size:var(--font-size-default);background-color:transparent;border:0 none;outline:0 none;padding:var(--space-8);padding-left:0;display:block;width:100%;color:var(--foreground-default);}","input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector::-moz-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector::placeholder{color:var(--foreground-dimmest);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::-moz-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector:-ms-input-placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector:focus.__jsx-style-dynamic-selector::placeholder{color:var(--foreground-dimmer);}","input.__jsx-style-dynamic-selector::selection{background-color:var(--accent-primary-dimmest);}",".prompt-icon.__jsx-style-dynamic-selector{margin-right:var(--space-8);height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".block-wrap.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;padding-right:var(--space-8);}",".menu.__jsx-style-dynamic-selector{padding-top:40px;position:absolute;left:0;top:0;width:100%;background-color:var(--background-higher);border-radius:var(--border-radius-8);max-height:500px;overflow-y:auto;}","li.__jsx-style-dynamic-selector:last-child>div{border-bottom-right-radius:var(--border-radius-8);border-bottom-left-radius:var(--border-radius-8);}",".keyboard-shortcut-container.__jsx-style-dynamic-selector{display:none;}","@media screen and (min-width:".concat(O.j.tabletMin,"px){.keyboard-shortcut-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}}")]})]})}},81279:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(85893),i=n(32292),a=n(74047),o=n(52700),s=n(33814),l=n(44102),c=n(20775),u=n(65988),d=n(67294),p=function(){function e(){(0,a.Z)(this,e),this._listeners=[]}return(0,o.Z)(e,[{key:"listenOnce",value:function(e,t,n){if(this._listeners.push([e,t,n]),!e.once)throw new Error("Target does not allow once");e.once(t,n)}},{key:"listen",value:function(e,t,n){this._listeners.push([e,t,n]),e.on?e.on(t,n):e.addListener?e.addListener(t,n):e.addEventListener&&e.addEventListener(t,n)}},{key:"destroy",value:function(){this._listeners.forEach((function(e){var t=(0,i.Z)(e,3),n=t[0],r=t[1],a=t[2];n.removeListener?n.removeListener(r,a):n.removeEventListener&&n.removeEventListener(r,a)}))}}]),e}(),f=n(62255);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var h=function(e){(0,s.Z)(n,e);var t=m(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onSubmit=function(t){e.props.hideOnSubmit&&e.props.hideModal&&e.props.hideModal(),e.props.onSubmit(t)},e.getBodyAndTitle=function(){var t=e.props.children;if(!Array.isArray(t)&&d.Children.count(t)<2)throw new Error("Expected title and body in ActionModal");var n=t[0];if(Array.isArray(n))throw new Error("title child cannot be an array");var r=d.cloneElement(n,{className:"action-modal-title "+("undefined"!==typeof n.className?n.className:"")}),i=t[1];if(Array.isArray(i))throw new Error("body child cannot be an array");return[r,d.cloneElement(i,{className:"action-modal-body"+(i.className||"")})]},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this._eventSubscriber=new p,this._eventSubscriber.listen(window.document,"keydown",(function(t){13!==t.keyCode||e.props.submitWithoutCtrl&&!t.ctrlKey&&!t.metaKey||e.props.disableSubmit||e.props.onSubmit()}))}},{key:"componentWillUnmount",value:function(){this._eventSubscriber&&this._eventSubscriber.destroy(),this._eventSubscriber=null}},{key:"render",value:function(){var e=this,t=this.getBodyAndTitle(),n=(0,i.Z)(t,2),a=n[0],o=n[1];return(0,r.jsxs)("div",{style:this.props.modalStyle,className:"jsx-1765419995 action-modal",children:[(0,r.jsx)(u.default,{id:"2914610048",children:[".action-modal.jsx-1765419995{color:var(--foreground-default);}"]}),(0,r.jsx)(u.default,{id:"2405390514",children:[".action-modal.jsx-1765419995{padding:35px 25px 35px;display:grid;grid-row-gap:var(--space-16);}",".action-modal-buttons.jsx-1765419995{display:grid;grid-row-gap:var(--space-8);}",".action-modal.jsx-1765419995 .action-modal-title{font-size:20px;}",".action-modal.jsx-1765419995 .action-modal-body{font-size:16px;padding-top:30px;line-height:22px;}","@media screen and (min-width:400px){.action-modal-buttons.jsx-1765419995{grid-auto-flow:column;grid-column-gap:20px;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}.action-modal-buttons.jsx-1765419995>button:first-child{-webkit-order:1;-ms-flex-order:1;order:1;}}","@media screen and (min-width:600px){.action-modal.jsx-1765419995{padding:75px 50px 75px;}}"]}),a,o,(0,r.jsxs)("div",{className:"jsx-1765419995 action-modal-buttons",children:[(0,r.jsx)(f.Z,{color:this.props.deleteStyle?"negative":"primary",disabled:this.props.disableSubmit,onClick:this.onSubmit,filled:!0,children:this.props.submitLabel||"Ok"},"actionModalCta"),!this.props.hideCancel&&(0,r.jsx)(f.Z,{onClick:function(){e.props.onCancel&&e.props.onCancel(),e.props.hideModal&&e.props.hideModal()},children:this.props.cancelLabel||"Cancel"},"cancel")]})]})}}]),n}(d.Component);h.defaultProps={autoFocus:!1}},70641:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(35944),i=n(65988),a=n(62255),o=n(77935),s=n(25763),l=n(67645);function c(e){var t=e.prompt,n=e.desc,c=e.confirmText,u=e.loading,d=void 0!==u&&u,p=e.onCancel,f=e.onConfirm,m=e.danger;return(0,r.BX)("div",{className:"jsx-4293994902 content",children:[(0,r.BX)(s.gC,{spacing:4,children:[(0,r.BX)(s.gC,{spacing:1,children:[(0,r.tZ)(o.Z,{level:3,children:t}),(0,r.tZ)(l.Z,{foreground:2,children:n})]}),(0,r.BX)(s.Ug,{spacing:1,children:[p&&(0,r.tZ)(a.Z,{autoFocus:!0,loading:d,onClick:p,children:"Cancel"}),(0,r.tZ)(a.Z,{color:m?"negative":"primary",filled:!0,loading:d,onClick:f,children:c||"Ok"})]})]}),(0,r.tZ)(i.default,{id:"4293994902",children:[".content.jsx-4293994902{padding:var(--space-32);}"]})]})}},73426:function(e,t,n){"use strict";var r=n(85893),i=n(26265),a=n(38347),o=n(74047),s=n(52700),l=n(33814),c=n(44102),u=n(20775),d=n(65988),p=n(67294),f=n(47121);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var v=function(e){(0,l.Z)(n,e);var t=g(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.focus()}},{key:"focus",value:function(){this.el&&this.el.focus()}},{key:"blur",value:function(){this.el&&this.el.blur()}},{key:"select",value:function(){this.el&&this.el.select()}},{key:"render",value:function(){var e=this,t=this.props,n=t.inputTriggerProps,i=t.tall,o=(0,a.Z)(t,["inputTriggerProps","tall"]),s=n?function(e){return(0,r.jsx)(f.Z,h(h({},n),{},{children:e}))}:function(e){return e};return(0,r.jsxs)(r.Fragment,{children:[s((0,r.jsx)("textarea",h(h({ref:function(t){return e.el=t}},o),{},{className:"jsx-2349401589 "+d.default.dynamic([["3738306157",[i?250:60]]])+" form-textarea"}))),(0,r.jsx)(d.default,{id:"2349401589",children:[".form-textarea.jsx-2349401589{resize:vertical;background-color:var(--background-default);color:var(--foreground-default);}",".form-textarea.jsx-2349401589:focus{border-color:var(--accent-primary-default);}",".form-textarea[disabled].jsx-2349401589{background-color:var(--background-root);color:var(--foreground-dimmer);opacity:0.5;}"]}),(0,r.jsx)(d.default,{id:"3738306157",dynamic:[i?250:60],children:[".form-textarea.__jsx-style-dynamic-selector{color:var(--foreground-default);width:100%;max-width:100%;min-width:100%;min-height:".concat(i?250:60,"px;height:100%;box-sizing:border-box;padding:var(--space-8);outline:0px;font-size:15px;border:1px solid var(--foreground-dimmest);line-height:1.4;border-radius:var(--border-radius-4);}"),".form-textarea.__jsx-style-dynamic-selector:focus{outline:0 none;}",".form-textarea[readonly].__jsx-style-dynamic-selector{cursor:not-allowed;}"]})]})}}]),n}(p.Component);v.defaultProps={autoComplete:"off",required:!1},t.Z=v},7512:function(e,t,n){"use strict";n.d(t,{Aw:function(){return x},ck:function(){return w}});var r=n(26265),i=n(28140),a=n(32292),o=n(35944),s=n(65988),l=n(67294),c=n(41756),u=n(94184),d=n.n(u),p=n(37348),f=n.n(p),m=n(55873),h=n(58125),g=n(87644),v=n(27409);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=e.children;return(0,o.BX)("div",{className:"jsx-2063872532",children:[t,(0,o.tZ)(s.default,{id:"2063872532",children:["div.jsx-2063872532{padding:var(--space-4) var(--space-8);color:var(--foreground-dimmest);font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;}"]})]})}function w(e){var t=e.title,n=e.iconUrl,r=e.filter,i=e.isNew,a=e.active;return(0,o.BX)("div",{className:"jsx-69768995 "+(d()("item",{active:a})||""),children:[n?(0,o.tZ)("div",{className:"jsx-69768995 item-icon",children:(0,o.tZ)(v.Z,{iconUrl:n,size:16,alt:t})}):null,(0,o.tZ)("div",{className:"jsx-69768995 item-text",children:r?(0,o.tZ)(h.fs,{source:t,match:r}):t}),i?(0,o.tZ)("div",{className:"jsx-69768995 new",children:"new"}):null,(0,o.tZ)(s.default,{id:"69768995",children:[".item.jsx-69768995{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;font-size:var(--font-size-subhead-default);padding:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:40px;overflow:hidden;border-radius:var(--border-radius-4);}",".item-icon.jsx-69768995{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--space-8);}",".item-text.jsx-69768995{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".active.jsx-69768995{background-color:var(--background-highest);}",".new.jsx-69768995{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;margin-left:4px;border-radius:var(--border-radius-4);font-size:var(--font-size-small);padding:2px 6px;color:var(--white);background-color:var(--accent-primary-default);}"]})]})}t.ZP=function(e){var t=l.useState(e.initialSelectedItem),n=(0,a.Z)(t,2),r=n[0],u=n[1],p="";e.initialSelectedItem&&(p=e.initialSelectedItem.key);var v=l.useState(p),b=(0,a.Z)(v,2),k=b[0],Z=b[1],j=(0,m.STr)({variables:{includeInterestedIn:!0},skip:!e.withMostUsed}).data,O=l.useCallback((function(e){Z(e)}),[Z]),E=l.useMemo((function(){return j&&j.currentUser&&j.currentUser.languages?j.currentUser.languages.slice(0,7).map((function(e){return f().get(e.key)})):[]}),[j]),_=l.useMemo((function(){if(k)return f().search(k).slice(0,5);var e=f().allSupportedByPopularity({includeAliases:!0});return[].concat((0,i.Z)(E),(0,i.Z)(e.filter((function(e){return!E.find((function(t){return t.key===e.key&&t.displayName===e.displayName}))}))))}),[k,E]),C=l.useMemo((function(){var t=(0,i.Z)(_);return e.filterResults?t.filter(e.filterResults):t}),[_,e.filterResults]),S=l.useMemo((function(){return r?"key"in r?{src:r.icon||void 0,alt:r.displayName}:void 0:null}),[r]),P=l.useRef(null);return l.useEffect((function(){e.autoFocus&&P.current&&!r&&P.current.focus()}),[e.autoFocus]),(0,o.tZ)(c.ZP,{id:"languageSelector",initialHighlightedIndex:0,defaultHighlightedIndex:0,initialSelectedItem:r,selectedItem:r,itemToString:function(e){return e?e.displayName:""},onInputValueChange:O,onOuterClick:function(e){return(0,e.closeMenu)()},onChange:function(t){t&&(P.current&&P.current.blur(),u(t),e.onSelect(t))},children:function(t){var n=t.getInputProps,r=t.getMenuProps,i=t.getItemProps,a=t.highlightedIndex,c=t.isOpen,u=t.openMenu,p=t.closeMenu,f=t.inputValue,m=t.clearSelection;return(0,o.BX)("div",{className:"jsx-2121670637 "+(d()("language-selector",{"is-open":c,"has-error":e.hasError})||""),children:[(0,o.BX)("div",{className:"jsx-2121670637 input-wrap",children:[S&&(0,o.tZ)("img",y(y({},S),{},{width:18,className:"jsx-2121670637 selected-icon"})),(0,o.tZ)("input",y(y({},n({ref:P,placeholder:e.placeholder||"Search for a language",disabled:e.disabled,onFocus:function(e){e.target.value&&e.target.select(),Z(""),u()},onBlur:e.onBlur,onChange:function(e){""===e.target.value&&m()}})),{},{className:"jsx-2121670637"})),(0,o.tZ)("div",{onClick:function(e){(0,g.track)(g.events.CREATION_FLOW_LANGUAGE_DROPDOWN_ARROW_CLICKED),c?p():P.current&&P.current.focus()},className:"jsx-2121670637 arrow-icon-wrap",children:(0,o.tZ)(h.e0,{color:"var(--foreground-default)",flipped:c})})]}),(0,o.tZ)("div",y(y({},r()),{},{className:"jsx-2121670637 menu-anchor",children:c&&(0,o.tZ)("div",{className:"jsx-2121670637 menu",children:C?(0,o.tZ)("ul",{className:"jsx-2121670637",children:C.map((function(e,t){var n=a===t;return(0,o.BX)(l.Fragment,{children:[!f&&0===t&&E.length?(0,o.tZ)(x,{children:"favorites"}):null,!f&&E.length&&t===E.length-1?(0,o.tZ)(x,{children:"all languages"}):null,(0,o.tZ)("li",y(y({},i({index:t,item:e})),{},{className:"jsx-2121670637",children:(0,o.tZ)(w,{isNew:Boolean(e.isNew),iconUrl:e.icon,title:e.displayName,active:n,filter:f||void 0})}))]},e.key+e.displayName)}))}):null})})),(0,o.tZ)(s.default,{id:"2121670637",children:[".language-selector.jsx-2121670637{width:100%;position:relative;border-radius:var(--border-radius-4);}",".input-wrap.jsx-2121670637{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".selected-icon.jsx-2121670637{position:absolute;left:8px;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);pointer-events:none;}",".arrow-icon-wrap.jsx-2121670637{position:absolute;right:0;top:0;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 10px;width:30px;cursor:pointer;}",".arrow-icon-wrap.jsx-2121670637>svg{display:block;width:100%;height:auto;}","input.jsx-2121670637{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:var(--font-size-subhead-default);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:100%;outline:0 none;background-color:transparent;border:1px solid var(--background-highest);margin:0;color:inherit;padding:var(--space-8);border-radius:var(--border-radius-4);-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}","input[disabled].jsx-2121670637{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.5;}","input.jsx-2121670637:focus{border-color:var(--accent-primary-default);}",".selected-icon.jsx-2121670637+input.jsx-2121670637{padding-left:32px;}",".has-error.jsx-2121670637 input.jsx-2121670637:not(:focus){border-color:var(--accent-negative-default);}",".is-open.jsx-2121670637 input.jsx-2121670637{border-bottom-right-radius:0;border-bottom-left-radius:0;border-bottom-color:transparent;}","ul.jsx-2121670637{list-style:none;}",".menu-anchor.jsx-2121670637{position:absolute;width:100%;height:0;bottom:0;z-index:1000;}",".menu.jsx-2121670637{position:absolute;top:0;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--accent-primary-default);border-top:0 none;max-height:320px;overflow-y:auto;border-bottom-left-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);padding:var(--space-8);z-index:9999;}","li.jsx-2121670637{cursor:pointer;}"]})]})}})}},92456:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(67294);function i(e){var t=r.useRef(null),n=r.useRef(e);return r.useEffect((function(){n.current=e}),[e]),function(e){t.current&&t.current.disconnect(),e&&window.IntersectionObserver&&(t.current=new window.IntersectionObserver((function(e){e[0].isIntersecting&&n.current()})),t.current.observe(e))}}},8506:function(e,t,n){"use strict";n.d(t,{gL:function(){return m},dp:function(){return v},_Y:function(){return b}});var r=n(32292),i=n(809),a=n.n(i),o=n(92447),s=n(87644),l=n(49704),c=n.n(l);function u(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p="reachability",f=["https://repl.it/data/t/reachability","https://replit.com/data/t/reachability","https://reachability.util.repl.co/","https://reachability--util.repl.co/","https://d0a4834b-dc04-495b-a2af-28d2b9646838.id.repl.co/","https://d0a4834b-dc04-495b-a2af-28d2b9646838.id.replitusercontent.com/"];function m(){return h.apply(this,arguments)}function h(){return(h=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage){e.next=2;break}return e.abrupt("return");case 2:setTimeout((0,o.Z)(a().mark((function e(){var t,n,r,i,o,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(864e5,!((t=localStorage.getItem(p))&&(new Date).getTime()-JSON.parse(t)<864e5)){e.next=4;break}return e.abrupt("return");case 4:n=u(f),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=28;break}return i=r.value,e.prev=9,e.next=12,window.fetch(i,{credentials:"omit",redirect:"error",referrerPolicy:"no-referrer",cache:"no-store"});case 12:if(200===(o=e.sent).status){e.next=15;break}throw new Error("unexpected status: ".concat(o.status));case 15:return e.next=17,o.text();case 17:if("reachable"===(l=e.sent)){e.next=20;break}throw new Error("unexpected body: ".concat(l));case 20:(0,s.track)(s.events.REACHABILITY,{status:"success",destination:i}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(9),(0,s.track)(s.events.REACHABILITY,{status:"fail",destination:i,error:e.t0.message});case 26:e.next=7;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(5),n.e(e.t1);case 33:return e.prev=33,n.f(),e.finish(33);case 36:localStorage.setItem(p,JSON.stringify((new Date).getTime()));case 37:case"end":return e.stop()}}),e,null,[[5,30,33,36],[9,23]])}))),3e4);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=new Map;function v(e,t){var n=g.get(e.replId);n?n.cbs.add(t):((n={timeout:null,delay:0,cbs:new Set,meta:e}).cbs.add(t),g.set(e.replId,n),function(e){var t=function(){var n=(0,o.Z)(a().mark((function n(){var r,i,o,s,l,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(e.meta);case 2:r=n.sent,i=!1,o=u(r.values()),n.prev=5,o.s();case 7:if((s=o.n()).done){n.next=14;break}if(!s.value){n.next=12;break}return i=!0,n.abrupt("break",14);case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(5),o.e(n.t0);case 19:return n.prev=19,o.f(),n.finish(19);case 22:l=u(e.cbs.values());try{for(l.s();!(c=l.n()).done;)(0,c.value)(i)}catch(a){l.e(a)}finally{l.f()}i?(0!==e.delay&&(e.delay=0),e.timeout=setTimeout(t,36e5)):(e.timeout=setTimeout(t,1e3*Math.min(Math.pow(2,e.delay),300)),e.delay++);case 25:case"end":return n.stop()}}),n,null,[[5,16,19,22]])})));return function(){return n.apply(this,arguments)}}();e.timeout=setTimeout(t,5e3)}(n))}function b(e){var t=g.get(e);t&&(g.delete(e),t.timeout&&clearTimeout(t.timeout))}function y(e){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)(a().mark((function e(t){var n,i,o,s,l,d,p,f,m,h,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Map([["dash","https://".concat(t.slug,"--").concat(t.user,".repl.co")],["id","https://".concat(t.replId,".id.repl.co")]]),i=new Map,o=u(n),e.prev=3,o.s();case 5:if((s=o.n()).done){e.next=26;break}return l=(0,r.Z)(s.value,2),d=l[0],p=l[1],f=!0,e.prev=8,e.next=11,window.fetch(p.toString()+"/__proxyproof",{credentials:"omit",redirect:"error",referrerPolicy:"no-referrer",cache:"no-store"});case 11:return 200!==(m=e.sent).status&&(f=!1),e.next=15,m.text();case 15:h=e.sent,(g=c().decode(h))&&g.host===new URL(p).hostname||(f=!1),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),f=!1;case 23:i.set(d,f);case 24:e.next=5;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(3),o.e(e.t1);case 31:return e.prev=31,o.f(),e.finish(31);case 34:return e.abrupt("return",i);case 35:case"end":return e.stop()}}),e,null,[[3,28,31,34],[8,20]])})))).apply(this,arguments)}},1149:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(35944),i=n(32292),a=n(65988),o=n(67294),s=n(87644),l=n(62255),c=n(67645),u=n(90093),d=n(55873),p=n(98124),f=n(25763),m=n(73899),h=n(52577),g=n(78564);function v(e){var t,n,v,b=e.replId,y=(0,u.Z)(),x=y.showConfirm,w=y.showError,k=(0,d.hA$)({variables:{replId:b}}),Z=k.data,j=k.loading,O=k.error,E=(0,d.QNZ)({variables:{replId:b},onError:function(e){return w(e.message)}}),_=(0,i.Z)(E,2),C=_[0],S=_[1],P=(0,d.ooK)({variables:{replId:b},optimisticResponse:{deleteMultiplayerInviteLink:{id:b,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return w(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&x("Join link deleted"):w(e.deleteMultiplayerInviteLink.message)}}),N=(0,i.Z)(P,2),T=N[0],I=N[1],R=S.loading||I.loading,D=o.useRef(null),A="Repl"===(null===Z||void 0===Z||null===(t=Z.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===(n=Z.repl.owner)||void 0===n?void 0:n.__typename),L="Repl"===(null===Z||void 0===Z||null===(v=Z.repl)||void 0===v?void 0:v.__typename)&&Z.repl.inviteUrl?window.location.origin+Z.repl.inviteUrl:null;o.useEffect((function(){S.error&&w(S.error.message),S.data&&(0,s.track)(s.events.MP2_REFRESHED_LINK,{replId:b})}),[S.error,S.data,b,w]);var B=function(){D&&D.current&&D.current.select()},M=function(){return(0,r.BX)("div",{"aria-label":"Anyone on the internet with this link can join and edit this repl","data-microtip-position":"top","data-microtip-size":"medium",role:"tooltip","data-micro":!0,className:"jsx-3457399722 information-icon-container",children:[(0,r.tZ)(m.Z,{}),(0,r.tZ)(a.default,{id:"3457399722",children:[".information-icon-container.jsx-3457399722{margin-left:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;}"]})]})};return j?(0,r.tZ)(c.Z,{children:"loading..."}):O?(0,r.tZ)(c.Z,{children:"Error: please contact support"}):L?(0,r.BX)(f.gC,{align:"stretch",spacing:1,children:[(0,r.tZ)(c.Z,{foreground:2,size:"small",children:(0,r.BX)(f.Ug,{align:"center",children:["Invite ",A?"guests":"friends"," with a join link",M()]})}),(0,r.BX)(f.Ug,{wrap:"nowrap",align:"center",spacing:1,children:[(0,r.tZ)("div",{className:"jsx-4139552869 input-link",children:(0,r.tZ)(p.ZP,{ref:D,readOnly:!0,onChange:function(){return null},value:R?"loading...":L,onClick:B})}),(0,r.tZ)("div",{"aria-label":"Copy","data-microtip-position":"bottom",role:"tooltip",className:"jsx-4139552869",children:(0,r.tZ)(l.Z,{color:"primary",Icon:g.Z,onClick:function(){B(),document.execCommand("copy"),x("Link copied")}})}),(0,r.tZ)("div",{"aria-label":"Delete link","data-microtip-position":"bottom",role:"tooltip",className:"jsx-4139552869",children:(0,r.tZ)(l.Z,{color:"red",Icon:h.Z,onClick:function(e){e.preventDefault(),R||T()}})})]}),(0,r.BX)(c.Z,{size:"small",foreground:2,children:[(0,r.tZ)("a",{onClick:function(e){e.preventDefault(),R||C()},className:"jsx-4139552869",children:"Generate a new link"})," ","(The current one will stop working)"]}),(0,r.tZ)(a.default,{id:"4139552869",children:[".input-link.jsx-4139552869{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}",".input-link.jsx-4139552869 input{cursor:text !important;}"]})]}):(0,r.tZ)("div",{style:{marginTop:"var(--space-8)"},children:(0,r.tZ)(l.Z,{fullWidth:!0,color:"default",onClick:function(){R||C()},children:(0,r.BX)(f.Ug,{align:"center",children:["Generate a join link",M()]})})})}},35122:function(e,t,n){"use strict";n.d(t,{rM:function(){return f},G5:function(){return m},h$:function(){return h}});var r=n(38347),i=n(27261),a=n(56869),o=n.n(a),s=n(44119),l=n.n(s),c=n(80232),u=n(74141);function d(){var e=(0,i.Z)(["\n  mutation ReduxUpdateReplMutation($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        title\n        description\n        language\n        url\n        config {\n          isServer\n          isVnc\n        }\n        isPrivate\n        isStarred\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p=l()(d());function f(e,t){return function(n){n({type:"UPDATE_REPL_REQUEST",id:e,updates:t});var i=(0,c.Y8)(t);if(Array.isArray(i)||"string"===typeof i)throw new Error("Repl updates should be an object");var a=t.config,o=(0,r.Z)(t,["config"]);a&&("undefined"!==typeof a.isServer&&(o.isServer=a.isServer),"undefined"!==typeof a.isVnc&&(o.isVnc=a.isVnc)),o.id=e,u.l.mutate({mutation:p,variables:{input:o}}).then((function(t){var r=t.data,i=t.errors;i&&i.length||!r.updateRepl||!r.updateRepl.repl?n({type:"UPDATE_REPL_FAILURE",id:e}):n({type:"UPDATE_REPL_SUCCESS",repl:r.updateRepl.repl})}))}}function m(e){return function(t){return t({type:"UPDATE_REPL_SUCCESS",repl:e})}}function h(e){return{type:"FETCH_REPL_SUCCESS",repl:o()(e)}}},89475:function(e,t,n){"use strict";var r=n(28140),i=n(26265),a=n(57848),o=n(51626);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}a.Z.register("repls",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REPL_SUCCESS":return l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},t.repl.id,t.repl))});case"UPDATE_REPL_SUCCESS":return l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},t.repl.id,l(l({},e.data[t.repl.id]),t.repl)))});case"ENSURE_FILE":var n=(0,o.Uo)(t.path),a=(0,o.Xp)(t.path),s=e.data[n];return!s||s.fileNames.includes(a)?e:l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},n,l(l({},s),{},{fileNames:[].concat((0,r.Z)(s.fileNames),[a])})))});case"MOVE_FILE_SUCCESS":var c=(0,o.Uo)(t.to),u=e.data[c];if(!u||c!==(0,o.Uo)(t.from))return e;var d=(0,o.Xp)(t.from),p=(0,o.Xp)(t.to);return l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},c,l(l({},u),{},{fileNames:[].concat((0,r.Z)(u.fileNames.filter((function(e){return e!==d}))),[p])})))});case"DELETE_FILE_SUCCESS":var f=(0,o.Uo)(t.path),m=(0,o.Xp)(t.path),h=e.data[f];return h?l(l({},e),{},{data:l(l({},e.data),{},(0,i.Z)({},f,l(l({},h),{},{fileNames:h.fileNames.filter((function(e){return e!==m}))})))}):e}return e})),a.Z.register("replsByUrl",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_REPL_SUCCESS":case"FETCH_REPL_SUCCESS":return l(l({},e),{},(0,i.Z)({},t.repl.url,t.repl.id))}return e})),a.Z.register("replsByUser",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REPL_SUCCESS":return e[t.repl.userId]&&e[t.repl.userId].includes(t.repl.id)?e:l(l({},e),{},(0,i.Z)({},t.repl.userId,(e[t.repl.userId]||[]).concat([t.repl.id])))}return e}))},32997:function(e,t,n){"use strict";n.d(t,{xd:function(){return c},sX:function(){return u},EZ:function(){return p},or:function(){return f},Sy:function(){return m}});var r=n(32292),i=n(28140),a=n(26470),o=n(12195),s="/repls",l="folder",c=function(e){return{as:a.join.apply(void 0,[s].concat((0,i.Z)(e.pathnames.map((function(e,t){return 0===t&&e.startsWith("@")?e:encodeURIComponent(e)}))))),href:"/replsDashboard"}},u=function(e){if(e.startsWith(s)&&e.length>s.length){var t=e.split("?"),n=(0,r.Z)(t,1)[0];return decodeURIComponent(n.substr(s.length+1))}return""},d={pathnames:[""],text:"(home)"},p=function(e){switch(e){case"":return[d];case"multiplayer":return[d,{text:"Multiplayer repls",pathnames:["",e]}];default:return e.startsWith("@")?[d].concat((0,i.Z)(e.split("/").map((function(e,t,n){return{pathnames:(0,i.Z)(n.slice(0,t+1)),text:e}})))):[d].concat((0,i.Z)(e.split("/").filter((function(e){return e!==l})).map((function(e,t,n){return{pathnames:[l].concat((0,i.Z)(n.slice(0,t+1))),text:e}}))))}},f=function(e){var t=e.bytes/1e3;return t<1e3?"".concat(Math.round(t)," KB"):"".concat((t/1e3).toFixed(1)," MB")},m=function(e){return(0,o.Z)(e,new Date,{addSuffix:!0})}},66676:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(32292),i=n(67294),a=n(8346);function o(){var e=(0,a.Z)().session,t=i.useState(e.getPreviewedFile()),n=(0,r.Z)(t,2),o=n[0],s=n[1];return i.useEffect((function(){return s(e.getPreviewedFile()),e.onPreviewedFileChanged(s)}),[e]),o}},7104:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(35944),i=n(65988),a=(n(67294),n(67645));function o(e){var t=e.label;return(0,r.BX)(a.Z,{size:"xsmall",children:[(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":t,className:"jsx-3345761734 help",children:"?"}),(0,r.tZ)(i.default,{id:"3345761734",children:[".help.jsx-3345761734{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;}"]})]})}},46427:function(e,t,n){"use strict";var r=n(35944),i=n(32292),a=n(65988),o=n(67294),s=n(13029);t.Z=function(e){var t=e.id,n=e.isOn,l=e.onChange,c=o.useState(t),u=(0,i.Z)(c,2),d=u[0],p=u[1];return o.useEffect((function(){p(t||Math.random().toString(36).split(".")[1])}),[t]),(0,r.BX)("label",{htmlFor:d,className:"jsx-2525248183 checkbox",children:[(0,r.tZ)("input",{id:d,onChange:l,type:"checkbox",checked:n,className:"jsx-2525248183"}),(0,r.tZ)("div",{className:"jsx-2525248183 overlay",children:(0,r.tZ)("div",{className:"jsx-2525248183 icon",children:(0,r.tZ)(s.Z,{})})}),(0,r.tZ)(a.default,{id:"2525248183",children:[".checkbox.jsx-2525248183 input.jsx-2525248183{position:absolute;opacity:0;}",".overlay.jsx-2525248183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;height:16px;width:16px;background-color:var(--background-higher);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);-webkit-transition:background-color 0.2s;transition:background-color 0.2s;color:var(--foreground-dimmer);cursor:pointer;}",".overlay.jsx-2525248183:hover{background-color:var(--background-higher);}",".icon.jsx-2525248183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;opacity:0;-webkit-transition:opacity 0.1s;transition:opacity 0.1s;}",".overlay.jsx-2525248183:hover .icon.jsx-2525248183{opacity:1;}",".overlay.jsx-2525248183:active{background-color:var(--background-highest);}",".checkbox.jsx-2525248183 input.jsx-2525248183:checked~.overlay.jsx-2525248183{background-color:var(--accent-primary-default);opacity:1;border-color:var(--accent-primary-default);color:var(--white);}",".checkbox.jsx-2525248183 input.jsx-2525248183:checked~.overlay.jsx-2525248183 .icon.jsx-2525248183{opacity:1;}"]})]})}},78564:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(26265),i=n(35944),a=(n(67294),n(61951));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,i.BX)(a.Z,s(s({},e),{},{children:[(0,i.tZ)("path",{d:"M10 13c.4295.5741.9774 1.0491 1.6066 1.3929.6291.3438 1.3249.5482 2.0401.5994.7151.0512 1.4329-.052 2.1046-.3026.6718-.2505 1.2818-.6427 1.7887-1.1497l3-3c.9108-.94305 1.4148-2.20606 1.4034-3.51704-.0114-1.31098-.5373-2.56505-1.4643-3.49209-.927-.92704-2.1811-1.45288-3.4921-1.46427-1.311-.0114-2.574.49258-3.517 1.40337l-1.72 1.71",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("path",{d:"M14.0002 11.0002c-.4295-.5741-.9774-1.04916-1.6066-1.39291-.6291-.34376-1.3249-.54818-2.0401-.5994-.71509-.05122-1.43289.05197-2.10465.30255-.67175.25059-1.28176.64272-1.78865 1.14976l-3 3c-.91079.943-1.41476 2.206-1.40337 3.517.01139 1.311.53724 2.5651 1.46428 3.4921.92704.9271 2.1811 1.4529 3.49208 1.4643 1.31099.0114 2.574-.4926 3.51701-1.4034l1.71-1.71",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},63022:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(26265),i=n(35944),a=(n(67294),n(61951));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,i.tZ)(a.Z,s(s({},e),{},{children:(0,i.tZ)("path",{d:"M17.4558 10.25H16.3106C15.9706 8.98212 15.268 7.83149 14.2827 6.92885C13.2974 6.0262 12.0688 5.40774 10.7366 5.14374C9.40444 4.87974 8.02206 4.98079 6.74655 5.43539C5.47104 5.89 4.35355 6.67994 3.52106 7.71546C2.68857 8.75097 2.17446 9.99054 2.03715 11.2933C1.89984 12.5961 2.14483 13.9098 2.74429 15.0852C3.34375 16.2606 4.27364 17.2506 5.4283 17.9426C6.58295 18.6346 7.91607 19.001 9.27618 19H17.4558C18.661 19 19.8168 18.5391 20.669 17.7186C21.5212 16.8981 22 15.7853 22 14.625C22 13.4647 21.5212 12.3519 20.669 11.5314C19.8168 10.7109 18.661 10.25 17.4558 10.25Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},53375:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(26265),i=n(35944),a=(n(67294),n(61951));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,i.BX)(a.Z,s(s({},e),{},{children:[(0,i.tZ)("path",{d:"M18 21C19.6569 21 21 19.6569 21 18C21 16.3431 19.6569 15 18 15C16.3431 15 15 16.3431 15 18C15 19.6569 16.3431 21 18 21Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("path",{d:"M6 9C7.65685 9 9 7.65685 9 6C9 4.34315 7.65685 3 6 3C4.34315 3 3 4.34315 3 6C3 7.65685 4.34315 9 6 9Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("path",{d:"M13 6H16C16.5304 6 17.0391 6.21071 17.4142 6.58579C17.7893 6.96086 18 7.46957 18 8V15",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("path",{d:"M6 9V21",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},77491:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(26265),i=n(35944),a=(n(67294),n(61951));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,i.BX)(a.Z,s(s({},e),{},{children:[(0,i.tZ)("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15V15Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},40320:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(26265),i=n(35944),a=(n(67294),n(61951));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,i.tZ)(a.Z,s(s({},e),{},{children:(0,i.tZ)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",strokeWidth:"2"})}))}},95445:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(26265),i=n(35944),a=(n(67294),n(61951));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,i.tZ)(a.Z,s(s({},e),{},{children:(0,i.tZ)("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21M20 8V14M23 11H17M12.5 7C12.5 9.20914 10.7091 11 8.5 11C6.29086 11 4.5 9.20914 4.5 7C4.5 4.79086 6.29086 3 8.5 3C10.7091 3 12.5 4.79086 12.5 7Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},86659:function(e,t,n){"use strict";var r=n(5152);t.Z=(0,r.default)((function(){return Promise.all([n.e(4885),n.e(6346),n.e(9710),n.e(7539),n.e(6063),n.e(1762),n.e(5569)]).then(n.bind(n,24275)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[24275]},modules:["./ReplTemplateForm"]}})},58930:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(26265),i=n(35944),a=(n(67294),n(65988)),o=n(51537),s=function(e){var t=e.type,n=void 0===t?"default":t,r=e.onClick,s=e.label,l=e.icon,c=e.lite,u=e.cyName,d="run"===n?{backgroundColor:"var(--accent-positive-dimmest)",backgroundColorHover:"var(--accent-positive-default)",backgroundColorActive:"var(--accent-positive-dimmer)",borderColorActive:"var(--accent-positive-stronger)",textColor:"var(--accent-positive-stronger)",textColorHover:"var(--white)"}:{backgroundColor:"var(--background-higher)",backgroundColorHover:"var(--background-highest)",backgroundColorActive:"var(--outline-dimmest)",borderColorActive:"var(--outline-default)",textColor:"var(--foreground-dimmer)",textColorHover:"var(--foreground-default)"},p=d.backgroundColor,f=d.backgroundColorHover,m=d.backgroundColorActive,h=d.borderColorActive,g=d.textColor,v=d.textColorHover;return(0,i.BX)("div",{role:"button","data-cy":u,onClick:r,className:a.default.dynamic([["3775718333",[p,p,g,f,v,h,m,m,o.j.tabletMax,c?"100px":"60px",c?"100px":"60px"]]])+" ws-header-cta",children:[(0,i.tZ)("div",{className:a.default.dynamic([["3775718333",[p,p,g,f,v,h,m,m,o.j.tabletMax,c?"100px":"60px",c?"100px":"60px"]]])+" ws-header-cta-icon",children:l}),(0,i.tZ)("span",{className:a.default.dynamic([["3775718333",[p,p,g,f,v,h,m,m,o.j.tabletMax,c?"100px":"60px",c?"100px":"60px"]]])+" ws-header-cta-label",children:s}),(0,i.tZ)(a.default,{id:"3775718333",dynamic:[p,p,g,f,v,h,m,m,o.j.tabletMax,c?"100px":"60px",c?"100px":"60px"],children:[".ws-header-cta.__jsx-style-dynamic-selector{border:1px solid ".concat(p,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:100%;width:100px;cursor:pointer;position:relative;-webkit-transition:color 0.2s,background-color 0.2s;transition:color 0.2s,background-color 0.2s;z-index:1;border-radius:var(--border-radius-8);background-color:").concat(p,";color:").concat(g,";font-weight:var(--font-weight-medium);font-size:var(--font-size-subhead-default);}"),".ws-header-cta.__jsx-style-dynamic-selector:hover{background-color:".concat(f,";color:").concat(v,";}"),".ws-header-cta.__jsx-style-dynamic-selector:active{border:1px solid ".concat(h,";background-color:").concat(m,";}"),".ws-header-cta.__jsx-style-dynamic-selector:focus{box-shadow:0 0 0 2px ".concat(m,";}"),".ws-header-cta-label.__jsx-style-dynamic-selector{vertical-align:middle;text-align:center;line-height:100%;text-transform:capitalize;}",".ws-header-cta-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","@media screen and (max-width:".concat(o.j.tabletMax,"px){.ws-header-cta.__jsx-style-dynamic-selector{max-width:").concat(c?"100px":"60px",";min-width:").concat(c?"100px":"60px",";}.ws-header-cta-label.__jsx-style-dynamic-selector{display:none;}.ws-header-cta-icon.__jsx-style-dynamic-selector{margin-right:0;}}")]})]})},l=n(51671),c=n(61910),u=n(40320);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){var t=e.runState,n=e.onClick,a=e.lite,o=function(e){switch(e){case"loading":return{label:"working",icon:(0,i.tZ)(l.Z,{})};case"idle":return{label:"run",type:"run",icon:(0,i.tZ)(c.Z,{filled:!0})};case"running":return{label:"stop",icon:(0,i.tZ)(u.Z,{filled:!0})};case"stopping":return{label:"stopping",icon:(0,i.tZ)(l.Z,{})}}}(t),p="idle"===t?"language-page-run-button":void 0;return(0,i.tZ)(s,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({lite:a,onClick:n,cyName:p},o),o.label)}},76672:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(32292),i=n(67294),a=n(53326),o=n(87644),s=n(16578);function l(e){var t=e.autoFocus,n=e.onShellKey,l=e.container,c=e.createXtermProps,u=(0,s.Z)({createXtermProps:c}),d=(0,r.Z)(u,2),p=d[0],f=d[1],m=(0,a.Z)({service:"shell",container:l});return i.useEffect((function(){if(m.channel&&p){var e=p.onKey((function(e){var t=e.key,r=e.domEvent;"\r"===t&&(0,o.track)(o.events.SHELL_COMMAND_EVALED),n&&n(r)})),t=p.onData((function(e){m.channel&&"closed"!==m.channel.status&&m.channel.send({input:e})}));m.channel.onCommand((function(e){e.output&&p.write(e.output)}));var r=function(){m.channel&&"open"===m.channel.status&&m.channel.send({resizeTerm:p.getSize()})},i=p.onResize(r);return r(),function(){e.dispose(),t.dispose(),i.dispose()}}}),[m.channel,p,n]),i.useEffect((function(){t&&p&&p.focus()}),[t,p]),[p,f]}},6668:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Vv}});var r={};n.r(r),n.d(r,{Component:function(){return er},reducer:function(){return $n}});var i={};n.r(i),n.d(i,{Component:function(){return xr},createOtOpsForEdits:function(){return pr},parseDotReplit:function(){return dr}});var a={};n.r(a),n.d(a,{Component:function(){return Pr},reciever:function(){return Ir},reducer:function(){return Rr}});var o={};n.r(o),n.d(o,{Component:function(){return ii},reducer:function(){return ai}});var s={};n.r(s),n.d(s,{Component:function(){return sa},reciever:function(){return ea},reducer:function(){return la}});var l={};n.r(l),n.d(l,{Component:function(){return ma}});var c={};n.r(c),n.d(c,{Component:function(){return wa},reducer:function(){return xa}});var u={};n.r(u),n.d(u,{Component:function(){return Ea}});var d={};n.r(d),n.d(d,{Component:function(){return Fa},receiver:function(){return Ua},reducer:function(){return za}});var p={};n.r(p),n.d(p,{Component:function(){return Ha},reducer:function(){return Ga}});var f={};n.r(f),n.d(f,{Component:function(){return to},receiver:function(){return $a}});var m={};n.r(m),n.d(m,{Component:function(){return so}});var h={};n.r(h),n.d(h,{Component:function(){return Mo},receiver:function(){return Bo},reducer:function(){return Lo}});var g={};n.r(g),n.d(g,{Component:function(){return Vo},default:function(){return Go},receiver:function(){return Go},reducer:function(){return Ho}});var v={};n.r(v),n.d(v,{Component:function(){return Jo},reducer:function(){return Qo}});var b={};n.r(b),n.d(b,{Component:function(){return as},receiver:function(){return rs}});var y={};n.r(y),n.d(y,{Component:function(){return ds}});var x={};n.r(x),n.d(x,{Component:function(){return ks},receiver:function(){return xs}});var w={};n.r(w),n.d(w,{Component:function(){return Us},receiver:function(){return Bs}});var k={};n.r(k),n.d(k,{Component:function(){return zs}});var Z={};n.r(Z),n.d(Z,{Component:function(){return Sl}});var j={};n.r(j),n.d(j,{Component:function(){return rd},receiver:function(){return $u}});var O={};n.r(O),n.d(O,{Component:function(){return hd},receiver:function(){return bd}});var E={};n.r(E),n.d(E,{Component:function(){return ff},receiver:function(){return wf},reducer:function(){return kf}});var _={};n.r(_),n.d(_,{Component:function(){return Zf}});var C={};n.r(C),n.d(C,{Component:function(){return pm}});var S={};n.r(S),n.d(S,{Component:function(){return Ym}});var P={};n.r(P),n.d(P,{Component:function(){return ih}});var N={};n.r(N),n.d(N,{Component:function(){return Kh},receiver:function(){return Gh}});var T={};n.r(T),n.d(T,{Component:function(){return vg}});var I={};n.r(I),n.d(I,{Component:function(){return xg}});var R={};n.r(R),n.d(R,{Component:function(){return Mg}});var D={};n.r(D),n.d(D,{Component:function(){return zg}});var A={};n.r(A),n.d(A,{Component:function(){return Hg}});var L=n(32292),B=n(35944),M=n(809),U=n.n(M),X=n(92447),F=n(74047),z=n(52700),V=n(4706),H=n(33814),G=n(44102),W=n(20775),K=n(26265),q=n(65988);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(57848).Z.register("replEnvironment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isForking:!1,activeReplId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_REPL_ID":return Q(Q({},e),{},{activeReplId:t.replId});case"SET_IS_FORKING":return Q(Q({},e),{},{isForking:t.isForking});default:return e}}));n(89475);var J=n(56869),$=n.n(J),ee=n(67294),te=n(63805),ne=n(8679),re=n.n(ne),ie=n(14890),ae=n(11163),oe=n(55405);function se(e){return{type:"SET_ACTIVE_REPL_ID",replId:e.replId}}var le=n(21093),ce=n(75237),ue=n(71171),de=n.n(ue),pe=n(37348),fe=n.n(pe),me=n(51537),he=n(62255),ge=n(67645),ve=n(25763),be=n(82106),ye=n(14692),xe=n(55873),we=n(74833);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e){var t,n,r=e.isVisible,i=e.children,a=e.onDismiss,o=e.tooltipProps,s=(0,ye.Z)(),l=(0,xe.CHr)({variables:{replId:s}}),c=l.data,u=l.loading,d="io-tests-popover-dismissed-".concat(s),p=we.Z.get(d);if(!c||u)return null;var f="Repl"===(null===c||void 0===c||null===(t=c.repl)||void 0===t?void 0:t.__typename)?c.repl:null;if(!f)return null;var m=f.isProjectFork,h=f.ioTests,g=f.owner,v=null!==(n=f.unitTests)&&void 0!==n&&n.tests?f.unitTests.tests:[],b="Team"===(null===g||void 0===g?void 0:g.__typename)&&(null===g||void 0===g?void 0:g.isAdmin),y=h.length>0||v.length>0,x=!b&&m&&!p&&y&&r;return(0,B.BX)("div",Ze(Ze({},x?{}:o),{},{className:"jsx-1536060807 wrapper",children:[(0,B.tZ)(be.Popover,{isOpen:x,align:"center",positions:["right"],padding:10,content:function(e){return(0,B.tZ)(be.ArrowContainer,Ze(Ze({},e),{},{arrowSize:15,arrowColor:"var(--accent-purple-default)",className:"autograder-popover",children:(0,B.BX)("div",{onClick:function(){we.Z.set(d,!0),a()},className:"jsx-1536060807 popover-content",children:[(0,B.tZ)("div",{className:"jsx-1536060807 popover-text",children:(0,B.BX)(ve.gC,{spacing:1,children:[h.length>0?(0,B.BX)(ge.Z,{size:"small",children:["This project has ",(0,B.tZ)("strong",{className:"jsx-1536060807",children:h.length})," ","input/output ",h.length>1?"tests":"test","."]}):(0,B.BX)(ge.Z,{size:"small",children:["This project has ",(0,B.tZ)("strong",{className:"jsx-1536060807",children:v.length})," unit"," ",v.length>1?"tests":"test","."]}),(0,B.tZ)(ge.Z,{size:"small",children:"Run tests to check your work!"})]})}),(0,B.tZ)(ve.Ug,{justify:"end",children:(0,B.tZ)(he.Z,{onClick:function(e){e.stopPropagation(),we.Z.set(d,!0),a()},children:"dismiss"})})]})}))},children:i}),(0,B.tZ)(q.default,{id:"1536060807",children:[".wrapper.jsx-1536060807{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".popover-content.jsx-1536060807{cursor:pointer;width:300px;color:var(--white);padding:var(--space-16);background:white;border-radius:var(--border-radius-4);background:var(--accent-purple-default);box-shadow:var(--shadow-2);}",".popover-text.jsx-1536060807{padding-bottom:var(--space-16);}",".popover-text.jsx-1536060807 span{color:var(--white);}"]})]}))},Oe=n(61951);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e){return(0,B.tZ)(Oe.Z,_e(_e({},e),{},{children:(0,B.tZ)("path",{d:"M3 5V19C3 20.66 7 22 12 22C17 22 21 20.66 21 19V5M3 5C3 6.65685 7.02944 8 12 8C16.9706 8 21 6.65685 21 5M3 5C3 3.34315 7.02944 2 12 2C16.9706 2 21 3.34315 21 5M21 12C21 13.66 17 15 12 15C7 15 3 13.66 3 12",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Se=n(31608),Pe=n(8346),Ne=n(77935),Te=n(8406);function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(e){var t=e.isVisible,n=e.children,r=e.onDismiss,i=e.tooltipProps,a=(0,ye.Z)(),o=(0,Pe.Z)().fs,s=(0,Te.Z)("workspace","enveditorintro"),l=s.shouldDisplay,c=s.register,u=s.dismiss,d=ee.useState(),p=(0,L.Z)(d,2),f=p[0],m=p[1];ee.useEffect((function(){var e=document.querySelector(".replit-ui-theme-root");if(!e)throw new Error("Expected theme root");m(e)}),[]),ee.useEffect((function(){var e=!1;return function(){var n=(0,X.Z)(U().mark((function n(){var r;return U().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.readFile(".env");case 2:if(r=n.sent,!e){n.next=5;break}return n.abrupt("return");case 5:if(!r.error){n.next=7;break}return n.abrupt("return");case 7:t&&c();case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e=!0}}),[a,o,t,c]);var h=l&&Boolean(f);return(0,B.BX)("div",Re(Re({},h?{}:i),{},{className:"jsx-340849484 wrapper",children:[(0,B.tZ)(be.Popover,{isOpen:h,containerParent:f,align:"center",positions:["right"],padding:10,content:function(e){return(0,B.tZ)(be.ArrowContainer,Re(Re({},e),{},{arrowSize:15,arrowColor:"var(--background-root)",children:(0,B.tZ)("div",{className:"jsx-340849484 popover-content",children:(0,B.BX)(ve.gC,{spacing:1,align:"stretch",children:[(0,B.tZ)(Ne.Z,{level:4,children:"Looking for your .env file?"}),(0,B.tZ)(ge.Z,{size:"small",children:"Your environment moved here, click on the icon to the left to check it out and edit your environment."}),(0,B.tZ)(ve.Ug,{justify:"end",children:(0,B.tZ)(he.Z,{color:"primary",onClick:function(e){e.stopPropagation(),u(),r()},children:"dismiss"})})]})})}))},children:n}),(0,B.tZ)(q.default,{id:"340849484",children:[".wrapper.jsx-340849484{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".popover-content.jsx-340849484{width:300px;padding:var(--space-16);background:var(--background-root);border:1px solid var(--background-higher);border-radius:var(--border-radius-4);}",".popover-text.jsx-340849484{padding-bottom:var(--space-16);}"]})]}))},Ae=n(62199);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e){return(0,B.tZ)(Oe.Z,Be(Be({},e),{},{children:(0,B.tZ)("path",{d:"M22.0005 12.4999V8.50012H20.001V6.49987H18V5.50012H20.001V2.50012H17.001V4.49962H15V6.49987H9V4.49962H7.0005V2.50012H4.0005V5.50012H6V6.49987H4.0005V8.50012H2.001V12.4999H0V19.4996H3V15.4999H4.0005V19.4996H6V21.4999H11.001V18.4999H7.0005V17.5001H17.001V18.4999H13.0005V21.4999H18V19.4996H20.001V15.4999H21V19.4996H24V12.4999H22.0005ZM9 11.5001H6V8.50012H9V11.5001ZM18 11.5001H15V8.50012H18V11.5001Z",fill:"currentColor",stroke:"none"})}))}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e){return(0,B.tZ)(Oe.Z,Xe(Xe({},e),{},{children:(0,B.tZ)("path",{d:"M21.8008 7.99963C21.8008 7.99963 21.6055 6.62073 21.0039 6.01526C20.2422 5.21838 19.3906 5.21448 19 5.1676C16.2031 4.96448 12.0039 4.96448 12.0039 4.96448H11.9961C11.9961 4.96448 7.79687 4.96448 5 5.1676C4.60938 5.21448 3.75781 5.21838 2.99609 6.01526C2.39453 6.62073 2.20312 7.99963 2.20312 7.99963C2.20312 7.99963 2 9.62073 2 11.2379V12.7535C2 14.3707 2.19922 15.9918 2.19922 15.9918C2.19922 15.9918 2.39453 17.3707 2.99219 17.9762C3.75391 18.7731 4.75391 18.7457 5.19922 18.8317C6.80078 18.984 12 19.0309 12 19.0309C12 19.0309 16.2031 19.0231 19 18.8239C19.3906 18.777 20.2422 18.7731 21.0039 17.9762C21.6055 17.3707 21.8008 15.9918 21.8008 15.9918C21.8008 15.9918 22 14.3746 22 12.7535V11.2379C22 9.62073 21.8008 7.99963 21.8008 7.99963ZM9.93359 14.5934V8.97229L15.3359 11.7926L9.93359 14.5934Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var ze=n(76946),Ve=n(18621);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function We(e){var t=e.children,n=e.isVisible,r=e.onDismiss,i=e.tooltipProps,a=(0,Te.Z)("announcement","youtube-in-the-ws"),o=a.shouldDisplay,s=a.register,l=a.dismiss,c=ee.useState(!1),u=(0,L.Z)(c,2),d=u[0],p=u[1];ee.useEffect((function(){s()}),[s]);var f=o&&n;return(0,B.BX)("div",Ge(Ge({},i),{},{className:"jsx-3674292327 "+(i&&null!=i.className&&i.className||"wrapper"),children:[(0,B.BX)(ze.Z,{onClickOutside:function(){return r()},positions:["right"],align:"center",isOpen:f,showArrow:!0,arrowOverrides:{arrowSize:12,arrowColor:"var(--accent-negative-default)"},children:[t,(0,B.tZ)("div",{className:"jsx-3674292327 youtube-popover",children:(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[(0,B.BX)(ve.Ug,{spacing:1,children:[(0,B.tZ)(Ve.Z,{color:"var(--accent-negative-default)"}),(0,B.tZ)(Ne.Z,{level:5,children:"Code with YouTube tutorials"})]}),(0,B.tZ)(ge.Z,{children:"Choose from a list of recommended tutorials to code along to"}),(0,B.tZ)(ve.Ug,{spacing:1,justify:"end",children:(0,B.tZ)(he.Z,{loading:d,onClick:function(){p(!0),r(),l()},children:"Got it"})})]})})]}),(0,B.tZ)(q.default,{id:"3674292327",children:[".wrapper.jsx-3674292327{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".youtube-popover.jsx-3674292327{border:1px solid var(--accent-negative-default);border-radius:var(--border-radius-4);background:var(--background-root);padding:var(--space-16);max-width:300px;position:relative;pointer-events:auto;}"]})]}))}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e){return(0,B.tZ)(Oe.Z,qe(qe({},e),{},{children:(0,B.tZ)("path",{d:"M16 6C16 7.65685 17.3431 9 19 9C20.6569 9 22 7.65685 22 6C22 4.34315 20.6569 3 19 3C17.3431 3 16 4.34315 16 6ZM16 6L12 6C10.8954 6 10 6.89543 10 8L10 16C10 17.1046 10.8954 18 12 18L16 18M16 18C16 19.6569 17.3431 21 19 21C20.6569 21 22 19.6569 22 18C22 16.3431 20.6569 15 19 15C17.3431 15 16 16.3431 16 18ZM2 12L10 12",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var Qe=n(61182),Je=n(77491),$e=n(13029),et=n(27008),tt=n(84443);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e){var t,n,r,i=e.lang,a=e.lite,o=e.outputonly,s=e.sharing,l=e.isMobile,c=e.preferences,u=e.isServer,d=e.isVnc,p=e.inspector,f=e.gitRemoteUrl,m=e.showShareToTalkPromo,h=e.shouldShowMPInviteTour,g=e.isWindowingEnabled,v=e.hasAudioContext,b=e.preventFocusOnTerminal,y=e.isCluiCurlEnabled,x=e.shouldLoadAdminPanel,w=e.shouldShowEducationPane,k=e.shouldShowAutograderPane,Z=e.shouldShowUnitTestPane,j=e.isLoggedIn,O=e.shouldLoadYoutubePane,E=fe().get(i),_=!a;if("react_native"===E.key)return{language:i,layout:{floating:[],tiling:{type:"split",fixed:!0,leftSize:a?48:68,hideHandle:!0,stacked:!0,left:{type:"pane",pud:"header"},right:{type:"pane",pud:"output"}}},files:[],plugins:{header:{type:"header",title:"header",state:{lite:a,showShareToTalkPromo:m,shouldShowMPInviteTour:h}},output:{type:"snack",title:"console"},infoprovider:{type:"infoprovider",title:"infoprovider"}},preferences:c,activeFile:void 0};var C={libs:{type:"libsearch",title:"library search",isClosable:g,isDraggable:g}};fe().get(i).hasUPM&&(C={packager:{type:"packager",title:"packages",isClosable:g,isDraggable:g}});var S=rt(rt({fileviewercontroller:{type:"fileviewercontroller"},analytics:{type:"analytics"},replupdater:{type:"replupdater"},replforker:{type:"replforker"}},C),{},{header:{type:"header",title:"header",state:{lite:a,showShareToTalkPromo:m,shouldShowMPInviteTour:h}},fileheader:{type:"fileheader",title:"fileheader"},infoprovider:{type:"infoprovider",title:"infoprovider"},markdownviewer:{type:"markdownviewer",title:"markdown"},instructionsviewer:{type:"instructionsviewer",title:"instructions"},instructionsviewer2:{type:"instructionsviewer2",title:"instructions"},hackerupgradeprompt:{type:"hackerupgradeprompt"},browsernotifications:{type:"browsernotifications"},services:{type:"services"},commandbar:{type:"commandbar"},debugclient:{type:"debugclient"},fsreduxbridge:{type:"fsreduxbridge"}});o&&(delete S.fileviewercontroller,delete S.commandbar),v&&(S=rt(rt({},S),{},{audio:{type:"audio"}})),_&&(S=rt(rt({},S),{},{annotations:{type:"annotations"}})),y&&(S=rt(rt({},S),{},{cluicurl:{type:"cluicurl",title:"HTTP"}})),p&&(S=rt(rt({},S),{},{inspector:{type:"inspector",title:"inspector"}})),x&&(S=rt(rt({},S),{},{adminpanel:{type:"adminpanel",title:"adminpanel"}}));var P,N=[];w&&(N.push({pud:"educationpane",pluginType:"educationpane",tooltip:"Teams for Education",icon:tt.Z}),S.educationpane={type:"educationpane",title:"Education Pane",isClosable:g,isDraggable:g}),fe().supportsGit(i)&&!s&&(N.push({pud:"git",pluginType:"git",tooltip:"Version control",icon:Ye}),S.git={type:"git",title:"git",isClosable:g,isDraggable:g,state:{gitRemoteUrl:f}}),fe().supportsDAP(i)&&(N.push({pud:"debugpanel",pluginType:"debugpanel",tooltip:"Debugger",icon:Qe.Z}),S.debugpanel={type:"debugpanel",title:"debugpanel",isClosable:g,isDraggable:g}),S.config={type:"config",title:"config",isClosable:!0,isDraggable:!1},S.lock={type:"lock",title:"lock"},fe().supportsPackager3(i)?N.push({pud:"packager",icon:Se.Z,pluginType:"packager",tooltip:"Packages"}):"html"===i&&N.push({pud:"libs",pluginType:"libsearch",tooltip:"Packages",icon:Se.Z}),s||"replbox"===E.engine||(S.enveditor={type:"enveditor",title:"enveditor"},N.push({pud:"enveditor",pluginType:"enveditor",tooltip:"Secrets (Environment variables)",icon:Ae.Z,iconWrapper:De})),a||(S=rt(rt({},S),{},{prefs:{type:"preferences",title:"preferences",isClosable:g,isDraggable:g},help:{type:"help",title:"help",isClosable:g,isDraggable:g},floatingrun:{type:"floatingrun",title:"floatingrun",state:{maxWidthBreakpoint:me.j.mobileMax+100}}}),(i.startsWith("nix")||E.hasLanguageServer)&&(S=rt(rt({},S),{},{langserver:{type:i.startsWith("nix")?"langserver2":"langserver"}}))),P=rt(rt({},P=fe().usesTerminal2(i)?{type:"terminal2",title:"console",state:{kind:fe().usesInterpreter(i)?"interp":"output",lite:a,preventFocus:b}}:{type:"goval"!==E.engine?"replboxconsole":"console",title:"console"}),{},{isDraggable:g}),S=fe().hasReplboxWebview(E.key)&&!fe().hasReplboxUrlBar(E.key)?rt(rt({},S),{},{output:{type:"replboxdisplay2",title:"output"},console:{type:"replboxconsole",title:"console"}}):fe().hasReplboxWebview(E.key)?rt(rt({},S),{},{output:{type:"replboxdisplay2",title:"output",state:{canBeClosed:!1}},console:{type:"replboxconsole",title:"console"}}):rt(rt({},S),{},{output:P}),!a&&j&&N.push({pud:"prefs",pluginType:"preferences",tooltip:"Settings",icon:Je.Z}),"replbox"!==E.engine&&(N.push({pud:"database",icon:Ce,pluginType:"database",tooltip:"Database"}),S.database={type:"database",title:"Database",isClosable:g,isDraggable:g}),k?(N.push({pud:"autograder",icon:$e.Z,pluginType:"autograder",tooltip:"Tests",iconWrapper:je}),S.autograder={type:"autograder",title:"Autograder",isClosable:g,isDraggable:g}):Z&&(N.push({pud:"unittests",icon:$e.Z,pluginType:"unittests",tooltip:"Unit tests"}),S.unittests={type:"unittests",title:"unittests",isClosable:g,isDraggable:g});var T,I=fe().supportsFiles(E.key)||"web_project"===E.key||"kaboom"===E.key||"html"===E.key,R="filetree";S=rt(rt({},S),{},(0,K.Z)({},R,{type:R,title:"filetree",isClosable:g,isDraggable:g,state:void 0})),O&&(S.youtube={type:"youtube",title:"Youtube",isClosable:g,isDraggable:g},S.youtubepreview={type:"youtubepreview",title:"Youtube Preview",isClosable:g,isDraggable:g},N.push({pud:"youtube",pluginType:"youtube",tooltip:"Youtube",icon:Fe,iconWrapper:We})),x&&N.push({pud:"adminpanel",pluginType:"adminpanel",tooltip:"Crosis Logs",svg:"Alien"}),I&&N.unshift({pud:R,pluginType:R,tooltip:"Files",icon:et.Z}),"kaboom"===E.key&&(N.unshift({pud:"kaboombar",pluginType:"kaboombar",tooltip:"Kaboom",icon:Me}),S.kaboombar={type:"kaboombar",title:"kaboombar",isClosable:g,isDraggable:g}),I?(S[t="file-".concat(de()())]={type:"blank",title:"empty",isDraggable:g},T={type:"pane",pud:t}):(S[t="main-editor"]={type:"blank",title:"empty",isDraggable:g},T={type:"pane",pud:t});var D,A=[{type:"pane",pud:"output"},{type:"pane",pud:"shell"}];if("web_project"===E.key||"python_turtle"===E.key||"html"===E.key||"kaboom"===E.key||"basic"===E.key)if(l)D={type:"tabs",active:0,tabs:[{type:"pane",pud:"output"},{type:"pane",pud:"console"}]};else{D={type:"split",stacked:!c.isLayoutStacked,position:65,left:{type:"pane",pud:"output"},right:{type:"tabs",active:0,tabs:[{type:"pane",pud:"console"},{type:"pane",pud:"shell"}]}}}else if(u&&s){n="webview";var L={type:"tabs",active:0,tabs:A};S=rt(rt({},S),{},(0,K.Z)({},n,{type:"webview",title:"webview",isDraggable:g,state:{canBeClosed:!0}})),D={type:"split",stacked:!(l||a||c.isLayoutStacked),fixed:!1,left:{type:"pane",pud:n},right:L}}else if(d){r="vnc",S=rt(rt({},S),{},(0,K.Z)({},r,{type:"vnc",title:"vnc",state:{}}));var B={type:"tabs",active:0,tabs:A};D={type:"split",stacked:!(l||a||c.isLayoutStacked),fixed:!1,left:{type:"pane",pud:r},right:B}}else D={type:"tabs",active:0,tabs:A};var M,U,X=o?D:{type:"split",stacked:l||a||c.isLayoutStacked,fixed:!1,left:{type:"split",stacked:!0,leftSize:32,left:{type:"pane",pud:"fileheader"},right:T},right:D};(g&&(X=o?D:{type:"split",left:rt(rt({},T),{},{header:{type:"pane",pud:"fileheader",height:32}}),right:D}),!N.length||o)?M=X:(l||!I||a||(U="filetree"),"kaboom"===E.key&&(U="kaboombar"),w&&(U="educationpane"),S=rt(rt({},S),{},{sidenav:{type:"sidenav",title:"side navigation",state:{navItems:N,activePanePuds:U?[U]:[]}}}),M={type:"split",stacked:!1,leftSize:50,left:{type:"pane",pud:"sidenav"},right:U?{type:"split",stacked:!1,position:15,left:{type:"pane",pud:U},right:X}:X});var F={floating:a?[]:["floatingrun","help","hackerupgradeprompt","browsernotifications","commandbar"],tiling:{type:"split",leftSize:a?48:68,stacked:!0,left:{type:"pane",pud:"header"},right:p?{type:"split",left:M,right:{type:"pane",pud:"inspector"}}:M}};return S.langserver&&F.floating.push("langserver"),F.floating.push("desktoplayout"),F.floating.push("analytics"),F.floating.push("fileviewercontroller"),F.floating.push("fsreduxbridge"),fe().supportsDAP(i)&&F.floating.push("debugclient"),v&&!a&&F.floating.push("audio"),_&&F.floating.push("annotations"),S.bsoder={type:"bsoder",title:"bsoder"},S.desktoplayout={type:"desktoplayout"},S.shell={type:"shell",title:"shell"},S.loadingresolver={type:"loadingresolver",title:"loadingresolver"},S.goval={type:"goval",title:"goval",state:{isOwner:!s,lite:a}},S.deeplink={type:"deeplink"},F.floating.push("deeplink"),{language:i,layout:F,files:[],plugins:S,preferences:c,activeFile:void 0,editorPud:t,webviewPud:n,vncPud:r,sideNavItems:N}}var at=n(13112),ot=n(53016),st=n(13940),lt=n(35122),ct=n(34834),ut=n(53456),dt=n(17706),pt=n(71371),ft=n(15548),mt=n(87644),ht=n(33467),gt=n(14795),vt=n(26878),bt=n(20943),yt=n(32224),xt=n(61991),wt=n(7134),kt=n(11113),Zt=n(41662),jt=n(41664),Ot=n(23746),Et=n(4170);function _t(e){var t=e.username,n=e.id,r=e.image,i=e.color,a=e.size,o=e.onClick,s=e.canClick,l=function(e){var t=e.color;return{styles:(0,B.tZ)(q.default,{id:"2893583400",dynamic:[t],children:[".avatar.__jsx-style-dynamic-selector{-webkit-transition:all 0.2s ease;transition:all 0.2s ease;border:2px solid ".concat(t,";}"),".avatar.__jsx-style-dynamic-selector:hover{-webkit-filter:brightness(95%);filter:brightness(95%);box-shadow:var(--shadow-1);}"]}),className:q.default.dynamic([["2893583400",[t]]])}}({color:i});return(0,B.BX)("div",{"aria-label":"Observe ".concat(t),"data-microtip-position":"bottom",role:"tooltip",onClick:function(){s&&o&&o({username:t,id:n})},className:q.default.dynamic([["3626111683",[s?"pointer":"auto"]]])+" presence-avatar",children:[(0,B.tZ)(Et.Z,{className:l.className,size:a||35,title:t,src:r,alt:"avatar for ".concat(t)}),l.styles,(0,B.tZ)(q.default,{id:"3626111683",dynamic:[s?"pointer":"auto"],children:[".presence-avatar.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:".concat(s?"pointer":"auto",";}")]})]})}var Ct=n(94184),St=n.n(Ct),Pt=n(86842),Nt=n(26427);function Tt(){var e=(0,Pe.Z)(),t=e.session,n=e.presence;return ee.useCallback((function(e){var r=e.username,i=e.id,a=n.getFollowedUser();if((null===a||void 0===a?void 0:a.username)!==r){n.followUser(r);var o=n.getActiveFileForUser(i),s=t.getActiveFile();o&&o!==s&&t.openFile(o)}else n.unfollowUser()}),[t,n])}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e){var t=e.hideModal,n=e.onUserClick,r=e.isOpen,i=(0,ye.Z)(),a=(0,Pe.Z)().presence,o=(0,Ot.Z)({presence:a});return(0,B.tZ)(Pt.ZP,{isOpen:r,onRequestClose:t,children:(0,B.tZ)(Lt,{replId:i,onUserClick:n,activeUsers:o,hideModal:t})})}function At(e,t){return t.some((function(t){return t.id===e}))}function Lt(e){var t=e.replId,n=e.activeUsers,r=e.onUserClick,i=e.hideModal,a=(0,xe.Flq)({variables:{replId:t}}),o=a.data,s=a.loading,l=a.error;if(s)return(0,B.BX)("div",{className:"jsx-1405322551 user-list-loader",children:[(0,B.tZ)(Nt.Z,{style:{width:"50px"}}),(0,B.tZ)(q.default,{id:"1405322551",children:[".user-list-loader.jsx-1405322551{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-height:200px;}"]})]});if(l)return(0,B.tZ)("div",{children:l.message});if("Repl"===(null===o||void 0===o?void 0:o.repl.__typename)){var c=o.repl,u=o.currentUser,d=c.user,p=d&&n.find((function(e){return e.username===d.username})),f=c.permissions.filter((function(e){var t=e.user;return t&&At(t.id,n)})),m=c.permissions.filter((function(e){var t=e.user;return t&&!At(t.id,n)}));return(0,B.BX)("div",{className:"jsx-3569279364 user-list-modal",children:[(0,B.tZ)(Ne.Z,{level:2,children:"Multiplayers"}),(0,B.tZ)(Ne.Z,{level:5,children:"Users can interact with this repl in real time."}),(0,B.tZ)("div",{className:"jsx-3569279364 user-list",children:(0,B.BX)("div",{className:"jsx-3569279364",children:[d?(0,B.tZ)(Mt,Rt(Rt({},d),{},{onClick:r,isOnline:Boolean(p),color:p?p.color:"transparent",isOwner:!0,hideModal:i,canClickAvatar:Boolean(p)&&d.id!==(null===u||void 0===u?void 0:u.id),type:xe.aQH.Rw})):null,f.map((function(e){var t=e.type,a=e.user;if(!a)throw new Error("Expected user");var o=n.find((function(e){return e.username===a.username}));if(!o)throw new Error("Expected user online");var s=a.id!==(null===u||void 0===u?void 0:u.id);return(0,B.tZ)(Mt,Rt(Rt({onClick:r,type:t},a),{},{isOnline:!0,canClickAvatar:s,color:o.color,hideModal:i,isOwner:!1}),"chat-user-list-".concat(a.username))})),m.map((function(e){var t=e.type,n=e.user;if(!n)throw new Error("Expected user");return(0,B.tZ)(Mt,Rt(Rt({onClick:r,type:t},n),{},{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:i,isOwner:!1}),"chat-user-list-".concat(n.username))}))]})}),(0,B.tZ)(q.default,{id:"3569279364",children:[".user-list-modal.jsx-3569279364{color:var(--foreground-default);padding:var(--space-32);display:grid;grid-template-rows:auto auto 1fr;grid-gap:var(--space-16);}",".user-list.jsx-3569279364{max-height:330px;overflow-y:auto;}"]})]})}return"ReplRedirect"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,B.BX)("div",{children:["This repl has moved to"," ",(0,B.tZ)("a",{href:o.repl.replUrl,children:o.repl.replUrl})]}):"SubscriptionExpiredError"===(null===o||void 0===o?void 0:o.repl.__typename)?(0,B.BX)("div",{children:["Your subscition has expired.",(0,B.tZ)("a",{href:"/site/pricing",children:"Upgrade here"})]}):null}var Bt={r:"read only",rw:"can edit"};function Mt(e){var t=e.type,n=e.id,r=e.username,i=e.image,a=e.isOnline,o=e.isOwner,s=e.color,l=e.onClick,c=e.hideModal,u=e.canClickAvatar,d=Tt();return(0,B.BX)("div",{className:q.default.dynamic([["1309780427",[u?"pointer":"auto",s]]])+" "+(St()("user-list-item-wrapper",{online:a})||""),children:[(0,B.tZ)("div",{onClick:function(){u&&(d({username:r,id:n}),c())},className:q.default.dynamic([["1309780427",[u?"pointer":"auto",s]]])+" image",children:(0,B.tZ)("img",{src:i,className:q.default.dynamic([["1309780427",[u?"pointer":"auto",s]]])+" "+((a?"":"offline")||"")})}),(0,B.BX)("div",{className:q.default.dynamic([["1309780427",[u?"pointer":"auto",s]]])+" info",children:[(0,B.BX)("div",{className:q.default.dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:[(0,B.BX)("a",{href:"/@".concat(r),target:"_blank",onClick:l,className:q.default.dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:["@",r]}),!a&&" (offline)"]}),(0,B.tZ)("div",{className:q.default.dynamic([["1309780427",[u?"pointer":"auto",s]]]),children:o?"owner":Bt[t]})]}),(0,B.tZ)(q.default,{id:"1309780427",dynamic:[u?"pointer":"auto",s],children:[".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-order:1;-ms-flex-order:1;order:1;}",".image.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(u?"pointer":"auto",";}"),"img.__jsx-style-dynamic-selector{width:40px;height:40px;border-radius:20px;border:3px solid ".concat(s,";background:white;object-fit:cover;}"),".info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8);}","img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%);}",".user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-order:0;-ms-flex-order:0;order:0;}"]})]})}var Ut=n(93682);function Xt(e){var t=ee.useState(!1),n=(0,L.Z)(t,2),r=n[0],i=n[1],a=(0,at.I0)(),o=(0,Ut.Z)(),s=(0,ye.Z)(),l=Tt(),c=(0,xe.qC4)({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),u=c.data,d=c.loading,p=c.error,f=e.users.reduce((function(e,t){return e[t.id]=t.color,e}),{});if(d)return null;if(p)return null;if(null===u||void 0===u||!u.currentUser)return null;var m=u.usersByIds,h=u.currentUser,g=m.filter((function(e){return e.id!==h.id})),v=g.length-3;return(0,B.BX)("div",{className:q.default.dynamic([["3417583604",[me.j.mobileMax+100]]])+" multiplayer-users-container",children:[(0,B.BX)(ve.Ug,{wrap:"nowrap",spacing:1,align:"center",children:[v>0?(0,B.tZ)("div",{className:q.default.dynamic([["3417583604",[me.j.mobileMax+100]]]),children:(0,B.BX)(he.Z,{filled:!1,border:!1,onClick:function(){return i(!0)},children:["+ ",v]})}):null,g.slice(0,3).map((function(e){return(0,B.tZ)("div",{className:q.default.dynamic([["3417583604",[me.j.mobileMax+100]]]),children:(0,B.tZ)(_t,{id:e.id,username:e.username,image:e.image,color:f[e.id],onClick:l,canClick:!0})},e.id)})),(0,B.tZ)(Dt,{isOpen:r,hideModal:function(){return i(!1)},onUserClick:function(){a({type:"MP2_VISITED_PROFILE",from:"OnlineUsers",replId:s,wid:o})}})]}),(0,B.tZ)(q.default,{id:"3417583604",dynamic:[me.j.mobileMax+100],children:[".multiplayer-users-container.__jsx-style-dynamic-selector{padding:0 var(--space-8);}","@media only screen and (max-width:".concat(me.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none;}}")]})]})}var Ft=n(52375),zt=n(95445),Vt=n(28140),Ht=n(14040),Gt=n(37672),Wt=n(90093),Kt=n(52577),qt=n(81024),Yt=n(98124),Qt=n(58125),Jt=n(96101),$t=n(41756),en=n(61159);function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e){var t=e.onSubmit,n=e.existingUsernames,r=e.isDisabled,i=e.onChange,a=e.placeholder,o=ee.useState(""),s=(0,L.Z)(o,2),l=s[0],c=s[1],u=!!l.match(/.+@.+/),d=(0,en.Z)(l.trim().replace(/^@/,""),250),p=(0,xe.skk)({skip:!d||u,variables:{query:d,limit:6}}),f=p.data,m=p.loading,h=p.error,g=(0,Wt.Z)().showError;ee.useEffect((function(){h&&g(h.message)}),[h,g]);var v=null===f||void 0===f?void 0:f.usernameSearch;return(0,B.BX)("form",{onSubmit:function(e){e.preventDefault(),t(l),c("")},className:"jsx-1273575788",children:[(0,B.BX)("div",{className:"jsx-1273575788 form-content",children:[(0,B.tZ)($t.ZP,{onChange:function(e){e&&c(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var r=e.getInputProps,o=e.getItemProps,s=e.getMenuProps,u=e.isOpen,d=e.highlightedIndex;return(0,B.BX)("div",{className:"jsx-1273575788 dropdown",children:[(0,B.tZ)(Yt.ZP,nn({},r({ref:null,value:l,onChange:function(e){c(e.currentTarget.value),null===i||void 0===i||i(e.currentTarget.value)},placeholder:null!==a&&void 0!==a?a:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&l.match(/.+@.+/)&&(t(l),c(""),e.currentTarget.blur())}}))),(0,B.BX)("div",nn(nn({},s()),{},{className:"jsx-1273575788",children:[u&&v&&v.length?(0,B.tZ)("div",{className:"jsx-1273575788 dropdown-menu",children:v.map((function(e,t){return(0,B.tZ)("div",nn(nn({},o({item:e,index:t})),{},{className:"jsx-1273575788 "+(St()("result",{"is-active":d===t})||""),children:(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[(0,B.tZ)(le.Z,{size:"s",url:e.image}),(0,B.tZ)("div",{className:"jsx-1273575788",children:e.username}),n.includes(e.username)?(0,B.tZ)("div",{className:"jsx-1273575788 check-icon",children:(0,B.tZ)($e.Z,{})}):null]})}),e.username)}))}):null,u&&m?(0,B.tZ)("div",{className:"jsx-1273575788 dropdown-menu is-loading",children:"loading..."}):null,u&&v&&0===v.length?(0,B.BX)("div",{className:"jsx-1273575788 dropdown-menu is-empty",children:['no results found for "',l,'"']}):null]}))]})}}),(0,B.tZ)("div",{className:"jsx-1273575788",children:(0,B.tZ)(he.Z,{color:"primary",type:"submit",filled:!0,disabled:r||!l,children:"Invite"})})]}),(0,B.tZ)(q.default,{id:"1273575788",children:[".form-content.jsx-1273575788{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".dropdown.jsx-1273575788{position:relative;z-index:5;}",".dropdown-menu.jsx-1273575788{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;border-radius:var(--border-radius-4);max-height:300px;overflow:auto;}",".dropdown-menu.is-loading.jsx-1273575788,.dropdown-menu.is-empty.jsx-1273575788{color:var(--foreground-dimmer);padding:var(--space-8);}",".dropdown.jsx-1273575788:focus-within .dropdown-menu.jsx-1273575788{border-color:var(--accent-primary-default);}",".spacer.jsx-1273575788{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".result.jsx-1273575788{cursor:pointer;padding:var(--space-8) var(--space-16);}",".result.jsx-1273575788:hover,.is-active.jsx-1273575788{background-color:var(--accent-primary-dimmer);}",".check-icon.jsx-1273575788{margin-left:auto;color:var(--accent-positive-default);}"]})]})}function an(e){var t=e.value,n=e.onButtonPress,r=e.statusText,i=void 0===r?"":r,a=e.image,o=e.filterValue,s=e.type,l=e.Icon;return(0,B.BX)("div",{className:"jsx-1343607787 "+(St()("multiplayer-item",{"is-editable":!!n})||""),children:[(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[(0,B.tZ)(le.Z,{size:"s",url:null!==a&&void 0!==a?a:""}),(0,B.tZ)("div",{className:"jsx-1343607787 label",children:o?(0,B.tZ)(Qt.gr,{source:t,match:o}):"".concat(t," ").concat(i)}),!!n&&(0,B.tZ)(he.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(s||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:n,children:l&&(0,B.tZ)(l,{size:"small",className:"jsx-1343607787"})})]}),(0,B.tZ)(q.default,{id:"1343607787",children:[".multiplayer-item.jsx-1343607787{padding:var(--space-4) var(--space-16);}",".multiplayer-item.is-editable.jsx-1343607787{padding-right:var(--space-8);}",".multiplayer-item.is-editable.jsx-1343607787:hover{background-color:var(--background-root);}",".label.jsx-1343607787{margin-right:auto;}"]})]})}var on=n(73899);function sn(e){var t=e.email,n=e.onInvite,r=e.onCancel;return(0,B.BX)("div",{className:"jsx-861027202 root",children:[(0,B.tZ)(Ne.Z,{level:3,align:"center",children:"Are you sure?"}),(0,B.BX)(ge.Z,{align:"center",children:[(0,B.tZ)("p",{className:"jsx-861027202 message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,B.tZ)("p",{className:"jsx-861027202 email",children:t})]}),(0,B.BX)("div",{className:"jsx-861027202 controls",children:[(0,B.tZ)(he.Z,{onClick:r,children:"Cancel"}),(0,B.tZ)(he.Z,{filled:!0,color:"primary",onClick:n,children:"Invite"})]}),(0,B.tZ)(q.default,{id:"861027202",children:[".root.jsx-861027202{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-861027202{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}",".message.jsx-861027202{padding-bottom:var(--space-16);}"]})]})}var ln=n(1149),cn=n(56222);function un(e){var t,n,r,i,a=e.replId,o=(0,xe.JT6)({variables:{replId:a}}),s=o.data,l=o.loading,c=(0,at.v9)((function(e){return e.user.userInfo.id})),u=(0,Wt.Z)(),d=u.showConfirm,p=u.showError,f=ee.useState(""),m=(0,L.Z)(f,2),h=m[0],g=m[1],v=(0,xe.fSO)({onError:function(e){return p(e.message)},onCompleted:function(e){var t=e.addMultiplayerUser.user;(0,mt.track)(mt.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"username"});var n=t?"@".concat(t.username):"Member";d("".concat(n," added"))}}),b=(0,L.Z)(v,2),y=b[0],x=b[1],w=(0,xe.HMU)({onError:function(e){return p(e.message)},onCompleted:function(e){var t=e.removeMultiplayerUser.user,n=t?"@".concat(t.username):"Member";d("".concat(n," removed"))}}),k=(0,L.Z)(w,2),Z=k[0],j=k[1],O="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null,E=(0,xe.SvR)({onError:function(e){p(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createMultiplayerInvite2;if(r)if("UserError"!==r.__typename){if("MultiplayerInvite"===r.__typename){var i=r.email;return(0,mt.track)(mt.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"email"}),void d("Invited ".concat(i," via email"))}if("ReplPermission"===r.__typename){e.modify({id:e.identify({__typename:"Repl",id:a}),fields:{permissions:function(t){var n=e.writeFragment({data:r,fragment:xe.L13});return[].concat((0,Vt.Z)(t),[n])}}});var o=r.user;(0,mt.track)(mt.events.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"email"});var s=o?"@".concat(o.username):"Member";d("".concat(s," added"))}}else p(r.message)}}),_=(0,L.Z)(E,2),C=_[0],S=_[1],P=(0,xe.Ejz)({onError:function(e){return p(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,mt.track)(mt.events.MP2_REMOVED_EMAIL_INVITE,{replId:a,email:t}),d("Invite for ".concat(t," deleted"))}}else p(e.deleteMultiplayerInvite.message)}}),N=(0,L.Z)(P,2),T=N[0],I=N[1];if(O&&!O.owner)throw new Error("Cannot manage members on anon repls");if(null!==O&&void 0!==O&&O.owner&&"Team"!==(null===O||void 0===O?void 0:O.owner.__typename))throw new Error("Expect repl owned by a team");var R="Team"===(null===O||void 0===O||null===(t=O.owner)||void 0===t?void 0:t.__typename)?O.owner:null,D=null!==(n=null===O||void 0===O?void 0:O.permissions.reduce((function(e,t){return t.user?[].concat((0,Vt.Z)(e),[t.user.username]):e}),[]))&&void 0!==n?n:[],A=null===O||void 0===O?void 0:O.permissions.reduce((function(e,t){if(!t.user)return e;var n=t.user;return!h||Jt.Z.filter(h,[n.username]).length>0?(null!==R&&void 0!==R&&R.members.some((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===n.id}))||e.users.push(n),e):e}),{users:[]}),M=null===O||void 0===O?void 0:O.multiplayerInvites.filter((function(e){return!h||Jt.Z.filter(h,[e.email]).length>0})),U=null===R||void 0===R?void 0:R.members.reduce((function(e,t){if(!t.user)return e;var n=t.user;if(!(!h||Jt.Z.filter(h,[n.username]).length>0))return e;var r=t.permissions&&t.permissions!==xe.SV1.Member,i=null===O||void 0===O?void 0:O.permissions.find((function(e){var t;return e.user&&(null===(t=e.user)||void 0===t?void 0:t.id)===n.id}));return r?e.teamAdmins.push(n):null!==i&&void 0!==i&&i.type?e.withPermisison.push(n):e.withoutPermisison.push(n),e}),{teamAdmins:[],withPermisison:[],withoutPermisison:[]}),X=null===U||void 0===U?void 0:U.teamAdmins.some((function(e){return e.id===c})),F=(null!==(r=null===A||void 0===A?void 0:A.users.length)&&void 0!==r?r:0)+(null!==(i=null===M||void 0===M?void 0:M.length)&&void 0!==i?i:0),z=null===O||void 0===O?void 0:O.currentUserPermissions.editMultiplayers,V=null===O||void 0===O?void 0:O.currentUserPermissions.inviteGuests,H=Boolean(U&&!U.teamAdmins.length&&!U.withPermisison.length&&(!(null!==A&&void 0!==A&&A.users.length)&&!(null!==M&&void 0!==M&&M.length)&&V||!V&&!U.withoutPermisison.length)),G=ee.useState(null),W=(0,L.Z)(G,2),K=W[0],Y=W[1];return(0,B.BX)("div",{className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" root",children:[(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[(0,B.BX)(ve.Ug,{children:[(0,B.BX)(Ne.Z,{level:5,foreground:l?3:1,children:[z?"Add or remove members from this repl":null,l?"Loading...":null]}),z&&V&&!l&&(0,B.tZ)("div",{"aria-label":"  Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" information-icon-container",children:(0,B.tZ)(on.Z,{})})]}),V?(0,B.tZ)(rn,{existingUsernames:D,onSubmit:function(e){!!e.match(/.+@.+/)&&!S.loading?Y(e):x.loading||y({variables:{username:e,replId:a,type:"rw"}}),g("")},placeholder:z?"Search for users or invite guests":"Filter users",isDisabled:l,onChange:function(e){return g(e)}}):(0,B.tZ)(Yt.ZP,{disabled:l,value:h,onChange:function(e){return g(e.currentTarget.value)},placeholder:z?"Filter team members to add or remove":"Filter team members"}),(0,B.tZ)(Pt.ZP,{isOpen:!!K,onRequestClose:function(){return Y(null)},children:K?(0,B.tZ)(sn,{email:K,onInvite:function(){C({variables:{email:K,replId:a,type:"rw"}}),Y(null)},onCancel:function(){return Y(null)}}):null}),(0,B.BX)("div",{className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" "+(St()("multiplayers-list",{"is-empty":H})||""),children:[null!==U&&void 0!==U&&U.withPermisison.length?(0,B.tZ)("div",{className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" list-heading",children:(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[(0,B.tZ)(Ht.Z,{size:"small"}),(0,B.BX)(ge.Z,{foreground:2,size:"small",children:[null===U||void 0===U?void 0:U.withPermisison.length," member",1===(null===U||void 0===U?void 0:U.withPermisison.length)?"":"s"," with access"]})]})}):null,null===U||void 0===U?void 0:U.withPermisison.map((function(e){return(0,B.tZ)(an,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:X?function(){j.loading||Z({variables:{replId:a,username:e.username}})}:void 0,Icon:Kt.Z},e.id)})),!!F&&(0,B.tZ)("div",{className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" list-heading",children:(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[(0,B.tZ)(Ht.Z,{size:"small"}),(0,B.BX)(ge.Z,{foreground:2,size:"small",children:[(0,cn.Z)("guest",F,!0),"with access"]})]})}),null===A||void 0===A?void 0:A.users.map((function(e){return(0,B.tZ)(an,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:X?function(){j.loading||Z({variables:{replId:a,username:e.username}})}:void 0,Icon:Kt.Z},e.id)})),null===M||void 0===M?void 0:M.map((function(e){return(0,B.tZ)(an,{value:e.email,statusText:"(pending)",onButtonPress:X?function(){I.loading||T({variables:{replId:a,email:e.email}})}:void 0,Icon:Kt.Z},e.email)})),!V&&null!==U&&void 0!==U&&U.withoutPermisison.length?(0,B.tZ)("div",{className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" list-heading",children:(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[(0,B.tZ)(Gt.Z,{size:"small"}),(0,B.BX)(ge.Z,{foreground:2,size:"small",children:[(0,cn.Z)("member",null===U||void 0===U?void 0:U.withoutPermisison.length,!0),"without access"]})]})}):null,!V&&(null===U||void 0===U?void 0:U.withoutPermisison.map((function(e){return(0,B.tZ)(an,{value:e.username,image:e.image,type:"member",onButtonPress:z?function(){x.loading||y({variables:{replId:a,username:e.username,type:"rw"}})}:void 0,Icon:qt.Z},e.id)}))),null!==U&&void 0!==U&&U.teamAdmins.length?(0,B.tZ)("div",{className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" list-heading",children:(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[(0,B.tZ)(Ae.Z,{size:"small"}),(0,B.tZ)(ge.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===U||void 0===U?void 0:U.teamAdmins.map((function(e){return(0,B.tZ)("div",{className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" "+(St()("multiplayer-item",{"is-editable":z})||""),children:(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[(0,B.tZ)(le.Z,{size:"s",url:e.image}),(0,B.tZ)("div",{className:q.default.dynamic([["754813262",[me.j.mobileMax]]])+" label",children:h?(0,B.tZ)(Qt.gr,{source:e.username,match:h}):e.username})]})},e.id)})),H?(0,B.BX)(ge.Z,{foreground:2,align:"center",children:['No members matching "',h,'" found']}):null]}),z||l?null:(0,B.tZ)(ge.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),z&&V&&(0,B.tZ)(ln.Z,{replId:a})]}),(0,B.tZ)(q.default,{id:"754813262",dynamic:[me.j.mobileMax],children:[".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default);}",".multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);border-radius:var(--border-radius-4);height:300px;overflow-y:auto;}",".multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word;}",".multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4) var(--space-16);}",".multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8);}",".multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root);}",".list-heading.__jsx-style-dynamic-selector{padding:var(--space-16) var(--space-16) 0;}",".label.__jsx-style-dynamic-selector{margin-right:auto;}",".information-icon-container.__jsx-style-dynamic-selector{margin-left:5px;}","@media screen and (min-width:".concat(me.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48);}}")]})]})}var dn=n(86659);function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mn(e){var t,n,r,i,a=e.replId,o=e.onDone,s=e.isResubmit,l=e.lastUpdated,c=e.wid,u=e.pud,d=(0,at.I0)(),p=(0,Pe.Z)().iotester,f=(0,Zt.J)(c,u,"header"),m=(0,L.Z)(f,1)[0].autograder,h=(0,xe.CHr)({variables:{replId:a}}),g=null!==(t="Repl"===(null===(n=h.data)||void 0===n?void 0:n.repl.__typename)&&"Team"===(null===(r=h.data.repl.owner)||void 0===r?void 0:r.__typename)&&h.data.repl.owner.hasIOTestingV2)&&void 0!==t&&t,v=g?p.lastRunAt.getTime()>l:m.currentTest===m.tests.length&&m.tests.every((function(e){return e.results})),b=(0,xe.xhi)({variables:{replId:a}}).data,y="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)?b.repl:null,x=(null===y||void 0===y?void 0:y.template)||null,w=(null===x||void 0===x?void 0:x.dueDate)||null,k=(new Date).toISOString();ee.useEffect((function(){if(h.data&&!h.loading){var e=h.data.repl;"Repl"!==e.__typename||g||d({type:"AUTOGRADER_TESTS_RECEIVED",tests:e.ioTests.map((function(e){return fn(fn({},e),{},{expectedOutput:e.output})})),wid:c})}}),[d,h,c,g]);var Z=(0,Wt.Z)(),j=Z.showConfirm,O=Z.showError,E=(0,xe.xAQ)({variables:{replId:a},onCompleted:function(e){var t=e.submitRepl;"UserError"!==t.__typename?"Repl"===t.__typename&&(j("Repl submitted"),o()):O(t.message)},onError:function(e){O(e.message)}}),_=(0,L.Z)(E,2),C=_[0],S=_[1],P=g?v&&p.lastRunDidPass:!m.running&&m.currentTest===m.tests.length&&m.tests.every((function(e){var t;return null===(t=e.results)||void 0===t?void 0:t.passed}));return(g?"Repl"===(null===(i=h.data)||void 0===i?void 0:i.repl.__typename)&&h.data.repl.ioTests.length>0:m.tests.length>0)&&!P?(0,B.BX)("div",{className:"jsx-3151227623 root",children:[(0,B.tZ)(Ne.Z,{level:3,align:"center",children:v?"Fix test failures before submitting":"Run tests before submitting"}),(0,B.tZ)(ge.Z,{align:"center",children:v?"Input/Output tests did not pass.":"Input/Output tests have not been run since this repl was last changed."}),(0,B.BX)("div",{className:"jsx-3151227623 controls",children:[(0,B.tZ)(he.Z,{disabled:S.loading,filled:!0,color:"primary",onClick:function(){d({type:"OPEN_SIDEPANE_BY_TYPE",wid:c,paneType:"autograder"}),o()},children:"View tests"}),(0,B.tZ)(he.Z,{disabled:S.loading,onClick:function(){return C()},children:"Submit anyway"})]}),(0,B.tZ)(q.default,{id:"3151227623",children:[".root.jsx-3151227623{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-3151227623{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}"]})]}):(0,B.BX)("div",{className:"jsx-1002234268 root",children:[(0,B.tZ)(Ne.Z,{level:3,align:"center",children:s?" Resubmit this repl":"Submit this repl"}),(0,B.tZ)(ge.Z,{align:"center",children:s?"This will re-notify team admins about your submission.":"This will submit your repl for review and notify the team's admins."}),w&&w<k&&(0,B.tZ)(ge.Z,{align:"center",children:(0,B.tZ)("div",{className:"jsx-1002234268 late",children:"Note: Your submission is past the due date and will be marked late."})}),(0,B.BX)("div",{className:"jsx-1002234268 controls",children:[(0,B.tZ)(he.Z,{disabled:S.loading,onClick:o,children:"Cancel"}),(0,B.tZ)(he.Z,{filled:!0,color:"primary",disabled:S.loading,onClick:function(){return C()},children:s?"Submit again":"Submit"})]}),(0,B.tZ)(q.default,{id:"1002234268",children:[".root.jsx-1002234268{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24);}",".controls.jsx-1002234268{display:grid;grid-gap:var(--space-8);grid-auto-flow:column;}",".late.jsx-1002234268{color:var(--accent-negative-default);}"]})]})}function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vn="https://docs.replit.com/misc/annotations";function bn(e){return(0,B.BX)(Pt.ZP,gn(gn({},e),{},{children:[(0,B.BX)("div",{className:"jsx-343567331 container",children:[(0,B.tZ)("h1",{className:"jsx-343567331",children:"Introducing Annotations"}),(0,B.tZ)("p",{className:"jsx-343567331",children:"Annotations is a new feature that lets you leave detailed feedback on a student's code!"}),(0,B.tZ)("div",{className:"jsx-343567331 loom-video-container",children:(0,B.tZ)("iframe",{src:"https://www.loom.com/embed/955fb177889c4838b9332224067d4be0?autoplay=1",frameBorder:"0",allowFullScreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0,className:"jsx-343567331 loom-video"})}),(0,B.BX)("p",{className:"jsx-343567331",children:["To learn more, check out the"," ",(0,B.tZ)("a",{href:vn,target:"_blank",className:"jsx-343567331",children:"docs"})]}),(0,B.BX)("div",{className:"jsx-343567331 buttons",children:[(0,B.tZ)("a",{href:vn,target:"_blank",className:"jsx-343567331",children:(0,B.tZ)(he.Z,{children:"Learn More"})}),(0,B.tZ)(he.Z,{color:"primary",onClick:e.onRequestClose,children:"Okay"})]})]}),(0,B.tZ)(q.default,{id:"343567331",children:[".container.jsx-343567331{padding:var(--space-48);display:grid;grid-auto-flow:row;grid-row-gap:var(--space-16);}",".container.jsx-343567331 h1.jsx-343567331{padding:var(--space-16) 0;color:var(--foreground-default);}",".container.jsx-343567331 p.jsx-343567331{color:var(--foreground-default);}",".buttons.jsx-343567331{display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:var(--space-8);}",".buttons.jsx-343567331 a.jsx-343567331{-webkit-text-decoration:none;text-decoration:none;}",".loom-video-container.jsx-343567331{position:relative;padding-bottom:56.25%;height:0;}",".loom-video.jsx-343567331{position:absolute;top:0;left:0;width:100%;height:100%;}"]})]}))}var yn,xn=n(28130),wn=n(59137),kn=n(51626),Zn=(yn={},(0,K.Z)(yn,xe.Sy.PublishTemplate,"Publish project"),(0,K.Z)(yn,xe.Sy.EditTemplate,"Edit project"),(0,K.Z)(yn,xe.Sy.Submit,"Submit"),(0,K.Z)(yn,xe.Sy.Resubmit,"Resubmit"),yn);function jn(e){var t=e.cta,n=e.replId,r=e.isGroupProject,i=e.wid,a=e.pud,o=ee.useState(null),s=(0,L.Z)(o,2),l=s[0],c=s[1],u=function(){return c(null)},d=(0,xn.Z)(),p=(0,Pe.Z)().fs,f=ee.useState(0),m=(0,L.Z)(f,2),h=m[0],g=m[1];ee.useEffect((function(){if(d&&!(0,kn.T3)(d)&&!(0,kn.sL)(d))return p.watchOtFile(d,{onChange:function(e){e.changeSource===wn.Fl.Local&&g(Date.now())}})}),[d,p,g]);var v=Boolean(l&&[xe.Sy.PublishTemplate,xe.Sy.EditTemplate].includes(l));return ee.useEffect((function(){t===xe.Sy.ReviewSubmission&&(window.localStorage.getItem("annotations/educationModalDismissed")||(c(t),window.localStorage.setItem("annotations/educationModalDismissed","true")))}),[t]),(0,B.BX)(B.HY,{children:[Zn[t]&&(0,B.tZ)(he.Z,{filled:!0,border:!1,onClick:function(){return c(t)},children:Zn[t]}),(0,B.tZ)(Pt.ZP,{isOpen:l===xe.Sy.Submit||l===xe.Sy.Resubmit,onRequestClose:u,children:(0,B.tZ)(mn,{replId:n,onDone:u,isResubmit:l===xe.Sy.Resubmit,lastUpdated:h,wid:i,pud:a})}),(0,B.tZ)(Pt.ZP,{preventClose:!0,isOpen:v,onRequestClose:u,width:r?"large":"medium",children:(0,B.tZ)(dn.Z,{replId:n,onDone:u})}),(0,B.tZ)(bn,{isOpen:l===xe.Sy.ReviewSubmission,onRequestClose:u})]})}var On=n(98989),En=n(19878),_n=n(58930),Cn=n(67933),Sn=n(86113),Pn=n(8301);function Nn(){var e=(0,Pe.Z)().session;return(0,B.tZ)("div",{className:"button-wrapper",children:(0,B.tZ)(Pn.Z,{size:28,onClick:function(){e.setIsCommandBarOpen(!0)},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,B.tZ)(Sn.Z,{})})})}var Tn=n(23254);function In(e){var t=e.replId,n=(0,xe.X6F)({variables:{replId:t},pollInterval:8e3}),r=n.data,i=n.loading,a=(0,Wt.Z)(),o=a.showConfirm,s=a.showError,l=ee.useState(!1),c=(0,L.Z)(l,2),u=c[0],d=c[1],p=(0,xe.QNh)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,mt.track)(mt.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),o("Added @".concat(r)))}}),f=(0,L.Z)(p,2),m=f[0],h=f[1],g=(0,xe.GkG)({onError:function(e){return s(e.message)},onCompleted:function(e){var n,r=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,mt.track)(mt.events.MP2_REMOVED_USER_PERMISSION,{replId:t,username:r}),o("".concat(r," removed")))}}),v=(0,L.Z)(g,2),b=v[0],y=v[1],x=(0,xe.SvR)({update:function(e,n){var r,i=null===(r=n.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var a=i.email;return(0,mt.track)(mt.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void o("Invited ".concat(a," via email"))}if("ReplPermission"===i.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:i,fragment:xe.L13});return[].concat((0,Vt.Z)(t),[n])}}});var c=null===(l=i.user)||void 0===l?void 0:l.username;if(!c)return;(0,mt.track)(mt.events.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),o("Invited @".concat(c))}}else s(i.message)}}),w=(0,L.Z)(x,2),k=w[0],Z=w[1],j=(0,xe.Ejz)({onError:function(e){return s(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;(0,mt.track)(mt.events.MP2_REMOVED_EMAIL_INVITE,{replId:t,email:n}),o("invite for ".concat(n," deleted"))}}else s(e.deleteMultiplayerInvite.message)}}),O=(0,L.Z)(j,2),E=O[0],_=O[1];ee.useEffect((function(){var e=h.error||Z.error;e&&(e.message.includes("reached the limit")?d(!0):s(e.message))}),[h.error,Z.error,s]);var C="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,S=null===r||void 0===r?void 0:r.currentUser,P=null===C||void 0===C?void 0:C.permissions.reduce((function(e,t){return t.user?[].concat((0,Vt.Z)(e),[t.user.username]):e}),[]),N=null===C||void 0===C?void 0:C.currentUserPermissions.editMultiplayers,T=Boolean(C&&!C.permissions.length&&!C.multiplayerInvites.length),I=null!==C&&void 0!==C&&C.permissions?C.permissions.length:null;return(0,B.BX)("div",{className:"jsx-1434523738 root",children:[(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[N&&P&&C?(0,B.tZ)("div",{className:"jsx-1434523738",children:(0,B.tZ)(rn,{existingUsernames:P,onSubmit:function(e){!!!e.match(/.+@.+/)||Z.loading?h.loading||m({variables:{username:e,replId:C.id,type:"rw"}}):k({variables:{email:e,replId:C.id,type:"rw"}})}})}):null,(0,B.BX)("div",{className:"jsx-1434523738",children:[(0,B.BX)(Ne.Z,{level:5,foreground:i?3:1,children:[null!==I&&null!==S&&void 0!==S&&S.isSubscribed?"".concat((0,cn.Z)("multiplayer",I,!0)):null,null===I||null!==S&&void 0!==S&&S.isSubscribed?null:"".concat(I,"/").concat(50," ").concat((0,cn.Z)("multiplayer",I)),i?"Loading...":null]}),!i&&!(null!==S&&void 0!==S&&S.isSubscribed)&&(0,B.BX)(ge.Z,{size:"small",tag:"div",foreground:2,children:["Due to COVID-19, we're temporarily increasing the free multiplayer limit."," ",(0,B.tZ)("a",{onClick:function(){return d(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-1434523738 info-tooltip",children:(0,B.tZ)(on.Z,{})})]})]}),T?(0,B.tZ)("div",{className:"jsx-1434523738 empty-list",children:(0,B.BX)(ve.Ug,{align:"center",justify:"center",children:[(0,B.tZ)("div",{className:"jsx-1434523738",children:"No one is here"}),(0,B.tZ)("div",{className:"jsx-1434523738",children:(0,B.tZ)("img",{src:"/public/images/rainy-computer.png",className:"jsx-1434523738"})})]})}):(0,B.BX)("div",{className:"jsx-1434523738 multiplayers-list",children:[null===C||void 0===C?void 0:C.permissions.map((function(e){var n=e.user,r=e.type;return n?(0,B.BX)("div",{className:"jsx-1434523738 "+(St()("multiplayer-item",{"is-editable":C.currentUserPermissions.editMultiplayers})||""),children:[(0,B.tZ)(le.Z,{size:"s",url:n.image}),(0,B.BX)("div",{className:"jsx-1434523738 label",children:[n.username," ",r===xe.aQH.Rw?" (can edit)":null]}),C.currentUserPermissions.editMultiplayers?(0,B.tZ)(he.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){y.loading||b({variables:{replId:t,username:n.username}})},children:(0,B.tZ)(Kt.Z,{size:"small"})}):null]},n.id):null})),null===C||void 0===C?void 0:C.multiplayerInvites.map((function(e){return(0,B.BX)("div",{className:"jsx-1434523738 "+(St()("multiplayer-item",{"is-editable":N})||""),children:[(0,B.tZ)(le.Z,{size:"s"}),(0,B.BX)("div",{className:"jsx-1434523738 label",children:[e.email," (pending)"]}),N?(0,B.tZ)(he.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){_.loading||E({variables:{replId:t,email:e.email}})},children:(0,B.tZ)(Kt.Z,{size:"small"})}):null]},e.email)}))]})]}),(0,B.tZ)(Tn.k,{isOpen:u,closeModal:function(){return d(!1)},reason:"Upgrade for unlimited multiplayer collaborators",trackingInfo:{context:"workspace-multiplayer-header"}}),(0,B.tZ)(q.default,{id:"1434523738",children:[".root.jsx-1434523738{color:var(--foreground-default);}",".multiplayers-list.jsx-1434523738,.empty-list.jsx-1434523738{background-color:var(--background-root);border-radius:var(--border-radius-4);height:200px;}",".multiplayers-list.jsx-1434523738{overflow-y:auto;padding:var(--space-8) 0;}",".multiplayer-item.jsx-1434523738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--space-4) var(--space-16);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".multiplayer-item.is-editable.jsx-1434523738{padding-right:var(--space-8);}",".multiplayer-item.is-editable.jsx-1434523738:hover{background-color:var(--background-root);}",".label.jsx-1434523738{margin-right:auto;padding-left:var(--space-8);}",".info-tooltip.jsx-1434523738{display:inline-block;}",".info-tooltip.jsx-1434523738,.info-tooltip.jsx-1434523738:hover,.info-tooltip.jsx-1434523738:focus{color:var(--foreground-default);border:none;outline:none;}",".empty-list.jsx-1434523738 img.jsx-1434523738{display:block;height:200px;opacity:60%;}"]})]})}function Rn(e){var t=e.replId;return(0,B.BX)("div",{className:q.default.dynamic([["1419674637",[me.j.mobileMax]]]),children:[(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[(0,B.tZ)(Ne.Z,{level:4,children:"Invite"}),(0,B.tZ)(In,{replId:t}),(0,B.tZ)(ln.Z,{replId:t})]}),(0,B.tZ)(q.default,{id:"1419674637",dynamic:[me.j.mobileMax],children:["div.__jsx-style-dynamic-selector{padding:var(--space-16);}","@media screen and (min-width:".concat(me.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32);}}")]})]})}var Dn=function(e){var t=e.children,n=e.showPopover,r=(0,Te.Z)("announcement","add-guest-new-user"),i=r.shouldDisplay,a=r.register,o=r.dismiss,s=ee.useState(!1),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=ee.useState(!1),p=(0,L.Z)(d,2),f=p[0],m=p[1];ee.useEffect((function(){n&&!f&&a()}),[f,a,n]);var h=i&&!f;return(0,B.BX)(ze.Z,{padding:-3,onClickOutside:function(){return m(!0)},positions:["bottom"],align:"center",isOpen:!!h,showArrow:!0,arrowOverrides:{arrowSize:12,arrowColor:"var(--accent-purple-default)"},children:[t,(0,B.BX)("div",{className:"jsx-1336263942 add-guest-popover",children:[(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[(0,B.BX)(ve.Ug,{spacing:1,children:[(0,B.tZ)(Ve.Z,{}),(0,B.tZ)(Ne.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,B.BX)(ge.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,B.tZ)(ve.Ug,{spacing:1,justify:"end",children:(0,B.tZ)(he.Z,{loading:c,onClick:function(){u(!0),(0,mt.track)(mt.events.ADD_GUEST_POPOVER_DISMISSED),o()},children:"Got it"})})]}),(0,B.tZ)(q.default,{id:"1336263942",children:[".add-guest-popover.jsx-1336263942{border:1px solid var(--accent-purple-default);border-radius:var(--border-radius-4);background:var(--background-root);padding:var(--space-16);max-width:300px;position:relative;pointer-events:auto;}",".add-guest-popover.jsx-1336263942 [title='new']{background:var(--accent-purple-default);}",".add-guest-popover.jsx-1336263942:global([title='new']){background:var(--accent-purple-default);}"]})]})]})},An=n(79381),Ln=n(83758),Bn=n(56002),Mn=n(36437),Un=n(28270),Xn=n(22384),Fn=n(49822),zn=n(38699);function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gn=60;function Wn(e){var t,n,r,i,a=e.wid,o=e.pud,s=(0,at.I0)(),l=(0,ae.useRouter)(),c=(0,ye.Z)(),u=(0,Fn.e$)(zn.H.Run),d=(0,Fn.e$)(zn.H.Share),p=ee.useRef(null),f=ee.useState(null),m=(0,L.Z)(f,2),h=m[0],g=m[1];!function(){var e=(0,Pe.Z)().fs,t=(0,at.I0)(),n=(0,Ut.Z)();ee.useEffect((function(){e.onStatusChange((function(e){e!==wn.kO.Clean&&t({type:"RESET_AUTOGRADER_DATA",wid:n})}))}),[e,n,t])}();var v=ee.useState(!1),b=(0,L.Z)(v,2),y=b[0],x=b[1],w=ee.useRef(y&&(null===d||void 0===d?void 0:d.isActive));ee.useEffect((function(){!w.current||null!==d&&void 0!==d&&d.isActive||x(!1),w.current=y&&(null===d||void 0===d?void 0:d.isActive)}),[d,y]),ee.useEffect((function(){null!==d&&void 0!==d&&d.isActive&&(y&&h?null===d||void 0===d||d.delegateTooltip(h):d.delegateTooltip(p.current))}),[d,y,h]);var k=(0,Zt.J)(a,o,"header"),Z=(0,L.Z)(k,1)[0],j=Z.runstate,O=Z.loading,E=(0,Pe.Z)(),_=E.presence,C=E.replbox,S=E.debuggest,P=(0,Ot.Z)({presence:_}),N=(0,Ln.Z)({replbox:C}),T=ee.useCallback((function(){_.getFollowedUser()&&_.unfollowUser()}),[_]),I=(0,Bn.Z)(S.mainClient),R=(0,Bn.Z)(null===I||void 0===I?void 0:I.state),D=(0,xe.ggE)({variables:{id:c}}),A=D.data,M=D.refetch;if("Repl"!==(null===A||void 0===A?void 0:A.repl.__typename))return(0,B.tZ)("header",{className:"jsx-1293497615",children:(0,B.tZ)(q.default,{id:"1293497615",children:["header.jsx-1293497615{background-color:var(--background-default);height:".concat(Gn,"px;}")]})},"loading-header");var U=A.currentUser,X=A.repl,F=null;F="replbox"===X.lang.engine?(0,B.tZ)(_n.Z,{runState:(0,Ln._)(N.runState),onClick:function(){T(),N.runState!==An.A.RUNNING?N.runState===An.A.IDLE&&((0,mt.track)(mt.events.RUN_BUTTON_CLICKED,{context:"workspace"}),N.run(),(0,mt.track)(mt.events.PROJECT_RAN,{wid:a,language:null===X||void 0===X?void 0:X.lang.id,replId:c,replTitle:null===X||void 0===X?void 0:X.title})):N.stopRun()}}):O?(0,B.tZ)(_n.Z,{runState:"loading",onClick:function(){return null}}):!I||"initializing"!==R&&"running"!==R&&"paused"!==R?"stopping"===j?(0,B.tZ)(_n.Z,{runState:"stopping",onClick:function(){return null}}):"running"===j?(0,B.tZ)(_n.Z,{runState:"running",onClick:function(){T(),s({type:"STOP_EVAL",wid:a})}}):(0,B.tZ)(_n.Z,{runState:"idle",onClick:function(){(0,mt.track)(mt.events.RUN_BUTTON_CLICKED,{context:"workspace"}),T(),s({type:"RUN_REPL",wid:a})}}):(0,B.tZ)(_n.Z,{runState:"running",onClick:function(){T(),I.stop()}});var z="Team"===(null===(t=X.owner)||void 0===t?void 0:t.__typename),V=Boolean("Team"===(null===(n=X.owner)||void 0===n?void 0:n.__typename)&&(null===(r=X.owner.capabilities)||void 0===r?void 0:r.isEducationPlan)),H=X.workspaceCta&&[xe.Sy.Submit,xe.Sy.Resubmit,xe.Sy.PublishTemplate,xe.Sy.EditTemplate,xe.Sy.ReviewSubmission].includes(X.workspaceCta)?X.workspaceCta:null,G=!V&&X.currentUserPermissions.editMultiplayers;return(0,B.BX)("header",{className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]]),children:[(0,B.BX)(Xn.Z,{background:"default",css:[Mn.l0.align.center,Mn.l0.flex.row,Mn.l0.height("100%"),"",""],children:[(0,B.BX)("div",{className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" left",children:[(0,B.tZ)(jt.default,{as:"/~",href:"/home",children:(0,B.tZ)("a",{className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" logo-link",children:(0,B.tZ)(kt.Z,{})})}),(0,B.tZ)(Ft.Z,{repl:X,refetch:M,onUpdateRepl:function(e){var t=!!e.title&&e.title!==X.title;if(s({type:"REPL_UPDATED",wid:a,updates:e}),t){var n=(0,vt.Z)(l.query);l.push({pathname:"/replEnvironment",query:Hn(Hn({},l.query),{},{replUrl:X.url})},{pathname:X.url,query:n},{shallow:!0})}}}),(0,B.tZ)(En.Z,{repl:X,canEdit:X.currentUserPermissions.containerAttach})]}),(0,B.tZ)("div",{className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" center",children:(0,B.BX)("div",{"data-cy":"ws-run-btn",className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" run-button-container",children:[(0,B.tZ)("div",{ref:null===u||void 0===u?void 0:u.delegateTooltip,onClick:function(){null!==u&&void 0!==u&&u.isActive&&u.next()},className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" run-button-content",children:F}),null!==u&&void 0!==u&&u.isActive?null:(0,B.tZ)("div",{className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" run-button-tooltip-container",children:(0,B.tZ)("div",{className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" run-button-tooltip-content",children:(0,B.tZ)(Cn.Z,{shortcut:{cmdOrCtrlKey:!0,key:"Enter"}})})})]})}),(0,B.BX)("div",{className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" right",children:[P&&P.length>0?(0,B.tZ)(Xt,{users:P}):null,null!==U&&void 0!==U&&U.isExplorer?(0,B.tZ)("a",{href:"/account#roles",target:"_blank",className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]])+" explorer-badge",children:(0,B.tZ)(Pn.Z,{colorway:"negative",size:28,alt:"You are an explorer. You may see bugs or other surprising behavior!",tooltipPlacement:"bottom-end",tooltipDelay:500,children:(0,B.tZ)(On.Z,{})})}):null,H?(0,B.tZ)(jn,{cta:H,replId:X.id,isGroupProject:!(null===(i=X.template)||void 0===i||!i.isGroupProject),wid:a,pud:o}):null,G?(0,B.tZ)("div",{ref:p,className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]]),children:(0,B.tZ)(Dn,{showPopover:X.currentUserPermissions.inviteGuests,children:(0,B.tZ)(Un.ZP,{onClick:function(){(0,mt.track)(mt.events.INVITE_MODAL_OPENED,{wid:a,language:X.lang.id,replId:X.id,source:"replEnvironment"}),x(!0)},iconLeft:(0,B.tZ)(zt.Z,{}),text:"Invite"})})}):null,(0,B.tZ)(Nn,{})]})]}),(0,B.tZ)(Pt.ZP,{isOpen:y,onRequestClose:function(){return x(!1)},children:(0,B.tZ)("div",{ref:g,className:q.default.dynamic([["3751443095",[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax]]]),children:z?(0,B.tZ)(un,{replId:X.id}):(0,B.tZ)(Rn,{replId:X.id})})}),(0,B.tZ)(q.default,{id:"3751443095",dynamic:[Gn,me.j.tabletMax,wt.X,me.j.tabletMax,me.j.mobileMax+100,me.j.mobileMax],children:["header.__jsx-style-dynamic-selector{position:fixed;top:0px;left:0px;width:100%;height:".concat(Gn,"px;z-index:101;background-color:var(--background-default);border-bottom:0.5px solid var(--background-highest);--button-width:60px;--center-width:var(--button-width);}"),"@media screen and (min-width:".concat(me.j.tabletMax,"px){header.__jsx-style-dynamic-selector{--button-width:96px;}}"),".logo-link.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--foreground-default);width:32px;height:32px;}",".left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{height:100%;padding:0 var(--space-8);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".left.__jsx-style-dynamic-selector{padding-left:".concat(wt.X,"px;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}"),".right.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".center.__jsx-style-dynamic-selector{display:none;width:var(--center-width);position:absolute;top:0;left:50%;height:100%;-webkit-transform:translatex(-50%);-ms-transform:translatex(-50%);transform:translatex(-50%);grid-auto-flow:column;grid-column-gap:var(--space-16);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".run-button-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:absolute;height:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".run-cta.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--white);}",".run-button-content.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%;position:absolute;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-8) 0;}",".run-button-container.__jsx-style-dynamic-selector:hover .run-button-tooltip-container.__jsx-style-dynamic-selector{opacity:1;visibility:visible;-webkit-transform:translate(0,56px);-ms-transform:translate(0,56px);transform:translate(0,56px);-webkit-transition:all 0.2s ease-in-out 0.2s;transition:all 0.2s ease-in-out 0.2s;}",".run-button-tooltip-container.__jsx-style-dynamic-selector{position:relative;right:18px;-webkit-transform:translate(0,48px);-ms-transform:translate(0,48px);transform:translate(0,48px);width:100px;visibility:hidden;opacity:0;-webkit-transition:all 0.18s ease-in-out 0.05s;transition:all 0.18s ease-in-out 0.05s;}",".run-button-tooltip-content.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-8) var(--space-4);border-radius:var(--border-radius-8);background:var(--background-highest);border:1px solid var(--outline-dimmer);color:var(--foreground-default);box-shadow:var(--shadow-1);}","@media screen and (min-width:".concat(me.j.tabletMax,"px){.run-button-tooltip-container.__jsx-style-dynamic-selector{right:0px;}}"),".center.__jsx-style-dynamic-selector>div,.left.__jsx-style-dynamic-selector>div{margin:0 !important;}",".explorer-badge.__jsx-style-dynamic-selector{display:none;}","@media screen and (min-width:".concat(me.j.mobileMax+100,"px){.left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{width:50%;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}.center.__jsx-style-dynamic-selector{display:grid;}.left.__jsx-style-dynamic-selector{padding-right:calc(var(--center-width) / 2 + var(--space-8));}.right.__jsx-style-dynamic-selector{padding-left:calc(var(--center-width) / 2 + var(--space-8));}}"),"@media screen and (min-width:".concat(me.j.mobileMax,"px){.explorer-badge.__jsx-style-dynamic-selector{display:unset;color:var(--foreground-default);border-radius:var(--border-radius-8);background-color:var(--accent-negative-dimmest);height:28px;}}")]})]})}function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(e){var t=e.wid,n=e.pud,r=e.style,i=(0,at.I0)(),a=(0,ye.Z)(),o=(0,ae.useRouter)(),s=(0,Zt.J)(t,n,"header"),l=(0,L.Z)(s,1)[0],c=l.runstate,u=l.loading,d=(0,xe.f7Y)({variables:{id:a}}).data,p=(0,Pe.Z)().replbox,f=(0,Ln.Z)({replbox:p});if("Repl"!==(null===d||void 0===d?void 0:d.repl.__typename))return(0,B.BX)("div",{style:r,className:"jsx-3273477858 lite-header",children:[(0,B.BX)("div",{className:"jsx-3273477858 lite-header-cta",children:[(0,B.tZ)(_n.Z,{runState:"loading",onClick:function(){return null},lite:!0}),";"]}),(0,B.tZ)(q.default,{id:"3273477858",children:[".lite-header.jsx-3273477858{background:var(--background-default);border-bottom:1px solid var(--outline-dimmest);height:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}",".lite-header-cta.jsx-3273477858{margin-left:auto;margin-right:auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100px;padding:var(--space-4) 0;}"]})]});var m=null,h=d.repl;m="replbox"===h.lang.engine?(0,B.tZ)(_n.Z,{lite:!0,runState:(0,Ln._)(f.runState),onClick:function(){f.runState!==An.A.RUNNING?f.runState===An.A.IDLE&&(f.run(),(0,mt.track)(mt.events.PROJECT_RAN,{wid:t,language:null===h||void 0===h?void 0:h.lang.id,replId:a,replTitle:null===h||void 0===h?void 0:h.title})):f.stopRun()}}):u?(0,B.tZ)(_n.Z,{runState:"loading",onClick:function(){return null},lite:!0}):"stopping"===c?(0,B.tZ)(_n.Z,{runState:"stopping",onClick:function(){return null},lite:!0}):"running"===c?(0,B.tZ)(_n.Z,{runState:"running",onClick:function(){return i({type:"STOP_EVAL",wid:t})},lite:!0}):(0,B.tZ)(_n.Z,{runState:"idle",onClick:function(){return i({type:"RUN_REPL",wid:t})},lite:!0});var g={href:"https://replit.com".concat(h.url),target:"_blank",title:"open ".concat(h.title)},v=o.query.lite,b=h.lang,y=b.displayName,x=b.icon;return(0,B.BX)("div",{style:r,className:"jsx-1667408490 lite-header",children:[(0,B.tZ)("div",{className:"jsx-1667408490 lite-header-left",children:v.includes("icon")||v.includes("title")?(0,B.BX)("a",qn(qn({},g),{},{className:"jsx-1667408490 "+(g&&null!=g.className&&g.className||"lite-header-title-link"),children:[v.includes("icon")?(0,B.tZ)("img",{alt:y,title:y,src:x||void 0,className:"jsx-1667408490 lite-header-lang-icon"}):null,v.includes("title")?(0,B.tZ)("div",{className:"jsx-1667408490 lite-header-title",children:(0,B.tZ)("div",{className:"jsx-1667408490",children:h.title})}):null]})):null}),(0,B.tZ)("div",{className:"jsx-1667408490 lite-header-cta",children:m}),(0,B.tZ)("div",{className:"jsx-1667408490 lite-header-right",children:v.includes("nologo")?(0,B.tZ)("a",qn(qn({},g),{},{className:"jsx-1667408490 "+(g&&null!=g.className&&g.className||"lite-header-open-link"),children:"open"})):(0,B.BX)("a",qn(qn({},g),{},{className:"jsx-1667408490 "+(g&&null!=g.className&&g.className||"lite-header-logo-link"),children:["open in"," ",(0,B.tZ)("img",{src:"/public/images/logo-small.png",className:"jsx-1667408490 lite-header-logo"})]}))}),(0,B.tZ)(q.default,{id:"1667408490",children:[".lite-header.jsx-1667408490{background:var(--background-root);border-bottom:1px solid var(--outline-dimmest);height:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}",".lite-header-title-link.jsx-1667408490{font-size:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;position:relative;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-title.jsx-1667408490{position:relative;top:1px;display:none;max-width:100%;overflow:hidden;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-title.jsx-1667408490>div.jsx-1667408490{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}",".lite-header-title-link.jsx-1667408490:hover .lite-header-title.jsx-1667408490{border-color:var(--accent-primary-default);}",".lite-header-cta.jsx-1667408490{margin-left:auto;margin-right:auto;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:100px;padding:var(--space-4) 0;}",".lite-header-cta.jsx-1667408490>div{margin-left:0px;height:100%;border-bottom:0 none;}",".lite-header-lang-icon.jsx-1667408490{width:20px;margin-right:4px;}",".lite-header-left.jsx-1667408490,.lite-header-right.jsx-1667408490{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:calc(50% - 50px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:10px;padding-right:10px;}",".lite-header-right.jsx-1667408490{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".lite-header-logo-link.jsx-1667408490{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;border-bottom:none;color:var(--foreground-dimmest);font-size:14px;-webkit-text-decoration:none;text-decoration:none;}",".lite-header-logo-link.jsx-1667408490:hover{color:var(--accent-primary-default);}",".lite-header-logo.jsx-1667408490{width:60px;margin-left:4px;}","@media screen and (min-width:400px){.lite-header-title.jsx-1667408490{display:block;}.lite-header-logo.jsx-1667408490{width:80px;margin-left:8px;}}"]})]})}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $n=(0,yt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,autograder:{running:!1,currentTest:0,tests:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt.qg:return Jn(Jn({},e),t.initialState);case bt.hq:return Jn(Jn({},e),{},{loading:!0});case bt.FG:return Jn(Jn({},e),{},{loading:!1});case"WORKSPACE_WILL_UNMOUNT":return Jn({},e);case"SET_AUTOGRADER_TESTS":return t.tests?Jn(Jn({},e),{},{autograder:Jn(Jn({},e.autograder),{},{tests:t.tests})}):e;case"AUTOGRADER_STARTED":return Jn(Jn({},e),{},{autograder:Jn(Jn({},e.autograder),{},{running:!0,currentTest:0})});case"AUTOGRADER_STOPPED":return Jn(Jn({},e),{},{autograder:Jn(Jn({},e.autograder),{},{running:!1})});case"AUTOGRADER_TEST_COMPLETED":return Jn(Jn({},e),{},{autograder:Jn(Jn({},e.autograder),{},{tests:t.IOTests||e.autograder.tests,currentTest:e.autograder.currentTest+1})});case"RESET_AUTOGRADER_DATA":return Jn(Jn({},e),{},{autograder:Jn(Jn({},e.autograder),{},{currentTest:0})});default:return e}},runstate:xt.Z});function er(e){return(0,ae.useRouter)().query.lite?(0,B.tZ)(Yn,Jn({},e)):(0,B.tZ)(Wn,Jn({},e))}var tr=n(70917),nr=n(18972),rr=n(20682),ir=n(7512),ar=n(3460),or=n(68953),sr=n(54107),lr=n(65698);var cr=/(^.*language.*=.*?)(".*").*$/m,ur=/(^.*run.*=.*?)(".*").*$/m;function dr(e){if(!e.match(cr)||!e.match(ur))return null;var t=cr.exec(e),n=ur.exec(e);if(!t||!n)return null;var r,i,a=(0,L.Z)(t,3),o=a[1],s=a[2],l=(0,L.Z)(n,3),c=l[1],u=l[2];try{r=JSON.parse(s),i=JSON.parse(u)}catch(d){return null}return"string"!==typeof r||"string"!==typeof i?null:{languageBefore:o,language:r,languageIndex:t.index,runBefore:c,run:i,runIndex:n.index}}function pr(e){var t=e.contents,n=e.language,r=e.run,i=dr(t);if(!i)throw new Error("Parse error");var a=[];a.push(i.languageIndex+i.languageBefore.length+1),i.language.length&&a.push({d:i.language.length}),a.push(n);var o=[];return o.push(i.runIndex+i.runBefore.length+1),i.run.length&&o.push({d:i.run.length}),o.push(r),i.runIndex>i.languageIndex?nr.type.compose(o,a):nr.type.compose(a,o)}function fr(e){return mr.apply(this,arguments)}function mr(){return(mr=(0,X.Z)(U().mark((function e(t){var n,r,i;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.run,i=t.language,e.abrupt("return",new Promise((function(e,t){var a=n.watchOtFile(".replit",{onReady:function(n){var o=n.initialContent,s=n.writeOps,l=o.toString("utf8");if(!dr(l))return t(new Error("Parse error")),void a();s(pr({contents:l,run:r,language:i})),e(a)},onError:t})})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(e){var t=e.children;return(0,B.BX)(or.Z,{css:(0,tr.iv)({width:"100% ",height:"100%",backgroundColor:"var(--background-default)",color:Mn.TV.foregroundDefault,fontSize:Mn.TV.fontSizeDefault,overflowY:"auto"},"",""),children:[(0,B.tZ)(or.Z,{css:[Mn.l0.flex.row,"",""],children:(0,B.BX)(or.Z,{css:[Mn.l0.flex.row,Mn.l0.align.center,Mn.l0.p(4),"font-family:var(--font-family-code);background-color:var(--accent-primary-dimmest);color:var(--accent-primary-default);",""],children:[(0,B.tZ)("img",{css:[Mn.l0.mr(8),"height:10px;width:8px;",""],src:"/public/images/prompt.png"}),(0,B.tZ)(ge.Z,{size:"small",children:".replit"})]})}),(0,B.tZ)(or.Z,{css:[Mn.l0.p(16),"flex:1 1 auto;overflow-y:auto;",""],children:t})]})}var gr={name:"1ww443i",styles:"max-width:200px"};function vr(e){var t=e.isApplyingConfig,n=ee.useState("Unknown"===fe().get(e.initialLanguage).displayName?"bash":e.initialLanguage),r=(0,L.Z)(n,2),i=r[0],a=r[1],o=(0,sr.Y)(e.initialRun,(function(e){if(!e)return{message:"add a run command"}}));return(0,B.BX)("form",{css:(0,tr.iv)({fontFamily:Mn.TV.fontFamilyCode},"",""),onSubmit:function(t){t.preventDefault(),o.value?e.onSubmit({language:i,run:o.value}):o.validate()},children:[(0,B.BX)(or.Z,{css:[Mn.l0.pt(16),"",""],children:[(0,B.tZ)("label",{css:[Mn.l0.pb(8),"",""],htmlFor:"lang-sel",children:"select language"}),(0,B.tZ)(or.Z,{css:gr,children:(0,B.tZ)(ir.ZP,{disabled:t,initialSelectedItem:fe().get(i),placeholder:"Language",onSelect:function(e){e&&a(e.key)}})})]}),(0,B.BX)(or.Z,{css:["max-width:400px;",Mn.l0.pt(32),Mn.l0.colWithGap(8),"",""],children:[(0,B.tZ)("label",{htmlFor:"run-sel",children:"configure the run button"}),(0,B.tZ)(Yt.ZP,{disabled:t,id:"run-sel",type:"text",value:o.value,style:{padding:"8px",fontFamily:Mn.TV.fontFamilyCode},placeholder:"enter command",onChange:function(e){o.setValue(e.currentTarget.value)}}),o.error?(0,B.BX)(or.Z,{css:[{color:"var(--accent-negative-default)",fontSize:Mn.TV.fontSizeSmall},Mn.l0.rowWithGap(4),Mn.l0.align.center,"",""],children:[(0,B.tZ)(lr.Z,{size:"small"}),(0,B.tZ)(or.Z,{children:o.error.message})]}):null,(0,B.tZ)("a",{css:[{fontSize:Mn.TV.fontSizeSmall},"",""],target:"_blank",href:"https://docs.replit.com/repls/dot-replit",children:"not sure what to do?"})]}),(0,B.tZ)(or.Z,{css:[Mn.l0.flex.row,Mn.l0.pt(32),"",""],children:(0,B.tZ)(he.Z,{color:"primary",type:"submit",disabled:t||Boolean(o.error),children:t?"saving...":"done"})}),(0,B.tZ)(Pt.ZP,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,B.tZ)(or.Z,{css:[Mn.l0.borderRadius(16),Mn.l0.p(32),"background-color:var(--background-default);",""],children:(0,B.BX)(ve.gC,{align:"center",spacing:1,children:[(0,B.tZ)(Nt.Z,{}),(0,B.BX)(ge.Z,{children:["Upgrading to ",fe().get(i).displayName]})]})})})]})}function br(){return(0,B.BX)(or.Z,{css:(0,tr.iv)({fontFamily:Mn.TV.fontFamilyCode},"",""),children:[(0,B.tZ)(or.Z,{children:".replit looks a lil messed up :/"}),(0,B.tZ)("a",{css:[Mn.l0.pt(8),{fontSize:Mn.TV.fontSizeSmall},"",""],target:"_blank",href:"https://docs.replit.com/repls/dot-replit",children:"view docs"})]})}function yr(){return(0,B.tZ)(or.Z,{children:(0,B.BX)("p",{css:(0,tr.iv)({fontFamily:Mn.TV.fontFamilyCode},"",""),children:["initializing run configuration",(0,B.tZ)(rr.Z,{style:{color:"var(--foreground-default)"}})]})})}var xr=function(){var e,t=(0,ye.Z)(),n=(0,Pe.Z)().fs,r=(0,xe.HmU)({variables:{replId:t}}),i="Repl"===(null===(e=r.data)||void 0===e?void 0:e.repl.__typename)?r.data.repl:null,a=function(e,t){var n=ee.useState(null),r=(0,L.Z)(n,2),i=r[0],a=r[1];return ee.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||a(e)})),function(){n=!0}}),[e,t]),i}(n,".replit"),o=ee.useState(!1),s=(0,L.Z)(o,2),l=s[0],c=s[1],u=(0,xe.Fn2)(),d=(0,L.Z)(u,1)[0],p=function(){var e=(0,X.Z)(U().mark((function e(r){var i,a,o,s,l;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.language,a=r.run,c(!0),(0,mt.track)(mt.events.REPL_FROM_REPO_RUN_CONFIG_COMPLETED),e.next=5,n.readFile(".replit");case 5:if(o=e.sent,s=function(){},!o.error){e.next=12;break}return e.next=10,n.writeFile(".replit",ar.Z.from(['language = "'.concat(i,'"'),'run = "'.concat(a,'"')].join("\n")));case 10:e.next=15;break;case 12:return e.next=14,fr({fs:n,run:a,language:i});case 14:s=e.sent;case 15:return e.next=17,n.flush();case 17:return e.next=19,n.persist({skipDebounce:!0});case 19:return s(),l={id:t,language:i},e.next=23,d({variables:{input:l}});case 23:window.location.replace(window.location.pathname);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!i||!a)return(0,B.tZ)(hr,{children:(0,B.tZ)(yr,{})});if(null!==a&&void 0!==a&&a.error)return(0,B.tZ)(hr,{children:(0,B.tZ)(br,{})});var f=dr(a.content.toString("utf8"));return f?(0,B.tZ)(hr,{children:(0,B.tZ)(vr,{initialLanguage:f.language,initialRun:f.run,isApplyingConfig:l,onSubmit:p})}):(0,B.tZ)(hr,{children:(0,B.tZ)(br,{})})},wr=n(20711);function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jr=function(e){var t=e.navItems,n=e.activePanePuds;return ee.useEffect((function(){var e=document.body;e&&e.classList&&(t.some((function(e){return n.includes(e.pud)}))?e.classList.remove("sidenav-closed"):e.classList.add("sidenav-closed"))}),[t,n]),(0,B.BX)("div",{className:"jsx-3085448894 side-nav",children:[(0,B.tZ)("div",{className:"jsx-3085448894 side-nav-options",children:t.map((function(e){return(0,B.tZ)(Or,Zr({},e),e.type)}))}),(0,B.tZ)(q.default,{id:"3085448894",children:[".side-nav.jsx-3085448894{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:var(--background-default);border-top-left-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);border-right:1px solid var(--background-higher);}",".side-nav-options.jsx-3085448894{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;padding:var(--space-4) 0;}",".side-nav-active-pane.jsx-3085448894{-webkit-flex:1;-ms-flex:1;flex:1;height:100%;overflow:hidden;}"]})]})},Or=function(e){var t=e.icon?e.icon:wr[e.svg],n=e.iconWrapper,r=ee.useState(!0),i=(0,L.Z)(r,2),a=i[0],o=i[1],s={"data-testid":"sidenav-".concat(e.type),"aria-label":e.tooltip,"data-microtip-position":"right",role:"tooltip"};return(0,B.BX)("div",Zr(Zr({onClick:function(){e.onClick()}},n?{}:s),{},{className:"jsx-1201232229 "+(St()("side-nav-item",{"side-nav-item-active":e.isActive})||""),children:[n?(0,B.tZ)(n,{pud:e.pud,wid:e.wid,isVisible:a,onDismiss:function(){return o(!1)},tooltipProps:s,className:"jsx-1201232229",children:(0,B.tZ)("div",{onClick:function(){return o(!1)},className:"jsx-1201232229 side-nav-item-img",children:(0,B.tZ)(t,{className:"jsx-1201232229"})})}):(0,B.tZ)("div",{className:"jsx-1201232229 side-nav-item-img",children:(0,B.tZ)(t,{className:"jsx-1201232229"})}),(0,B.tZ)(q.default,{id:"1201232229",children:[".side-nav-item.jsx-1201232229{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;border-radius:var(--border-radius-4);height:calc(var(--space-48) - var(--space-8));width:calc(var(--space-48) - var(--space-8));margin-bottom:var(--space-4);}",".side-nav-item.jsx-1201232229:hover{background:var(--background-higher);}",".side-nav-item.jsx-1201232229:active{background:var(--background-higher);}",".side-nav-item-active.jsx-1201232229{background:var(--accent-primary-dimmest);color:var(--foreground-default);}",".side-nav-item-img.jsx-1201232229{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:20px;width:20px;color:var(--foreground-dimmest);}",".side-nav-item-img.jsx-1201232229 svg.jsx-1201232229{height:100%;width:100%;}",".side-nav-item.jsx-1201232229:hover .side-nav-item-img.jsx-1201232229,.side-nav-item-active.jsx-1201232229 .side-nav-item-img.jsx-1201232229{color:var(--accent-primary-strongest);}"]})]}))};function Er(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pr=function(e){var t=e.wid,n=e.pud,r=(0,Zt.J)(t,n,"sidenav"),i=(0,L.Z)(r,1)[0],a=i.activePanePuds,o=i.navItems,s=(0,at.I0)();return(0,B.tZ)(jr,{activePanePuds:a,navItems:o.map((function(e){return{type:e.pluginType,wid:t,pud:e.pud,onClick:function(){return s(function(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){i().workspace[t].plugins[n].state.activePanePuds.includes(r)?e(Nr({wid:t,pud:n,forPud:r})):e(Tr({wid:t,pud:n,forPud:r}))}}({wid:t,pud:n,forPud:e.pud}))},isActive:a.includes(e.pud),svg:e.svg,tooltip:e.tooltip,icon:e.icon,iconWrapper:e.iconWrapper}}))})};function Nr(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){var a=i().workspace[t].layout;e((0,bt.fc)(Sr({property:void 0,wid:t},gt.Od(a,r)))),e({type:"ON_SIDEPANE_CLOSE",wid:t,pud:n,forPud:r})}}function Tr(e){var t=e.wid,n=e.pud,r=e.forPud;return function(e,i){var a=i().workspace[t].layout,o=i().workspace[t].plugins[n].state.activePanePuds,s=gt.Bp(a,n);if(s){for(var l=gt.QK(a,gt.J9(s));"split"===l.type;)l=l.left;"pud"in l&&o.includes(l.pud)&&e(Nr({wid:t,pud:n,forPud:l.pud})),a=i().workspace[t].layout;var c=i().workspace[t].plugins[n].state.savedPos;e((0,bt.fc)(Sr({property:void 0,wid:t},gt.$T(a,r,"leftOf",gt.J9(s),{position:c})))),(0,mt.track)(mt.events.SIDEPANE_PLUGIN_OPENED,{plugin:r}),e({type:"ON_SIDEPANE_OPEN",wid:t,activePanePud:r})}}}function Ir(e,t,n){switch(n.type){case bt.tK:return function(e){var t=e.wid,n=e.pud,r=e.paneType;return function(e,i){var a,o=Er(i().workspace[t].plugins[n].state.navItems);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s.pluginType===r)return void e(Tr({wid:t,pud:n,forPud:s.pud}))}}catch(l){o.e(l)}finally{o.f()}}}({wid:e,pud:t,paneType:n.paneType});case"SET_SPLIT_POSITION":return function(e){var t=e.wid,n=e.pud,r=e.position,i=e.path;return 0===r?function(e,r){var a=r().workspace[t],o=a.layout,s=a.plugins[n].state,l=gt.QK(o,i);"left"in l&&"pud"in l.left&&s.activePanePuds.includes(l.left.pud)&&e(Nr({wid:t,pud:n,forPud:l.left.pud}))}:100===r?function(e,r){var a=r().workspace[t],o=a.layout,s=a.plugins[n].state,l=gt.QK(o,i);"right"in l&&"pud"in l.right&&s.activePanePuds.includes(l.right.pud)&&e(Nr({wid:t,pud:n,forPud:l.right.pud}))}:function(e,a){var o=a().workspace[t],s=o.layout,l=o.plugins[n].state,c=gt.QK(s,i);"left"in c&&"pud"in c.left&&l.activePanePuds.includes(c.left.pud)&&e({type:"SET_SAVED_POSITION",position:r,pud:n,wid:t})}}({wid:e,pud:t,position:n.position,path:n.path});case"OPEN_SIDE_NAV_ITEM":return Tr({wid:e,pud:t,forPud:n.navItem.pud});case"REMOVE_SIDE_NAV_ITEM":return function(r,i){(0,Zt.Z)(i(),e,t,"sidenav").activePanePuds.includes(n.navItemPud)&&r(Nr({wid:e,pud:t,forPud:n.navItemPud}))};default:return null}}function Rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{navItems:[],activePanePuds:[],savedPos:15},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt.qg:return Sr(Sr({},e),t.initialState);case"PLUGIN_CLOSED":var n=t.closedPud;return Sr(Sr({},e),{},{activePanePuds:e.activePanePuds.filter((function(e){return e!==n}))});case"ON_SIDEPANE_CLOSE":var r=t.forPud;return Sr(Sr({},e),{},{activePanePuds:e.activePanePuds.filter((function(e){return e!==r}))});case"ON_SIDEPANE_OPEN":return e.activePanePuds.includes(t.activePanePud)?e:Sr(Sr({},e),{},{activePanePuds:[].concat((0,Vt.Z)(e.activePanePuds),[t.activePanePud])});case"SET_SAVED_POSITION":return Sr(Sr({},e),{},{savedPos:t.position});case"ADD_SIDE_NAV_ITEM":if(e.navItems.some((function(e){return e.pud===t.navItem.pud})))return e;if("index"in t){if(t.index>e.navItems.length)throw new Error("Sidenav index out of range");return Sr(Sr({},e),{},{navItems:[].concat((0,Vt.Z)(e.navItems.slice(0,t.index)),[t.navItem],(0,Vt.Z)(e.navItems.slice(t.index)))})}return Sr(Sr({},e),{},{navItems:[].concat((0,Vt.Z)(e.navItems),[t.navItem])});case"REMOVE_SIDE_NAV_ITEM":var i=e.navItems.filter((function(e){return e.pud!==t.navItemPud}));return i.length===e.navItems.length?e:Sr(Sr({},e),{},{navItems:i});default:return e}}var Dr,Ar=n(67483),Lr=n(91772),Br=n(1861),Mr=n(63683),Ur=n(65718);!function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB"}(Dr||(Dr={}));var Xr=n(44116),Fr=n(18697),zr=n(33548);var Vr=function(e){var t=e.wid,n=e.language,r=e.tabIndex,i=e.filePath,a=e.onClick,o=e.onClose,s=e.isActiveFile,l=(0,Pe.Z)(),c=l.session,u=l.fs,d=(0,Xr.c)({item:{type:Dr.FileHeaderTab,path:i,isFolder:!1},type:Dr.FileHeaderTab}),p=(0,L.Z)(d,2)[1],f=(0,Lr.L)({accept:[wn.Tv.File,Dr.FileNode,Dr.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver()&&!n}},drop:function(e){if(e&&!e.isFolder){var a=e.path;a!==i&&(c.openFile(a,{tabIndex:r}),(0,mt.track)(mt.events.FILE_HEADER_TAB_REPLACED,{wid:t,language:n,tabIndex:r}))}}}),m=(0,L.Z)(f,2),h=m[0],g=m[1],v=function(e,t){return e?"var(--background-default)":t?"var(--background-higher)":"var(--background-root)"}(s,h.isOver),b=ee.useState(!1),y=(0,L.Z)(b,2),x=y[0],w=y[1],k=i.split("/"),Z=k.pop(),j=k.join("/"),O=function(e){var t=e.path,n=e.initialExpanded,r=(0,Pe.Z)().fs;return(0,zr.Z)({path:t,initialExpanded:n,fs:r})}({path:j.length>0?j:".",initialExpanded:!0}).children,E=null===O||void 0===O?void 0:O.filter((function(e){return e.filename!==Z}));return(0,B.BX)("div",{ref:function(e){p(e),g(e)},onClick:a,className:q.default.dynamic([["3231529517",[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"]]])+" "+(St()("file-header-tab",{first:0===r})||""),children:[(0,B.tZ)("span",{onDoubleClick:function(){w(!0)},className:q.default.dynamic([["3231529517",[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"]]])+" file-path",children:x?(0,B.tZ)(Fr.Z,{onSubmit:function(e){var t=j.length>0?j+"/"+e:e;u.moveFile(i,t),w(!1)},onCancel:function(){w(!1)},loading:!1,siblings:E||[],parentPath:j,type:wn.Tv.File,initialValue:Z,rename:!0}):i}),(0,B.tZ)(he.Z,{className:"close-file-button",size:"small",border:!1,filled:!1,Icon:Kt.Z,onClick:o}),(0,B.tZ)(q.default,{id:"3231529517",dynamic:[v,s?"var(--foreground-default)":"var(--foreground-dimmer)",s?"var(--shadow-1)":"none",s?"auto":"var(--background-root)"],children:[".file-header-tab.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0 var(--space-24) 0 var(--space-8);cursor:pointer;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;background-color:".concat(v,";color:").concat(s?"var(--foreground-default)":"var(--foreground-dimmer)",";box-shadow:").concat(s?"var(--shadow-1)":"none",";min-width:var(--space-80);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);}"),".sidenav-closed .file-header-tab.first{border-top-left-radius:0px;}",".close-file-button{opacity:0.7;position:absolute;right:var(--space-4);padding:2px !important;color:var(--foreground-dimmer) !important;}",".file-header-tab.__jsx-style-dynamic-selector:hover{background-color:".concat(s?"auto":"var(--background-root)",";color:var(--foreground-default);}"),".file-header-tab.__jsx-style-dynamic-selector:hover .file-path{color:var(--foreground-default);}",".file-header-tab.__jsx-style-dynamic-selector:hover .close-file-button{opacity:1;}",".close-file-button:hover{color:var(--foreground-default) !important;}",".file-path.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}",".spacer.__jsx-style-dynamic-selector{width:var(--space-8);}"]})]})},Hr=function(e){var t=e.text;return(0,B.BX)("div",{className:"jsx-2757879686 empty",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:2,children:t}),(0,B.tZ)(q.default,{id:"2757879686",children:[".empty.jsx-2757879686{background-color:var(--background-default);height:100%;min-width:var(--space-80);padding:var(--space-8) var(--space-16);border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);}"]})]})},Gr=n(89715),Wr=n(49668),Kr=n(39219);function qr(e){var t=e.isOn,n=e.onChange;return(0,B.BX)("div",{className:"jsx-814415010 toggle-container",children:[(0,B.BX)(ve.Ug,{spacing:1,align:"center",wrap:"nowrap",children:[(0,B.tZ)(ge.Z,{size:"small",children:"Preview"}),(0,B.tZ)(Kr.Z,{isOn:t,onChange:n})]}),(0,B.tZ)(q.default,{id:"814415010",children:[".toggle-container.jsx-814415010{background-color:var(--background-default);padding:4px var(--space-8);border-top-left-radius:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);}"]})]})}var Yr=n(66676),Qr=n(45006),Jr=n(96187),$r=n(47686);function ei(e){var t=e.id,n=e.username,r=e.color,i=(0,Pe.Z)().presence,a=(0,xe.qC4)({variables:{ids:[t]},ssr:!1}).data;if(!a)return null;var o=a.usersByIds,s=(0,L.Z)(o,1)[0].image;return(0,B.BX)("div",{className:q.default.dynamic([["2308562916",[r]]])+" following-indicator",children:[(0,B.BX)(ve.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,B.tZ)(ve.gC,{className:"stack",align:"center",justify:"center",children:(0,B.tZ)(_t,{id:t,username:n,image:s,color:r,size:22})}),(0,B.tZ)(ve.gC,{className:"text-container",align:"center",justify:"center",children:(0,B.BX)(ge.Z,{className:"following-text",children:["Observing ",n]})}),(0,B.tZ)(ve.gC,{className:"stack",align:"center",justify:"center",children:(0,B.tZ)(he.Z,{size:"small",filled:!1,border:!1,textColor:r,onClick:function(){i.unfollowUser()},children:(0,B.tZ)(Kt.Z,{})})})]}),(0,B.tZ)(q.default,{id:"2308562916",dynamic:[r],children:[".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);}",".following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip;}",".following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px;}",".following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(r,";white-space:nowrap;}")]})]})}function ti(){var e=function(){var e=(0,Pe.Z)().presence,t=ee.useState(e.getFollowingUsers()),n=(0,L.Z)(t,2),r=n[0],i=n[1];return ee.useEffect((function(){return i(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){i(e.followingUsers)}))}),[e]),r}();return 0===e.length?null:1===e.length?(0,B.tZ)(ni,{user:e[0]}):(0,B.BX)("div",{className:"jsx-2812325962 followed-indicator",children:[(0,B.BX)(ge.Z,{children:[e.length," users are observing you"]}),(0,B.tZ)(q.default,{id:"2812325962",children:[".followed-indicator.jsx-2812325962{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]})]})}function ni(e){var t=e.user,n=(0,xe.qC4)({variables:{ids:[t.id]},ssr:!1}).data;if(!n)return null;var r=n.usersByIds,i=(0,L.Z)(r,1)[0].image,a=t.id,o=t.username,s=t.color;return(0,B.BX)("div",{className:"jsx-1146426626 followed-indicator",children:[(0,B.BX)(ve.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,B.tZ)(_t,{id:a,username:o,image:i,color:s,size:22}),(0,B.tZ)(ge.Z,{className:"username",children:o}),(0,B.tZ)("div",{className:"jsx-1146426626 text",children:(0,B.tZ)(ge.Z,{children:"is observing you"})})]}),(0,B.tZ)(q.default,{id:"1146426626",children:[".followed-indicator.jsx-1146426626{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);}",".text.jsx-1146426626{white-space:nowrap;}",".followed-indicator.jsx-1146426626 .stack{height:100%;}",".followed-indicator.jsx-1146426626 .username{overflow:clip;max-width:150px;display:inline-block;text-overflow:ellipsis;}"]})]})}var ri=n(29912),ii=function(e){var t,n=e.style,r=e.wid,i=e.pud,a=(0,Gr.Fg)(),o=(0,ye.Z)(),s=(0,Pe.Z)(),l=s.session,c=s.fs,u=s.presence,d=(0,Wr.Z)().openFiles,p=(0,xn.Z)(),f=(0,Yr.Z)(),m=(0,$r.Z)(),h=(0,Jr.Z)(),g=(0,zr.Z)({fs:c,path:Qr.Q,initialExpanded:!0}).loading,v=(0,xe.IqK)({variables:{replId:o}}).data,b="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl.language:"",y=(0,at.v9)((function(e){var t=(0,Zt.Z)(e,r,i,"fileheader").filestatus;if(!p||!b)return!0;var n=t[p];return n===Ur.t.Unloaded||n===Ur.t.Loading})),x=!y&&p&&!m&&(0,Mr.A)(p,b)?(0,B.tZ)("div",{"aria-label":"auto-format","data-microtip-position":"left",role:"tooltip",children:(0,B.tZ)(ri.ZP,{filePath:p,replLanguage:b})}):null,w="md"===(0,kn.r6)(p||""),k=ee.useCallback((function(){(0,mt.track)(mt.events.MARKDOWN_PREVIEW_TOGGLE_CLICKED,{isOn:Boolean(f)}),l.setPreviewedFile(f?null:p)}),[l,f,p]),Z=d.map((function(e,t){return(0,B.tZ)(Vr,{wid:r,language:b,filePath:e,tabIndex:t,onClick:function(){e!==p&&(l.openFile(e),m&&u.unfollowUser())},onClose:function(e){e.stopPropagation(),l.closeTab(t),(0,mt.track)(mt.events.FILE_HEADER_TAB_CLOSED,{wid:r,language:b})},isActiveFile:e===p},t)})),j=ee.useRef(null),O=null===(t=j.current)||void 0===t?void 0:t.osInstance(),E=ee.useRef(0),_=ee.useRef(0),C=(0,Lr.L)({accept:[wn.Tv.File,Dr.FileNode,Dr.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e,t){if(e&&!e.isFolder&&!t.didDrop()){var n=d.length;l.openFile(e.path,{tabIndex:n}),(0,mt.track)(mt.events.FILE_HEADER_TAB_REPLACED,{wid:r,language:b,tabIndex:n})}}}),S=(0,L.Z)(C,2),P=S[0],N=S[1],T=a===Gr.V2.replitLight?"os-theme-dark":"os-theme-light",I=g?"Loading files...":"No files open";return(0,B.BX)("div",{ref:N,style:n,className:q.default.dynamic([["1385826773",[P.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",P.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header",children:[(0,B.tZ)(Br.E,{className:T,options:{overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}},onWheel:function(e){if(O&&0!==e.deltaY&&0===e.deltaX){var t=e.deltaY<0?-1:1,n=_.current!==t?O.scroll().position.x:E.current,r=25*t,i=O.scroll().max.x;E.current=Math.max(0,Math.min(i,n-r)),_.current=t;window.requestAnimationFrame((function e(){if(O){var t=O.scroll().position.x,n=E.current-t,r=Math.round(t+n/10);0!==n&&(O.scroll({x:r}),window.requestAnimationFrame(e))}}))}},ref:j,children:(0,B.tZ)("div",{className:q.default.dynamic([["1385826773",[P.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",P.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-name",children:Z.length>0?Z:(0,B.tZ)(Hr,{text:I})})}),y&&(0,B.tZ)("div",{className:q.default.dynamic([["1385826773",[P.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",P.isOver?"var(--background-higher)":"var(--background-root)"]]])+" loading-wrapper",children:(0,B.tZ)("div",{className:q.default.dynamic([["1385826773",[P.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",P.isOver?"var(--background-higher)":"var(--background-root)"]]])+" file-header-loading-bar"})}),m?null:(0,B.tZ)(ti,{}),Z.length>0&&x,m?(0,B.tZ)(ei,{id:m.id,username:m.username,color:m.color}):null,w&&!m?(0,B.tZ)(qr,{isOn:Boolean(f),onChange:k}):null,(0,B.tZ)(q.default,{id:"1385826773",dynamic:[P.isOver?"var(--background-higher)":"var(--background-root)",h?"0 0 0 3px ".concat(h):"0",m?"inset(-4px -4px 0px -4px)":"none",P.isOver?"var(--background-higher)":"var(--background-root)"],children:[".file-header.__jsx-style-dynamic-selector{position:relative;z-index:3;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:48px;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;background-color:".concat(P.isOver?"var(--background-higher)":"var(--background-root)",";border-top-right-radius:var(--border-radius-4);border-top-left-radius:var(--border-radius-4);box-shadow:").concat(h?"0 0 0 3px ".concat(h):"0",";-webkit-clip-path:").concat(m?"inset(-4px -4px 0px -4px)":"none",";clip-path:").concat(m?"inset(-4px -4px 0px -4px)":"none",";}"),".file-header.__jsx-style-dynamic-selector .os-host{height:100%;-webkit-flex:auto;-ms-flex:auto;flex:auto;min-width:0;}",".os-content-glue{height:50px !important;}",".file-header.__jsx-style-dynamic-selector .os-scrollbar-handle{max-width:300px;}",".file-header-name.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;background-color:".concat(P.isOver?"var(--background-higher)":"var(--background-root)",";color:var(--foreground-dimmer);font-size:var(--font-size-default);height:100%;text-align:center;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}"),".loading-wrapper.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;right:0;height:2px;overflow:hidden;}",".file-header-loading-bar.__jsx-style-dynamic-selector{width:40px;height:2px;position:absolute;bottom:0;left:0;background:var(--background-higher);-webkit-animation:loading-bar-move-__jsx-style-dynamic-selector 2.5s ease-in-out 0s infinite;animation:loading-bar-move-__jsx-style-dynamic-selector 2.5s ease-in-out 0s infinite;-webkit-animation-fill-mode:forward;animation-fill-mode:forward;}","@-webkit-keyframes loading-bar-move-__jsx-style-dynamic-selector{0%{left:-7%;}100%{left:105%;}}","@keyframes loading-bar-move-__jsx-style-dynamic-selector{0%{left:-7%;}100%{left:105%;}}"]})]})},ai=(0,yt.$)({filestatus:Ur.Z}),oi=n(73935),si=n(91296),li=n.n(si),ci=n(93096),ui=n.n(ci),di=n(81279),pi=n(74143),fi=n(71632),mi=n(46944);function hi(e){if(null!==e)return mi.Z.get(e)}function gi(e){if(null!==e)return mi.Z.get(e)}function vi(e){return mi.Z.safeGet(e)}var bi=n(51928),yi=n(4433),xi=n(6913),wi=n(23752);function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ji=(0,yt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{activeLineDecorations:[],didDisconnect:!1,editorHandle:null,externalCursors:{},filePath:void 0,keyModeHandle:null,lite:!1,modelHandle:null,peekDefinitionResolvers:{},promptForFileStoreValue:!1,statusBarHandle:null,viewState:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt.qg:return Zi(Zi({},e),t.initialState);case"MOVE_FILE":return e.filePath?e.filePath===t.path?Zi(Zi({},e),{},{filePath:t.to}):(0,pi.yr)(t.path,e.filePath)?Zi(Zi({},e),{},{filePath:(0,pi.hk)(t.path,t.to,e.filePath)}):e:e;case"REGISTER_MODEL_HANDLE":return t.filePath!==e.filePath?e:Zi(Zi({},e),{},{modelHandle:t.modelHandle});case"SAVE_VIEW_STATE":return Zi(Zi({},e),{},{viewState:t.viewState});case"REGISTER_MONACO_EDITOR_HANDLE":return Zi(Zi({},e),{},{editorHandle:t.editorHandle});case"REGISTER_STATUS_BAR_HANDLE":return Zi(Zi({},e),{},{statusBarHandle:t.statusBarHandle});case"REGISTER_KEYMODE_HANDLE":return Zi(Zi({},e),{},{keyModeHandle:t.keyModeHandle});case"FILE_LOADED":return Zi(Zi({},e),{},{didDisconnect:!1});case"LOADING_GOVAL_STARTED":return Zi(Zi({},e),{},{didDisconnect:!0});case"SET_ACTIVE_LINE_DECORATIONS":return Zi(Zi({},e),{},{activeLineDecorations:t.decorations});case"PROMPT_FOR_FILE_STORE_VALUE":return Zi(Zi({},e),{},{promptForFileStoreValue:t.promptForFileStoreValue});case"REGISTER_PEEK_DEFINITION_RESOLVER":return Zi(Zi({},e),{},{peekDefinitionResolvers:Zi(Zi({},e.peekDefinitionResolvers),{},(0,K.Z)({},t.path,t.resolver))});case"ADD_FILE_CURSOR":return t.path!==e.filePath?e:Zi(Zi({},e),{},{externalCursors:Zi(Zi({},e.externalCursors),{},(0,K.Z)({},t.cursor.id,t.cursor))});case"REMOVE_FILE_CURSOR":if(t.path!==e.filePath)return e;var n=Zi({},e.externalCursors);return delete n[t.id],Zi(Zi({},e),{},{externalCursors:n});case"FILE_UNLOAD":return Zi(Zi({},e),{},{externalCursors:{}});default:return e}},preferences:bi.c,files:xi.Z,repl:yi.E,workingDirectory:wi.Y,runstate:xt.Z,filesSnapshot:function(e,t){return"OT_FILE_OP"===t.type?e:(0,xi.Z)(e,"MONACO_CONFIRM_OT"===t.type?{type:"OT_FILE_OP",op:t.op,path:t.path,wid:t.wid,changeSource:"editor"}:t)}}),Oi=n(67047),Ei=n(29235),_i=n(71621);function Ci(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Si(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ti(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,W.Z)(e);if(t){var i=(0,W.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,G.Z)(this,n)}}var Ii=Oi.Z,Ri=Promise.resolve();Ri=Promise.all([n.e(3662),n.e(9137),n.e(5716)]).then(n.bind(n,15716)).then((function(e){Ii=e.default}));var Di="REGISTER_MODEL_HANDLE",Ai="REGISTER_STATUS_BAR_HANDLE",Li="PROMPT_FOR_FILE_STORE_VALUE",Bi=!1,Mi=function(e,t){return Math.round((t?1.5:1.35)*e)},Ui=function(e){return 50+3*(e-8)},Xi=function(e){var t;return(t={},(0,K.Z)(t,Gr.V2.replitLight,"replit-light"),(0,K.Z)(t,Gr.V2.replitSpooky,"replit-spooky"),(0,K.Z)(t,Gr.V2.replitDark,"replit-dark"),t)[e]||"replit-dark"},Fi=function(e){(0,H.Z)(n,e);var t=Ti(n);function n(e){var r;return(0,F.Z)(this,n),r=t.call(this,e),(0,K.Z)((0,V.Z)(r),"rootRef",void 0),(0,K.Z)((0,V.Z)(r),"mouseMoveTimeout",void 0),(0,K.Z)((0,V.Z)(r),"_editorRan",void 0),(0,K.Z)((0,V.Z)(r),"handleWindowResize",li()((function(){var e=r.props.editorHandle,t=mi.Z.get(e);t&&t.layout&&t.layout()}),250)),(0,K.Z)((0,V.Z)(r),"handleUnfollowEvent",li()((function(){var e=r.props.presence;e.getFollowedUser()&&e.unfollowUser()}),250)),(0,K.Z)((0,V.Z)(r),"getPromptedValueModal",(function(){var e=r.props,t=e.wid,n=e.pud,i=e.promptForFileStoreValue,a=e.filePath;if(!i)return null;var o=function(){r.props.dispatch(Qi({wid:t,pud:n,accept:!1}))};return(0,B.tZ)(Pt.ZP,{isOpen:!0,onRequestClose:o,children:(0,B.BX)(di.Z,{onSubmit:function(){r.props.dispatch(Qi({wid:t,pud:n,accept:!0}))},onCancel:o,hideModal:o,submitLabel:"Update content",cancelLabel:"Ignore",children:[(0,B.tZ)("div",{children:"File changed"}),(0,B.BX)("div",{children:['Seems like "',a,'" has changed on the remote disk, would you like to update it?']})]})})})),(0,K.Z)((0,V.Z)(r),"EditorComponent",Ii),(0,K.Z)((0,V.Z)(r),"registerEditor",(function(e){var t=r.props,n=t.wid,i=t.preferences,a=t.editorHandle,o=t.filePath,s=mi.Z.get(a);s&&s.dispose&&s.dispose(),r.props.dispatch(function(e){var t=e.wid,n=e.editorHandle;return{type:bt.yL,wid:t,editorHandle:n}}({wid:n,editorHandle:e?mi.Z.getHandle(e):null})),e&&(window.monaco.editor.setTheme(Xi((0,Gr.gz)())),e.updateOptions({fontSize:i.fontSize,wordWrap:i.wrapping?"on":"off",quickSuggestions:i.codeIntelligence}),e.onDidFocusEditorWidget((function(){Bi=!0})),e.onDidChangeCursorSelection((function(t){if(e){var i=e.getModel();r.props.dispatch({wid:n,type:"UPDATE_FILE_CURSORS",path:o,selections:e.getSelections().map((function(e){var t=e.getPosition(),n=t.column,r=t.lineNumber;return{position:i.getOffsetAt(t),rawPosition:{column:n,lineNumber:r},selectionStart:i.getOffsetAt(e.getStartPosition()),selectionEnd:i.getOffsetAt(e.getEndPosition())}}))})}})))})),(0,K.Z)((0,V.Z)(r),"registerStatusBarHandle",(function(e){var t=r.props,n=t.wid,i=t.pud,a=t.preferences;r.props.dispatch(function(e){var t=e.wid,n=e.statusBarHandle;return{type:Ai,wid:t,statusBarHandle:n}}({wid:n,statusBarHandle:e?mi.Z.getHandle(e):null})),e&&r.props.dispatch(Wi({wid:n,pud:i,keyboardHandler:a.keyboardHandler}))})),(0,K.Z)((0,V.Z)(r),"openEditor",(function(e){var t=r.props,n=t.editorHandle,i=t.wid,a=t.filePath,o=t.workingDirectory,s=mi.Z.get(n);if(!s)throw new Error("Editor not registered");if(!e.resource.path.startsWith(o))return s;var l=e.resource.path.replace(o+"/","");l!==a&&r.props.dispatch((0,bt.ZB)({wid:i,path:l,newTab:void 0}));var c=Ni(Ni({},s.saveViewState()),{},{cursorState:{inSelectionMode:e.options.selection.startLineNumber!==e.options.selection.endLineNumber||e.options.selection.startColumn!==e.options.selection.endColumn,selectionStart:{lineNumber:e.options.selection.startLineNumber,column:e.options.selection.startColumn},position:{lineNumber:e.options.selection.endLineNumber,column:e.options.selection.endColumn}}});return s.restoreViewState(c),s.revealLine(e.options.selection.startLineNumber),s})),r.rootRef=ee.createRef(),r}return(0,z.Z)(n,[{key:"componentDidMount",value:function(){var e=this;if(window.addEventListener("resize",this.handleWindowResize),!this.rootRef.current)throw new Error("Expected editor ref");this.rootRef.current.addEventListener("wheel",this.handleUnfollowEvent),this.rootRef.current.addEventListener("keydown",this.handleUnfollowEvent),this.rootRef.current.addEventListener("click",this.handleUnfollowEvent),this.EditorComponent===Oi.Z&&Ri.then((function(){e.EditorComponent=Ii,e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){if(window.removeEventListener("resize",this.handleWindowResize),!this.rootRef.current)throw new Error("Expected editor ref");this.rootRef.current.removeEventListener("wheel",this.handleUnfollowEvent),this.rootRef.current.removeEventListener("keydown",this.handleUnfollowEvent),this.rootRef.current.removeEventListener("click",this.handleUnfollowEvent)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if("running"===this.props.runstate&&"running"===e.runstate&&this._editorRan){var t=this.props.editorHandle,n=mi.Z.get(t);n&&n.focus&&n.focus(),this._editorRan=!1}}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.wid,i=t.pud,a=t.followedUsersColor,o=t.showExamplesPlaceholder,s=t.preferences,l=t.isMac,c=t.fileLoaded,u=t.filePath,d=t.didDisconnect,p=t.hasDAP,f=this.EditorComponent;return(0,B.tZ)(Fn.xW,{stepId:zn.H.Editor,children:(0,B.BX)("div",{style:n,ref:this.rootRef,className:q.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Ui(s.fontSize)+(p?24:0),Mi(s.fontSize,l)]]])+" monaco-editor-plugin",children:[this.getPromptedValueModal(),o&&(0,B.tZ)("div",{className:q.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Ui(s.fontSize)+(p?24:0),Mi(s.fontSize,l)]]])+" placeholder",children:(0,B.tZ)(Ei.Z,{})}),(0,B.tZ)("div",{className:q.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Ui(s.fontSize)+(p?24:0),Mi(s.fontSize,l)]]])+" monaco-editor-plugin-wrapper",children:(0,B.tZ)(f,{openShell:function(){e.props.dispatch({type:"OPEN_SHELL",wid:e.props.wid})},pud:i,registerEditor:this.registerEditor,onRun:function(){e._editorRan=!0},openEditor:this.openEditor,getModelFromUri:function(t){return e.props.dispatch(function(e){var t=e.wid,n=e.pud,r=e.uri;return function(e,i){var a=window.monaco.editor.getModel(r);return a?Promise.resolve({model:a,shouldDispose:function(){var e,a=(0,Zt.Z)(i(),t,n,"editor").monaco;return!(null!==(e=a.files[zi(a.workingDirectory,r)])&&void 0!==e&&e.loaded)}}):new Promise((function(i,a){e({type:"REGISTER_PEEK_DEFINITION_RESOLVER",wid:t,pud:n,path:r.path,resolver:{resolve:i,reject:a}}),e({type:"DOWNLOAD_FILE_CONTENT_REQUEST",wid:t,path:r.path})}))}}({wid:r,pud:i,uri:t}))},createAnnotation:function(t){var n=t.indexStart,r=t.indexEnd;e.props.dispatch({type:"CREATE_ANNOTATION",wid:e.props.wid,indexStart:n,indexEnd:r,path:u})},className:q.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Ui(s.fontSize)+(p?24:0),Mi(s.fontSize,l)]]])},r+"-monaco")}),!c&&!d&&(0,B.tZ)(Oi.Z,{}),c&&this.props.editorHandle?(0,B.tZ)("div",{ref:this.registerStatusBarHandle,className:q.default.dynamic([["1218996329",[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Ui(s.fontSize)+(p?24:0),Mi(s.fontSize,l)]]])+" monaco-editor-plugin-keybinds-status"}):null,(0,B.tZ)(Gr.Tv,{onChange:function(e){window.monaco&&window.monaco.editor.setTheme(Xi(e))}}),(0,B.tZ)(q.default,{id:"1218996329",dynamic:[a?"0 3px 0 3px ".concat(a):"0",s.keyboardHandler?"auto":"none",s.fontSize,Ui(s.fontSize)+(p?24:0),Mi(s.fontSize,l)],children:[".monaco-editor-plugin.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;z-index:3;box-shadow:".concat(a?"0 3px 0 3px ".concat(a):"0",";}"),".monaco-editor-plugin-wrapper.__jsx-style-dynamic-selector{position:relative;height:100%;width:100%;}",".monaco-editor-plugin.__jsx-style-dynamic-selector .toggle-container{opacity:0;-webkit-transition:opacity 0.3s ease-in;transition:opacity 0.3s ease-in;}",".monaco-editor-plugin-keybinds-status.__jsx-style-dynamic-selector{display:".concat(s.keyboardHandler?"auto":"none",";font-family:'PT Mono',monospace;font-weight:bold;background-color:var(--background-default);color:var(--foreground-default);}"),".monaco-editor-plugin-keybinds-status.__jsx-style-dynamic-selector input{outline:none;border:none;background:transparent;color:var(--foreground-default);font-family:'PT Mono',monospace;}",".editor-wrapper.__jsx-style-dynamic-selector{height:100%;width:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:inline;-ms-flex-direction:inline;flex-direction:inline;}",".placeholder.__jsx-style-dynamic-selector{position:absolute;z-index:1;font-size:".concat(s.fontSize,"px;left:").concat(Ui(s.fontSize)+(p?24:0),"px;line-height:").concat(Mi(s.fontSize,l),"px;right:0;top:2px;pointer-events:none;overflow:hidden;}"),".editor-loading-overlay.__jsx-style-dynamic-selector{position:absolute;right:0;top:0;height:100%;width:100%;background-color:var(--background-root);overflow:hidden;padding:30px;}",".editor-loading-overlay.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto;}"]})]})})}}]),n}(ee.Component);function zi(e,t){return decodeURIComponent(t.path.replace(new RegExp("^".concat(e,"/")),""))}function Vi(e){return{type:"SAVE_VIEW_STATE",wid:e.wid,pud:e.pud,viewState:e.viewState}}function Hi(e){return{type:"REGISTER_KEYMODE_HANDLE",wid:e.wid,keyModeHandle:e.keyModeHandle}}function Gi(e){var t=e.wid,n=e.pud,r=e.activeLine;return function(e,i){var a=(0,Zt.Z)(i(),t,n,"editor").monaco,o=a.modelHandle,s=a.editorHandle,l=a.activeLineDecorations,c=hi(s),u=gi(o);if(u&&c){var d=u.deltaDecorations(l,r?[{range:new window.monaco.Range(r,1,r,1),options:{inlineClassName:"replit-monaco-editor-debugger",isWholeLine:!0}}]:[]);e({type:"SET_ACTIVE_LINE_DECORATIONS",wid:t,pud:n,decorations:d})}}}function Wi(e){var t=e.wid,r=e.pud,i=e.keyboardHandler;return function(e,a){var o=(0,Zt.Z)(a(),t,r,"editor").monaco,s=o.editorHandle,l=o.statusBarHandle,c=o.keyModeHandle,u=hi(s);if(!u)throw new Error("expected editor to be loaded");var d=oi.findDOMNode(mi.Z.safeGet(l));if(!d)throw new Error("expected statusbar to be rendered");d.textContent="";var p=c&&mi.Z.get(c);p&&p.dispose(),null===i?e(Hi({wid:t,keyModeHandle:null})):"vim"===i?Promise.all([n.e(5092),n.e(9137),n.e(6993)]).then(n.bind(n,46447)).then((function(n){var r=n.initVimMode(u,d);e(Hi({wid:t,keyModeHandle:mi.Z.getHandle(r)}))})):"emacs"===i&&Promise.all([n.e(9137),n.e(3238)]).then(n.bind(n,23238)).then((function(n){var r=new n.EmacsExtension(u);r.onDidMarkChange((function(e){d.textContent=e?"Mark Set!":"Mark Unset"})),r.onDidChangeKey((function(e){d.textContent=e})),r.start(),e(Hi({wid:t,keyModeHandle:mi.Z.getHandle(r)}))}))}}function Ki(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=(0,Zt.Z)(i(),t,n,"editor").monaco,o=a.modelHandle,s=a.filePath;if(s&&(s===r||(0,pi.yr)(r,s))){var l=gi(o);l&&!l.isDisposed()&&(l.dispose(),e({type:Di,wid:t,filePath:s,modelHandle:null}))}}}function qi(e){var t=e.wid,n=e.pud,r=e.activeFile;return function(e,i){var a,o=i().workspace[t].plugins,s=(0,Zt.Z)(i(),t,n,"editor").monaco,l=s.filePath,c=s.viewState,u=s.modelHandle,d=s.editorHandle,p=s.lite,f=s.files;if(l===r){var m=hi(d);if(m){var h=gi(u);if(h){for(var g=0,v=Object.keys(o);g<v.length;g++){var b=v[g],y=o[b];if("editor"===y.type&&y.state.monaco.modelHandle){var x=mi.Z.get(y.state.monaco.modelHandle);if(x&&m.getModel()===x){e(Vi({wid:t,pud:b,viewState:m.saveViewState()}));break}}}m.setModel(h),c&&m.restoreViewState(c);var w=l&&(null===(a=f[l])||void 0===a?void 0:a.loaded);m.updateOptions({readOnly:!w}),p&&!Bi||setTimeout((function(){return m.focus()}))}}}}}function Yi(e){var t=e.wid,n=e.pud;return function(e,r){var i=r().workspace[t].activeFile,a=(0,Zt.Z)(r(),t,n,"editor").monaco,o=a.filePath,s=a.modelHandle,l=a.editorHandle,c=a.preferences,u=a.files,d=a.externalCursors,p=a.repl,f=a.workingDirectory;if(o&&hi(l)){var m=gi(s);if(!m||m.isDisposed()){var h="",g=u[o];null!==g&&void 0!==g&&g.loaded&&(h=ar.Z.from(g.content).toString());var v=window.monaco.Uri.from({scheme:"file",path:"".concat(f,"/").concat(o)}),b=window.monaco.editor.getModel(v);b&&b.dispose();var y=fe().get(p.language),x=null,w=(0,kn.r6)(o);["ts","tsx"].includes(w)?x=y.hasLanguageServer||p.language.startsWith("nix")?"replit-ts":"typescript":"js"===w&&(x="nodejs"===p.language||p.language.startsWith("nix")?"replit-js-v".concat(fi.E9):"javascript"),(b=window.monaco.editor.createModel(h,x||void 0,v)).setEOL(0);var k=ui()((function(){e((0,bt.R$)({wid:t,eventKey:"WS_TYPED",properties:{fileExt:w},trackOnce:!1})),window.__SOCIAL_VIEW_FORK&&(window.__SOCIAL_VIEW_FORK=void 0,(0,mt.track)(mt.events.SOCIAL_VIEW_FORK_MODIFIED,{language:p.language,replId:p.id}))}),6e4),Z=b.getValue(),j=b.onDidChangeContent((function(i){var a=i.changes;if(b.__externalChange)Z=b.getValue();else{var o,s=Ci(a);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=(0,Zt.Z)(r(),t,n,"editor").monaco,u=c.files,d=c.filePath;if(!d)return;var p="",f=u[d];null!==f&&void 0!==f&&f.loaded&&(p=ar.Z.from(f.content).toString());var m=[],h=0;if(l.rangeOffset>0){for(var g=Z.slice(0,l.rangeOffset).split(b.getEOL()),v=0;v<g.length&&(h+=g[v].length,v!==g.length-1);v++){h+="\r\n"===p.slice(h,h+2)?2:1}m.push(h)}if(l.rangeLength>0){for(var y=Z.slice(l.rangeOffset,l.rangeOffset+l.rangeLength).split(b.getEOL()),x=h,w=0;w<y.length&&(h+=y[w].length,w!==y.length-1);w++){h+="\r\n"===p.slice(h,h+2)?2:1}m.push({d:h-x})}l.text&&m.push(l.text),ta({monacoChanges:a,changeIndex:a.indexOf(l),filePath:d,fileContent:p,monacoContent:b.getValue(),prevMonacoValue:Z,ops:m}),k(),e({wid:t,type:"OT_FILE_OP",op:m,path:d,changeSource:"editor"}),Z=Z.slice(0,l.rangeOffset)+l.text+Z.slice(l.rangeOffset+l.rangeLength)}}catch(j){s.e(j)}finally{s.f()}Z!==b.getValue()&&pt.$e((function(e){e.setExtras({monacoChanges:a,prevValue:Z,monacoContent:b.getValue()}),pt.Tb(new Error("Expected prevValue to match model.getValue"))}))}})),O=b.dispose.bind(b);b.dispose=function(){j.dispose(),O()},b.updateOptions({insertSpaces:c.indentIsSpaces,tabSize:c.indentSize});var E=mi.Z.getHandle(b);e({type:Di,wid:t,filePath:o,modelHandle:E}),i===o&&e(qi({wid:t,pud:n,activeFile:i}));for(var _=0,C=Object.values(d);_<C.length;_++){var S=C[_];e($i({wid:t,pud:n,path:o,cursor:S}))}return b}i===o&&e(qi({wid:t,pud:n,activeFile:i}))}}}function Qi(e){var t=e.wid,n=e.pud,r=e.accept;return function(e,i){var a=(0,Zt.Z)(i(),t,n,"editor").monaco,o=a.modelHandle,s=a.editorHandle,l=a.promptForFileStoreValue,c=a.files,u=a.filePath;if(l&&o&&s&&u){var d=hi(s),p=gi(o);if(d&&p){e({type:Li,wid:t,pud:n,promptForFileStoreValue:!1});var f="",m=c[u];if(null!==m&&void 0!==m&&m.loaded&&(f=ar.Z.from(m.content).toString()),r){(0,mt.track)(mt.events.REMOTE_FILE_CHANGE_ACCEPTED,{wid:t});var h=p.getFullModelRange(),g=[];d.getModel()===p&&(g=d.getSelections()),p.__externalChange=!0,p.pushEditOperations(g,[{forceMoveMarkers:!1,range:h,text:f}],(function(){return[]})),p.__externalChange=!1}else{(0,mt.track)(mt.events.REMOTE_FILE_CHANGE_IGNORED,{wid:t});var v=p.getValue(1);e({type:"OT_FILE_OP",wid:t,op:[{d:f.length},v],path:u,changeSource:"editor"})}}}}}var Ji={};function $i(e){var t=e.wid,n=e.pud,r=e.cursor,i=e.path;return function(e,a){var o,s=a().services.presence,l=(0,Zt.Z)(a(),t,n,"editor").monaco,c=l.modelHandle,u=l.editorHandle;if(l.filePath===i&&c&&u){if("string"!==typeof r.id)throw new Error("Expected cursor ID to be defined");var d=vi(c),p=function(e){return mi.Z.safeGet(e)}(u);d._replit_cursorDecorations=d._replit_cursorDecorations||{};var f=d._replit_cursorDecorations,m=d.getPositionAt(r.position||0),h=f[r.id]||[],g=(null===r||void 0===r||null===(o=r.user)||void 0===o?void 0:o.name)||"",v=s.getFollowedUser();v&&v.username===g&&p.revealPositionInCenter(m,window.monaco.editor.ScrollType.Smooth);var b=[{range:window.monaco.Range.fromPositions(m),options:{className:"cursor-"+g.replace(/_/g,"-"),hoverMessage:{value:g,isTrusted:!1},stickiness:window.monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}],y=Ji[g],x=Date.now()-y,w=!y||x>3e4||x<2e3;if(w&&(b.push({range:window.monaco.Range.fromPositions(m),options:{className:"cursor-tag-"+g.replace(/_/g,"-"),stickiness:window.monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}),(!y||x>3e4)&&(Ji[g]=Date.now())),r.selectionStart===r.position&&r.selectionEnd===r.position||"number"!==typeof r.selectionStart||"number"!==typeof r.selectionEnd||b.push({range:window.monaco.Range.fromPositions(d.getPositionAt(r.selectionStart),d.getPositionAt(r.selectionEnd)),options:{className:"selection-"+g.replace(/_/g,"-"),stickiness:window.monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}),d._replit_cursorDecorations[r.id]=d.deltaDecorations(h,b),w){var k=d._replit_cursorDecorations[r.id][1];setTimeout((function(){d.isDisposed()||d.deltaDecorations([k],[])}),2e3)}}}}function ea(e,t,n){return n.type===bt.i7||n.type===bt.Rm||"RESIZE_EDITOR"===n.type?function(e){var t=e.wid,n=e.pud;return function(e,r){var i=hi((0,Zt.Z)(r(),t,n,"editor").monaco.editorHandle);i&&i.layout&&(i.layout(),setTimeout((function(){return i.layout()}),50))}}({wid:e,pud:t}):"UPDATE_WORKING_DIRECTORY"===n.type?function(e){var t=e.wid,n=e.pud;return function(e,r){var i=r().workspace[t],a=i.plugins,o=i.activeFile,s=a[n].state.monaco,l=s.editorHandle,c=s.modelHandle,u=s.filePath,d=s.workingDirectory,p=hi(l),f=gi(c);if(f&&p&&f.uri.path.replace(new RegExp("/".concat(u,"$")),"")!==d){o===u&&e(Vi({wid:t,pud:n,viewState:p.saveViewState()}));var m=f._commandManager;f.dispose(),e({type:Di,wid:t,filePath:u,modelHandle:null});var h=e(Yi({wid:t,pud:n}))._commandManager;h.currentOpenStackElement=m.currentOpenStackElement,h.past=m.past,h.future=m.future}}}({wid:e,pud:t}):n.type===bt.zT?function(e){var t=e.wid,n=e.pud;return function(e,r){var i=(0,Zt.Z)(r(),t,n,"editor").monaco.filePath;i&&e(Ki({wid:t,pud:n,path:i}))}}({wid:e,pud:t}):n.type===bt.yL?Yi({wid:e,pud:t}):"OPEN_FILE"===n.type?qi({wid:e,pud:t,activeFile:n.path}):"FILE_LOADED"===n.type||"FILE_CACHE_HIT"===n.type||"SCROLL_TO_FOLLOWED_USERS_CURSOR"===n.type?function(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=i(),o=a.workspace,s=a.services,l=o[t].activeFile,c=(0,Zt.Z)(i(),t,n,"editor").monaco,u=c.editorHandle,d=c.modelHandle,p=c.filePath,f=c.files,m=c.externalCursors;if(r===p){var h=gi(d);if(h){h.__externalChange=!0;var g="",v=f[p];null!==v&&void 0!==v&&v.loaded&&(g=ar.Z.from(v.content).toString("utf8")),h.applyEdits([{forceMoveMarkers:!1,range:h.getFullModelRange(),text:g}]),h.__externalChange=!1;var b=hi(u);if(b&&p===l){b.setSelection({startColumn:1,startLineNumber:1,endColumn:1,endLineNumber:1}),b.updateOptions({readOnly:!1});var y=s.presence.getFollowedUser();if(!y)return;for(var x=0,w=Object.values(m);x<w.length;x++){var k,Z=w[x];if((null===Z||void 0===Z||null===(k=Z.user)||void 0===k?void 0:k.name)===y.username){var j=h.getPositionAt(Z.position||0);return void b.revealPositionInCenter(j,window.monaco.editor.ScrollType.Smooth)}}}}}}}({wid:e,pud:t,path:n.path}):"FILE_UNLOAD"===n.type?function(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=i().workspace[t].activeFile,o=(0,Zt.Z)(i(),t,n,"editor").monaco,s=o.editorHandle,l=o.modelHandle,c=o.filePath;if(r===c){var u=gi(l);if(u){if(u._replit_cursorDecorations&&Object.keys(u._replit_cursorDecorations).length)for(var d=0,p=Object.keys(u._replit_cursorDecorations);d<p.length;d++){var f=p[d];u.deltaDecorations(u._replit_cursorDecorations[f],[]),delete u._replit_cursorDecorations[f]}e(Yi({wid:t,pud:n}));var m=hi(s);m&&c===a&&(m.setSelection({startColumn:1,startLineNumber:1,endColumn:1,endLineNumber:1}),m.updateOptions({readOnly:!0}))}}}}({wid:e,pud:t,path:n.path}):"OT_FILE_OP"===n.type?"editor"===n.changeSource?function(r,i){(0,Zt.Z)(i(),e,t,"editor").monaco.filePath===n.path&&r(Ni(Ni({},n),{},{type:"MONACO_CONFIRM_OT"}))}:"goval"===n.changeSource?function(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=(0,Zt.Z)(i(),t,n,"editor").monaco,o=a.modelHandle;a.filePath===r&&o&&e({type:Li,wid:t,pud:n,promptForFileStoreValue:!0})}}({wid:e,pud:t,path:n.path}):function(e){var t=e.wid,n=e.pud,r=e.path,i=e.op;return function(e,a){var o=(0,Zt.Z)(a(),t,n,"editor").monaco,s=o.filePath,l=o.modelHandle,c=o.filesSnapshot,u=o.editorHandle;if(s===r&&l){var d="",p=c[s];null!==p&&void 0!==p&&p.loaded&&(d=ar.Z.from(p.content).toString());var f=vi(l),m=(0,Vt.Z)(i),h=0,g=0;for(f.__externalChange=!0;m.length>0;){var v=m.shift();if("number"===typeof v){var b=d.slice(g,g+v).split(/\r\n/g).length-1;g+=v,h+=v-b}else if("object"===typeof v){var y=f.getPositionAt(h),x=d.slice(g,g+v.d).split(/\r\n/g).length-1,w=f.getPositionAt(h+v.d-x);f.applyEdits([{range:new window.monaco.Range(y.lineNumber,y.column,w.lineNumber,w.column),text:"",forceMoveMarkers:!0}]),d=d.slice(0,g)+d.slice(g+v.d)}else{if("string"!==typeof v)throw new Error("Unexpected TextOp");!function(){var e=f.getPositionAt(h),t=hi(u),n=null;t&&t.getModel()===f&&(n=t.getSelections()),f.applyEdits([{range:new window.monaco.Range(e.lineNumber,e.column,e.lineNumber,e.column),text:v,forceMoveMarkers:!0}]),d=d.slice(0,g)+v+d.slice(g),g+=v.length;var r=v.split(/\r\n/g).length-1;if(h+=v.length-r,t&&n&&n.length){var i=t.getSelections(),a=!1,o=n.map((function(t,n){return t.getEndPosition().equals(e)?(a=!0,t):i[n]}));a&&t.setSelections(o)}}()}}f.__externalChange=!1,e({type:"MONACO_CONFIRM_OT",wid:t,pud:n,path:r,op:i})}}}({wid:e,pud:t,path:n.path,op:n.op}):"ADD_FILE_CURSOR"===n.type?$i(Ni({wid:e,pud:t},n)):"REMOVE_FILE_CURSOR"===n.type?function(r,i){var a=(0,Zt.Z)(i(),e,t,"editor").monaco,o=a.modelHandle,s=a.filePath,l=n.id;if(s===n.path&&o){var c=mi.Z.safeGet(o);c._replit_cursorDecorations&&c._replit_cursorDecorations[l]&&(c.deltaDecorations(c._replit_cursorDecorations[l],[]),delete c._replit_cursorDecorations[l])}}:"DELETE_FILE"===n.type?Ki({wid:e,pud:t,path:n.path}):"MOVE_FILE"===n.type?function(e){var t=e.wid,n=e.pud,r=e.to;return function(e,i){var a=i().workspace[t].activeFile,o=(0,Zt.Z)(i(),t,n,"editor").monaco,s=o.editorHandle,l=o.modelHandle,c=o.filePath;if(c&&!c.startsWith(r)){var u=hi(s),d=gi(l);if(d&&u){a===c&&e(Vi({wid:t,pud:n,viewState:u.saveViewState()}));var p=d._commandManager;d.dispose(),e({type:Di,wid:t,filePath:c,modelHandle:null});var f=e(Yi({wid:t,pud:n}))._commandManager;f.currentOpenStackElement=p.currentOpenStackElement,f.past=p.past,f.future=p.future}}}}({wid:e,pud:t,to:n.to}):n.type===bt.Dq?function(e){var t=e.wid,n=e.pud,r=e.updates;return function(e,i){var a=i().workspace[t].activeFile,o=(0,Zt.Z)(i(),t,n,"editor").monaco,s=o.modelHandle,l=o.editorHandle,c=o.filePath,u=o.preferences,d=hi(l),p=gi(s);p&&d&&(void 0===r.indentIsSpaces&&void 0===r.indentSize||p.updateOptions({insertSpaces:u.indentIsSpaces,tabSize:u.indentSize}),c===a&&(void 0===r.fontSize&&void 0===r.wrapping&&void 0===r.codeIntelligence||d.updateOptions({fontSize:u.fontSize,wordWrap:u.wrapping?"on":"off",quickSuggestions:u.codeIntelligence}),void 0!==r.keyboardHandler&&e(Wi({wid:t,pud:n,keyboardHandler:r.keyboardHandler}))))}}({wid:e,pud:t,updates:n.updates}):n.type===bt.O1?Gi({wid:e,pud:t,activeLine:n.line}):n.type===bt.Lt?function(e){var t=e.wid,n=e.pud,r=e.path,i=e.range;return function(e,a){var o=a().workspace[t].activeFile,s=(0,Zt.Z)(a(),t,n,"editor").monaco,l=s.modelHandle,c=hi(s.editorHandle);gi(l)&&c&&r===o&&(c.focus(),c.setSelection(i),c.revealRangeInCenterIfOutsideViewport(i))}}({wid:e,pud:t,path:n.path,range:n.range}):"SELECT_EDITOR_POSITION"===n.type?function(e){var t=e.wid,n=e.pud,r=e.path,i=e.position;return function(e,a){var o=a().workspace[t].activeFile,s=(0,Zt.Z)(a(),t,n,"editor").monaco,l=s.modelHandle,c=hi(s.editorHandle);gi(l)&&c&&r===o&&(c.focus(),c.setPosition(i),c.revealPositionInCenterIfOutsideViewport(i))}}({wid:e,pud:t,path:n.path,position:n.position}):"SELECT_MODEL_INDEX"===n.type?function(e){var t=e.wid,n=e.pud,r=e.path,i=e.indexStart,a=e.indexEnd;return function(e,o){var s=o().workspace[t].activeFile,l=o().workspace[t].plugins[n].state,c=l.monaco,u=l.filePath,d=c.modelHandle,p=hi(c.editorHandle),f=gi(d);if(f&&p&&r===s&&u===r){a||(a=i),p.focus();var m=f.getPositionAt(i),h=f.getPositionAt(a);p.setPosition(m),p.revealRangeInCenter({startLineNumber:m.lineNumber,startColumn:m.column,endColumn:h.column,endLineNumber:h.lineNumber})}}}({wid:e,pud:t,path:n.path,indexStart:n.indexStart,indexEnd:n.indexEnd}):n.type===bt.gJ?function(e){var t=e.wid,n=e.pud;return function(e,r){var i=r().workspace[t].activeFile,a=(0,Zt.Z)(r(),t,n,"editor").monaco,o=a.filePath,s=a.editorHandle;if(i===o){var l=hi(s);l&&l.getAction("editor.action.formatDocument").run()}}}({wid:e,pud:t}):"DEBUG_STACK"===n.type?Gi({wid:e,pud:t,activeLine:n.stack.length?n.stack[n.stack.length-1].lineno:null}):"DEBUG_ENDED"===n.type?Gi({wid:e,pud:t,activeLine:null}):"DOWNLOAD_FILE_CONTENT_SUCCESS"===n.type?function(r,i){var a=(0,Zt.Z)(i(),e,t,"editor").monaco.peekDefinitionResolvers;if(a[n.path]){var o=window.monaco.Uri.from({scheme:"file",path:n.path}),s=window.monaco.editor.getModel(o);s||(s=window.monaco.editor.createModel(n.content.toString(),void 0,o)),r({type:"REGISTER_PEEK_DEFINITION_RESOLVER",path:n.path,resolver:null}),a[n.path].resolve({model:s,shouldDispose:function(){var n,r=(0,Zt.Z)(i(),e,t,"editor").monaco;return!(null!==(n=r.files[zi(r.workingDirectory,o)])&&void 0!==n&&n.loaded)}})}}:"DOWNLOAD_FILE_CONTENT_FAILURE"===n.type?function(r,i){var a=(0,Zt.Z)(i(),e,t,"editor").monaco.peekDefinitionResolvers;a[n.path]&&(a[n.path].reject(n.error),r({type:"REGISTER_PEEK_DEFINITION_RESOLVER",path:n.path,resolver:null}))}:null}function ta(e){var t,n=e.monacoChanges,r=e.changeIndex,i=e.filePath,a=e.fileContent,o=e.monacoContent,s=e.prevMonacoValue,l=e.ops,c=!1,u=a,d=0,p=Ci(l);try{for(p.s();!(t=p.n()).done;){var f=t.value;if("string"===typeof f)u=u.slice(0,d)+f+u.slice(d),d+=f.length;else if("object"===typeof f&&"number"===typeof f.d)d+f.d>u.length&&(c=!0),u=u.slice(0,d)+u.slice(d+f.d);else if("number"===typeof f&&(d+=f)>u.length){c=!0;break}}}catch(m){p.e(m)}finally{p.f()}c&&pt.$e((function(e){e.setExtras({filePath:i,currentContent:JSON.stringify(a),monacoContent:JSON.stringify(o),prevMonacoValue:JSON.stringify(s),monacoChanges:JSON.stringify(n),changeIndex:r,ops:JSON.stringify(l)}),pt.Tb(new Error("Bad ot op :("))}))}var na=(0,at.$j)((function(e,t){var n=e.workspace[t.wid].plugins[t.pud].state,r=n.monaco,i=n.isMac,a=r.filePath,o=r.editorHandle,s=r.runstate,l=r.promptForFileStoreValue,c=r.preferences,u=r.repl,d=r.files,p=r.workingDirectory,f=r.didDisconnect,m=u.language;return{workingDirectory:p,hasContent:Boolean(d[a]&&d[a].content&&ar.Z.from(d[a].content).length),filePath:a,editorHandle:o,language:m,preferences:c,runstate:s,isMac:i,fileLoaded:d[a]&&d[a].loaded,promptForFileStoreValue:l,didDisconnect:f}})),ra=na((function(e){var t=(0,Pe.Z)(),n=t.presence,r=t.debuggest,i=(0,Jr.Z)(),a=e.wid,o=e.pud,s=e.dimensions,l=(0,at.I0)(),c=(0,ye.Z)(),u=(0,_i.Z)({replId:c}),d=(0,Bn.Z)(r.mainClient),p=ee.useMemo((function(){return ui()((function(){l({type:"RESIZE_EDITOR",wid:a,pud:o})}),150)}),[l,a,o]);ee.useEffect(p,[s,p]);var f=Boolean(u&&e.fileLoaded&&!e.hasContent&&e.filePath===u.mainFile);return(0,B.tZ)(Fi,Ni(Ni({},e),{},{presence:n,followedUsersColor:i,showExamplesPlaceholder:f,hasDAP:Boolean(d)}))})),ia=n(84092);function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sa=function(e){return(0,at.v9)((function(t){var n=(0,Zt.Z)(t,e.wid,e.pud,"editor"),r=n.filePath,i=n.isMobile;return!(!("ontouchstart"in window||window.DocumentTouch&&window.document instanceof window.document.DocumentTouch)&&!i)||!!(null!==r&&void 0!==r&&r.endsWith(".sqlite")||null!==r&&void 0!==r&&r.endsWith(".wasm"))}))?(0,B.tZ)(ia.Z,oa({},e)):(0,B.tZ)(ra,oa({},e))};var la=(0,yt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filePath:null,isMac:!1,isMobile:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt.qg:return oa(oa({},e),t.initialState);case"MOVE_FILE":return e.filePath?e.filePath===t.path?oa(oa({},e),{},{filePath:t.to}):(0,pi.yr)(t.path,e.filePath)?oa(oa({},e),{},{filePath:(0,pi.hk)(t.path,t.to,e.filePath)}):e:e;default:return e}},monaco:ji}),ca=n(17165),ua=n(97600),da=n(27703),pa=n(85854),fa=n(96610),ma=function(){var e=(0,xe.__3)().data;return null!==e&&void 0!==e&&e.currentUser?(0,B.BX)("div",{className:"jsx-1557842061 help-container",children:[(0,B.tZ)(fa.Z,{currentUser:e.currentUser,tooltipPlacement:"right"}),(0,B.tZ)(q.default,{id:"1557842061",children:[".help-container.jsx-1557842061{position:absolute;left:var(--space-8);bottom:var(--space-16);z-index:20;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:var(--space-32);height:var(--space-32);cursor:pointer;border-radius:100%;background-color:var(--background-default);color:var(--foreground-dimmer);border:1px solid var(--background-highest);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:var(--shadow-1);-webkit-transition:0.1s;transition:0.1s;}",".help-container.jsx-1557842061:hover{border:1px solid var(--outline-default);box-shadow:var(--shadow-2);}",".help-container.jsx-1557842061:active{border:1px solid var(--accent-primary-default);box-shadow:var(--shadow-1);}"]})]}):null},ha=n(16523),ga=n(28147),va=n(85893);function ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xa=(0,yt.$)({primary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filePath:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt.qg:return ya(ya({},e),t.initialState);case"SET_MEDIA_FILE":return ya(ya({},e),{},{filePath:t.filePath});case"MOVE_FILE":return e.filePath?e.filePath===t.path?ya(ya({},e),{},{filePath:t.to}):(0,pi.yr)(t.path,e.filePath)?ya(ya({},e),{},{filePath:(0,pi.hk)(t.path,t.to,e.filePath)}):e:e;default:return e}},files:xi.Z}),wa=(0,at.$j)((function(e,t){var n=e.workspace[t.wid].plugins[t.pud].state,r=n.filePath,i=n.files[r];return{value:i&&i.loaded?ar.Z.from(i.content):ar.Z.from(""),filePath:r,mime:(0,kn.yC)(r),fileLoaded:i&&i.loaded}}),(function(e){return(0,ie.DE)({},e)}))((function(e){var t=e.mime,n=e.filePath,r=e.style,i=e.value,a=e.fileLoaded,o=(0,Jr.Z)();if(!t)throw new Error("MediaView only supports video, audio, pdf, and images. Filepath: ".concat(n));var s,l=i.toString("base64");if(a)if(t.startsWith("video/"))s=(0,va.jsx)("video",{src:"data:".concat(t,";base64,").concat(l),style:{maxHeight:"100%",maxWidth:"100%"},controls:!0});else if(t.startsWith("image/"))s=(0,va.jsx)("img",{src:"data:".concat(t,";base64,").concat(l),style:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"},alt:n});else if(t.startsWith("audio/")){var c=t;"audio/wave"===c&&(c="audio/wav"),s=(0,va.jsx)("audio",{src:"data:".concat(c,";base64,").concat(l),style:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}else{if("application/pdf"!==t)throw new Error("MediaView only supports video, audio, pdf, and images. Filepath: ".concat(n));s=(0,va.jsx)("object",{data:"data:".concat(t,";base64,").concat(l),type:"application/pdf",style:{width:"100%",height:"100%"},children:(0,va.jsx)("embed",{src:"data:".concat(t,";base64,").concat(l),type:"application/pdf",style:{width:"100%",height:"100%"}})})}else s=(0,va.jsx)("div",{children:"Loading file, please wait."});return(0,va.jsxs)("div",{style:r,className:q.default.dynamic([["222691463",[o?"0 3px 0 3px ".concat(o):"0"]]])+" mediaview",children:[(0,va.jsxs)("div",{className:q.default.dynamic([["222691463",[o?"0 3px 0 3px ".concat(o):"0"]]])+" mediaview-download",children:["Some files may fail to load on the browser."," ",(0,va.jsx)("a",{href:"data:text/plain;base64,".concat(l),download:(0,kn.UO)(n),className:q.default.dynamic([["222691463",[o?"0 3px 0 3px ".concat(o):"0"]]]),children:"Click here to download"})]}),(0,va.jsx)("div",{className:q.default.dynamic([["222691463",[o?"0 3px 0 3px ".concat(o):"0"]]])+" mediaview-content",children:s}),(0,va.jsx)(q.default,{id:"222691463",dynamic:[o?"0 3px 0 3px ".concat(o):"0"],children:[".mediaview.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;z-index:3;position:relative;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background:var(--black);box-shadow:".concat(o?"0 3px 0 3px ".concat(o):"0",";}"),".mediaview-download.__jsx-style-dynamic-selector{text-align:center;width:100%;color:var(--outline-dimmest);padding:10px;}",".mediaview-content.__jsx-style-dynamic-selector{min-height:0;-webkit-flex:1;-ms-flex:1;flex:1;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})})),ka=n(71821),Za=n(87536),ja=n(73633);function Oa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,W.Z)(e);if(t){var i=(0,W.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,G.Z)(this,n)}}var Ea=function(e){(0,H.Z)(n,e);var t=Oa(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,z.Z)(n,[{key:"render",value:function(){return(0,va.jsxs)("div",{style:this.props.style,className:"jsx-849216488 react-native-container",children:[(0,va.jsxs)("div",{className:"jsx-849216488 react-native-content",children:[(0,va.jsx)("div",{style:{fontSize:"25px",textAlign:"center"},className:"jsx-849216488",children:"\ud83d\ude14"}),(0,va.jsx)("br",{className:"jsx-849216488"}),(0,va.jsx)("br",{className:"jsx-849216488"}),"We have discontinued support for React Native on Replit to focus more on other languages that use our infrastracture. We had a good run and we're happy to have served thousands of users play with mobile apps using their favorite web IDE.",(0,va.jsx)("br",{className:"jsx-849216488"}),(0,va.jsx)("br",{className:"jsx-849216488"}),"You can checkout our"," ",(0,va.jsx)(jt.default,{href:"/languages",children:(0,va.jsx)("a",{className:"jsx-849216488",children:"broad list of languages."})}),(0,va.jsx)("br",{className:"jsx-849216488"}),(0,va.jsx)("br",{className:"jsx-849216488"}),"For React Native you should head over to"," ",(0,va.jsx)("a",{href:"https://snack.expo.io/",target:"_blank",className:"jsx-849216488",children:"Snack"})," ","where our friends at ",(0,va.jsx)("a",{href:"https://expo.io/",className:"jsx-849216488",children:"Expo"})," have created a playground dedicated to React Native mobile development."]}),(0,va.jsx)(q.default,{id:"849216488",children:[".react-native-container.jsx-849216488{font-size:17px;line-height:1.2;}",".react-native-content.jsx-849216488{max-width:800px;margin:30px auto;}"]})]})}}]),n}(ee.Component),_a=n(68702),Ca=n(60298);function Sa(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,kn.T3)(e)?"mediaview":(0,kn.sL)(e)?"draw":(0,kn.IQ)(e)?"pedit":t?"codemirror":"editor"}var Pa=n(61241),Na=n(45221),Ta=n(37321);function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Da="fileviewercontroller";function Aa(e){var t=e.wid,n=e.pud,r=e.path,i=e.editorHandle;return function(e,a){if(window["open-markdown-split"]&&"md"!==(0,kn.r6)(r)){var o=a().workspace[t],s=o.layout,l=o.plugins;if(gt.PP(s,l,"markdownviewer")){var c=Object.keys(l).find((function(e){return"markdownviewer"===l[e].type}));if(!c)throw new Error("Expect a markdownviewer to be in pluginlist");e(Ra({type:"UPDATE_LAYOUT",wid:t},gt.Od(s,c)))}}var u=a().workspace[t],d=u.layout,p=u.plugins,f=function(e,t){var n=gt.PP(e,t,"fileheader");if(!n)throw new Error("expected to find fileHeader in layout!");return window["flag-windowing"]?gt.Il(n):gt.J9(n)}(d,p);if(!f)throw new Error("No editor mounted");var m=(0,Zt.Z)(a(),t,n,Da).files[r];m&&m.loaded||e({type:"LOAD_FILE",wid:t,path:r});var h=(0,dt.Z)(a().user.userInfo,"flag-codemirror-desktop")||Boolean(ae.default.query.codemirror),g=Sa(r,h),v=Ba({plugins:p,filePath:r,pluginType:g});v||(v=e(function(e){var t=e.wid,n=e.path,r=e.editorHandle;return function(e,i){var a=(0,dt.Z)(i().user.userInfo,"flag-codemirror-desktop")||Boolean(ae.default.query.codemirror),o=Sa(n,a),s={filePath:n};if("editor"===o){var l=(0,te.isMobile)({ua:window.navigator.userAgent,tablet:!0}),c=ae.default.query.lite;s=Ra(Ra({},s),{},{lite:c,isMobile:l,editorHandle:r})}var u=!!window["flag-windowing"],d="file-".concat(de()());return e({type:"LOAD_PLUGIN",wid:t,pluginPud:d,pluginType:Sa(n,a),title:n,initialState:s,isDraggable:u}),e({type:"LOAD_FILE",wid:t,path:n}),d}}({wid:t,path:r,editorHandle:i}))),e({type:"UPDATE_LAYOUT",wid:t,path:f,to:v,property:"pud"})}}function La(e){var t=e.wid,n=e.path;return function(e,r){var i=r().workspace[t].plugins,a=(0,dt.Z)(r().user.userInfo,"flag-codemirror-desktop")||Boolean(ae.default.query.codemirror);setTimeout((function(){e({type:"UNLOAD_PLUGIN",wid:t,pud:Ba({plugins:i,filePath:n,pluginType:Sa(n,a)})})}),0)}}function Ba(e){for(var t=e.plugins,n=e.filePath,r=e.pluginType,i=0,a=Object.keys(t);i<a.length;i++){var o=a[i],s=t[o],l=s.type,c=s.state;if(l===r&&(null===n||(null===c||void 0===c?void 0:c.filePath)===n))return o}return null}var Ma=(0,Na.Z)(["WORKSPACE_MOUNTED","FILE_UNLOAD","OPEN_FILE","MOVE_FILE","DELETE_FILE","WORKSPACE_WILL_UNMOUNT","REGISTER_ACE_EDITOR_HANDLE","REGISTER_MONACO_EDITOR_HANDLE"]),Ua=Ma.receiver,Xa=Ma.useReceiver;function Fa(e){var t=e.wid,n=e.pud,r=(0,at.I0)(),i=(0,Pe.Z)().session,a=(0,Yr.Z)(),o=(0,Ta.Z)("flag-codemirror-desktop")||Boolean(ae.default.query.codemirror),s=ee.useState(!1),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=ee.useState(null),p=(0,L.Z)(d,2),f=p[0],m=p[1],h=(0,Zt.J)(t,n,"fileviewercontroller"),g=(0,L.Z)(h,1)[0].files,v=(0,at.v9)((function(e){return e.workspace[t].activeFile}));return ee.useEffect((function(){a&&(g[a]||v&&"md"===(0,kn.r6)(v)||i.setPreviewedFile(null))}),[a,i,g,v]),ee.useEffect((function(){v&&"md"===(0,kn.r6)(v)&&i.setPreviewedFile(v)}),[i,v]),Xa((function(e){var i=e.action;switch(i.type){case"WORKSPACE_MOUNTED":if(u(!0),!v)break;r({type:"LOAD_FILE",wid:t,path:v});break;case"FILE_UNLOAD":if(!c)break;var a=i.path;r(function(e){var t=e.wid,n=e.path;return function(e,r){setTimeout((function(){var i=r().workspace[t].activeFile;n===i&&e({type:"LOAD_FILE",wid:t,path:i})}))}}({wid:t,path:a}));break;case"OPEN_FILE":var s=i.path;if(!s)break;r(Aa({wid:t,pud:n,path:s,editorHandle:f}));break;case"MOVE_FILE":var l=i.path,d=i.to;if(v!==l)break;r({type:"OPEN_FILE",wid:t,path:d}),Sa(l,o)!==Sa(d,o)&&r(La({wid:t,path:l}));break;case"DELETE_FILE":var p=i.path;r(function(e){var t=e.wid,n=e.pud,r=e.path;return function(e,i){var a=i().workspace[t].activeFile;if(a){if(a===r||(0,pi.yr)(r,a)){var o=(0,Zt.Z)(i(),t,n,Da).files,s=Object.keys(o).concat(r).sort(),l=s.indexOf(r),c=s[0===l?1:l-1];e(void 0!==c?{type:"OPEN_FILE",wid:t,path:c}:(0,Pa.Z)({wid:t}))}e(La({wid:t,path:r}))}}}({wid:t,pud:n,path:p}));break;case"WORKSPACE_WILL_UNMOUNT":u(!1);break;case"REGISTER_ACE_EDITOR_HANDLE":case"REGISTER_MONACO_EDITOR_HANDLE":m(i.editorHandle)}return null})),null}var za=(0,yt.$)({files:xi.Z}),Va=n(5152),Ha=(0,Va.default)((0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.e(8912).then(n.bind(n,18912)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)}))),{loading:function(){return(0,B.tZ)("div",{style:{width:"100%",height:"100%",textAlign:"center",paddingTop:"30px"},children:"Loading viewer..."})},loadableGenerated:{webpack:function(){return[18912]},modules:["./Viewer"]}}),Ga=(0,yt.$)({files:xi.Z}),Wa=n(5864),Ka=n(38965),qa=n(62448),Ya=n(18946);function Qa(e){var t=e.contents;return(0,B.BX)("div",{className:q.default.dynamic([["3947362509",[me.j.tabletMin]]])+" root",children:[(0,B.tZ)("div",{className:q.default.dynamic([["3947362509",[me.j.tabletMin]]])+" content",children:(0,B.tZ)(Ka.Z,{source:t,renderers:{code:qa.Z,linkReference:Ya.NY,html:Ya.VI},sourcePos:!0})}),(0,B.tZ)(q.default,{id:"3947362509",dynamic:[me.j.tabletMin],children:[".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative;}",".content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32) var(--space-16);}","@media only screen and (min-width:".concat(me.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48) var(--space-32);}}")]})]})}var Ja=(0,Na.Z)(["INSTRUCTIONS_UPLOADED"]),$a=Ja.receiver,eo=Ja.useReceiver,to=function(e){var t=(0,ye.Z)(),n=(0,xe.qq)({variables:{replId:t}}),r=n.data,i=n.loading,a=n.error,o=(0,Wa.Z)(),s=ee.useState(),l=(0,L.Z)(s,2),c=l[0],u=l[1];return ee.useEffect((function(){var e;if(o.current&&"Repl"===(null===r||void 0===r||null===(e=r.repl)||void 0===e?void 0:e.__typename)){var t=r.repl.attachments.find((function(e){return"instructions.md"===e.fileName}));t&&u(t.contents)}}),[o,r]),eo((function(e){var t=e.action;"INSTRUCTIONS_UPLOADED"===t.type&&u(t.contents)})),i||!c?null:a?(0,B.BX)(ve.gC,{align:"center",spacing:1,style:{marginTop:"var(--space-16)"},children:[(0,B.tZ)(ge.Z,{children:"An error occurred while loading instructions:"}),(0,B.tZ)(ge.Z,{children:a.message})]}):(0,B.tZ)(Qa,{contents:c})},no=n(25108);function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ao=".lesson/".concat("instructions.md"),oo=function(e){var t=e.contents,n=(0,Pe.Z)().fs,r=(0,Ya.mn)({fs:n}),i=ee.useCallback((function(e){var t=e.src;return(0,B.tZ)(Ya.TS,{previewFilePath:ao,src:t,getImageContent:r,deeplink:!0})}),[r]);return(0,B.BX)("div",{className:q.default.dynamic([["3947362509",[me.j.tabletMin]]])+" root",children:[(0,B.tZ)("div",{className:q.default.dynamic([["3947362509",[me.j.tabletMin]]])+" content",children:(0,B.tZ)(Ka.Z,{source:t,renderers:{code:qa.Z,linkReference:Ya.NY,image:i,html:Ya.VI},sourcePos:!0})}),(0,B.tZ)(q.default,{id:"3947362509",dynamic:[me.j.tabletMin],children:[".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative;}",".content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32) var(--space-16);}","@media only screen and (min-width:".concat(me.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48) var(--space-32);}}")]})]})},so=function(e){var t=(0,ye.Z)(),n=(0,Pe.Z)().fs,r=(0,Wa.Z)(),i=ee.useState(null),a=(0,L.Z)(i,2),o=a[0],s=a[1];return ee.useEffect((function(){n.readFile(ao).then((function(e){if(r.current)return e.error?(no.error(e.error),void pt.$e((function(n){n.setExtra("replId",t),n.setTag("instructions-viewer",!0),pt.Tb("Error loading instructions viewier: ".concat(e.error))}))):void s(e.content.toString())}))}),[n,r,t]),o?(0,B.tZ)(oo,io(io({},e),{},{contents:o})):(0,B.tZ)(Oi.Z,{preventHighlightBorder:!0})};function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uo=function(e){var t=e.logs,n=e.timeRef,r=e.setTimeRef;return(0,B.BX)("div",{className:"jsx-3515057655 log-list",children:[t.map((function(e){var t=JSON.stringify(e.cmd,null,2),i=n?e.timestamp-n:e.timestamp;return(0,B.BX)("div",{className:"jsx-3515057655 "+("log "+(e.highlighted?"highlighted ":"")+("in"===e.dir?"in":"")||0),children:[(0,B.BX)("div",{className:"jsx-3515057655 direction",children:[(0,B.tZ)("div",{className:"jsx-3515057655",children:e.dir}),(0,B.tZ)("div",{className:"jsx-3515057655",children:"in"===e.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,B.tZ)("div",{className:"jsx-3515057655",children:(0,B.BX)(he.Z,{color:"positive",size:"small",onClick:function(){return r(e.timestamp)},children:[i.toFixed(0),"ms"]})})]}),(0,B.tZ)("pre",{className:"jsx-3515057655",children:t})]},e.index)})),(0,B.tZ)("div",{className:"jsx-3515057655 bottom-anchor"}),(0,B.tZ)(q.default,{id:"3515057655",children:[".log-list.jsx-3515057655{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".log-list.jsx-3515057655 *.jsx-3515057655{overflow-anchor:none;}",".bottom-anchor.jsx-3515057655{overflow-anchor:auto !important;min-height:1px;}",".log.jsx-3515057655{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".in.jsx-3515057655{color:red;}",".highlighted.jsx-3515057655{background:yellow;}",".direction.jsx-3515057655{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid;}",".direction.jsx-3515057655>div.jsx-3515057655:not(:last-child){border-bottom:1px solid;width:100%;}"]})]})},po=function(e){var t=e.filters,n=e.updateFilters;return(0,B.BX)("div",{className:"jsx-1185913860 filters",children:[(0,B.BX)("div",{className:"jsx-1185913860",children:[(0,B.tZ)("div",{className:"jsx-1185913860",children:"regex search (regex,flags)"}),(0,B.BX)("fieldset",{className:"jsx-1185913860",children:[(0,B.tZ)("input",{name:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=e.currentTarget.value.split(","),i=(0,L.Z)(r,2),a=i[0],o=i[1];try{t=new RegExp(a,o)}catch(s){}}n({regexp:t})},placeholder:"\\w+,gi",className:"jsx-1185913860"}),(0,B.BX)("div",{className:"jsx-1185913860",children:["current value: ",t.regexp?t.regexp.toString():"null"]})]})]}),(0,B.BX)("div",{className:"jsx-1185913860",children:[(0,B.tZ)("div",{className:"jsx-1185913860",children:"Directions:"}),(0,B.BX)("fieldset",{id:"log-filter-direction",className:"jsx-1185913860",children:[(0,B.BX)("label",{className:"jsx-1185913860",children:["both:",(0,B.tZ)("input",{type:"radio",onChange:function(e){return n({direction:e.target.value})},value:"",checked:""===t.direction,name:"log-filter-direction",className:"jsx-1185913860"})]}),(0,B.BX)("label",{className:"jsx-1185913860",children:["in:",(0,B.tZ)("input",{type:"radio",onChange:function(e){return n({direction:e.target.value})},value:"in",checked:"in"===t.direction,name:"log-filter-direction",className:"jsx-1185913860"})]}),(0,B.BX)("label",{className:"jsx-1185913860",children:["out:",(0,B.tZ)("input",{type:"radio",onChange:function(e){return n({direction:e.target.value})},value:"out",checked:"out"===t.direction,name:"log-filter-direction",className:"jsx-1185913860"})]})]})]}),(0,B.BX)("div",{className:"jsx-1185913860",children:[(0,B.tZ)("div",{className:"jsx-1185913860",children:"Filter style:"}),(0,B.BX)("fieldset",{id:"log-filter-style",className:"jsx-1185913860",children:[(0,B.BX)("label",{className:"jsx-1185913860",children:["highlight:",(0,B.tZ)("input",{type:"radio",onChange:function(){return n({highlightOnly:!0})},checked:t.highlightOnly,name:"log-filter-style",className:"jsx-1185913860"})]}),(0,B.BX)("label",{className:"jsx-1185913860",children:["hide:",(0,B.tZ)("input",{type:"radio",onChange:function(){return n({highlightOnly:!1})},checked:!t.highlightOnly,name:"log-filter-style",className:"jsx-1185913860"})]})]})]}),(0,B.tZ)(q.default,{id:"1185913860",children:[".filters.jsx-1185913860{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".filters.jsx-1185913860>*.jsx-1185913860{padding:20px 0;}","fieldset.jsx-1185913860{border:0;}","fieldset.jsx-1185913860>label.jsx-1185913860{margin-right:5px;}"]})]})},fo=function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return co(co({},e),{},{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.cmd;return(!t.direction||n===t.direction)&&!(t.regexp&&t.regexp.test&&!t.regexp.test(JSON.stringify(r)))};return t.highlightOnly?e.map((function(e){return n(e)?co(co({},e),{},{highlighted:!0}):e})):e.filter(n)},mo=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=ee.useState(e),n=(0,L.Z)(t,2),r=n[0],i=n[1],a=ee.useCallback((function(){return i((function(e){return!e}))}),[]);return[r,a]},ho=function(e){var t=e.wid,n=e.pud,r=mo(!0),i=(0,L.Z)(r,2),a=i[0],o=i[1],s=ee.useState(null),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=(0,Zt.J)(t,n,"adminpanel"),p=(0,L.Z)(d,2),f=p[0],m=f.crosisDebug,h=f.filters,g=f.crosisLogs,v=p[1],b=(0,at.I0)();return m?(0,B.BX)("div",{className:"jsx-1975817957 crosis-logs",children:[(0,B.BX)("div",{className:"jsx-1975817957",children:[(0,B.BX)("div",{className:"jsx-1975817957 buttons",children:[(0,B.tZ)(he.Z,{color:"orange",onClick:o,children:a?"hide filters":"show filters"}),c&&(0,B.tZ)(he.Z,{color:"negative",onClick:function(){return u(null)},children:"Reset Time Ref"}),(0,B.tZ)(he.Z,{color:"negative",onClick:function(){return b({type:"CLEAR_CROSIS_LOGS",wid:t})},children:"Clear logs"})]}),a?(0,B.tZ)(po,{filters:h,updateFilters:function(e){v({filters:co(co({},h),e)})}}):null]}),(0,B.tZ)(uo,{logs:fo(g,h),timeRef:c,setTimeRef:u}),(0,B.tZ)(q.default,{id:"1975817957",children:[".crosis-logs.jsx-1975817957{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".buttons.jsx-1975817957{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]}):(0,B.tZ)(he.Z,{color:"positive",filled:!0,onClick:function(){v({crosisDebug:!0}),b({type:"START_CROSIS_ADMIN_LOGS",wid:t})},children:"Start logging crosis v5"})},go=n(38347),vo=n(73426),bo=n(75215);function yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wo=function(e){var t=e.wid,n=e.pud,r=(0,Zt.J)(t,n,"adminpanel"),i=(0,L.Z)(r,1)[0].token,a=(0,at.I0)();return i?(0,B.BX)("div",{className:"jsx-4043509441 token-viewer",children:[(0,B.BX)("div",{className:"jsx-4043509441",children:["raw:",(0,B.tZ)("pre",{className:"jsx-4043509441",children:i})]}),(0,B.tZ)("br",{className:"jsx-4043509441"}),(0,B.BX)("div",{className:"jsx-4043509441",children:["parsed:",(0,B.tZ)("pre",{className:"jsx-4043509441",children:JSON.stringify((0,bo.he)(i),null,2)})]}),(0,B.tZ)("br",{className:"jsx-4043509441"}),(0,B.tZ)("br",{className:"jsx-4043509441"}),(0,B.tZ)(ko,{token:i,setToken:function(e){a({wid:t,type:"USE_CUSTOM_TOKEN",customToken:e})},becomeOwner:function(){a({wid:t,type:"REPL_UPDATED",updates:{isOwner:!0}})}}),(0,B.tZ)(q.default,{id:"4043509441",children:[".token-viewer.jsx-4043509441{height:100%;overflow:auto;padding:10px;}","pre.jsx-4043509441{white-space:pre-wrap;word-wrap:break-word;}"]})]}):(0,B.tZ)("div",{children:"no token yet, wait for connection"})},ko=function(e){var t=e.token,n=e.setToken,r=e.becomeOwner,i=ee.useState((function(){var e=(0,bo.he)(t),n=(e.salt,e.iat,e.exp,(0,go.Z)(e,["salt","iat","exp"]));return JSON.stringify(n,null,2)})),a=(0,L.Z)(i,2),o=a[0],s=a[1],l=ee.useState(!1),c=(0,L.Z)(l,2),u=c[0],d=c[1],p=function(){var e=(0,X.Z)(U().mark((function e(t){var r;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,(0,ot.uz)("/data/admin/custom_token_please_be_careful_or_you_will_be_fired",{tokenOptions:t});case 3:(r=e.sent).token&&"string"===typeof r.token&&n(r.token),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?(0,B.tZ)("div",{children:"Getting yer token, please wait..."}):(0,B.BX)("div",{children:[(0,B.tZ)(he.Z,{color:"negative",onClick:(0,X.Z)(U().mark((function e(){var n,i,a,o,s,l,c,u,d,f;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,bo.he)(t),a.salt,a.iat,a.exp,a.presenced,o=(0,go.Z)(a,["salt","iat","exp","presenced"]),s=(null===(n=o.repl)||void 0===n?void 0:n.sourceRepl)||(null===(i=o.id)||void 0===i?void 0:i.sourceRepl)){e.next=5;break}return window.alert("You own this repl?!"),e.abrupt("return");case 5:return l=ae.default.query.replUrl.split("/"),c=(0,L.Z)(l,3),u=c[1],d=c[2],f=xo(xo({},o),{},{id:s,slug:d,user:u.replace("@","")}),r(),e.next=10,p(f);case 10:case"end":return e.stop()}}),e)}))),children:"\ud83d\udea7 Experimental. Impersonate Owner & RECONNECT\ud83d\udea7"}),(0,B.tZ)("br",{}),(0,B.tZ)("br",{}),(0,B.BX)("div",{children:["\u26a0\ufe0fBE REALL CAREFUL HERE!\u26a0\ufe0f You can possibly break the world! \ud83d\ude35",(0,B.tZ)("br",{}),(0,B.tZ)("br",{}),"Double check all the values, double check the flags and everything.",(0,B.tZ)("br",{}),(0,B.tZ)("br",{}),"You should probably go look at the code and how these values are used"]}),(0,B.tZ)("br",{}),(0,B.tZ)(vo.Z,{rows:25,value:o,onChange:function(e){return s(e.currentTarget.value)}}),(0,B.tZ)(he.Z,{color:"negative",onClick:function(){var e;try{e=JSON.parse(o)}catch(t){return void window.alert("INVALID JSON!! Be careful!")}p(e)},children:"\u26a0\ufe0fGIMME TOKEN & RECONNECT\u26a0\ufe0f"})]})},Zo=n(27072),jo=function(e){var t=e.wid,n=e.pud,r=(0,Zt.J)(t,n,"adminpanel"),i=(0,L.Z)(r,1)[0].customGurl,a=(0,at.I0)(),o=ee.useState(i),s=(0,L.Z)(o,2),l=s[0],c=s[1],u="default";return localStorage.getItem("gurl")?u="from localStorage: "+localStorage.getItem("gurl"):i&&(u="from session state "+i),(0,B.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,B.tZ)(Yt.ZP,{value:l,onChange:function(e){return c(e.currentTarget.value)}}),(0,B.tZ)("br",{}),(0,B.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,B.tZ)(he.Z,{color:"positive",onClick:function(){a({type:"SET_CUSTOM_GURL",wid:t,gurl:l})},children:"Set gurl"}),(0,B.tZ)(he.Z,{color:"orange",onClick:function(){a({type:"SET_CUSTOM_GURL",wid:t,gurl:"wss://eval.global.replit.com"}),localStorage.removeItem("gurl")},children:"reset"})]}),(0,B.tZ)("br",{}),(0,B.tZ)("br",{}),(0,B.BX)("div",{children:["Current gurl: ",u]}),(0,B.tZ)("br",{}),i&&(0,B.BX)(he.Z,{color:"negative",onClick:function(){localStorage.setItem("gurl",i)},children:['Persist "',i,'" in local storage']}),(0,B.tZ)("br",{}),(0,B.tZ)("br",{}),"Gurl order of precedence:",(0,B.BX)("ol",{style:{margin:20},children:[(0,B.tZ)("li",{children:"gurl set in the form above"}),(0,B.tZ)("li",{children:"gurl in localStorage"}),(0,B.BX)("li",{children:["If in development webapp and a there's a response from",(0,B.tZ)("code",{children:"https://currenthost:4563"})," or",(0,B.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,B.BX)("li",{children:["default is ",(0,B.tZ)("code",{children:"wss://eval.global.replit.com"})]})]})]})},Oo=n(62898);function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Co(e){var t=e.wid,n=e.pud,r=mo(!0),i=(0,L.Z)(r,2),a=i[0],o=i[1],s=ee.useState(null),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=(0,Zt.J)(t,n,"adminpanel"),p=(0,L.Z)(d,2),f=p[0],m=f.v6filters,h=f.crosisV6Logs,g=p[1];return(0,B.BX)("div",{className:"jsx-1975817957 crosis-logs",children:[(0,B.BX)("div",{className:"jsx-1975817957",children:[(0,B.BX)("div",{className:"jsx-1975817957 buttons",children:[(0,B.tZ)(he.Z,{color:"orange",onClick:o,children:a?"hide filters":"show filters"}),c&&(0,B.tZ)(he.Z,{color:"negative",onClick:function(){return u(null)},children:"Reset Time Ref"}),(0,B.tZ)(he.Z,{color:"negative",onClick:function(){g({crosisV6Logs:[]})},children:"Clear logs"})]}),a?(0,B.tZ)(po,{filters:m,updateFilters:function(e){g({v6filters:_o(_o({},m),e)})}}):null]}),(0,B.tZ)(uo,{logs:fo(h,m),timeRef:c,setTimeRef:u}),(0,B.tZ)(q.default,{id:"1975817957",children:[".crosis-logs.jsx-1975817957{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".buttons.jsx-1975817957{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]})}function So(e){var t=(0,Zt.J)(e.wid,e.pud,"adminpanel"),n=(0,L.Z)(t,2),r=n[0].crosisDebug,i=n[1],a=(0,at.I0)();return r?(0,B.tZ)(Co,_o({},e)):(0,B.tZ)(he.Z,{color:"positive",filled:!0,onClick:function(){i({crosisDebug:!0}),a({type:"START_CROSIS_ADMIN_LOGS",wid:e.wid})},children:"Start logging goval"})}var Po=n(85271),No=function(){var e,t,n=(0,ye.Z)(),r=(0,xe.bPN)({variables:{replId:n}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?JSON.parse(JSON.stringify(r.repl)):void 0;i&&(delete i.__typename,null===(e=i.user)||void 0===e||delete e.__typename,null===(t=i.origin)||void 0===t||delete t.__typename,delete i.config.__typename);return(0,B.BX)("div",{className:"jsx-3817476767",children:[(0,B.BX)("div",{onClick:function(){(0,Po.Z)(n)},className:"jsx-3817476767",children:[(0,B.tZ)("span",{className:"jsx-3817476767",children:" repl ID: "}),(0,B.tZ)("input",{id:"replId",readOnly:!0,value:n,className:"jsx-3817476767"})]}),(0,B.tZ)("div",{className:"jsx-3817476767",children:i&&(0,B.tZ)("pre",{className:"jsx-3817476767",children:JSON.stringify(i,null,2)})}),(0,B.tZ)(q.default,{id:"3817476767",children:["pre.jsx-3817476767{white-space:pre-wrap;word-wrap:break-word;}"]})]})};function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ro=(0,Oo.Z)((function(){return{crosisDebug:!1,crosisLogs:[],crosisV6Logs:[],v6filters:{regexp:null,direction:"",highlightOnly:!0},filters:{regexp:null,direction:"",highlightOnly:!0},token:"",customGurl:""}}),(function(e,t){return"START_CROSIS_ADMIN_LOGS"===t.type?Io(Io({},e),{},{crosisDebug:!0}):"CROSIS_ADMIN_LOG"===t.type?Io(Io({},e),{},{crosisLogs:[].concat((0,Vt.Z)(e.crosisLogs),[{index:e.crosisLogs.length,dir:t.dir,cmd:t.cmd,timestamp:t.timestamp}])}):"CLEAR_CROSIS_LOGS"===t.type?Io(Io({},e),{},{crosisLogs:[]}):"GOVAL_TOKEN"===t.type?Io(Io({},e),{},{token:t.token}):"SET_CUSTOM_GURL"===t.type?Io(Io({},e),{},{customGurl:t.gurl}):e})),Do=Ro.reducer,Ao=Ro.setState,Lo=(0,yt.$)({primary:Do});function Bo(e,t,n){return"WORKSPACE_MOUNTED"===n.type?function(){var t=(0,X.Z)(U().mark((function t(n){var r;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Zo.Z)();case 2:(r=t.sent)&&n({type:"SET_CUSTOM_GURL",wid:e,gurl:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():"START_CROSIS_ADMIN_LOGS"===n.type?function(n,r){r().services.container.client().addDebugFunc((function(i){if("log"===i.type){var a=(0,Zt.Z)(r(),e,t,"adminpanel").crosisV6Logs;Ao(e,t,n,{crosisV6Logs:[].concat((0,Vt.Z)(a),[{index:a.length+1,dir:i.log.direction,cmd:i.log.cmd,timestamp:window.performance.now()}])})}}))}:null}var Mo=function(e){var t,n=e.wid,r=e.pud,i=e.style,a=ee.useState("repl"),o=(0,L.Z)(a,2),s=o[0],l=o[1];t="repl"===s?No:"logs"===s?ho:"logs2"===s?So:"token"===s?wo:jo;var c=["repl","logs","logs2","token","gurl"].map((function(e){return(0,B.tZ)(he.Z,{color:"primary",filled:e===s,onClick:function(){return l(e)},children:e},e)}));return(0,B.BX)("div",{style:i,className:"jsx-2212699820 admin-panel",children:[(0,B.tZ)("div",{className:"jsx-2212699820 buttons",children:c}),(0,B.tZ)("div",{className:"jsx-2212699820 section",children:(0,B.tZ)(t,{wid:n,pud:r,className:"jsx-2212699820"})}),(0,B.tZ)(q.default,{id:"2212699820",children:[".admin-panel.jsx-2212699820{background-color:var(--background-default);color:var(--foreground-default);}",".buttons.jsx-2212699820{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;margin-bottom:10px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".section.jsx-2212699820{height:calc(100% - 50px);}"]})]})},Uo=n(82973);function Xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xo(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zo=function(e){var t=e.reason;return(0,B.BX)("div",{className:"jsx-1201232931 spinner-modal-container",children:[(0,B.tZ)("div",{className:"jsx-1201232931 spinner",children:(0,B.tZ)(kt.Z,{})}),(0,B.BX)("h3",{className:"jsx-1201232931 reason",children:[t,"..."]}),(0,B.tZ)(q.default,{id:"1201232931",children:["@-webkit-keyframes replit-logo-spin-jsx-1201232931{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes replit-logo-spin-jsx-1201232931{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}",".spinner-modal-container.jsx-1201232931{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-width:225px;height:225px;cursor:not-allowed;background-color:var(--background-overlay);border-radius:var(--border-radius-4);z-index:500000;padding:var(--space-16);color:white;}",".spinner.jsx-1201232931{width:80px;height:80px;-webkit-animation:replit-logo-spin-jsx-1201232931 1.5s linear infinite;animation:replit-logo-spin-jsx-1201232931 1.5s linear infinite;}",".reason.jsx-1201232931{margin-top:20px;font-size:18px;font-weight:500;}"]})]})},Vo=function(e){var t=e.style,n=e.wid,r=e.pud,i=(0,at.v9)((function(e){return(0,Zt.Z)(e,n,r,"lock")})),a=i.isLocked,o=i.showSpinner,s=i.reason;return a?o?(0,B.BX)("div",{style:t,className:"jsx-2297509473",children:[(0,B.tZ)(zo,{reason:s}),(0,B.tZ)(q.default,{id:"2297509473",children:[".jsx-2297509473{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;background-color:rgba(0,0,0,0.25);z-index:500000;}"]})]}):(0,B.tZ)("div",{style:t,className:"jsx-2427369210",children:(0,B.tZ)(q.default,{id:"2427369210",children:[".jsx-2427369210{position:fixed;top:0;bottom:0;left:0;right:0;cursor:not-allowed;z-index:500000;}"]})}):null},Ho=(0,yt.$)({primary:function(e,t){switch(t.type){case"LOCK_WORKSPACE":return Fo(Fo({},e),{},{showSpinner:t.showSpinner,reason:t.reason,isLocked:!0});case"UNLOCK_WORKSPACE":return Fo(Fo({},e),{},{showSpinner:!1,isLocked:!1});default:return e}},preferences:bi.c});function Go(e,t,n){switch(n.type){case"LOCK_WORKSPACE":return function(){var t=(0,X.Z)(U().mark((function t(n,r){var i;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r().workspace[e].layout,!gt.Bp(i,"lock")){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n(Fo({wid:e,type:"UPDATE_LAYOUT"},gt.$T(i,"lock","inside",["floating"])));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();case"UNLOCK_WORKSPACE":return function(){var t=(0,X.Z)(U().mark((function t(n,r){var i;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r().workspace[e].layout,t.next=3,n(Fo({wid:e,type:"UPDATE_LAYOUT"},gt.Od(i,"lock")));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();default:return null}}var Wo=n(48556),Ko=n(2974);function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{closable:!0,title:"",message:"",trackingCtx:"",isOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROMPT_HACKER_UPGRADE":return{isOpen:!0,title:t.title,message:t.message,closable:t.closable,trackingCtx:t.trackingCtx};case"DISMISS_HACKER_UPGRADE":return Yo(Yo({},e),{},{isOpen:!1});default:return e}}var Jo=function(e){var t=e.wid,n=e.pud,r=(0,Zt.J)(t,n,"hackerupgradeprompt"),i=(0,L.Z)(r,1)[0],a=i.title,o=i.message,s=i.trackingCtx,l=i.isOpen,c=i.closable,u=ee.useState(!1),d=(0,L.Z)(u,2),p=d[0],f=d[1],m=ee.useState(!1),h=(0,L.Z)(m,2),g=h[0],v=h[1],b=ee.useState(!1),y=(0,L.Z)(b,2),x=y[0],w=y[1],k=ee.useState(!1),Z=(0,L.Z)(k,2),j=Z[0],O=Z[1],E=function(){return v(!1)},_=(0,xe.KiG)({ssr:!1}),C=function(e){var t=e.loading,n=e.data;return t?"loading":n&&n.currentUser?n.currentUser.isHacker?"hacker":"signedUp":"anon"}(_),S=(0,at.I0)();return ee.useEffect((function(){j&&"hacker"===C&&w(!0)}),[j,C]),ee.useEffect((function(){if(x){var e=setTimeout((function(){window.location.reload()}),1500);return function(){return clearTimeout(e)}}}),[x]),x?(0,B.BX)(Pt.ZP,{isOpen:!0,onRequestClose:function(){return!1},preventClose:!0,children:[(0,B.BX)("div",{className:"jsx-3902013120",children:[(0,B.tZ)("h3",{className:"jsx-3902013120",children:"The page will reload soon with your new superpowers"}),(0,B.tZ)("br",{className:"jsx-3902013120"}),(0,B.tZ)(Nt.Z,{style:{width:76,height:76,margin:"0 auto"}})]}),(0,B.tZ)(q.default,{id:"3902013120",children:["div.jsx-3902013120{padding:75px 52.5px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-weight:100;text-align:center;}"]})]}):l?(0,B.BX)(B.HY,{children:[function(){if(p){var e=function(){f(!1),S({type:"DISMISS_HACKER_UPGRADE",wid:t}),w(!0)};return(0,B.tZ)(Pt.ZP,{onRequestClose:e,isOpen:!0,children:(0,B.tZ)(Wo.Z,{onConfirm:e,confirmButtonText:"Continue hacking \ud83d\udd25"})})}return g?"loading"===C?(0,B.tZ)(Pt.ZP,{isOpen:!0,onRequestClose:function(){return!1},preventClose:!0,children:(0,B.tZ)(Nt.Z,{style:{width:76,height:76,margin:"0 auto"}})}):"anon"===C?(0,B.tZ)(Pt.ZP,{isOpen:!0,onRequestClose:E,children:(0,B.tZ)(Ko.Z,{onSuccess:function(){_.refetch(),O(!0)}})}):(0,B.tZ)(Tn.k,{closeModal:E,isOpen:g,trackingInfo:{context:s},onSubscribe:function(){return f(!0)}}):null}(),(0,B.BX)("div",{className:"jsx-279563936 warning-label-outer",children:[(0,B.BX)("div",{className:"jsx-279563936 warning-label-inner",children:[(0,B.tZ)("span",{className:"jsx-279563936 warning-label-warning",children:a}),(0,B.tZ)("span",{className:"jsx-279563936 warning-label-message",children:"hacker"!==C?o:"\ud83e\udd26\u200d\u2640\ufe0f You've run out of disk space."}),"hacker"!==C&&(0,B.tZ)("button",{onClick:function(){(0,mt.track)(mt.events.UPGRADE_SELECTED,{source:"inline",planID:"hacker"}),v(!0)},className:"jsx-279563936 warning-label-upgrade",children:"Upgrade"}),c&&(0,B.tZ)("button",{onClick:function(){S({type:"DISMISS_HACKER_UPGRADE",wid:t})},className:"jsx-279563936 warning-label-x",children:"\xd7"})]}),(0,B.tZ)(q.default,{id:"279563936",children:[".warning-label-outer.jsx-279563936{display:table;background:var(--background-default);position:absolute;bottom:24px;left:50%;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);border-radius:5px;z-index:30;box-shadow:var(--shadow-1);}",".warning-label-inner.jsx-279563936{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:white;padding:8px;background-color:var(--accent-orange-dimmest);color:var(--accent-orange-strongest);border-radius:5px;min-width:400px;max-width:600px;}",".warning-label-upgrade.jsx-279563936{margin:8px;padding:8px 16px;background-color:var(--accent-positive-dimmest);color:var(--white);border-radius:5px;border:none;font-size:1em;font-weight:bold;}",".warning-label-warning.jsx-279563936{font-weight:bold;margin:0px 8px;}",".warning-label-x.jsx-279563936{font-weight:bold;font-size:1.5em;text-align:center;vertical-align:center;color:grey;outline:none;background:none;border:none;cursor:pointer;margin:8px;}"]})]})]}):null},$o=n(74141);function es(e){return ts.apply(this,arguments)}function ts(){return(ts=(0,X.Z)(U().mark((function e(t){var n,r;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($o.l){e.next=2;break}throw new Error("Expected Apollo Client");case 2:return e.next=4,$o.l.query({query:xe.zTE,variables:{replId:t}});case 4:if(n=e.sent,"Repl"===(r=n.data).repl.__typename){e.next=8;break}throw new Error("Expected repl");case 8:return e.abrupt("return",r.repl);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ns=(0,Na.Z)(["OPEN_SHELL","PORT_OPEN","SET_VNC_URL","RUN_REPL"]),rs=ns.receiver,is=ns.useReceiver;function as(){var e=(0,ye.Z)(),t=ee.useState(""),n=(0,L.Z)(t,2),r=n[0],i=n[1],a=(0,at.I0)();return is((function(t){var n=t.action,o=t.wid;switch(n.type){case"SET_VNC_URL":i(n.vncUrl);break;case"OPEN_SHELL":a(function(e){var t=e.wid;return function(e,n){(0,mt.track)(mt.events.SHELL_OPENED);var r=n().workspace[t],i=r.layout,a=r.plugins,o=gt.PP(i,a,"shell");o&&e({type:"SET_ACTIVE_TAB",path:gt.Il(gt.Il(o)),tabIndex:1,wid:t})}}({wid:o}));break;case"PORT_OPEN":if(5900===n.port){a(function(e){var t=e.wid,n=e.replId,r=e.vncUrl;return function(){var e=(0,X.Z)(U().mark((function e(i,a){var o,s,l,c,u,d,p,f,m,h,g;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().workspace[t],l=s.layout,c=s.plugins,e.next=3,es(n);case 3:if(!(u=e.sent).config.isVnc&&null!==(o=u.currentUserPermissions)&&void 0!==o&&o.changeConfig&&i({type:"REQUEST_REPL_UPDATE",wid:t,updates:{config:{isVnc:!0,isServer:!1}}}),!gt.PP(l,c,"vnc")){e.next=9;break}return i({type:"CONNECT_VNC",vncUrl:r,wid:t}),e.abrupt("return");case 9:i({type:"LOAD_PLUGIN",wid:t,pluginPud:d="vnc",pluginType:"vnc",title:"output",initialState:{}}),gt.e$(l,d)||(p=gt.PP(l,c,"console")||gt.PP(l,c,"terminal2")||gt.Jz(),f=gt.Il(gt.Il(p)),m=gt.$T(l,d,"above",f),h=m.path,g=m.to,i({type:"UPDATE_LAYOUT",wid:t,path:h,to:g,property:void 0})),i({type:"CONNECT_VNC",vncUrl:r,wid:t});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replId:e,vncUrl:r}));break}a(function(e){var t=e.wid,n=e.replId;return function(){var e=(0,X.Z)(U().mark((function e(r,i){var a,o,s,l,c,u,d,p,f,m,h;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i().workspace[t],s=o.layout,l=o.plugins,e.next=3,es(n);case 3:if(!(c=e.sent).config.isServer&&null!==(a=c.currentUserPermissions)&&void 0!==a&&a.changeConfig&&r({type:"REQUEST_REPL_UPDATE",wid:t,updates:{config:{isServer:!0,isVnc:!1}}}),!gt.PP(s,l,"webview")){e.next=9;break}return r({type:"REFRESH_WEBVIEW",wid:t}),e.abrupt("return");case 9:r({type:"LOAD_PLUGIN",wid:t,pluginPud:u="webview",pluginType:"webview",title:"output",initialState:{canBeClosed:!0}}),gt.e$(s,u)||(d=gt.PP(s,l,"console")||gt.PP(s,l,"terminal2")||gt.Jz(),p=gt.Il(gt.Il(d)),f=gt.$T(s,u,"above",p),m=f.path,h=f.to,r({type:"UPDATE_LAYOUT",wid:t,path:m,to:h,property:void 0}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replId:e}));break;case"RUN_REPL":a(function(e){var t=e.wid;return function(e,n){var r=n().workspace[t],i=r.layout,a=r.plugins,o=gt.PP(i,a,"shell");o&&e({type:"SET_ACTIVE_TAB",path:gt.Il(gt.Il(o)),tabIndex:0,wid:t})}}({wid:o}))}return null})),null}var os=44100,ss=32896,ls=function e(){var t=this;(0,F.Z)(this,e),(0,K.Z)(this,"samples",void 0),(0,K.Z)(this,"bufferSource",void 0),(0,K.Z)(this,"audioCtx",void 0),(0,K.Z)(this,"gainNode",void 0),(0,K.Z)(this,"startTime",void 0),(0,K.Z)(this,"audioStart",0),(0,K.Z)(this,"correction",void 0),(0,K.Z)(this,"feed",(function(e){var n=t.getFormatedValue(e),r=new Float32Array(t.samples.length+n.length);r.set(t.samples,0),r.set(n,t.samples.length),t.samples=r})),(0,K.Z)(this,"getFormatedValue",(function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=e[n]/2147483648;return t})),(0,K.Z)(this,"stop",(function(){if(t.bufferSource)try{t.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}})),(0,K.Z)(this,"flush",(function(e){if(t.audioCtx&&t.samples.length){var n=0,r=t.audioCtx.currentTime;if(0===e)t.startTime=r,t.audioStart=r;else{for(var i=r-t.audioStart,a=Math.floor(i*os);a>e-ss;)t.audioStart+=.7459410430839002,a-=ss;a>e&&(n=a-e,t.startTime=r),t.startTime=r}t.samples=t.samples.slice(n,t.samples.length);for(var o,s,l,c=t.audioCtx.createBufferSource(),u=t.samples.length/1,d=t.audioCtx.createBuffer(1,u,os),p=0;p<1;p++)for(o=d.getChannelData(p),s=p,l=0;l<u;l++)o[l]=t.samples[s],s+=1;t.startTime<t.audioCtx.currentTime&&(t.startTime=t.audioCtx.currentTime),c.buffer=d,c.connect(t.gainNode),c.start(t.startTime),t.stop(),t.bufferSource=c,t.startTime+=d.duration,t.samples=new Float32Array}})),this.samples=new Float32Array;var n=window.AudioContext||window.webkitAudioContext;this.audioCtx=new n,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime},cs=n(71570);function us(e){var t=e.container,n=(0,ee.useState)(!1),r=n[0],i=n[1],a=(0,ee.useRef)(null);(0,ee.useEffect)((function(){return t.openChannel({name:"audio",service:"audio"},(function(e){var t=e.channel;if(t){var n=null,r=!1;return t.onCommand((function(e){var t;r||(r=!0,(0,mt.track)(mt.events.AUDIO_PLAYING_STARTED),a.current=function(){n=new ls,a.current=null},i(!0)),n&&null!==e&&void 0!==e&&null!==(t=e.audio2)&&void 0!==t&&t.data&&(e.audio2.samples||(e.audio2.samples=0),n.feed(Int32Array.from(e.audio2.data)),n.flush(e.audio2.samples))})),function(){i(!1),n&&(n.stop(),n=null),a.current=null}}}))}),[t]);var o=function(){i(!1),(0,mt.track)(mt.events.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,B.tZ)(Pt.ZP,{isOpen:r,preventClose:!0,onRequestClose:o,children:(0,B.BX)(or.Z,{css:[Mn.l0.colWithGap(32),Mn.l0.p(32),"",""],children:[(0,B.BX)(or.Z,{css:[Mn.l0.colWithGap(16),"",""],children:[(0,B.tZ)(cs.h,{variant:"headerBig",level:3,children:"We hear audio!"}),(0,B.tZ)(cs.x,{children:"Hey! It appears that this repl is playing audio."}),(0,B.tZ)(cs.x,{children:"In order for us to hear the audio you're receiving, please click confirm."})]}),(0,B.BX)(or.Z,{css:[Mn.l0.rowWithGap(16),"",""],children:[(0,B.tZ)(he.Z,{onClick:o,children:"Cancel"}),(0,B.tZ)(he.Z,{color:"positive",filled:!0,onClick:function(){i(!1),(0,mt.track)(mt.events.AUDIO_PROMPT_CLOSED,{accepted:!0}),a.current&&a.current()},children:"Confirm"})]})]})})}function ds(){var e=(0,Pe.Z)().container;return(0,B.tZ)(us,{container:e})}var ps=n(35424),fs=n.n(ps),ms=n(82438);function hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vs(e){return new Promise((function(t,n){var r=e.openChannel({service:"gcsfiles"},(function(e){if(!e.error)return e.channel.request({persistMirror:{path:"."}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()};n(e.error)}))}))}var bs=function(e){var t={"go.mod":"go","package.json":"nodejs","Cargo.toml":"rust","requirements.txt":"python3","pyproject.toml":"python3","index.html":"html",Gemfile:"ruby",Makefile:"bash"};for(var n in t)if(e.includes(n))return t[n];var r=fe().allSupportedByPopularity().reduce((function(e,t){var n=t.ext,r=t.key;return e[n]=e[n]?e[n]:r,e}),{}),i=e.map((function(e){return e.split(".").slice(-1)[0]})).reduce((function(e,t){var n=e.find((function(e){return e.ext===t}));return n?n.count++:e.push({ext:t,count:1}),e}),[]).sort((function(e,t){return t.count-e.count}));return i.length&&(1===i.length||i[0].count>=2*i[1].count)&&r[i[0].ext]?r[i[0].count]:"bash"};var ys=(0,Na.Z)(["START_GIT_CLONE","END_GIT_CLONE","INSERT_RUN_FLOW_PLUGIN"]),xs=ys.receiver,ws=ys.useReceiver;function ks(){var e=(0,ye.Z)(),t=(0,at.I0)(),n=(0,ae.useRouter)(),r=(0,xe.jCQ)({variables:{replId:e}}).data,i=(0,xe.IRU)(),a=(0,L.Z)(i,1)[0],o=ee.useState(null),s=(0,L.Z)(o,2),l=s[0],c=s[1];return ws((function(e){var i=e.action,o=e.wid;switch(i.type){case"START_GIT_CLONE":var s="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.url:void 0;if(!s)throw new Error("expected url");n.replace({pathname:n.pathname,query:n.query},s,{shallow:!0});break;case"END_GIT_CLONE":var u="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:void 0;if(!u)throw new Error("Expected repl");t(function(e){var t=e.wid,n=e.replLanguage,r=e.onDone;return function(){var e=(0,X.Z)(U().mark((function e(i,a){var o,s,l,c,u,d,p,f,m,h,g,v,b,y,x;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Detecting Language",wid:t}),o=a().services,s=o.fs,l=o.session,c=o.container,e.next=4,s.readDir(Qr.Q);case 4:return u=e.sent,d=u.error?[]:u.children.filter((function(e){return e.type===wn.Tv.File})).map((function(e){return e.filename})),(p=d.find((function(e){return e.toLowerCase().includes("readme")}))||(0,ms.T)(d,n)||d[0])&&l.openFile(p),e.next=10,vs(c);case 10:return e.next=12,s.readFile(".replit");case 12:if(f=e.sent,m=null,h={displayName:""},g=!1,null===f.error&&(m=fs().parse(f.content.toString("utf8")).language,h=fe().get(m),g="Unknown"!==h.displayName),!f.error&&m&&g){e.next=27;break}if(i({type:"UNLOCK_WORKSPACE",wid:t}),!f.error){e.next=25;break}return v=bs(d),b="nodejs"===v?"npm start":"",y='language = "'.concat(v,'"\nrun = "').concat(b,'"'),e.next=25,s.writeFile(".replit",ar.Z.from(y));case 25:return i({type:"INSERT_RUN_FLOW_PLUGIN",wid:t,pudToInsert:"config"}),e.abrupt("return");case 27:if(m!==n){e.next=30;break}return i({type:"UNLOCK_WORKSPACE",wid:t}),e.abrupt("return");case 30:return x=h.displayName,i({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Upgrading to ".concat(x),wid:t}),e.next=34,s.persist({skipDebounce:!0});case 34:r(fe().getCanonicalName(m));case 35:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:o,replLanguage:u.language,onDone:function(e){a({variables:{input:{id:u.id,language:e}}}).then((function(){window.location.replace(window.location.pathname)}))}}));break;case"INSERT_RUN_FLOW_PLUGIN":var d=i.pudToInsert;t(function(e){var t=e.wid,n=e.currentPud,r=e.pudToInsert,i=e.setCurrentPud;return function(e,a){var o=a().workspace[t],s=o.layout,l=o.plugins;if(!gt.e$(s,r)){var c=gt.PP(s,l,"shell");if(!c)throw new Error("Expected shell path");var u=gt.Il(gt.Il(c));e(gs({wid:t,type:"UPDATE_LAYOUT"},gt.$T(s,r,"above",u)));var d=a().workspace[t].layout;n&&e(gs({wid:t,type:"UPDATE_LAYOUT"},gt.Od(d,n))),i(r)}}}({wid:o,currentPud:l,pudToInsert:d,setCurrentPud:c}))}return null})),null}var Zs=n(78198);var js=function(e){return(0,B.BX)(Pt.ZP,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:[(0,B.BX)("div",{className:"jsx-1092762125 notification-perm-container",children:[(0,B.BX)("div",{className:"jsx-1092762125 infobox",children:[(0,B.tZ)("h2",{className:"jsx-1092762125 title",children:"Replit needs your permission to enable notifications."}),(0,B.tZ)("div",{className:"jsx-1092762125",children:"Never miss messages from your collaborators if you\u2019re in another tab or window."})]}),(0,B.BX)("div",{className:"jsx-1092762125 controlbox",children:[(0,B.tZ)(he.Z,{onClick:e.onCancel,children:"Cancel"}),(0,B.tZ)(he.Z,{filled:!0,color:"positive",onClick:e.onConfirm,children:"Confirm"})]})]}),(0,B.tZ)(q.default,{id:"1092762125",children:[".notification-perm-container.jsx-1092762125{padding:30px;}",".infobox.jsx-1092762125{padding-bottom:75px;}",".infobox.jsx-1092762125 .title.jsx-1092762125{padding-bottom:22px;}",".controlbox.jsx-1092762125{display:grid;grid-template-columns:auto auto;grid-column-gap:10px;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;}"]})]})};function Os(e){return Es.apply(this,arguments)}function Es(){return(Es=(0,X.Z)(U().mark((function e(t){var n,r,i;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==$o.l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$o.l.query({query:xe.vce,variables:{username:t}});case 4:return r=e.sent,i=r.data,e.abrupt("return",null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.image);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _s(){return"Notification"in window?"true"===window.localStorage.getItem(Ts)?"dismissed":window.Notification.permission:"denied"}function Cs(){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.Notification.requestPermission().then(),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e){window.Notification.requestPermission((function(t){e(t)}))})));case 7:return e.abrupt("return",window.Notification.requestPermission());case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function Ps(){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,X.Z)(U().mark((function e(){var t;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cs();case 2:t=e.sent,Is(!1),(0,mt.track)("granted"===t?mt.events.WEB_NOTIFICATION_PERM_GRANTED:mt.events.WEB_NOTIFICATION_PERM_DENIED);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ts="notifications/dismissedModal";function Is(e){window.localStorage.setItem(Ts,String(e)),e&&(0,mt.track)(mt.events.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var Rs={};function Ds(e){return As.apply(this,arguments)}function As(){return(As=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.title,r=t.body,i=t.badge,a=t.icon,o=t.iconByUsername,s=t.tag,l=t.onClick,c=t.cacheDuration,u=void 0===c?0:c,document.hidden||!document.hasFocus()){e.next=3;break}return e.abrupt("return");case 3:if("granted"===_s()){e.next=5;break}return e.abrupt("return");case 5:if(d=Date.now(),!(s in Rs)){e.next=9;break}if(!(Rs[s]+u>d)){e.next=9;break}return e.abrupt("return");case 9:if(!o){e.next=13;break}return e.next=12,Os(o);case 12:a=e.sent;case 13:(p=new window.Notification(n,{body:r,badge:i||"/public/images/logo-grayscale.png",icon:a||"/public/images/icon-square.png",tag:s})).addEventListener("click",(function(){window.focus(),p.close()})),l&&p.addEventListener("click",l),Rs[s]=d;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ls=(0,Na.Z)(["REQUEST_NOTIFICATION_PERMS"]),Bs=Ls.receiver,Ms=Ls.useReceiver;function Us(){var e=(0,ee.useState)(!1),t=e[0],n=e[1];Ms((function(e){var t=e.action;switch(t.type){case"REQUEST_NOTIFICATION_PERMS":var r=_s();("default"===r||"dismissed"===r&&t.force)&&n(!0)}return null}));var r=function(){var e=(0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ps();case 2:n(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?(0,B.tZ)(js,{onCancel:function(){Is(!0),n(!1)},onConfirm:r}):null}var Xs=n(2360),Fs=n(40978),zs=function(e){var t,n,r,i=e.style,a=(0,ye.Z)(),o=(0,xe.r8C)({variables:{replID:a},pollInterval:1e4}),s=o.data,l=o.error,c=o.loading;s&&("Repl"===s.repl.__typename?n=null===s||void 0===s||null===(r=s.repl)||void 0===r?void 0:r.database:t="Could not fetch Database info");l&&("GraphQL error: You don't have access to this database"===l.message?n=null:t=l.message);var u=(0,at.v9)((function(e){return e.user.userInfo}));return(0,B.BX)("div",{style:i,className:"jsx-1980359980 database",children:[(0,B.tZ)("div",{className:"jsx-1980359980 header",children:(0,B.tZ)(Ne.Z,{level:4,children:"Database"})}),(0,B.tZ)(Xs.Z,{height:1}),(0,B.tZ)("div",{className:"jsx-1980359980 wrapper",children:u.isLoggedIn?(0,B.BX)(B.HY,{children:[(0,B.BX)("span",{className:"jsx-1980359980 description",children:[(0,B.tZ)("a",{href:"https://docs.replit.com/misc/database",target:"_blank",rel:"noopener",className:"jsx-1980359980 docs-link",children:"Replit Database"}),"is an easy to use key-value store."]}),t&&(0,B.tZ)("div",{className:"jsx-1980359980 error",children:t}),(n||c)&&(0,B.tZ)("div",{className:"jsx-1980359980 usage",children:(0,B.tZ)(Vs,{database:n,loading:c})}),!c&&(0,B.BX)("div",{className:"jsx-1980359980",children:[(0,B.tZ)("span",{className:"jsx-1980359980 command-title",children:"commands"}),(0,B.tZ)(Hs,{})]})]}):(0,B.tZ)(tl,{})}),(0,B.tZ)(el,{}),(0,B.tZ)(q.default,{id:"1980359980",children:[".database.jsx-1980359980{text-overflow:ellipsis;background-color:var(--background-default);color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-width:120px;padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);}",".header.jsx-1980359980{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);position:relative;color:var(--foreground-default);width:100%;}",".description.jsx-1980359980{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;color:var(--foreground-dimmer);padding-bottom:var(--space-16) 0;}",".docs-link.jsx-1980359980{font-weight:var(--font-weight-medium);color:var(--accent-primary-default);margin-right:var(--space-4);}",".wrapper.jsx-1980359980{overflow-y:auto;-webkit-flex:1;-ms-flex:1;flex:1;width:100%;}",".error.jsx-1980359980{color:var(--accent-negative-default);margin-bottom:var(--space-16);}",".usage.jsx-1980359980{margin-bottom:var(--space-16);}",".command-title.jsx-1980359980{font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;margin-bottom:var(--space-16);}"]})]})},Vs=function(e){var t=e.database;if(e.loading)return(0,B.tZ)(Nt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}});if(!t)return null;var n=t.sizeMB||0,r="MB";return n<1&&(n*=1e3,r="KB"),(0,B.BX)("div",{className:"jsx-1393931180 storage-section",children:[(0,B.tZ)("span",{className:"jsx-1393931180 storage-title",children:"storage"}),(0,B.BX)("div",{className:"jsx-1393931180",children:[(0,B.BX)("span",{className:"jsx-1393931180 storage-data",children:[n.toFixed(2)," ",r]}),(0,B.tZ)("span",{className:"jsx-1393931180 separator",children:"|"}),(0,B.tZ)("span",{className:"jsx-1393931180 storage-data",children:"".concat(t.keysCount||0," ").concat(1===t.keysCount?"key":"keys")})]}),(0,B.tZ)(q.default,{id:"1393931180",children:[".storage-section.jsx-1393931180{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8) 0;}",".storage-title.jsx-1393931180{font-size:var(--font-size-small);text-transform:uppercase;font-weight:var(--font-weight-medium);-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;padding-bottom:var(--space-4);}",".separator.jsx-1393931180{color:var(--foreground-dimmest);padding:0 var(--space-8);}",".storage-data.jsx-1393931180{color:var(--foreground-dimmer);}"]})]})},Hs=function(){var e=(0,xn.Z)(),t=(0,B.tZ)($s,{});if(e)switch((0,kn.r6)(e)){case"go":t=(0,B.tZ)(Js,{examples:Ys});break;case"js":case"ts":case"tsx":case"jsx":case"mjs":t=(0,B.tZ)(Js,{examples:Qs});break;case"py":t=(0,B.tZ)(Js,{examples:qs})}return(0,B.BX)("div",{className:"jsx-4017018285 examples-container",children:[t,(0,B.tZ)(q.default,{id:"4017018285",children:[".examples-container.jsx-4017018285{padding:var(--space-4) 0;}"]})]})},Gs=function(e){var t=e.title,n=e.content,r=ee.useState(n),i=(0,L.Z)(r,2),a=i[0],o=i[1],s=function(){var e=t.split(" ");return[e[0],e.slice(1).join(" ")]}(),l=(0,L.Z)(s,2),c=l[0],u=l[1];return(0,B.BX)("div",{className:"jsx-4013288462 command-container",children:[(0,B.BX)("span",{className:"jsx-4013288462 command-title",children:[(0,B.tZ)("span",{className:"jsx-4013288462 command-keyword",children:c}),u]}),(0,B.BX)("div",{className:"jsx-4013288462 command-wrapper",children:[(0,B.tZ)("div",{className:"jsx-4013288462 command-example",children:n.map((function(e,n){return"input"===e.type?(0,B.tZ)("input",{onChange:function(e){var t=(0,Vt.Z)(a);t[n].value=e.target.value,o(t)},placeholder:e.placeholder,value:e.value||"",className:"jsx-4013288462"},"".concat(t,"-").concat(n)):(0,B.tZ)("code",{className:"jsx-4013288462",children:e.value},"".concat(t,"-").concat(n))}))}),(0,B.tZ)(Ws,{code:a.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),"")})]}),(0,B.tZ)(q.default,{id:"4013288462",children:[".command-container.jsx-4013288462{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;}",".command-title.jsx-4013288462{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;white-space:nowrap;margin-bottom:var(--space-8);color:var(--foreground-dimmer);}",".command-keyword.jsx-4013288462{color:var(--foreground-default);font-weight:var(--font-weight-medium);margin-right:var(--space-4);}",".command-wrapper.jsx-4013288462{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".command-example.jsx-4013288462{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;padding:2px 4px;border-radius:var(--border-radius-4);background-color:var(--background-higher);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:var(--space-4);margin-bottom:var(--space-4);}",".command-example.jsx-4013288462:hover,.command-example.jsx-4013288462:hover>code.jsx-4013288462{background-color:var(--background-higher);}","code.jsx-4013288462{padding:2px;background-color:var(--background-higher);color:var(--accent-negative-default);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;white-space:nowrap;}","input.jsx-4013288462{text-align:center;width:40px;height:auto;background-color:var(--background-default);border:1px solid var(--background-highest);color:var(--foreground-default);border-radius:var(--border-radius-4);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;cursor:text;}","input.jsx-4013288462:focus{border:0.5px solid var(--accent-primary-default);outline:none;}"]})]})},Ws=function(e){var t=e.code,n=(0,Fs.Z)();return n?(0,B.tZ)(he.Z,{className:"button",size:"small",onClick:function(){n({code:t})},children:"Insert \u2192"}):(0,B.tZ)(he.Z,{className:"button",size:"small",onClick:function(){return(0,Po.Z)(t)},children:"Copy"})},Ks=[{title:"Set a key to a value",content:[{type:"code",value:"curl $REPLIT_DB_URL -d '"},{type:"input",placeholder:"key"},{type:"code",value:"="},{type:"input",placeholder:"value"},{type:"code",value:"'"}]},{title:"Get a key's value",content:[{type:"code",value:"curl $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"Delete a key",content:[{type:"code",value:"curl -XDELETE $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"List all keys",content:[{type:"code",value:'curl "$REPLIT_DB_URL?prefix='},{type:"input",placeholder:"key"},{type:"code",value:'"'}]}],qs=[{title:"Import the database",content:[{type:"code",value:"from replit import db"}]},{title:"Set a key to a value",content:[{type:"code",value:'db["'},{type:"input",placeholder:"key"},{type:"code",value:'"] = "'},{type:"input",placeholder:"value"},{type:"code",value:'"'}]},{title:"Get a key's value",content:[{type:"code",value:'value = db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"Delete a key",content:[{type:"code",value:'del db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"List all keys",content:[{type:"code",value:"keys = db.keys()"}]},{title:"List keys with a prefix",content:[{type:"code",value:'matches = db.prefix("'},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],Ys=[{title:"Import the database",content:[{type:"code",value:'import "github.com/replit/database-go"'}]},{title:"Set a key to a value",content:[{type:"code",value:'database.Set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'")'}]},{title:"Get a key's value",content:[{type:"code",value:'value, _ := database.Get("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"Delete a key",content:[{type:"code",value:'database.Delete("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"List all keys",content:[{type:"code",value:'keys, _ := database.ListKeys("")'}]},{title:"List keys with a prefix",content:[{type:"code",value:"matches, _ := database.ListKeys("},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],Qs=[{title:"Import the database",content:[{type:"code",value:'const Database = require("@replit/database")'}]},{title:"Create a new database",content:[{type:"code",value:"const db = new Database()"}]},{title:"Set a key to a value",content:[{type:"code",value:'db.set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'").then(() => {});'}]},{title:"Get a key's value",content:[{type:"code",value:'db.get("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(value => {});'}]},{title:"Delete a key",content:[{type:"code",value:'db.delete("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(() => {});'}]},{title:"List all keys",content:[{type:"code",value:"db.list().then(keys => {});"}]},{title:"List keys with a prefix",content:[{type:"code",value:'db.list("'},{type:"input",placeholder:"prefix"},{type:"code",value:'").then(matches => {});'}]}],Js=function(e){var t=e.examples;return(0,B.tZ)("div",{children:(0,B.tZ)(ve.gC,{spacing:2,children:t.map((function(e,t){return(0,B.tZ)(Gs,{title:e.title,content:e.content},t)}))})})},$s=function(){return(0,B.BX)(B.HY,{children:[(0,B.BX)("span",{className:"jsx-1406247759 intro",children:["We've set an environment variable called ",(0,B.tZ)("code",{className:"jsx-1406247759",children:"REPLIT_DB_URL"})," in your repl."]}),(0,B.tZ)("div",{className:"jsx-1406247759 examples",children:(0,B.tZ)(ve.gC,{spacing:2,children:Ks.map((function(e,t){return(0,B.tZ)(Gs,{title:e.title,content:e.content},t)}))})}),(0,B.tZ)("span",{className:"jsx-1406247759 disclaimer",children:"You can use the Database from any repl by making HTTP requests similar to those above. We have language clients for Python, Go, and Node, switch to a file that uses that language to see how to use the client."}),(0,B.tZ)(q.default,{id:"1406247759",children:[".intro.jsx-1406247759{color:var(--foreground-dimmer);padding-top:var(--space-8);padding-bottom:var(--space-16);}",".examples.jsx-1406247759{padding:var(--space-8) 0;}",".disclaimer.jsx-1406247759{padding-top:var(--space-8);padding-bottom:var(--space-16);color:var(--foreground-dimmer);}","code.jsx-1406247759{padding:2px;background-color:var(--background-higher);color:var(--accent-negative-default);-webkit-transition:background-color 0.1s;transition:background-color 0.1s;white-space:nowrap;}"]})]})},el=function(){return(0,B.BX)("div",{className:"jsx-1270927779",children:[(0,B.tZ)("a",{href:"https://replit.com/talk/announcements/Replit-Database-feedback/51085",target:"_blank",rel:"noopener",className:"jsx-1270927779",children:"Send feedback"}),(0,B.tZ)(q.default,{id:"1270927779",children:["div.jsx-1270927779{background-color:var(--background-root);color:var(--foreground-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:var(--space-32);padding:var(--space-16) var(--space-8) var(--space-16) var(--space-16);position:relative;font-size:var(--font-size-default);}"]})]})},tl=function(){return(0,B.BX)("div",{className:"jsx-3518544417 wrapper",children:[(0,B.BX)("span",{className:"jsx-3518544417 description",children:[(0,B.tZ)("a",{href:"https://docs.replit.com/misc/database",target:"_blank",rel:"noopener",className:"jsx-3518544417 docs-link",children:"Replit Database"}),"is the fastest and easiest way to store data from your repl. Try it out by logging in or signing up."]}),(0,B.tZ)("a",{href:"/signup",className:"jsx-3518544417",children:(0,B.tZ)(he.Z,{fullWidth:!0,color:"primary",filled:!0,children:"Sign up"})}),(0,B.tZ)(q.default,{id:"3518544417",children:[".wrapper.jsx-3518544417{padding:var(--space-8) 0;color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}","span.jsx-3518544417{margin-bottom:var(--space-8);}",".docs-link.jsx-3518544417{font-weight:var(--font-weight-medium);color:var(--accent-primary-default);margin-right:var(--space-4);}"]})]})},nl=n(14736),rl=n(61910),il=n(13310),al=n(95942),ol=n(48077),sl=n(53375),ll=n(41422),cl=n(75916),ul=n(5590),dl=n(33945),pl=n(76504),fl=n(30332),ml=n(70765);function hl(e){var t=e.path,n=e.isActive;return(0,B.tZ)(pl.Z,{path:t,fill:n?"var(--white)":void 0,fillDefaultFileIcon:n})}function gl(e){var t=e.path,n=e.run;return{config:{match:function(e){if(1===e.length)return t.toLowerCase().startsWith(e.toLowerCase());var n=Jt.Z.match(e,t,{matchRenderer:function(e){return(0,B.tZ)("b",{children:e})}}),r=null!==n&&void 0!==n&&n.elements.length?null===n||void 0===n?void 0:n.elements:null;return null!==r&&void 0!==r&&r.length?function(e){var n=e.isActive,i=(0,B.tZ)(hl,{path:t,isActive:n});return(0,B.tZ)(fl.W,{isActive:n,icon:i,children:ee.Children.map(r,(function(e,t){return(0,B.tZ)(ee.Fragment,{children:e},t)}))})}:void 0}},data:{label:t,description:"",icon:(0,B.tZ)(hl,{path:t}),type:"action",run:n}}}function vl(e){var t=e.fs,n=e.onSelect,r=e.session;return{data:{type:"basic",label:"Files",icon:(0,B.tZ)(et.Z,{}),description:"Find a file",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"P"}},config:{callOnLeave:!0},commands:function(){var e=(0,X.Z)(U().mark((function e(i){var a,o,s,l,c,u;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},i.callStage!==ml.x.Enter||0===i.relativeSearchDepth){e.next=3;break}return e.abrupt("return",a);case 3:if(o=i.searchPath?i.searchPath.join(" ").toLowerCase():void 0,0===i.relativeSearchDepth||o&&!(o.length<2)){e.next=6;break}return e.abrupt("return",a);case 6:if(i.callStage!==ml.x.Leave||0!==i.relativeSearchDepth&&!i.getCurrentOptions().some((function(e){return e.token.value===o}))){e.next=8;break}return e.abrupt("return",a);case 8:return e.next=10,t.listFiles();case 10:if(!(s=e.sent).error){e.next=13;break}return e.abrupt("return",a);case 13:if(l=s.files){e.next=16;break}throw new Error("Expected files");case 16:return c=o?Jt.Z.filter(o,l).map((function(e){return e.string})):l,u=r.getRecentFiles(),c.sort((function(e,t){var n=u.indexOf(e),r=u.indexOf(t);return-1!==n&&-1!==r?n-r:-1!==n?-1:-1!==r?1:0})),c.forEach((function(e){a[e]=gl({path:e,run:function(){return n(e)}})})),e.abrupt("return",a);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}function bl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yl(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xl=100;function wl(){return(wl=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r=t.container,i=window.performance.now(),e.next=4,r.exec("ag","--noaffinity","--context=0","--workers=1","--width=".concat(150),"--literal","--ackmate","--pager","head -".concat(300),"--",n);case 4:if(a=e.sent,o=a.output,s=a.error,(0,mt.track)(mt.events.COMMAND_BAR_SEARCH,{duration:window.performance.now()-i,failed:Boolean(s)&&"exit status 1"!==s}),!s){e.next=11;break}return"exit status 1"!==s&&pt.Tb(new Error("Search command failed with error: ".concat(s))),e.abrupt("return",{error:s});case 11:if(o){e.next=13;break}return e.abrupt("return",{});case 13:l=o.split("\n"),c={},u="",d=0,p=bl(l),e.prev=18,p.s();case 20:if((f=p.n()).done){e.next=41;break}if(m=f.value){e.next=24;break}return e.abrupt("continue",39);case 24:if(!m.startsWith(":")){e.next=28;break}return u=m.slice(1),c[u]=[],e.abrupt("continue",39);case 28:if(!(d>=xl)){e.next=30;break}return e.abrupt("break",41);case 30:h=m.indexOf(";"),g=parseInt(m.slice(0,h),10),v=m.slice(h+1),b=v.indexOf(":"),y=v.slice(0,b).split(","),x=y.map((function(e){var t=e.split(" "),n=(0,L.Z)(t,2),r=n[0],i=n[1];return{column:parseInt(r,10),length:parseInt(i,10)}})),w=v.slice(b+1),d++,c[u].push({content:w,lineNumber:g,matches:x});case 39:e.next=20;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(18),p.e(e.t0);case 46:return e.prev=46,p.f(),e.finish(46);case 49:return e.abrupt("return",{error:null,results:c});case 50:case"end":return e.stop()}}),e,null,[[18,43,46,49]])})))).apply(this,arguments)}function kl(e){var t=e.path,n=e.line,r=e.run;return{config:{match:function(){return function(e){var r=e.isActive,i=(0,B.tZ)(hl,{path:t,isActive:r});return(0,B.BX)(ve.gC,{spacing:"4px",wrap:"nowrap",children:[(0,B.BX)(fl.W,{isActive:r,icon:i,children:[t,":",n.lineNumber]}),(0,B.tZ)(Qt.xK,{source:n.content,matches:n.matches})]})}}},data:{label:t,description:"".concat(t,":").concat(n.lineNumber),icon:(0,B.tZ)(hl,{path:t}),type:"action",run:r}}}function Zl(e){var t,n=e.container,r=e.onSelect,i=li()((function(e,t,n){(function(e){return wl.apply(this,arguments)})(e).then(t).catch(n)}),200);return{data:{type:"basic",label:"Search",icon:(0,B.tZ)(Sn.Z,{}),description:"Search through your files",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"}},commands:function(){var e=(0,X.Z)(U().mark((function e(a){var o,s,l,c,u,d,p,f,m;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={},!(0!==a.relativeSearchDepth&&a.searchValue.length<4)){e.next=3;break}return e.abrupt("return",s);case 3:if(l=a.searchPath?a.searchPath.join(" "):null){e.next=6;break}return e.abrupt("return",s);case 6:if(1!==(null===(o=a.searchPath)||void 0===o?void 0:o.length)||"files"!==a.searchPath[0]&&"search"!==a.searchPath[0]){e.next=8;break}return e.abrupt("return",s);case 8:return c=Math.random(),t=c,e.next=12,new Promise((function(e,t){i({query:l,container:n},e,t)}));case 12:if(u=e.sent,d=u.results,c===t){e.next=16;break}return e.abrupt("return",s);case 16:if(d){e.next=18;break}return e.abrupt("return",s);case 18:for(p=function(){var e=(0,L.Z)(m[f],2),t=e[0];e[1].forEach((function(e){s["".concat(t,":").concat(e.lineNumber)]=kl({path:t,line:e,run:function(){r(t,e.lineNumber,e.matches[0].column)}})}))},f=0,m=Object.entries(d);f<m.length;f++)p();return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}var jl,Ol=n(89848),El=n(2240);function _l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_l(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sl(e){var t,n=e.wid,r=(0,Pe.Z)(),i=r.container,a=r.session,o=r.presence,s=r.replbox,l=r.fs,c=(0,Ln.Z)({replbox:s}),u=ee.useRef(c);ee.useEffect((function(){u.current=c}),[c]);var d=(0,at.I0)(),p=function(){var e=(0,Pe.Z)().session,t=ee.useState(e.getIsCommandBarOpen()),n=(0,L.Z)(t,2),r=n[0],i=n[1];return ee.useEffect((function(){return i(e.getIsCommandBarOpen()),e.onCommandBarToggled(i)}),[e]),r}(),f=(0,Ta.Z)("flag-cluicurl"),m=(0,ye.Z)(),h=(0,at.v9)((function(e){return e.workspace[n].plugins})),g=Object.values(h).some((function(e){return"webview"===e.type})),v=(0,xe.g2A)({variables:{replId:m}}).data,b=ee.useState(null),y=(0,L.Z)(b,2),x=y[0],w=y[1],k=ee.useState(null),Z=(0,L.Z)(k,2),j=Z[0],O=Z[1],E=ee.useState(null),_=(0,L.Z)(E,2),C=_[0],S=_[1],P=ee.useState(!1),N=(0,L.Z)(P,2),T=N[0],I=N[1],R=ee.useCallback((function(){o.getFollowedUser()&&o.unfollowUser()}),[o]);ee.useEffect((function(){O(!!p||null)}),[p]),ee.useEffect((function(){null===j?a.setIsCommandBarOpen(!1):R()}),[j,a,R]);var D="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null,A="Team"===(null===D||void 0===D||null===(t=D.owner)||void 0===t?void 0:t.__typename),M=ee.useMemo((function(){var e,t;if(D){var r=Boolean("Team"===(null===(e=D.owner)||void 0===e?void 0:e.__typename)&&(null===(t=D.owner.capabilities)||void 0===t?void 0:t.isEducationPlan)),o=f?{curl:{data:{type:"action",label:"curl",icon:(0,B.tZ)(ol.Z,{}),description:"Make http requests",run:function(){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"curl",source:"clui"}),d({type:"ADD_CLUI_CURL_TAB",wid:n}),O(null)}}}}:{};return Cl(Cl(Cl({files:vl({fs:l,session:a,onSelect:function(e){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"find",source:"clui"}),d({wid:n,type:"OPEN_FILE",path:e}),s()}}),search:Zl({container:i,onSelect:function(e,t,r){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"search",source:"clui"}),d({wid:n,type:"OPEN_DEEP_LINK",path:e,line:t,col:r}),s()}})},r?{}:{multiplayer:{data:{type:"action",label:"Multiplayer",icon:(0,B.tZ)(nl.Z,{}),description:"Open multiplayer mode",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"},run:function(e){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"multiplayer",source:e?"shortcut":"clui"}),(0,mt.track)(mt.events.INVITE_MODAL_OPENED,{wid:n,language:D.lang.id,replId:D.id,source:"clui"}),I(!0),s()}}}}),{},{run:{data:{type:"action",label:"Run",icon:(0,B.tZ)(rl.Z,{}),description:"Run repl",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"},run:function(e){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"run",source:e?"shortcut":"clui"}),"replbox"===D.lang.engine&&u.current.runState===An.A.IDLE?(u.current.run(),(0,mt.track)(mt.events.PROJECT_RAN,{wid:n,language:null===D||void 0===D?void 0:D.lang.id,replId:D.id,replTitle:D.title})):d({wid:n,type:"RUN_REPL"}),s()}}}},g?{refresh:{data:{type:"action",label:"Refresh",icon:(0,B.tZ)(il.Z,{}),description:"Refresh webview",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},run:function(e){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"refresh",source:e?"shortcut":"clui"}),d({wid:n,type:"REFRESH_WEBVIEW"}),s()}}}}:{}),{},{shell:{data:{type:"action",label:"Shell",icon:(0,B.tZ)(al.Z,{}),description:"Open shell",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"},run:function(e){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"shell",source:e?"shortcut":"clui"}),d({wid:n,type:"OPEN_SHELL"}),s()}}},settings:{data:{type:"action",label:"Settings",icon:(0,B.tZ)(Je.Z,{}),description:"Manage editor settings",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},run:function(e){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"settings",source:e?"shortcut":"clui"}),d({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"preferences",wid:n}),s()}}},"version-control":{data:{label:"Version control",type:"action",icon:(0,B.tZ)(sl.Z,{}),description:"Open version control sidebar",keyboardShortcut:{cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"},run:function(e){(0,mt.track)(mt.events.CLUI_COMMAND_EXECUTED,{command:"version control",source:e?"shortcut":"clui"}),d({type:"OPEN_SIDEPANE_BY_TYPE",paneType:"git",wid:n}),s()}}},new:(0,Ol.Z)({onLanguageOrReplSelected:function(e){s(),S(e)}})},o)}function s(){O(null)}}),[D,l,f,i,a,d,n,g]),U={data:{type:"basic",description:"Type a command..."},commands:M};return(0,El.Z)({onActive:function(){O(!0)},onDismiss:function(){O(null)}}),ee.useEffect((function(){var e=function(e){if(M){(0,ul.b)(e);for(var t=0,n=Object.entries(M);t<n.length;t++){var r,i=(0,L.Z)(n[t],2),a=i[0],o=i[1],s=o.data&&"keyboardShortcut"in o.data?o.data.keyboardShortcut:null;if(s&&(s.cmdOrCtrlKey===Boolean((0,ll.jh)(e))&&s.altKey===Boolean(e.altKey)&&s.shiftKey===Boolean(e.shiftKey)&&(null===(r=s.key)||void 0===r?void 0:r.toLowerCase())===e.key.toLowerCase())){var l;if(e.preventDefault(),R(),"action"===(null===(l=o.data)||void 0===l?void 0:l.type))return void o.data.run(!0);O([{value:a,command:o}])}}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[M,w,R,O]),ee.useEffect((function(){x&&(0,mt.track)(mt.events.COMMAND_BAR_OPENED,{initialValue:x})}),[x]),(0,B.BX)(B.HY,{children:[(0,B.tZ)(Pt.ZP,{isOpen:Boolean(C),onRequestClose:function(){return S(null)},children:(0,B.tZ)(cl.Z,{initialSelectedLanguageOrReplId:C||void 0,onCancel:function(){return S(null)}})}),(0,B.tZ)(Pt.ZP,{isOpen:null!==j,onRequestClose:function(){return O(null)},hideCloseButton:!0,children:(0,B.tZ)(dl.ZP,{keyboardShortcut:El.q,root:U,initialCommandPath:Array.isArray(j)?j:void 0})}),D?(0,B.tZ)(Pt.ZP,{isOpen:T,onRequestClose:function(){return I(!1)},children:A?(0,B.tZ)(un,{replId:D.id}):(0,B.tZ)(Rn,{replId:D.id})}):null]})}function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Il(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,a=e})),f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(jl||(jl={}));var Rl=function(e){var t=e.fragment,n=e.onClick;return(0,B.tZ)(ge.Z,{size:"small",onClick:n,children:t.content})},Dl=function(e){var t=e.fragment,n=e.onClick;return(0,B.tZ)(ge.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},Al=function(e){var t=e.fragment,n=e.onClick;return(0,B.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},Ll=function(e){var t=e.fragment,n=e.onClick;return(0,B.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},Bl=function(e){var t=e.fragment,n=e.onClick;return(0,B.tZ)("a",{href:t.url,onClick:n,children:t.content})},Ml=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,B.tZ)("code",{onClick:n,style:r,children:t.content})},Ul=function(e){var t=e.fragment,n=e.onClick;return(0,B.tZ)("b",{onClick:n,children:t.content})},Xl=function(e){var t=e.fragment,n=e.onClick;return(0,B.tZ)("i",{onClick:n,children:t.content})},Fl=function(e){var t=e.fragment,n=e.onClick;return(0,B.BX)("span",{onClick:n,className:"jsx-2019770874",children:[t.content,(0,B.tZ)(q.default,{id:"2019770874",children:["span.jsx-2019770874{-webkit-text-decoration:line-through;text-decoration:line-through;}"]})]})},zl=function(e){var t=e.fragment,n=e.onClick;return(0,B.BX)("blockquote",{onClick:n,className:"jsx-3586083531",children:[t.content,(0,B.tZ)(q.default,{id:"3586083531",children:["blockquote.jsx-3586083531{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest);}"]})]})},Vl=/(@[0-9a-zA-Z_]+)/,Hl=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,Gl=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,Wl=/(`.+?`)/,Kl=/(\*\*.+?\*\*)/,ql=/(_.+?_)/,Yl=/(\*.+?\*)/,Ql=/(~~.+?~~)/,Jl=/(^>.+?$\n?)/m,$l=/\/@([0-9a-zA-Z_]+)\/(.+)/;function ec(e){var t=e.url;return{type:jl.LINK,url:t,content:t}}function tc(e){var t=e.hash;return{type:jl.DEEP_LINK,url:t,content:t}}function nc(e,t){if(Gl.test(e)){var n={};try{n=new window.URL(e)}catch(i){return{content:e,type:jl.TEXT}}return["repl.it","replit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?tc({hash:n.hash}):$l.test(n.pathname)?function(e){var t=e.url,n=$l.exec(t.pathname);if(!n)throw new Error("Not a repl URL");return{type:jl.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):ec({url:e}):ec({url:e})}if(Hl.test(e))return tc({hash:e});if(Jl.test(e))return function(e){var t=e.text;return{type:jl.QUOTE,content:t}}({text:e.slice(1).trim()});if(Wl.test(e))return function(e){var t=e.code;return{type:jl.CODE,content:t}}({code:e.slice(1,-1)});if(Kl.test(e))return function(e){var t=e.text;return{type:jl.BOLD,content:t}}({text:e.slice(2,-2)});if(ql.test(e)||Yl.test(e))return function(e){var t=e.text;return{type:jl.ITALICS,content:t}}({text:e.slice(1,-1)});if(Ql.test(e))return function(e){var t=e.text;return{type:jl.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(Vl.test(e)){var r=e.slice(1);if(!t.users||t.users.includes(r))return function(e){var t=e.username;return{type:jl.MENTION,username:t,content:"@".concat(t)}}({username:r})}return{content:e,type:jl.TEXT}}var rc=new RegExp([Wl.source,Kl.source,ql.source,Yl.source,Ql.source,Gl.source,Vl.source,Hl.source,Jl.source].join("|"),"m");function ic(e,t){var n,r=[],i=[],a=Tl(e.split(rc));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){var s=nc(o,t);if(s){if(s.type===jl.MENTION){if(!s.username)continue;r.push(s.username)}i.push(s)}}}}catch(l){a.e(l)}finally{a.f()}return{tokens:i,mentions:r}}function ac(e){var t=e.message,n=e.onMentionClick,r=void 0===n?function(){}:n,i=e.codeStyles,a=void 0===i?{}:i;return(0,B.tZ)(B.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===jl.MENTION?(0,B.tZ)(Dl,Nl(Nl({},n),{},{onClick:function(){return r(e)}})):e.type===jl.LINK?(0,B.tZ)(Al,Nl({},n)):e.type===jl.REPL_LINK?(0,B.tZ)(Ll,Nl({},n)):e.type===jl.DEEP_LINK?(0,B.tZ)(Bl,Nl({},n)):e.type===jl.CODE?(0,B.tZ)(Ml,Nl(Nl({},n),{},{style:a})):e.type===jl.BOLD?(0,B.tZ)(Ul,Nl({},n)):e.type===jl.ITALICS?(0,B.tZ)(Xl,Nl({},n)):e.type===jl.STRIKETHROUGH?(0,B.tZ)(Fl,Nl({},n)):e.type===jl.QUOTE?(0,B.tZ)(zl,Nl({},n)):(0,B.tZ)(Rl,Nl({},n))}))})}var oc=n(23279),sc=n.n(oc),lc=n(12375);function cc(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return uc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uc(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dc=function(e){var t,n={},r=cc(e.messages);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.user&&(n[i.user.id]=i.user)}}catch(a){r.e(a)}finally{r.f()}return Object.values(n)};var pc=function(e){var t,n,r=e.annote,i=e.onClick,a=((null===(t=(0,xe.Fqz)().data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.editorPreferences.fontSize)||14)-2,o=r.messages.some((function(e){return!e.seen})),s=dc(r).filter((function(e){return!r.user||e.id!==r.user.id})),l="".concat(a,"px");return(0,B.BX)("div",{onClick:i,className:q.default.dynamic([["2154061002",[a]]])+" annotation-preview",children:[(0,B.tZ)("div",{className:q.default.dynamic([["2154061002",[a]]])+" user-stack",children:[r.user].concat((0,Vt.Z)(s)).slice(0,3).map((function(e){return e&&(0,B.tZ)(le.Z,{url:e.image,size:"xs",style:{minWidth:l,minHeight:l,height:l,width:l}},e.id)}))}),r.messages.length>0&&(0,B.BX)("div",{className:q.default.dynamic([["2154061002",[a]]])+" comment-info",children:[(0,B.tZ)("div",{className:q.default.dynamic([["2154061002",[a]]])+" comment-count",children:r.messages.length}),(0,B.tZ)(lc.Z,{size:a,unreadDot:o})]}),(0,B.tZ)(q.default,{id:"2154061002",dynamic:[a],children:[".annotation-preview.__jsx-style-dynamic-selector{position:absolute;padding:4px;border-radius:var(--border-radius-4);border-top-right-radius:0;border-bottom-right-radius:0;background-color:var(--background-default);color:var(--foreground-default);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border:0.5px solid var(--background-higher);-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);box-shadow:var(--shadow-1);-webkit-transition:width 0.2s,background-color 0.2s,-webkit-transform 0.1s;-webkit-transition:width 0.2s,background-color 0.2s,transform 0.1s;transition:width 0.2s,background-color 0.2s,transform 0.1s;z-index:1;}",".annotation-preview.__jsx-style-dynamic-selector:hover{-webkit-transform:translateX(-100%) translateX(-5%) scale(1.1);-ms-transform:translateX(-100%) translateX(-5%) scale(1.1);transform:translateX(-100%) translateX(-5%) scale(1.1);}",".user-stack.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-column-gap:var(--space-4);}",".comment-info.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:var(--space-4);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".comment-count.__jsx-style-dynamic-selector{font-weight:var(--font-weight-medium);font-size:0.8em;font-size:".concat(a,"px;}")]})]})},fc=n(93435),mc=n(6013);function hc(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gc(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vc=["TextMessageContentType","PreviewMessageContentType"];function bc(e){var t,n=[],r=null,i=hc(e);try{for(i.s();!(t=i.n()).done;){var a,o,s,l,c,u,d=t.value;if(!r||(null===d||void 0===d||null===(a=d.user)||void 0===a?void 0:a.id)!==(null===(o=r)||void 0===o||null===(s=o.user)||void 0===s?void 0:s.id)||(null===d||void 0===d||null===(l=d.anchor)||void 0===l?void 0:l.id)!==(null===(c=r)||void 0===c?void 0:c.anchorId)||!vc.includes(r.messageType)||!vc.includes(d.content.__typename)||new Date(d.timeCreated).getTime()-new Date(r.timeCreated).getTime()>6e5)r&&n.push(r),r={user:d.user,timeCreated:d.timeCreated,anchorId:null===d||void 0===d||null===(u=d.anchor)||void 0===u?void 0:u.id,messages:[d],messageType:d.content.__typename};else r.messages.push(d)}}catch(p){i.e(p)}finally{i.f()}return r&&n.push(r),n}function yc(e){var t=(0,ye.Z)(),n=(0,xe.nAY)(),r=(0,L.Z)(n,1)[0];ee.useEffect((function(){if(e){var n=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==n.length&&r({variables:{replId:t,threadId:e.id,messageIds:n},optimisticResponse:{markMessagesAsSeen:{messages:n.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,r])}var xc=ee.createContext({editorHandle:null,fileModels:{},activeFile:null,currentModelLineCount:0,users:[],annotations:[],generalThread:void 0,explainAnchor:null,visibleAnnotation:null,setVisibleAnnotation:function(){},setExplainAnchor:function(){},handleFinalizeMessage:function(){},handleChangeMessage:function(){},handleResolveAnnotation:function(){},createAnnotationAnchorPlaceholder:function(){},markAllMessagesInReplAsSeenByUser:function(){}});function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zc(e){var t=(0,Ta.Z)("flag-typing-indicator"),n=ee.useContext(xc).users,r=ee.useState({}),i=(0,L.Z)(r,2),a=i[0],o=i[1],s=ee.useRef(null),l=ee.useCallback((function(){var e={};for(var t in a)Date.now()-a[t].time<1e3&&(e[t]=a[t]);o(e)}),[a,o]);return(0,xe.qxQ)({variables:{threadId:e},onSubscriptionData:function(t){var r,i,a=t.subscriptionData;if(null!==(r=a.data)&&void 0!==r&&r.threadPreview){var c=null===(i=a.data)||void 0===i?void 0:i.threadPreview;if("number"===typeof c.userId){var u=new Date,d=u.toJSON();o((function(t){return kc(kc({},t),{},(0,K.Z)({},c.userId,{time:u.getTime(),user:n.find((function(e){return e.id===c.userId})),id:c.messageId,currentUserIsAuthor:!1,timeCreated:d,timeUpdated:d,anchor:{id:e},content:{__typename:"PreviewMessageContentType",preview:c.message}}))})),s.current&&clearTimeout(s.current),s.current=setTimeout(l,2e3)}}},skip:!t}),ee.useMemo((function(){return Object.values(a)}),[a])}var jc=n(14289),Oc=n(27547);function Ec(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _c(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cc(){var e,t=(0,ye.Z)(),n=(0,xe.OEU)({variables:{replId:t}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var r=[];null!==(e=n.repl.owner)&&void 0!==e&&e.username&&"User"===n.repl.owner.__typename&&r.push(n.repl.owner);var i,a=Ec(n.repl.permissions);try{for(a.s();!(i=a.n()).done;){var o,s=i.value;null!==(o=s.user)&&void 0!==o&&o.username&&r.push(s.user)}}catch(l){a.e(l)}finally{a.f()}return r}function Sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sc(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nc=ee.forwardRef((function(e,t){var n,r,i=e.annote,a=e.placeholder,o=e.onChangeMessage,s=e.onFinalizeMessage,l=null===(n=(0,xe.Fqz)().data)||void 0===n||null===(r=n.currentUser)||void 0===r?void 0:r.id,c=ee.useState(""),u=(0,L.Z)(c,2),d=u[0],p=u[1],f=ee.useState(!1),m=(0,L.Z)(f,2),h=m[0],g=m[1],v=ee.useRef(null),b=ee.useState(null),y=(0,L.Z)(b,2),x=y[0],w=y[1],k=Cc(),Z=(0,Oc.Z)(),j=Z.ref,O=Z.update,E=(0,jc.Z)({"@":function(){var e=(0,X.Z)(U().mark((function e(t){var n,r;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.filter((function(e){return e.id!==l})),t&&(r=t.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(r)}))),e.abrupt("return",n.slice(0,5).map((function(e){return{icon:(0,B.tZ)(le.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),_=(0,L.Z)(E,2),C=_[0].suggestions,S=_[1],P=(0,$t.Kb)({items:(null===C||void 0===C?void 0:C.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(null===C||void 0===C?void 0:C.results.length),onSelectedItemChange:function(e){var t=e.selectedItem;if(C&&t){var n=C.applySuggestion({targetValue:d,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;p(r),setTimeout((function(){v.current&&(v.current.setSelectionRange(i,i),v.current.focus(),O())}))}}}),N=P.isOpen,T=P.getInputProps,I=P.getMenuProps,R=P.getItemProps,D=P.highlightedIndex;ee.useEffect((function(){var e="threads/drafts/".concat(i.id),t=localStorage.getItem(e);t&&p(t);var n=v.current;return function(){if(n){var t=n.value;0!==t.length?localStorage.setItem(e,t):localStorage.removeItem(e)}}}),[]),ee.useEffect((function(){v.current&&v.current.focus()}),[v]);var A=dc(i).filter((function(e){return e.id!==l}));function M(){""!==d.trim()&&(s({messageId:x||de()(),message:d.trim()}),w(null),p(""),setTimeout(O),(0,mt.track)(mt.events.CONVERSATION_MESSAGE_SENT,{threadMessagesCount:i.messages.length,otherThreadParticipantsCount:A.length,anchorId:i.id}))}var F="Add a comment";return 1===A.length?F="Reply to @".concat(A[0].username):A.length>1&&(F="Reply"),a&&(F=a),(0,B.BX)("div",{className:"jsx-940626112",children:[(0,B.BX)("div",{className:"jsx-940626112 input-group",children:[(0,B.tZ)("textarea",Pc(Pc({},T({autoFocus:!0,placeholder:F,value:d,onCompositionStart:function(){return g(!0)},onCompositionEnd:function(){return g(!1)},onChange:function(e){var t=e.target.value,n=x||de()();x||w(n),p(t),o({messageId:n,message:t})},onKeyDown:function(e){N||(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||h||(e.preventDefault(),M()))},rows:1,ref:function(e){v.current=e,t&&"object"===typeof t&&(t.current=e),S(e),j(e)}})),{},{className:"jsx-940626112 "+(St()("inputbox",{hasContent:d.length>0})||"")})),(0,B.tZ)("button",{onClick:M,className:"jsx-940626112 "+(St()("send-button",{isValid:d.length>0})||""),children:(0,B.tZ)(rl.Z,{filled:!0,size:"small"})})]}),(0,B.tZ)("div",Pc(Pc({},I({})),{},{className:"jsx-940626112",children:N&&(0,B.tZ)("div",{className:"jsx-940626112 mention-suggestions-container",children:C.results.map((function(e,t){return(0,tr.az)("div",Pc(Pc({},R({item:e,index:t})),{},{key:e.value,className:"jsx-940626112 "+(St()("mention-suggestion",{selected:D===t})||"")}),e.icon,(0,B.tZ)("div",{className:"jsx-940626112",children:e.value}))}))})})),(0,B.tZ)(q.default,{id:"940626112",children:[".input-group.jsx-940626112{display:grid;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}",".inputbox.jsx-940626112{background:var(--background-higher);color:var(--foreground-default);border:none;border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:'IBM Plex Sans',sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:calc(var(--font-size-default) * 18);}",".inputbox.jsx-940626112::-webkit-input-placeholder{white-space:pre;}",".inputbox.jsx-940626112::-moz-placeholder{white-space:pre;}",".inputbox.jsx-940626112:-ms-input-placeholder{white-space:pre;}",".inputbox.jsx-940626112::placeholder{white-space:pre;}",".inputbox.hasContent.jsx-940626112{border-radius:6px;}",".send-button.jsx-940626112{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:24px;height:24px;background:var(--background-highest);color:var(--foreground-dimmest);border:none;border-radius:50%;}",".send-button.jsx-940626112:focus{outline:none;}",".send-button.isValid.jsx-940626112{background:var(--accent-primary-default);color:var(--white);cursor:pointer;}",".send-button.isValid.jsx-940626112:hover{background:var(--accent-primary-default);}",".send-button.isValid.jsx-940626112:active{background:var(--accent-primary-default);}",".mention-suggestions-container.jsx-940626112{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden;}",".mention-suggestion.jsx-940626112{display:grid;grid-template-columns:min-content max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8) 0;cursor:pointer;color:var(--foreground-default);}",".mention-suggestion.selected.jsx-940626112{background-color:var(--background-root);}",".mention-suggestion.selected.jsx-940626112>*.jsx-940626112{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}"]})]})})),Tc=n(39218),Ic=n(57221);function Rc(e){var t=e.message,n=e.messageStyle,r=ee.useMemo((function(){return"TextMessageContentType"===t.content.__typename?ic(t.content.text,{}):"PreviewMessageContentType"===t.content.__typename&&"string"===typeof t.content.preview?ic(t.content.preview,{}):null}),[t.content]),i="PreviewMessageContentType"===t.content.__typename&&"string"!==typeof t.content.preview;return t.user&&(r||i)?(0,B.BX)("div",{className:"jsx-3163292258 "+(n||""),children:[(0,B.BX)("div",{className:"jsx-3163292258 message",children:[r&&(0,B.tZ)(ac,{message:r,codeStyles:{color:"var(--accent-negative-default)",background:"var(--background-highest)"}}),i&&(0,B.BX)("span",{className:"jsx-3163292258 typing-indicator",children:[(0,B.tZ)("span",{className:"jsx-3163292258 dot"}),(0,B.tZ)("span",{className:"jsx-3163292258 dot"}),(0,B.tZ)("span",{className:"jsx-3163292258 dot"})]})]}),(0,B.tZ)(q.default,{id:"3163292258",children:[".message.jsx-3163292258{background:var(--background-higher);padding:var(--space-4) var(--space-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap;}",".userhighlight.jsx-3163292258 .message.jsx-3163292258{background:transparent;}",".typing-indicator.jsx-3163292258{min-height:1em;display:grid;grid-auto-flow:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);}",".dot.jsx-3163292258{width:6px;height:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse-jsx-3163292258 0.6s infinite;animation:pulse-jsx-3163292258 0.6s infinite;}",".dot.jsx-3163292258:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s;}",".dot.jsx-3163292258:nth-child(2){-webkit-animation-delay:0.2s;animation-delay:0.2s;}",".dot.jsx-3163292258:nth-child(3){-webkit-animation-delay:0.4s;animation-delay:0.4s;}","@-webkit-keyframes pulse-jsx-3163292258{0%{background-color:var(--foreground-dimmest);}50%{background-color:var(--foreground-dimmest);}100%{background-color:var(--foreground-dimmest);}}","@keyframes pulse-jsx-3163292258{0%{background-color:var(--foreground-dimmest);}50%{background-color:var(--foreground-dimmest);}100%{background-color:var(--foreground-dimmest);}}"]})]}):null}var Dc=n(34902);function Ac(e){var t=e.message,n=ee.useMemo((function(){var e=t.timeCreated;return e?(0,Dc.Z)(new Date(e),"do MMM, KK:mm a"):""}),[t]),r=t.user;return(0,B.tZ)("div",{className:"resolved-message",children:(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[r&&(0,B.tZ)(le.Z,{url:r.image,size:"m"}),(0,B.tZ)($e.Z,{color:"var(--foreground-default)",size:"xlarge"}),(0,B.BX)(ge.Z,{size:"xsmall",children:["Resolved ",n]})]})})}function Lc(e){var t=e.message,n=ee.useMemo((function(){var e=t.timeCreated;return e?(0,Dc.Z)(new Date(e),"do MMM, KK:mm a"):""}),[t]),r=t.user;return(0,B.tZ)("div",{className:"resolved-message",children:(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[r&&(0,B.tZ)(le.Z,{url:r.image,size:"m"}),(0,B.tZ)($e.Z,{size:"xlarge",color:"var(--foreground-dimmest)"}),(0,B.BX)(ge.Z,{size:"xsmall",children:["Unresolved ",n]})]})})}var Bc=function(e){var t=new Date(e),n=new Date;return(0,Ic.Z)(n,t)<60?"now":(0,Tc.F)(t,!0)};function Mc(e){var t=e.messageGroup,n=t.messages,r=t.user,i=t.timeCreated;return r?(0,B.BX)("div",{className:"jsx-651827874 message-group",children:[(0,B.BX)("div",{className:"jsx-651827874 message-info",children:[(0,B.tZ)("div",{className:"jsx-651827874 avatar",children:(0,B.tZ)(le.Z,{url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,B.tZ)("div",{className:"jsx-651827874 username",children:r.username}),(0,B.tZ)("div",{className:"jsx-651827874 time",children:Bc(i)})]}),(0,B.tZ)("div",{className:"jsx-651827874 messages",children:n.map((function(e){return(0,B.tZ)(Rc,{message:e},e.id)}))}),(0,B.tZ)(q.default,{id:"651827874",children:[".message-group.jsx-651827874{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr);}",".message-info.jsx-651827874{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small);}",".messages.jsx-651827874{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr);}",".avatar.jsx-651827874{margin-right:5px;}",".username.jsx-651827874{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px;}",".time.jsx-651827874{color:var(--foreground-dimmest);}"]})]}):null}function Uc(e){var t=e.messageGroup;if("TextMessageContentType"===t.messageType||"PreviewMessageContentType"===t.messageType)return(0,B.tZ)(Mc,{messageGroup:t});if("StatusMessageContentType"===t.messageType){var n=t.messages[0];if("StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status)return(0,B.tZ)(Ac,{message:n});if("StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status)return(0,B.tZ)(Lc,{message:n})}return null}var Xc=function(e){var t=e.annote,n=e.onFinalizeMessage,r=void 0===n?function(){}:n,i=e.onChangeMessage,a=void 0===i?function(){}:i,o=e.onResolve,s=void 0===o?function(){}:o,l=e.onRequestClose,c=void 0===l?function(){}:l,u=e.style,d=e.width,p=t.messages,f=ee.useRef(null),m=ee.useRef(null),h=Zc(t.id),g=(0,Lr.L)({accept:[Dr.FileNode,Dr.FileHeaderTab],collect:function(e){var t,n=null===(t=e.getItem())||void 0===t?void 0:t.isFolder;return{isOver:e.isOver({shallow:!0})&&!n}},canDrop:function(e){return!e.isFolder},drop:function(e){e&&!e.isFolder&&r({messageId:de()(),message:"#".concat(e.path)})}}),v=(0,L.Z)(g,2),b=v[0],y=v[1],x=(0,fc.Z)((function(e){var t,n=e.target;n.closest(".node-row")||n.closest(".file-header-tab")||""!==(null===(t=m.current)||void 0===t?void 0:t.value)||c()}),[]);yc(t),ee.useEffect((function(){function e(e){var t;"Escape"===e.key&&""===(null===(t=m.current)||void 0===t?void 0:t.value)&&c()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[c]),ee.useEffect((function(){f.current&&(f.current.scrollTop=f.current.scrollHeight)}),[p]);var w=ee.useMemo((function(){var e=(0,Vt.Z)(p).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return e.push.apply(e,(0,Vt.Z)(h.filter((function(t){return!e.slice(-5).find((function(e){return e.id===t.id}))})))),bc(e)}),[p,h]);return(0,B.BX)("div",{style:u,ref:function(e){y(e),x.current=e},className:"jsx-".concat(mc.Q.__hash)+" "+q.default.dynamic([["2932506883",[d]]])+" "+(St()("annotation-group",{"is-over":b.isOver})||""),children:[w.length>0&&(0,B.tZ)("div",{ref:f,className:"jsx-".concat(mc.Q.__hash)+" "+q.default.dynamic([["2932506883",[d]]])+" message-group-container",children:w.map((function(e){return(0,B.tZ)(Uc,{messageGroup:e},e.messages[0].id)}))}),(0,B.tZ)(Nc,{annote:t,onChangeMessage:a,onFinalizeMessage:r,ref:m}),(0,B.BX)("div",{className:"jsx-".concat(mc.Q.__hash)+" "+q.default.dynamic([["2932506883",[d]]])+" floating-group",children:[(0,B.tZ)("div",{className:"jsx-".concat(mc.Q.__hash)+" "+q.default.dynamic([["2932506883",[d]]])+" delete show-on-hover",children:(0,B.tZ)("button",{"aria-label":"Resolve","data-microtip-position":"top",role:"tooltip",onClick:function(e){s(e)},className:"jsx-".concat(mc.Q.__hash)+" "+q.default.dynamic([["2932506883",[d]]])+" floating-button resolve",children:(0,B.tZ)($e.Z,{})})}),(0,B.tZ)("div",{className:"jsx-".concat(mc.Q.__hash)+" "+q.default.dynamic([["2932506883",[d]]])+" close",children:(0,B.tZ)("button",{"aria-label":"Close","data-microtip-position":"top",role:"tooltip",onClick:c,className:"jsx-".concat(mc.Q.__hash)+" "+q.default.dynamic([["2932506883",[d]]])+" floating-button close",children:(0,B.tZ)(Kt.Z,{})})})]}),(0,B.tZ)(q.default,{id:mc.Q.__hash,children:mc.Q}),(0,B.tZ)(q.default,{id:"2932506883",dynamic:[d],children:[".annotation-group.__jsx-style-dynamic-selector{position:absolute;z-index:10;position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;background-color:var(--background-default);padding:var(--space-8);border-radius:var(--border-radius-4);width:".concat(d,"px;box-shadow:var(--shadow-2);border:0.5px solid var(--background-higher);}"),".annotation-group.is-over.__jsx-style-dynamic-selector{background-color:var(--background-root);}",".annotation-group.__jsx-style-dynamic-selector *.__jsx-style-dynamic-selector{-webkit-transition:all 0.2s;transition:all 0.2s;}",".message-group-container.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);max-height:275px;overflow-y:auto;padding:var(--space-8);padding-bottom:0;grid-template-columns:minmax(0,1fr);}",".floating-group.__jsx-style-dynamic-selector{position:absolute;display:grid;grid-auto-flow:column;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;grid-column-gap:8px;top:-32px;left:0;right:0;}",".floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:0;}",".annotation-group.__jsx-style-dynamic-selector:hover>.floating-group.__jsx-style-dynamic-selector .show-on-hover.__jsx-style-dynamic-selector{opacity:1;}",".feedback.__jsx-style-dynamic-selector{position:absolute;-webkit-text-decoration:none;text-decoration:none;}",".floating-button.__jsx-style-dynamic-selector{width:24px;height:24px;border-radius:50%;background:var(--background-higher);color:var(--foreground-dimmer);border:1px solid var(--background-highest);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow-2);}",".floating-button.__jsx-style-dynamic-selector:focus{outline:none;}",".floating-button.__jsx-style-dynamic-selector:hover{color:var(--foreground-default);background:var(--background-higher);}",".floating-button.delete.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-negative-default);border-color:var(--accent-negative-default);}",".floating-button.resolve.__jsx-style-dynamic-selector:hover{color:var(--white);background:var(--accent-positive-default);border-color:var(--accent-positive-default);}",".floating-button.__jsx-style-dynamic-selector:active{background:var(--background-highest);}"]})]})};function Fc(e){var t=e.annote,n=ee.useState(null),r=(0,L.Z)(n,2),i=r[0],a=r[1];ee.useEffect((function(){var e=t.messages[t.messages.length-1];if(e&&!e.currentUserIsAuthor){var n=new Date(e.timeCreated).getTime();if(!(Date.now()-n>5e3)){a(e);var r=setTimeout((function(){a(null)}),3e3);return function(){return clearTimeout(r)}}a(null)}else a(null)}),[t]);var o=ee.useMemo((function(){if("TextMessageContentType"!==(null===i||void 0===i?void 0:i.content.__typename))return null;var e=null===i||void 0===i?void 0:i.content.text;return e?ic(e,{}):null}),[i]);return i&&o?(0,B.BX)("div",{className:"jsx-712750148 annotation-message-popup",children:[i.user&&(0,B.tZ)(le.Z,{url:i.user.image,size:"xs",style:{minWidth:"16px",minHeight:"16px",height:"16px",width:"16px"}},i.user.id),(0,B.tZ)("div",{className:"jsx-712750148 annotation-message-popup-text",children:(0,B.tZ)(ac,{message:o})}),(0,B.tZ)(q.default,{id:"712750148",children:[".annotation-message-popup.jsx-712750148{position:absolute;background-color:var(--background-default);padding:4px;border-radius:var(--border-radius-4);border:0.5px solid var(--background-higher);box-shadow:var(--shadow-1);display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);grid-template-columns:min-content max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-transform:translateX(5px);-ms-transform:translateX(5px);transform:translateX(5px);}",".annotation-message-popup-text.jsx-712750148{font-family:IBM Plex Sans;font-style:normal;font-weight:normal;font-size:0.8em;color:var(--foreground-default);}"]})]}):null}function zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zc(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hc(e,t){var n=t.onReceiveAnnotationUpdate,r=void 0===n?function(){}:n,i=(0,Wt.Z)().showError,a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=(0,xe.xTD)({variables:{replId:e}}),u=function(){var e,t=null===(e=c.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},d=function(t,n){var r=t.readQuery({query:xe.yiQ,variables:{replId:e}}),i=[],a=r.repl.annotationAnchors,o=a.findIndex((function(e){return e.id===n.id}));i=-1===o?[].concat((0,Vt.Z)(a),[n]):[].concat((0,Vt.Z)(a.slice(0,o)),[n],(0,Vt.Z)(a.slice(o+1))),t.writeQuery({query:xe.yiQ,variables:{replId:e},data:Vc(Vc({},r),{},{repl:Vc(Vc({},r.repl),{},{annotationAnchors:i})})})},p=(0,xe.ASh)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),f=(0,L.Z)(p,1)[0],m=(0,xe.gEq)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),h=(0,L.Z)(m,1)[0],g=(0,xe.RpE)({onError:function(e){return i(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return i(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&d(e,r))}}}),v=(0,L.Z)(g,1)[0],b=(0,xe.nAY)(),y=(0,L.Z)(b,1)[0],x=(0,xe.HjV)(),w=(0,L.Z)(x,1)[0];(0,xe.Tt1)({variables:{replId:e},onSubscriptionData:function(e){var t=e.subscriptionData.data,n=e.client,i=null===t||void 0===t?void 0:t.updatedAnnotation;i&&(d(n,i),r(i))}});var k=ee.useState([]),Z=(0,L.Z)(k,2),j=Z[0],O=Z[1];ee.useEffect((function(){var e,t=[];"Repl"===(null===(e=c.data)||void 0===e?void 0:e.repl.__typename)&&t.push.apply(t,(0,Vt.Z)(c.data.repl.annotationAnchors)),s&&t.push(Vc(Vc({},s),{},{isGeneral:Boolean(s.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),O(t)}),[c,s]);var E=ee.useMemo((function(){return j.find((function(e){return e.isGeneral}))}),[j]),_=ee.useMemo((function(){return j.reduce((function(e,t){return t.isResolved?e:t.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[j]),C=function(e){var t=e.annotationAnchor,n=e.annotationMessage,r=e.highlight;f({variables:{annotationAnchor:t,annotationMessage:n,highlight:r},optimisticResponse:{createAnnotationAnchor:Vc(Vc(Vc({},u()),t),{},{isGeneral:Boolean(t.isGeneral),__typename:"AnnotationAnchor",messages:n?[Vc(Vc(Vc({},u()),n),{},{content:{text:n.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})};return{annotations:j,generalThread:E,unreadThreadCount:_,placeholderAnchorId:null===s||void 0===s?void 0:s.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;l(t)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:C,createAnnotationMessage:function(t){var n=t.anchor,r=t.annotationMessage,i=t.highlight;(null===s||void 0===s?void 0:s.id)===n.id?(l(null),C({annotationAnchor:Vc({},s),annotationMessage:r,highlight:i})):h({variables:{replId:e,anchorId:n.id,annotationMessage:r,highlight:i},optimisticResponse:{createAnnotationMessage:Vc(Vc({},n),{},{messages:[].concat((0,Vt.Z)(n.messages.filter((function(e){return!e.id.startsWith("chat-")}))),[Vc(Vc(Vc({},u()),r),{},{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,n=e.changes;v({variables:{id:t.id,changes:n},optimisticResponse:{updateAnnotationAnchor:Vc(Vc(Vc({},t),n),{},{isResolved:"boolean"===typeof n.isResolved?n.isResolved:t.isResolved})}})},updateThreadPreview:function(e){var t=e.threadId,n=e.messageId,r=e.message;w({variables:{threadId:t,messageId:n,message:r}})},markAllMessagesInReplAsSeenByUser:function(){y({variables:{replId:e}})}}}var Gc=function(e){var t=e.indexStart,n=e.indexEnd,r=e.otVersion,i=e.path,a=e.id,o=e.className,s=ee.useContext(xc);return ee.useEffect((function(){var e=s.editorHandle,r=s.fileModels[i],a=hi(e),l=gi(r);if(a&&l&&l.isAttachedToEditor()){var c=[l.getPositionAt(t),l.getPositionAt(n)],u=c[0],d=c[1],p={range:window.monaco.Range.fromPositions(u,d),options:{className:o,stickiness:window.monaco.editor.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore}},f=l.deltaDecorations([],[p]);return function(){l.isDisposed()||l.deltaDecorations(f,[])}}}),[t,n,r,i,a,s.editorHandle,s.fileModels,o]),null},Wc=n(32497);function Kc(e){var t=ee.useState(0),n=(0,L.Z)(t,2),r=n[0],i=n[1];return ee.useEffect((function(){var t=hi(e);if(t){var n=t.onDidLayoutChange((function(e){i(e.width)}));return function(){return n.dispose()}}}),[e]),r}function qc(e,t,n){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,X.Z)(U().mark((function e(t,n,r){var i,a,o,s;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.path&&"number"===typeof t.indexStart&&"number"===typeof t.indexEnd&&t.otVersion){e.next=2;break}return e.abrupt("return");case 2:if(r!==t.otVersion){e.next=4;break}return e.abrupt("return",{path:t.path,indexStart:t.indexStart,indexEnd:t.indexEnd,otVersion:t.otVersion});case 4:return i=r,a=window.performance.now(),o=function(){(0,mt.track)(mt.events.ANNOTATION_FASTFORWARDED,{opCount:i-t.otVersion,anchorId:t.id,flagPid1Fastforwards:!0,time:window.performance.now()-a})},e.next=9,n({indexStart:t.indexStart,indexEnd:t.indexEnd,versionFrom:t.otVersion,versionTo:i});case 9:return s=e.sent,o(),e.abrupt("return",{path:t.path,indexStart:s.indexStart,indexEnd:s.indexEnd,otVersion:i});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qc=function(e,t,n){if(!n||!n.getDomNode())return null;if(!e)return null;var r=t.getPositionAt(e.indexStart),i=n.getDomNode().getBoundingClientRect(),a=n.getTopForPosition(r.lineNumber,r.column);return{top:i.top+a,left:i.left+i.width}};function Jc(){return(Jc=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.anchor,r=t.version,i=t.transformSelection,a=t.content,o=t.editor,s=t.model,n.path){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,qc(n,i,r);case 5:if(l=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return s&&o&&(c=Qc(l,s,o),u=s.getValue().slice(l.indexStart,l.indexEnd)),d=function(){if(l&&u){var e=l.indexStart,t=l.indexEnd;try{var n=Wc.xv.of(a.split("\n")),r=n.lineAt(e),i=n.lineAt(t),o=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),s=n.sliceString(t,n.line(Math.min(i.number+2,n.lines)).to);return{precode:o,code:n.sliceString(e,t),postcode:s}}catch(c){pt.Tb(c)}}},p=function(){try{for(var e=Wc.xv.of(a.split("\n")),t=e.lineAt(l.indexStart),n=e.lineAt(l.indexEnd),r=[],i=t.number===n.number?Math.max(0,t.number-1):t.number,o=Math.min(e.lines,n.number+1),s=i;s<=o;s++)r.push(e.line(s).text);return{startLineNumber:i,lines:r}}catch(c){pt.Tb(c)}},e.abrupt("return",{anchor:n,newSelection:l,newPosition:c,selectedContent:u,getHighlight:d,getSnippet:p});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $c(e){var t=ee.useContext(xc),n=(0,Pe.Z)().fs,r=t.editorHandle,i=t.fileModels,a=t.currentModelLineCount,o=Kc(r),s=function(e){var t=ee.useState(null),n=(0,L.Z)(t,2),r=n[0],i=n[1];return ee.useEffect((function(){var t=hi(e);if(t){var n=t.onDidChangeConfiguration((function(e){i(e)}));return function(){return n.dispose()}}}),[e]),r}(r),l=ee.useState(null),c=(0,L.Z)(l,2),u=c[0],d=c[1],p=ee.useRef(null),f=ee.useRef(null),m=ee.useState(!1),h=(0,L.Z)(m,2),g=h[0],v=h[1];return ee.useEffect((function(){if(null!==e&&void 0!==e&&e.path){var t=function(){f.current=null,v(!1)},r=n.watchOtFile(e.path,{onReady:function(e){var t=e.transformSelection,n=e.initialContent;p.current=n.toString(),f.current=t,v(!0)},onMoveOrDelete:function(){t()},onError:function(e){pt.Tb(e),t()},onChange:function(e){var t=e.latestContent;p.current=t}});return function(){t(),r()}}}),[e,n]),ee.useEffect((function(){if(null!==e&&void 0!==e&&e.path&&g){var t=hi(r),a=gi(i[e.path]);f.current&&null!==p.current&&function(e){return Jc.apply(this,arguments)}({anchor:e,version:n.getOTVersion(e.path),transformSelection:f.current,content:p.current,editor:t,model:a}).then((function(e){d(e)})).catch((function(){d(null)}))}}),[n,e,r,i,o,s,a,g]),u}var eu=n(7868),tu=n(75806);function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ru(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iu(e){return(0,B.tZ)(Oe.Z,ru(ru({},e),{},{children:(0,B.tZ)("path",{d:"M22 5L16.5 10L14 7.72727M22 13L16.5 18L14 15.7273M3 8H9M3 16H9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var au=n(21024),ou=n(4844),su=n(19244),lu=ee.createContext({setThreadsVisibility:function(){},threadsVisibility:!1}),cu=lu;function uu(e){var t=e.children,n=ee.useState(!1),r=(0,L.Z)(n,2),i=r[0],a=r[1];return(0,B.tZ)(lu.Provider,{value:{threadsVisibility:i,setThreadsVisibility:a},children:t})}var du,pu=n(92456);function fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hu(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return gu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vu(e){var t,n=e.annotation,r=e.onChangeMessage,i=void 0===r?function(){}:r,a=e.onFinalizeMessage,o=void 0===a?function(){}:a,s=e.onCloseThread,l=void 0===s?function(){}:s,c=e.scrollToAnchor,u=void 0===c?function(){}:c,d=e.markThreadResolved,p=void 0===d?function(){}:d,f=(0,Ta.Z)("flag-thread-snippets"),m=Zc(n.id),h=$c(n),g=ee.useMemo((function(){var e=(0,Vt.Z)(n.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return e.push.apply(e,(0,Vt.Z)(m.filter((function(t){return!e.slice(-5).find((function(e){return e.id===t.id}))})))),bc(e)}),[n,m]),v=ee.useMemo((function(){if(h)return null===h||void 0===h?void 0:h.getSnippet()}),[h]),b=ee.useRef(null);yc(n);ee.useEffect((function(){b.current&&(b.current.scrollTop=b.current.scrollHeight)}),[b,n]);var y=(null===h||void 0===h||null===(t=h.anchor)||void 0===t?void 0:t.path)||n.path||"";return(0,B.BX)(B.HY,{children:[(0,B.BX)("div",{className:"jsx-1845381324 header",children:[(0,B.tZ)("span",{className:"jsx-1845381324",children:(0,B.tZ)(he.Z,{filled:!1,border:!1,onClick:l,children:(0,B.tZ)(eu.Z,{rotate:90})})}),(0,B.tZ)("span",{className:"jsx-1845381324 separator"}),(0,B.BX)(ve.Ug,{children:[!n.isResolved&&n.path&&(0,B.tZ)(he.Z,{filled:!1,border:!1,"aria-label":"Jump to code",role:"tooltip","data-microtip-position":"left",onClick:function(){return u(n.id)},children:(0,B.tZ)(tu.Z,{})}),!n.isResolved&&!n.isGeneral&&(0,B.tZ)(he.Z,{filled:!1,border:!1,"aria-label":"Resolve thread",role:"tooltip","data-microtip-position":"left",onClick:function(){return p(n)},children:(0,B.tZ)($e.Z,{})})]}),(0,B.tZ)(q.default,{id:"1845381324",children:[".separator.jsx-1845381324{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".header.jsx-1845381324{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-height:32px;}"]})]}),(0,B.BX)("div",{className:"jsx-1632399811 "+"jsx-".concat(mc.Q.__hash)+" thread",children:[(0,B.tZ)("div",{className:"jsx-1632399811 "+"jsx-".concat(mc.Q.__hash)+" message-group-container-container",children:(0,B.BX)("div",{ref:b,className:"jsx-1632399811 "+"jsx-".concat(mc.Q.__hash)+" message-group-container",children:[f&&n.path&&(0,B.tZ)(su.u5,{path:y,snippet:v,onNavigateToCode:function(){return u(n.id)}}),g.map((function(e){return(0,B.tZ)(Uc,{messageGroup:e},e.messages[0].id)}))]})}),(0,B.tZ)(Nc,{annote:n,onChangeMessage:i,onFinalizeMessage:o}),(0,B.tZ)(q.default,{id:mc.Q.__hash,children:mc.Q}),(0,B.tZ)(q.default,{id:"1632399811",children:[".thread.jsx-1632399811{position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;overflow:hidden;padding:var(--space-16);padding-top:0;grid-template-rows:1fr min-content;height:100%;}",".message-group-container-container.jsx-1632399811{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".message-group-container.jsx-1632399811{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0;}"]})]})]})}function bu(e){var t=e.unreadCount;return(0,B.BX)("div",{className:"jsx-2446661984 count-container",children:[t>0?(0,B.tZ)("div",{className:"jsx-2446661984 count",children:t}):null,(0,B.tZ)(q.default,{id:"2446661984",children:[".count-container.jsx-2446661984{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;height:15px;}",".count.jsx-2446661984{background:var(--accent-primary-default);color:var(--white);font-size:var(--font-size-small);height:15px;padding:0 5px;border-radius:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}function yu(e){var t,n=e.annotation,r=e.onClick,i=n.messages.some((function(e){return!e.seen})),a=$c(n),o=ee.useMemo((function(){return n.messages.filter((function(e){return!1===e.seen})).length}),[n]),s=dc(n),l=s.map((function(e){return e.username})).join(", "),c=n.messages[0],u=n.messages[n.messages.length-1],d=(null===a||void 0===a?void 0:a.anchor.path)||(null===n||void 0===n?void 0:n.path)||void 0,p=ee.useMemo((function(){if(a)return null===a||void 0===a?void 0:a.getSnippet()}),[a]),f=null!==n&&void 0!==n&&n.user?{src:n.user.image,alt:"".concat(null===(t=n.user)||void 0===t?void 0:t.username,"'s avatar")}:void 0,m="TextMessageContentType"===(null===n||void 0===n?void 0:n.messages[0].content.__typename)?n.messages[0].content.text:void 0,h=ee.useMemo((function(){if(null===u||void 0===u||!u.timeCreated)return"";var e=new Date(u.timeCreated),t=e.getTime();return Date.now()-t<1e3?"just now":"".concat((0,Tc.F)(e,!0)," ago")}),[u]);return c?n.path?(0,B.tZ)(su.dp,{path:d,snippet:p,timeString:h,onClick:r,avatar:f,message:m}):(0,B.BX)("button",{onClick:r,tabIndex:0,className:"jsx-3048065987 "+(St()("thread",{unread:i})||""),children:[(0,B.tZ)("div",{className:"jsx-3048065987 profile",children:(0,B.tZ)(ou.Z,{users:s})}),(0,B.BX)("div",{className:"jsx-3048065987 message-preview",children:[(0,B.tZ)("div",{className:"jsx-3048065987 thread-title",children:l}),"TextMessageContentType"===c.content.__typename&&(0,B.tZ)("div",{className:"jsx-3048065987 thread-preview",children:c.content.text})]}),(0,B.BX)("div",{className:"jsx-3048065987 info",children:[(0,B.tZ)(bu,{unreadCount:o}),(0,B.tZ)("div",{className:"jsx-3048065987 time",children:h})]}),(0,B.tZ)(q.default,{id:"3048065987",children:[".thread.jsx-3048065987{background:var(--background-default);padding:var(--space-8);border-radius:var(--border-radius-4);display:grid;grid-auto-flow:column;grid-template-columns:min-content minmax(0,1fr) min-content;grid-gap:var(--space-8);width:100%;max-height:52px;overflow:hidden;cursor:pointer;-webkit-transition:0.1s all ease-in-out;transition:0.1s all ease-in-out;border:none;text-align:left;}",".thread.unread.jsx-3048065987 .thread-title.jsx-3048065987{font-weight:var(--font-weight-bold);}",".thread.jsx-3048065987:hover{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);-webkit-transition:0.2s all;transition:0.2s all;}",".thread.jsx-3048065987:focus{outline:none;outline-offset:2px;box-shadow:0 0 0 3px var(--accent-primary-dimmer);}",".thread-title.jsx-3048065987,.thread-preview.jsx-3048065987{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}",".thread-title.jsx-3048065987{color:var(--foreground-default);font-size:var(--font-size-default);}",".thread-preview.jsx-3048065987{color:var(--foreground-dimmer);font-size:var(--font-size-small);}",".profile.jsx-3048065987{width:25px;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".time.jsx-3048065987{white-space:pre;font-size:var(--font-size-small);color:var(--foreground-dimmest);}",".info.jsx-3048065987{display:grid;grid-gap:var(--space-4);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}"]})]}):null}function xu(e){var t=e.generalThreadsOpen,n=e.setGeneralThreadsOpen,r=(0,ye.Z)(),i=ee.useContext(xc),a=i.generalThread,o=i.handleChangeMessage,s=i.handleFinalizeMessage,l=i.createAnnotationAnchorPlaceholder,c=ee.useMemo((function(){return a?bc((0,Vt.Z)(a.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}))):[]}),[a]);ee.useEffect((function(){a||l({annotationAnchor:{id:de()(),replId:r,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[a,r,l]);var u=ee.useMemo((function(){return a?a.messages.filter((function(e){return!1===e.seen})).length:0}),[a]),d=ee.useRef(null);yc(t&&a||null);return ee.useEffect((function(){d.current&&(d.current.scrollTop=d.current.scrollHeight)}),[d,a]),a?(0,B.BX)("div",{onClick:function(){return n(!0)},className:"jsx-4170203878 "+"jsx-".concat(mc.Q.__hash)+" "+(St()("general-thread",{"is-open":t})||""),children:[(0,B.BX)("div",{className:"jsx-4170203878 "+"jsx-".concat(mc.Q.__hash)+" general-thread-header",children:[(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(Ne.Z,{level:5,children:"Chat"}),(0,B.tZ)(bu,{unreadCount:u})]}),(0,B.tZ)(ve.Ug,{spacing:1,align:"center",children:(0,B.tZ)(he.Z,{onClick:function(e){n(!t),e.stopPropagation()},filled:!1,Icon:function(){return(0,B.tZ)(eu.Z,{rotate:t?0:180})},border:!1,size:"small"})})]}),(0,B.tZ)("div",{className:"jsx-4170203878 "+"jsx-".concat(mc.Q.__hash)+" message-group-container-container",children:(0,B.tZ)("div",{ref:d,className:"jsx-4170203878 "+"jsx-".concat(mc.Q.__hash)+" message-group-container",children:c.map((function(e){return(0,B.tZ)(Uc,{messageGroup:e},e.messages[0].id)}))})}),(0,B.tZ)("div",{className:"jsx-4170203878 "+"jsx-".concat(mc.Q.__hash)+" thread-input-container",children:(0,B.tZ)(Nc,{placeholder:"Send message",annote:a,onChangeMessage:function(e){o({anchor:a,message:e.message,messageId:e.messageId}),n(!0)},onFinalizeMessage:function(e){s({anchor:a,message:e.message,messageId:e.messageId}),n(!0),(0,mt.track)(mt.events.MESSAGE_SENT,{replId:r,source:"generalThreads",variant:"replace-chat"})}})}),(0,B.tZ)(q.default,{id:mc.Q.__hash,children:mc.Q}),(0,B.tZ)(q.default,{id:"4170203878",children:[".general-thread.jsx-4170203878{margin:1px;padding:var(--space-16);border-radius:var(--border-radius-8);border-top:1px solid var(--background-higher);box-shadow:var(--shadow-2);z-index:100;position:absolute;bottom:0;left:0;right:0;background:var(--background-default);display:grid;overflow:hidden;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);cursor:pointer;-webkit-transition:0.2s height;transition:0.2s height;height:7.5em;}",".general-thread.is-open.jsx-4170203878{height:100%;cursor:unset;}",".general-thread-header.jsx-4170203878{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}",".message-group-container-container.jsx-4170203878{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:0;}",".general-thread.is-open.jsx-4170203878 .message-group-container-container.jsx-4170203878{height:100%;}",".message-group-container.jsx-4170203878{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0;}",".thread-input-container.jsx-4170203878{width:100%;}"]})]}):null}function wu(e,t){var n,r,i=null===(n=e.messages)||void 0===n?void 0:n[e.messages.length-1],a=null===(r=t.messages)||void 0===r?void 0:r[t.messages.length-1];return i||a?i?a?new Date(a.timeCreated).getTime()-new Date(i.timeCreated).getTime():1:-1:0}function ku(e){var t=e.annotations,n=e.inboxMode,r=e.generalThreadsOpen,i=e.setInboxMode,a=e.onThreadClick,o=e.onMarkAllAsReadClick,s=e.onClose,l=e.setGeneralThreadsOpen,c=(0,Ta.Z)("flag-mark-all-threads-as-read"),u=ee.useState(!1),d=(0,L.Z)(u,2),p=d[0],f=d[1],m=(0,Pe.Z)().session,h=ee.useMemo((function(){return t.filter((function(e){return!e.isGeneral&&(n===du.ACTIVE?!e.isResolved:e.isResolved)})).sort(wu)}),[t,n]),g=ee.useState(3),v=(0,L.Z)(g,2),b=v[0],y=v[1],x=(0,pu.Z)((function(){y((function(e){return e+3}))})),w=ee.useMemo((function(){var e,t={},n=hu(h);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,a=i.messages[i.messages.length-1];if(a){var o=i.path||-1,s=t[o]||{threads:[],unreadCount:0,lastMessageTime:null,path:o,lang:null===(r=i.path)||void 0===r?void 0:r.split(".").slice(-1)[0]};s.threads.push(i),s.unreadCount+=i.messages.filter((function(e){return!1===e.seen})).length,s.lastMessageTime?s.lastMessageTime=new Date(Math.max(s.lastMessageTime.getTime(),new Date(a.timeCreated).getTime())):s.lastMessageTime=new Date(a.timeCreated),t[o]=s}}}catch(l){n.e(l)}finally{n.f()}return Object.values(t).sort((function(e,t){return t.lastMessageTime.getTime()-e.lastMessageTime.getTime()}))}),[h]);return(0,B.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)+" threads-feed",children:[(0,B.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)+" header",children:[(0,B.BX)(ve.Ug,{align:"center",spacing:1,children:[(0,B.tZ)(Ne.Z,{level:4,style:{marginLeft:"var(--space-8)"},children:"Threads"}),(0,B.tZ)(au.Z,{isMenuOpen:p,renderAnchorComponent:function(){return(0,B.tZ)(he.Z,{filled:!0,border:!1,onClick:function(){return f(!p)},Icon:eu.Z,iconOnRight:!0,children:n})},renderItemChildComponent:function(e){return(0,B.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash),children:e.label})},onClick:function(e){i(e.mode),f(!1)},items:[{label:"Active",mode:du.ACTIVE},{label:"Resolved",mode:du.RESOLVED}]}),c&&(0,B.tZ)(he.Z,{border:!1,filled:!1,Icon:iu,onClick:o,"aria-label":"Mark all as read",role:"tooltip","data-microtip-position":"bottom"})]}),(0,B.tZ)("span",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash),children:(0,B.tZ)(he.Z,{filled:!1,border:!1,onClick:s,children:(0,B.tZ)(Kt.Z,{})})})]}),(0,B.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)+" threads-container",children:(0,B.BX)(ve.gC,{spacing:6,align:"stretch",children:[(0,B.BX)(B.HY,{children:[w.slice(0,b).map((function(e){return(0,B.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)+" thread-group",children:[-1!==e.path&&(0,B.tZ)("button",{onClick:function(){"string"===typeof e.path&&m.openFile(e.path)},className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)+" group-header",children:(0,B.BX)("div",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)+" left",children:[(0,B.tZ)(pl.Z,{path:"number"!==typeof e.path?e.path:"",size:20}),(0,B.tZ)("span",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)+" path",children:e.path}),(0,B.tZ)(bu,{unreadCount:e.unreadCount})]})}),e.threads.map((function(e){return(0,B.tZ)(yu,{annotation:e,onClick:function(){return a(e.id)}},e.id)}))]},e.path)})),b<w.length&&(0,B.tZ)("div",{ref:x,style:{height:"100px"},className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)})]}),(0,B.tZ)("div",{className:"jsx-4132187754 "+"jsx-".concat(mc.Q.__hash)+" general-threads-buffer"})]})}),(0,B.tZ)(xu,mu({},{generalThreadsOpen:r,setGeneralThreadsOpen:l})),(0,B.tZ)(q.default,{id:mc.Q.__hash,children:mc.Q}),(0,B.tZ)(q.default,{id:"989187587",children:["::-webkit-scrollbar-track{background:transparent !important;}"]}),(0,B.tZ)(q.default,{id:"2986800960",children:[".feedback.jsx-4132187754{-webkit-text-decoration:none;text-decoration:none;}",".threads-feed.jsx-4132187754 .list-wrapper{z-index:1;}",".threads-feed.jsx-4132187754{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".threads-container.jsx-4132187754{position:relative;padding:var(--space-16);overflow-y:auto;overflow-y:overlay;}",".header.jsx-4132187754{box-sizing:content-box;padding:var(--space-8);padding-top:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-height:32px;}",".thread-group.jsx-4132187754{max-width:100%;display:grid;grid-gap:var(--space-16);}",".group-header.jsx-4132187754{color:var(--foreground-default);font-size:var(--font-size-subhead-default);cursor:pointer;display:grid;border:none;background-color:transparent;grid-gap:var(--space-8);grid-auto-flow:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:var(--font-weight-medium);max-width:100%;overflow:hidden;}",".group-header.jsx-4132187754:hover{color:var(--accent-primary-stronger);}",".group-header.jsx-4132187754 .left.jsx-4132187754{display:grid;grid-auto-flow:column;grid-template-columns:min-content 1fr max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);}",".path.jsx-4132187754{text-align:left;overflow:hidden;text-overflow:ellipsis;}",".general-threads-buffer.jsx-4132187754{height:104px;}"]})]})}function Zu(e){var t,n,r=e.isOpen,i=(0,Ut.Z)(),a=(0,ye.Z)(),o=(0,xe.sw0)({variables:{replId:a}}).data,s=ee.useContext(cu).setThreadsVisibility,l=ee.useRef(null),c=ee.useState(null),u=(0,L.Z)(c,2),d=u[0],p=u[1],f=ee.useState(du.ACTIVE),m=(0,L.Z)(f,2),h=m[0],g=m[1],v=ee.useState(!1),b=(0,L.Z)(v,2),y=b[0],x=b[1],w=ee.useContext(xc),k=w.annotations,Z=w.handleFinalizeMessage,j=w.handleChangeMessage,O=w.handleResolveAnnotation,E=w.createAnnotationAnchorPlaceholder,_=w.markAllMessagesInReplAsSeenByUser;ee.useEffect((function(){var e=function(e){var t;if("Escape"===e.key&&l.current){var n=document.querySelectorAll(":hover"),r=Array.from(n).filter((function(e){var t;return null===(t=l.current)||void 0===t?void 0:t.contains(e)})).length>0,i=e.target&&(null===(t=l.current)||void 0===t?void 0:t.contains(e.target));(r||i)&&(d?p(null):y?x(!1):s(!1))}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[l,d,y,x,p,s]);var C=(0,at.I0)();if("Repl"!==(null===o||void 0===o||null===(t=o.repl)||void 0===t?void 0:t.__typename)||null===(n=o.repl)||void 0===n||!n.user||!o.currentUser)return null;if(!r)return null;var S=k.find((function(e){return e.id===d}));return(0,B.BX)("div",{ref:l,className:"jsx-985858534 "+"jsx-".concat(mc.Q.__hash)+" conversations-container",children:[!S&&(0,B.tZ)(ku,{annotations:k,onThreadClick:function(e){p(e),"Repl"===o.repl.__typename&&(0,mt.track)(mt.events.THREAD_SELECTED,{replId:a,source:"threads",general:!1,variant:"replace-chat"})},onNewThreadClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=de()();E({annotationAnchor:{id:t,replId:a,path:null,otVersion:null,indexStart:null,indexEnd:null,isGeneral:e}}),p(t)}()},onMarkAllAsReadClick:_,inboxMode:h,onClose:function(){return s(!1)},setInboxMode:function(e){return g(e)},generalThreadsOpen:y,setGeneralThreadsOpen:function(e){e!==y&&(x(e),"Repl"===o.repl.__typename&&e&&(0,mt.track)(mt.events.THREAD_SELECTED,{replId:a,source:"threads",general:!0,variant:"replace-chat"}))}}),S&&(0,B.tZ)(vu,{annotation:S,onCloseThread:function(){return p(null)},onFinalizeMessage:function(e){Z({anchor:S,message:e.message,messageId:e.messageId}),"Repl"===o.repl.__typename&&(0,mt.track)(mt.events.MESSAGE_SENT,{replId:a,source:"threads",variant:"replace-chat"})},onChangeMessage:function(e){j({anchor:S,message:e.message,messageId:e.messageId})},markThreadResolved:function(e){O(e),p(null)},scrollToAnchor:function(e){C({type:"SCROLL_TO_ANNOTATION",anchorId:e,wid:i})}}),(0,B.tZ)(q.default,{id:mc.Q.__hash,children:mc.Q}),(0,B.tZ)(q.default,{id:"985858534",children:[".conversations-container.jsx-985858534{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:575px;width:350px;border-radius:var(--border-radius-8);border-color:var(--background-higher);border-width:1px;border-style:solid;box-shadow:var(--shadow-1);background-color:var(--background-default);}","@media only screen and (max-height:672px){.conversations-container.jsx-985858534{height:450px;width:300px;}}"]})]})}function ju(e){var t=ee.useState(null),n=(0,L.Z)(t,2),r=n[0],i=n[1];return ee.useEffect((function(){var t=hi(e);if(t){var n=t.onDidChangeCursorSelection((function(e){var n=e.selection,r=n.startLineNumber,a=n.startColumn,o=n.endLineNumber,s=n.endColumn,l=t.getDomNode().getBoundingClientRect();if(r!==o||a!==s){var c=[t.getTopForLineNumber(r)+l.top,t.getOffsetForColumn(r,a)+l.left];i({top:c[0],left:c[1]})}else i(null)}));return function(){return n.dispose()}}}),[e]),r}function Ou(e){var t=ee.useState({scrollTop:0,scrollLeft:0}),n=(0,L.Z)(t,2),r=n[0],i=n[1];return ee.useEffect((function(){var t=hi(e);if(t){i({scrollTop:t.getScrollTop(),scrollLeft:t.getScrollLeft()});var n=t.onDidScrollChange((function(e){i({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}));return function(){return n.dispose()}}}),[e]),r}!function(e){e.ACTIVE="Active",e.RESOLVED="Resolved"}(du||(du={}));var Eu=n(7090),_u=n(99430);function Cu(e){var t,n,r=e.onClick,i=(0,xe.r92)(),a=(0,Ta.Z)("flag-threads-popup-notifications"),o=ee.useContext(xc).generalThread,s=function(e){var t=ee.useState([]),n=(0,L.Z)(t,2),r=n[0],i=n[1],a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=ee.useRef(r);c.current=r;var u=ee.useRef(null);return ee.useEffect((function(){if(null===u.current){var e=r[0];e&&(l(e),u.current=setTimeout((function(){i(c.current.slice(1)),0===c.current.length&&l(null),u.current=null}),2500))}}),[r]),(0,_u.Z)((function(){e[e.length-1]&&i([].concat((0,Vt.Z)(r),[e[e.length-1]]))}),[e.length]),s}((null===o||void 0===o?void 0:o.messages)||[]),l=ee.useMemo((function(){if("TextMessageContentType"!==(null===s||void 0===s?void 0:s.content.__typename))return null;var e=null===s||void 0===s?void 0:s.content.text;return e?ic(e,{}):null}),[s]);return a&&s&&s.user&&s.user.id!==(null===(t=i.data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.id)?(0,B.BX)("div",{onClick:function(e){e.stopPropagation(),r(e)},className:"jsx-1782386374 message-notification",children:[(0,B.tZ)(xe.jq$,{variables:{username:s.user.username},children:function(e){var t=e.loading,n=e.data;return!t&&n&&n.user&&n.user.image?(0,B.tZ)("img",{src:n.user.image,className:"jsx-1782386374 chat-message-picture"}):(0,B.tZ)("div",{className:"jsx-1782386374 chat-message-picture"})}}),(0,B.BX)("div",{className:"jsx-1782386374 message",children:[(0,B.tZ)("span",{className:"jsx-1782386374 dimmed-text",children:s.user.username}),":"," ",(0,B.tZ)("span",{className:"jsx-1782386374 bold-text",children:l&&(0,B.tZ)(ac,{message:l})})]}),(0,B.tZ)(q.default,{id:"1782386374",children:[".message-notification.jsx-1782386374{background:var(--background-default);border:1px solid var(--accent-purple-default);position:absolute;right:60px;bottom:0;color:var(--foreground-default);border-radius:6px;padding:3px 15px;cursor:auto;max-width:250px;width:auto;height:36px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;opacity:1;cursor:pointer;font-size:14px;}",".chat-message-picture.jsx-1782386374{min-width:24px;margin-right:10px;width:24px;border-radius:15px;border:1px solid transparent;}",".bold-text.jsx-1782386374{color:var(--foreground-default);}",".dimmed-text.jsx-1782386374{color:var(--foreground-dimmest);}",".message.jsx-1782386374{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"]})]}):null}var Su=function(e){var t=e.unreadThreadCount,n=e.onClick,r=(0,Gr.Fg)();return(0,B.BX)("div",{onClick:n,css:(0,tr.iv)({backgroundColor:r===Gr.V2.replitSpooky?Mn.o6.orangeDefault:Mn.o6.blurpleDefault},"",""),className:q.default.dynamic([["1918740453",[Mn.TV.borderRadius8,Mn.TV.borderRadius8]]])+" floating-icon-wrapper",children:[(0,B.tZ)(Cu,{onClick:n}),(0,B.tZ)("div",{className:q.default.dynamic([["1918740453",[Mn.TV.borderRadius8,Mn.TV.borderRadius8]]])+" chat-icon-wrapper",children:(0,B.tZ)(Eu.Z,{})}),t>0&&(0,B.tZ)("div",{className:q.default.dynamic([["1918740453",[Mn.TV.borderRadius8,Mn.TV.borderRadius8]]])+" unread-icon"}),(0,B.tZ)(q.default,{id:"1918740453",dynamic:[Mn.TV.borderRadius8,Mn.TV.borderRadius8],children:[".floating-icon-wrapper.__jsx-style-dynamic-selector{height:36px;width:50px;border-radius:".concat(Mn.TV.borderRadius8," 0 0 ").concat(Mn.TV.borderRadius8,";position:absolute;right:0px;bottom:var(--space-16);z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;opacity:1;-webkit-transition:300ms;transition:300ms;}"),".chat-icon-wrapper.__jsx-style-dynamic-selector{width:32px;height:32px;padding:5px;color:#fff;}",".unread-icon.__jsx-style-dynamic-selector{position:absolute;top:5px;left:12px;background:red;width:8px;height:8px;border-radius:4px;z-index:11;}"]})]})};function Pu(){var e=(0,ye.Z)(),t=Hc(e,{onReceiveAnnotationUpdate:function(){}}).unreadThreadCount,n=ee.useContext(cu);return(0,B.tZ)(Su,{onClick:function(){n.threadsVisibility||((0,mt.track)(mt.events.THREADS_OPENED,{unread:Boolean(t)}),(0,mt.track)(mt.events.MESSAGES_LIST_OPENED,{replId:e,context:"threads",variant:"replace-chat"})),n.setThreadsVisibility((function(e){return!e}))},unreadThreadCount:t})}var Nu={js:"javascript",jsx:"javascript",ts:"javascript",tsx:"javascript",py:"python",java:"java"};function Tu(e,t){if(!e)return!1;var n=(0,kn.r6)(e);return!(!t&&"java"===n)&&Boolean(Nu[n])}function Iu(e){var t=(0,kn.r6)(e);return Nu[t]?Nu[t]:"unknown"}var Ru=function(){var e=(0,X.Z)(U().mark((function e(t){var n,r,i;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.code,r=t.language,e.next=3,null===$o.l||void 0===$o.l?void 0:$o.l.query({query:xe.nFn,variables:{code:n,language:r}});case 3:if("ExplainCodeResult"!==(null===(i=e.sent)||void 0===i?void 0:i.data.explainCode.__typename)){e.next=6;break}return e.abrupt("return",i.data.explainCode.explanation);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Du=n(24561),Au=n(87848);function Lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mu(e){return(0,B.tZ)(Oe.Z,Bu(Bu({},e),{},{children:(0,B.tZ)("path",{d:"M8 14C8 14 9.5 16 12 16C14.5 16 16 14 16 14M9 9H9.01M15 9H15.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fu(e){return(0,B.BX)(Oe.Z,Xu(Xu({strokeWidth:2},e),{},{children:[(0,B.tZ)("path",{d:"M23 4v6h-6M1 20v-6h6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,B.tZ)("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",strokeLinecap:"round",strokeLinejoin:"round"})]}))}var zu=function(e){var t=e.explanation,n=e.errorMessage,r=e.loading,i=e.codexFeedback,a=e.onRequestClose,o=e.onRequestExplainAgain,s=e.onExplainFail,l=e.onExplainSuccess,c=null;return r?c=(0,B.tZ)("div",{css:[Mn.l0.p(16),"",""],children:(0,B.BX)(Du.ZP,{viewBox:"0 0 100 10",primaryColor:"var(--background-higher)",secondaryColor:"var(--background-highest)",speed:1.5,children:[(0,B.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,B.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})}):t?c=(0,B.BX)("div",{css:[Mn.l0.p(8),{display:"grid",gridGap:Mn.TV.space8},"",""],children:[(0,B.tZ)("pre",{css:(0,tr.iv)({fontFamily:Mn.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:Mn.TV.lineHeightDefault,fontSize:Mn.TV.fontSizeDefault,color:Mn.TV.foregroundDefault,backgroundColor:Mn.TV.backgroundHighest,padding:Mn.TV.space8,borderRadius:Mn.TV.borderRadius8},"",""),children:t}),(0,B.tZ)("div",{css:(0,tr.iv)({color:Mn.TV.foregroundDefault},"",""),children:"Is this a good explanation?"}),r?null:(0,B.BX)(or.Z,{css:[Mn.l0.rowWithGap(8),Mn.l0.justify.start,Mn.l0.align.center,"",""],children:[i?(0,B.tZ)(Un.ZP,{disabled:!0,iconLeft:(0,B.tZ)(Mu,{}),onClick:function(){},small:!0,text:"Thanks!"}):(0,B.BX)(or.Z,{css:[Mn.l0.rowWithGap(8),Mn.l0.justify.start,Mn.l0.align.center,"",""],children:[(0,B.tZ)(Un.ZP,{text:"No",colorway:"negative",outlined:"no"!==i,onClick:s,small:!0,iconLeft:(0,B.tZ)(Kt.Z,{})}),(0,B.tZ)(Un.ZP,{text:"Yes",colorway:"positive",onClick:l,small:!0,outlined:"yes"!==i,iconLeft:(0,B.tZ)($e.Z,{})})]}),(0,B.tZ)("a",{href:"https://replit.canny.io/codex-beta",target:"_blank",rel:"noopener noreferrer",css:[Mn.l0.color.foregroundDimmest,{fontSize:Mn.TV.fontSizeSmall,"&:hover":{color:Mn.TV.foregroundDefault}},"",""],children:"Send Feedback"})]})]}):n&&(c=(0,B.tZ)("div",{css:[Mn.l0.p(8),{display:"grid",gridGap:Mn.TV.space8},"",""],children:n})),(0,B.BX)(Xn.Z,{background:"higher",css:(0,tr.iv)({background:Mn.TV.backgroundHigher,boxShadow:Mn.TV.shadow1,borderWidth:1,borderColor:Mn.TV.backgroundHighest,borderStyle:"solid",borderRadius:Mn.TV.borderRadius8,width:"320px"},"",""),children:[(0,B.BX)("div",{css:[{display:"flex",justifyContent:"space-between",borderBottom:"1px solid",borderBottomColor:Mn.TV.backgroundHighest},Mn.l0.flex.row,Mn.l0.rowWithGap(2),Mn.l0.p(8),"",""],children:[(0,B.BX)("div",{css:(0,tr.iv)({display:"grid",gridAutoFlow:"column",gridGap:Mn.TV.space8,alignItems:"center"},"",""),children:[(0,B.tZ)(Au.Z,{}),(0,B.tZ)("div",{css:(0,tr.iv)({color:Mn.TV.foregroundDefault},"",""),children:"Explain Code"}),(0,B.tZ)("a",{href:"https://blog.replit.com/codex",target:"_blank",css:Mn.l0.color.foregroundDefault,children:(0,B.tZ)(Pn.Z,{alt:"Learn more",tooltipDelay:0,tooltipText:"This beta feature uses Codex by OpenAI. Click to learn more.",type:"button",children:(0,B.tZ)(on.Z,{color:Mn.TV.foregroundDefault})})}),(0,B.tZ)(Pn.Z,{alt:"Generate new explanation",onClick:o,type:"button",children:(0,B.tZ)(Fu,{})})]}),(0,B.tZ)("div",{className:"right",children:(0,B.tZ)(Pn.Z,{alt:"Close",tooltipHidden:!0,onClick:a,type:"button",children:(0,B.tZ)(Kt.Z,{})})})]}),c]})};var Vu=function(){var e,t=Ou(ee.useContext(xc).editorHandle),n=function(){var e,t,n,r,i,a,o,s,l,c,u=(0,ye.Z)(),d=ee.useContext(xc),p=d.explainAnchor,f=d.setExplainAnchor,m=$c(p),h=ee.useMemo((function(){return null!==m&&void 0!==m&&m.anchor.path?Iu(m.anchor.path):"unknown"}),[m]),g=ee.useMemo((function(){return null===m||void 0===m?void 0:m.selectedContent}),[m]),v=(0,xe.LxS)({fetchPolicy:"no-cache",variables:{code:g,language:h,replId:u},skip:!m||!g,notifyOnNetworkStatusChange:!0}),b=(0,xe.CUF)(),y=(0,L.Z)(b,2),x=y[0],w=y[1],k=function(){var e=(0,X.Z)(U().mark((function e(t){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ExplainCodeResult"===(null===(n=v.data)||void 0===n?void 0:n.explainCode.__typename)&&!v.loading&&!w.loading){e.next=2;break}return e.abrupt("return");case 2:x({variables:{completionId:v.data.explainCode.id,feedback:t},optimisticResponse:{__typename:"RootMutationType",giveCodexFeedback:{__typename:"CodexFeedback",id:v.data.explainCode.id,feedback:t}}}),(0,mt.track)(mt.events.CODEX_FEEDBACK_SUBMITTED,{language:h,feedback:t,feature:"explanation"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z="ExplainCodeResult"===(null===(e=v.data)||void 0===e||null===(t=e.explainCode)||void 0===t?void 0:t.__typename)?v.data.explainCode.explanation:void 0,j="UserError"===(null===(n=v.data)||void 0===n||null===(r=n.explainCode)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(i=v.data)||void 0===i||null===(a=i.explainCode)||void 0===a?void 0:a.__typename)?v.data.explainCode.message:null,O="ExplainCodeResult"===(null===(o=v.data)||void 0===o||null===(s=o.explainCode)||void 0===s?void 0:s.__typename)&&v.data.explainCode.id===(null===(l=w.data)||void 0===l||null===(c=l.giveCodexFeedback)||void 0===c?void 0:c.id)?w.data.giveCodexFeedback.feedback:null;return{explainAnchor:p,setExplainAnchor:f,resolvedExplainAnchor:m,getCodeExplanation:Ru,loading:v.loading,explanation:Z,errorMessage:j,refetchExplanation:function(){var e=(0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,mt.track)(mt.events.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,language:h}),e.abrupt("return",v.refetch());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),giveCodexFeedback:k,codexFeedback:O}}(),r=n.explainAnchor,i=n.resolvedExplainAnchor,a=n.setExplainAnchor,o=n.explanation,s=n.errorMessage,l=n.loading,c=n.refetchExplanation,u=n.giveCodexFeedback,d=n.codexFeedback,p=null===i||void 0===i?void 0:i.newSelection,f=ee.useMemo((function(){return p&&r?(0,B.tZ)(Gc,{indexStart:p.indexStart,indexEnd:p.indexEnd,otVersion:p.otVersion,path:p.path,id:r.id,className:"selection-explanation explanation-".concat(r.id)}):null}),[p]);return r&&null!==i&&void 0!==i&&i.newPosition?(0,B.BX)("div",{css:(0,tr.iv)({position:"fixed",top:(null===(e=i.newPosition)||void 0===e?void 0:e.top)-t.scrollTop,left:"2em"},"",""),className:"jsx-221488545",children:[(0,B.tZ)(zu,{explanation:o,errorMessage:s,loading:l,onRequestClose:function(){return a(null)},onRequestExplainAgain:function(){return c()},codexFeedback:d,onExplainFail:function(){return u(xe.TYv.No)},onExplainSuccess:function(){return u(xe.TYv.Yes)}}),f,(0,B.tZ)(q.default,{id:"221488545",children:[".selection-explanation{position:relative;background-color:#08f;opacity:0.3;pointer-events:none;}"]})]}):null},Hu=n(23239);function Gu(e){var t=e.children,n=e.onClick;return(0,B.tZ)(or.Z,{onClick:n,css:[Mn.l0.p(8),{transition:"0.2s background-color",":hover":{backgroundColor:Mn.TV.backgroundHighest}},"",""],children:(0,B.tZ)(ve.Ug,{spacing:1,justify:"end",wrap:"nowrap",align:"center",children:t})})}function Wu(e){var t=e.showCodeContextMenu,n=e.editorHandle,r=e.flagCodex,i=e.onStartThreadClick,a=e.onExplainCodeClick,o=(0,Ta.Z)("flag-codex-java"),s=(0,xn.Z)(),l=Ou(n),c=ju(n),u=Kc(n),d=ee.useMemo((function(){if(!n)return null;var e=hi(n);return e?e.getDomNode().getBoundingClientRect().left:null}),[n,u]);return n?(0,B.BX)(Xn.Z,{elevated:!0,background:"higher",css:[Mn.l0.py(4),Mn.l0.shadow(1),Mn.l0.borderRadius(8),{position:"absolute",cursor:"pointer",zIndex:1,border:"1px solid",left:c&&t&&d?d+32:void 0,top:c&&t?c.top-l.scrollTop:void 0,borderColor:Mn.TV.backgroundHighest,visibility:c&&t?"visible":"hidden",opacity:c&&t?1:0,transition:"0.2s opacity ease 0.3s",transform:"translateX(-100%)"},"",""],children:[(0,B.BX)(Gu,{onClick:i,children:[(0,B.tZ)(lc.Z,{}),(0,B.tZ)(cs.x,{children:"Start Thread"})]}),r&&Tu(s,o)&&(0,B.BX)(Gu,{onClick:a,children:[(0,B.tZ)(tu.Z,{}),(0,B.tZ)(cs.x,{children:"Explain code"}),(0,B.tZ)(Au.Z,{})]})]}):null}var Ku=ee.createContext({editorRight:0});function qu(e){var t=e.anchor,n=e.children,r=(0,xn.Z)(),i=(0,Pe.Z)().anchorer,a=function(e){var t=(0,Pe.Z)().anchorer,n=ee.useState(null),r=(0,L.Z)(n,2),i=r[0],a=r[1];return ee.useEffect((function(){var n=t.onAnchorPortalSet(e,(function(e){a(e)}));return function(){n()}}),[e,t]),i}(t.id);return ee.useEffect((function(){if(r===t.path)return i.addAnchors([t]),function(){i.removeAnchors([t.id])}}),[r]),a?oi.createPortal((0,B.tZ)(Ku.Provider,{value:{editorRight:a.editorRight},children:n}),a.dom,t.id):null}function Yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ju=(0,Na.Z)(["CREATE_ANNOTATION","REGISTER_MONACO_EDITOR_HANDLE","REGISTER_MODEL_HANDLE","SCROLL_TO_ANNOTATION","FILE_CACHE_HIT","FILE_LOADED"]),$u=Ju.receiver,ed=Ju.useReceiver;function td(e){var t=e.anchor,n=e.isOpen,r=e.onRequestOpen,i=e.onRequestClose,a=e.onFinalizeMessage,o=e.onChangeMessage,s=e.onResolve,l=Ou(ee.useContext(xc).editorHandle),c=$c(t),u=null===c||void 0===c?void 0:c.newSelection,d=null===c||void 0===c?void 0:c.newPosition,p=ee.useMemo((function(){return u&&t?(0,B.tZ)(Gc,{indexStart:u.indexStart,indexEnd:u.indexEnd,otVersion:u.otVersion,path:u.path,id:t.id,className:"selection-annotation annotation-".concat(t.id)}):null}),[u]);if(!d||!u||!c)return null;var f=d.top-l.scrollTop,m=d&&f>=0?(0,B.tZ)(Xc,{annote:t,onFinalizeMessage:function(e){return a(e,c)},onChangeMessage:function(e){return o(e,c)},onResolve:s,onRequestClose:i,width:225,style:{top:"".concat(f,"px"),left:"min(".concat(d.left,"px, calc(").concat(window.innerWidth,"px - ").concat(225,"px))"),transform:"translateX(-56px)"}}):null,h=d?(0,B.BX)("div",{className:"annotation-preview-container",style:{top:"".concat(f,"px"),left:"".concat(d.left,"px")},children:[(0,B.tZ)(pc,{annote:t,onClick:r}),(0,B.tZ)(Fc,{annote:t})]}):null;return(0,B.BX)(B.HY,{children:[p,n?m:h,(0,B.tZ)(q.default,{id:"488654062",children:[".selection-annotation{position:relative;background-color:#f0f;opacity:0.15;pointer-events:none;}",".annotation-preview-container{position:absolute;}"]}),(0,B.tZ)(q.default,{id:"2278115419",dynamic:[t.id,n?"0.3":"0.15"],children:[".annotation-".concat(t.id,"{opacity:").concat(n?"0.3":"0.15",";}")]})]})}function nd(e){var t=e.thread,n=(0,ye.Z)(),r=ee.useContext(xc),i=r.visibleAnnotation,a=r.setVisibleAnnotation,o=r.handleChangeMessage,s=r.handleFinalizeMessage,l=r.handleResolveAnnotation,c=ee.useContext(Ku);return t?(0,B.tZ)("div",{children:i===t.id?(0,B.tZ)(Xc,{annote:t,onFinalizeMessage:function(e){s({anchor:t,message:e.message,messageId:e.messageId})},onChangeMessage:function(e){o({anchor:t,message:e.message,messageId:e.messageId})},onResolve:function(){l(t)},onRequestClose:function(){return a(null)},width:225,style:{position:"fixed",left:null===c||void 0===c?void 0:c.editorRight}}):(0,B.BX)(or.Z,{css:(0,tr.iv)({position:"fixed",left:null===c||void 0===c?void 0:c.editorRight,transform:"translateX(-100%)"},"",""),children:[(0,B.tZ)(pc,{annote:t,onClick:function(){a(t.id),(0,mt.track)(mt.events.THREAD_SELECTED,{replId:n,source:"file",general:!1,variant:"replace-chat"})}}),(0,B.tZ)(Fc,{annote:t})]})}):null}function rd(e){var t,n=e.wid,r=ee.useState(),i=(0,L.Z)(r,2),a=i[0],o=i[1],s=ee.useState({}),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=(0,ye.Z)(),p=ee.useContext(cu).threadsVisibility,f=(0,xn.Z)(),m=(0,Ta.Z)("flag-typing-indicator"),h=(0,Ta.Z)("flag-typing-presence"),g=(0,Ta.Z)("split-code-selection-context"),v=(0,Pe.Z)(),b=v.container,y=v.fs,x=v.anchorer,w=ee.useState(null),k=(0,L.Z)(w,2),Z=k[0],j=k[1],O=Cc(),E=O.map((function(e){return e.username})),_=(0,xe.Fqz)(),C=(0,xe.Ki4)({variables:{replId:d}}),S="Repl"===(null===(t=C.data)||void 0===t?void 0:t.repl.__typename)&&C.data.repl.hasExplainCode,P=ee.useState(0),N=(0,L.Z)(P,2),T=N[0],I=N[1],R=Hc(d,{onReceiveAnnotationUpdate:function(e){var t,n,r;if(e.messages){var i=e.messages[e.messages.length-1];i&&(null===(t=i.user)||void 0===t?void 0:t.id)!==(null===(n=_.data)||void 0===n||null===(r=n.currentUser)||void 0===r?void 0:r.id)&&"TextMessageContentType"===i.content.__typename&&i.user&&(Ds({title:"".concat(i.user.username," made an annotation"),body:i.content.text,tag:"annotation-".concat(i.id),iconByUsername:i.user.username}),(0,mt.track)(mt.events.ANNOTATION_UPDATE_RECEIVED,{messageId:i.id,sender:i.user.id,time:new Date(i.timeCreated).getTime()}))}}}),D=R.annotations,A=R.generalThread,M=R.placeholderAnchorId,F=R.createAnnotationAnchorPlaceholder,z=R.deleteAnnotationAnchorPlaceholder,V=R.createAnnotationMessage,H=R.updateAnnotationAnchor,G=R.updateThreadPreview,W=R.markAllMessagesInReplAsSeenByUser,Y=ee.useState(null),Q=(0,L.Z)(Y,2),J=Q[0],$=Q[1],te=ee.useState(!0),ne=(0,L.Z)(te,2),re=ne[0],ie=ne[1],ae=Ou(a),oe=ju(a);ee.useEffect((function(){ie(!1)}),[f]),ee.useEffect((function(){ie(Boolean(oe))}),[oe]);var se=function(){var e=hi(a);e&&e.focus()},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.otVersion,r=e.indexStart,i=e.indexEnd,o=hi(a),s=f&&gi(c[f]);if(o&&s){var l=o.getSelection(),u={lineNumber:l.startLineNumber,column:l.startColumn},p={lineNumber:l.endLineNumber,column:l.endColumn},m=s.getOffsetAt(u),h=s.getOffsetAt(p);if(!t){if(!f)throw new Error("Expected active file");t=f}n||(n=y.getOTVersion(t));var g={id:de()(),replId:d,path:t,otVersion:n,indexStart:"number"===typeof r?r:m,indexEnd:"number"===typeof i?i:h};F({annotationAnchor:g}),j(g.id),ie(!1)}},ce=function(){var e=(0,X.Z)(U().mark((function e(){var t,n,r,i,o,s,l,u,d,p,m,h,g,v=arguments;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:{},n=t.path,r=t.otVersion,i=t.indexStart,o=t.indexEnd,s=hi(a),l=f&&gi(c[f]),s&&l){e.next=5;break}return e.abrupt("return");case 5:if(u=s.getSelection(),d={lineNumber:u.startLineNumber,column:u.startColumn},p={lineNumber:u.endLineNumber,column:u.endColumn},m=l.getOffsetAt(d),h=l.getOffsetAt(p),n){e.next=14;break}if(f){e.next=13;break}throw new Error("Expected active file");case 13:n=f;case 14:if(r||(r=y.getOTVersion(n)),r){e.next=17;break}throw new Error("Expected OT Version");case 17:g={id:de()(),path:n,otVersion:r,indexStart:"number"===typeof i?i:m,indexEnd:"number"===typeof o?o:h},$(g),ie(!1),(0,mt.track)(mt.events.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!1,language:Iu(n)});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=(0,at.I0)();ee.useEffect((function(){return x.onThreadCreated((function(e){var t=Qu({id:de()(),replId:d},e);F({annotationAnchor:t}),j(t.id),ie(!1)}))}),[x,F,d]),ed((function(e){var t=e.action;return"CREATE_ANNOTATION"===t.type&&le({path:t.path,otVersion:t.otVersion,indexStart:t.indexStart,indexEnd:t.indexEnd}),"REGISTER_MONACO_EDITOR_HANDLE"===t.type&&o(t.editorHandle),"REGISTER_MODEL_HANDLE"===t.type&&u((function(e){return Qu(Qu({},e),{},(0,K.Z)({},t.filePath,t.modelHandle))})),"SCROLL_TO_ANNOTATION"===t.type&&ue((0,X.Z)(U().mark((function e(){var r;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=D.find((function(e){return e.id===t.anchorId})))&&void 0!==r&&r.path){e.next=3;break}return e.abrupt("return");case 3:if(f===r.path){e.next=15;break}return e.prev=4,e.next=7,b.exec("test","-f",r.path);case 7:if(null===e.sent.error){e.next=10;break}return e.abrupt("return");case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return");case 15:ue({type:"OPEN_DEEP_LINK",path:r.path,wid:n,indexStart:r.indexStart,indexEnd:r.indexEnd}),j(r.id);case 17:case"end":return e.stop()}}),e,null,[[4,12]])})))),null}));var pe=function(e){var t=e.anchor,n=e.resolvedAnchor,r=e.message,i=e.messageId,a=ic(r,{users:[].concat((0,Vt.Z)(E),["everyone"])}),o=null===n||void 0===n?void 0:n.getHighlight();V({anchor:t,annotationMessage:{id:i,text:r,mentions:a.mentions},highlight:o})},fe=function(e){var t=e.anchor,n=e.message,r=e.messageId;m&&G({threadId:t.id,message:h?n:null,messageId:r})},me=function(e){if(M===e.id)z();else{H({annotationAnchor:e,changes:{isResolved:!0}})}};ee.useEffect((function(){if(a){var e=hi(a);if(e){var t=sc()((function(){if(f){var e=gi(c[f]);e&&e.isAttachedToEditor()&&I(e.getLinesContent().length)}}),750),n=e.onDidChangeModelContent(t);return function(){n.dispose()}}}}),[a,f,c]);var he=(0,Ta.Z)("flag-codex-java");if(!window)return null;var ge=function(){j(null),z(),se()};return(0,B.BX)(xc.Provider,{value:{editorHandle:a,fileModels:c,activeFile:f,currentModelLineCount:T,users:O,annotations:D,generalThread:A,explainAnchor:J,visibleAnnotation:Z,setVisibleAnnotation:j,setExplainAnchor:$,handleFinalizeMessage:pe,handleChangeMessage:fe,handleResolveAnnotation:me,createAnnotationAnchorPlaceholder:F,markAllMessagesInReplAsSeenByUser:W},children:[(0,B.BX)("div",{className:"jsx-4216846857 annotations-container",children:[D.filter((function(e){return e.path===f&&!e.isResolved})).map((function(e){return(0,B.tZ)(td,{anchor:e,isOpen:e.id===Z,onRequestOpen:(t=e.id,function(){var e;j(t),"Repl"===(null===(e=C.data)||void 0===e?void 0:e.repl.__typename)&&(0,mt.track)(mt.events.THREAD_SELECTED,{replId:d,source:"file",general:!1,variant:"replace-chat"})}),onRequestClose:ge,onFinalizeMessage:function(t,n){var r;pe({anchor:e,resolvedAnchor:n,message:t.message,messageId:t.messageId}),"Repl"===(null===(r=C.data)||void 0===r?void 0:r.repl.__typename)&&(0,mt.track)(mt.events.MESSAGE_SENT,{replId:d,source:"file",variant:"replace-chat"})},onChangeMessage:function(t,n){return fe({anchor:e,resolvedAnchor:n,message:t.message,messageId:t.messageId})},onResolve:function(){me(e),se()}},e.id);var t})),g?(0,B.tZ)(Wu,{editorHandle:a,showCodeContextMenu:re,flagCodex:S,onStartThreadClick:function(){return le()},onExplainCodeClick:function(){return ce()}}):(0,B.BX)(B.HY,{children:[(0,B.BX)("div",{style:{left:oe&&re?oe.left-ae.scrollLeft:void 0,top:oe&&re?oe.top-ae.scrollTop:void 0,visibility:oe&&re?"visible":"hidden",opacity:oe&&re?1:0},onClick:function(){return le()},className:"jsx-4216846857 new-annotation-button",children:[(0,B.tZ)(lc.Z,{}),"Start thread"]}),S&&Tu(f,he)&&(0,B.BX)("div",{style:{left:oe&&re?oe.left-ae.scrollLeft+110:void 0,top:oe&&re?oe.top-ae.scrollTop:void 0,visibility:oe&&re?"visible":"hidden",opacity:oe&&re?1:0},onClick:function(){return ce()},className:"jsx-4216846857 new-annotation-button",children:[(0,B.tZ)(Hu.Z,{}),"Explain Code"]})]}),S&&(0,B.tZ)(Vu,{}),(0,B.BX)("div",{style:{position:"fixed",bottom:"var(--space-24)",right:"var(--space-8)",zIndex:1},className:"jsx-4216846857",children:[!p&&(0,B.tZ)("div",{className:"jsx-4216846857",children:(0,B.tZ)(Pu,{})}),(0,B.tZ)("div",{style:{position:"relative",right:"var(--space-8)"},className:"jsx-4216846857",children:(0,B.tZ)(Zu,{isOpen:Boolean(p)})})]}),(0,B.tZ)(q.default,{id:"4216846857",children:[".annotations-container.jsx-4216846857{z-index:10;position:absolute;height:0;width:0;}",".new-annotation-button.jsx-4216846857{position:absolute;-webkit-transform:translateY(calc(-100% - 8px)) translateX(56px);-ms-transform:translateY(calc(-100% - 8px)) translateX(56px);transform:translateY(calc(-100% - 8px)) translateX(56px);border-radius:var(--border-radius-4);background-color:var(--background-higher);color:var(--foreground-default);cursor:pointer;border:0.5px solid var(--outline-dimmest);box-shadow:var(--shadow-1);-webkit-transition:width 0.2s,background-color 0.2s,-webkit-transform 0.1s, opacity 0.2s ease 0.3s;-webkit-transition:width 0.2s,background-color 0.2s,transform 0.1s, opacity 0.2s ease 0.3s;transition:width 0.2s,background-color 0.2s,transform 0.1s, opacity 0.2s ease 0.3s;z-index:1;white-space:pre;font-weight:var(--font-weight-medium);font-size:var(--font-size-small);padding:4px 8px;display:grid;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-auto-flow:column;grid-gap:4px;}",".new-annotation-button.jsx-4216846857:hover{-webkit-transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);-ms-transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);transform:translateY(calc(-100% - 8px)) translateX(56px) scale(1.1);}"]})]}),D.map((function(e){return"string"!==typeof e.path||e.isResolved?null:(0,B.tZ)(qu,{anchor:e,children:(0,B.tZ)(nd,{thread:e})},e.id)}))]})}var id=n(76672),ad=n(23541),od=n(82730);n(33572);function sd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ld(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ld(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cd(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dd(e){var t=e.hint;return t?(0,B.BX)("div",{className:"jsx-3282618086 hint-card-container",children:[(0,B.BX)("div",{className:"jsx-3282618086 hint-header-container",children:[(0,B.BX)(ve.Ug,{align:"center",children:[(0,B.tZ)("div",{className:"jsx-3282618086 header",children:"Hint"}),(0,B.tZ)(Ne.Z,{level:5,children:t.title})]}),(0,B.tZ)("button",{onClick:function(){t.onDismiss()},className:"jsx-3282618086 dismiss-button",children:(0,B.tZ)(Kt.Z,{size:"medium"})})]}),(0,B.BX)("div",{className:"jsx-3282618086 hint-content",children:[" ",(0,B.BX)(ge.Z,{children:[t.text," ",(0,B.tZ)("a",{target:"_blank",href:t.link,className:"jsx-3282618086",children:"Learn more"}),"."]}),(0,B.tZ)("div",{className:"jsx-3282618086 hint-button",children:(0,B.tZ)(he.Z,{onClick:function(){t.onClick()},filled:!0,color:"purple",children:"Try it!"})})]}),(0,B.tZ)(q.default,{id:"3282618086",children:[".hint-card-container.jsx-3282618086{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8);width:100%;}",".hint-header-container.jsx-3282618086{margin:0px var(--space-4) var(--space-8) 0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".header.jsx-3282618086{margin-right:var(--space-8);display:inline-block;color:var(--white);background:var(--accent-purple-default);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium);padding:calc(var(--space-4) / 2) var(--space-4);text-align:center;}",".hint-content.jsx-3282618086{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".hint-button.jsx-3282618086{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}",".dismiss-button.jsx-3282618086{width:20px;height:20px;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--foreground-default);background-color:var(--background-root);border:1px solid var(--accent-purple-default);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow-2);}"]})]}):null}function pd(e){var t=e.direction,n=e.onClick;return(0,B.BX)("div",{onClick:n,className:"jsx-3299353145 arrow-container",children:[(0,B.tZ)("div",{className:"jsx-3299353145 "+"arrow-".concat(t)}),(0,B.tZ)(q.default,{id:"3299353145",children:[".arrow-right.jsx-3299353145{border-top:var(--space-8) solid transparent;border-bottom:var(--space-8) solid transparent;border-left:var(--space-8) solid var(--accent-purple-default);}",".arrow-left.jsx-3299353145{border-top:var(--space-8) solid transparent;border-bottom:var(--space-8) solid transparent;border-right:var(--space-8) solid var(--accent-purple-default);}",".arrow-container.jsx-3299353145{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-width:var(--space-16);max-width:var(--space-16);opacity:0.8;cursor:pointer;background:transparent;}",".arrow-container.jsx-3299353145:hover{opacity:1;background:var(--accent-purple-dimmest);}"]})]})}function fd(e){var t=e.hintCards,n=e.dimensions,r=ee.useState(0),i=(0,L.Z)(r,2),a=i[0],o=i[1],s=ee.useState(!1),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=(0,od.useKeenSlider)({initial:0,created:function(){u(!0)},slideChanged:function(e){o(e.details().relativeSlide)}}),p=(0,L.Z)(d,2),f=p[0],m=p[1];ee.useEffect((function(){null===m||void 0===m||m.refresh()}),[t.length,m]),ee.useEffect((function(){m&&null!==n&&void 0!==n&&n.w.pc&&m.resize()}),[n,m]);var h=(0,Gr.Fg)();return t.length?(0,B.BX)("div",{className:"jsx-4075901004 "+(St()(Gr.RJ,h===Gr.V2.replitSpooky?"spooky":"dark","hint-carousel-container",{created:c})||""),children:[m&&!!a&&(0,B.tZ)(pd,{direction:"left",onClick:function(){return m.prev()}}),(0,B.tZ)("div",{ref:f,className:"jsx-4075901004 keen-slider",children:t.map((function(e,t){return(0,B.tZ)("div",{className:"jsx-4075901004 keen-slider__slide hint",children:(0,B.tZ)(dd,{hint:e})},t)}))}),m&&a!==m.details().size-1&&(0,B.tZ)(pd,{direction:"right",onClick:function(){return m.next()}}),(0,B.tZ)(q.default,{id:"4075901004",children:[".hint-carousel-container.jsx-4075901004{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin:var(--space-8) var(--space-8) 0px var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-4);border:1px solid var(--accent-purple-default);opacity:0;}",".created.jsx-4075901004{opacity:1;}",".keen-slider.jsx-4075901004{width:100%;}",".hint.jsx-4075901004{width:100%;}"]})]}):null}function md(e){return!!e&&!(0===e.h.px&&0===e.h.pc||0===e.w.px&&0===e.w.pc)}function hd(e){var t=e.dimensions,n=e.wid,r=ee.useRef(!1);return ee.useEffect((function(){!r.current&&md(t)&&(r.current=!0)}),[t]),r.current||md(t)?(0,B.tZ)(xd,{dimensions:t,wid:n}):(0,B.tZ)("div",{})}var gd,vd=(0,Na.Z)(["OPEN_SHELL"]),bd=vd.receiver,yd=vd.useReceiver,xd=function(e){var t,n=e.dimensions,r=e.wid,i=(0,Pe.Z)(),a=i.container,o=i.fs,s=function(e){var t=e.wid,n=(0,at.I0)(),r=(0,ye.Z)(),i=(0,xe.bdn)({variables:{replId:r}}),a=i.data,o=i.updateQuery,s=ee.useState([]),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=ee.useState(null),p=(0,L.Z)(d,2),f=p[0],m=p[1],h=ee.useState([]),g=(0,L.Z)(h,2),v=g[0],b=g[1],y=ee.useState(""),x=(0,L.Z)(y,2),w=x[0],k=x[1],Z=(0,xe.$y9)({update:function(e,t){var n,r={"packager-shell-hint":"packagerShellHintSeen","version-control-shell-hint":"versionControlShellHintSeen"},i=null===(n=t.data)||void 0===n?void 0:n.toursSeen.name;i&&r[i]&&o((function(e){return e.currentUser?ud(ud({},e),{},{currentUser:ud(ud({},e.currentUser),{},(0,K.Z)({},r[i],!0))}):e}))}}),j=(0,L.Z)(Z,1)[0];return ee.useEffect((function(){if(a&&"Repl"===a.repl.__typename){var e,r=a.repl,i=r.isOwner,o=r.lang,s=[],l=[];o.supportsGit&&i&&(null===(e=a.currentUser)||void 0===e||e.versionControlShellHintSeen,l.push({commands:["git"],hint:{text:"If you're looking to use git, try our version control plugin.",link:"https://docs.replit.com/tutorials/06-github-and-run-button#looking-at-the-version-control-panel-in-repl-it"}}));var c,d=null;o.supportsPackager3?d="packager":o.hasLibSearch&&(d="libsearch"),d&&(null!==(c=a.currentUser)&&void 0!==c&&c.packagerShellHintSeen?l.push({commands:["npm","install","get","pip"],hint:{text:"If you're looking to install packages, try our packager.",link:"https://docs.replit.com/repls/quick-start#adding-packages"}}):s.push({title:"Try our packager!",text:"Use our packager plugin to install packages.",link:"https://docs.replit.com/repls/quick-start#adding-packages",onDismiss:function(){return j({variables:{name:"packager-shell-hint"}})},onClick:function(){(0,mt.track)(mt.events.SHELL_HINT_CTA_CLICKED,{hint:"packager"}),j({variables:{name:"packager-shell-hint"}}).then((function(){return n({type:"OPEN_SIDEPANE_BY_TYPE",paneType:d,wid:t})}))}})),u(s),b(l)}}),[a,n,t,j]),ee.useEffect((function(){if(w&&" "===w.slice(-1)){var e,t=sd(v);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.commands.includes(w.trim())){var r;m(null!==(r=n.hint)&&void 0!==r?r:null);break}}}catch(i){t.e(i)}finally{t.f()}}}),[v,w]),{hintCards:c,contextualHint:f,onShellKey:ee.useCallback((function(e){k((function(t){return"Backspace"===e.key?t.slice(0,-1):1!==e.key.length?"":" "===t.slice(-1)?e.key.toLowerCase():t+e.key.toLowerCase()}))}),[])}}({wid:r}),l=s.hintCards,c=s.contextualHint,u=s.onShellKey,d=(0,at.I0)(),p=(0,Ta.Z)("flag-xterm-file-parser"),f=(0,id.Z)({container:a,autoFocus:!0,onShellKey:u,createXtermProps:{loadFileParserAddon:p,onFileLinkClick:function(e,t,n){return d({wid:r,type:"OPEN_DEEP_LINK",path:e,line:t,col:n})},listFiles:o.listFiles,replSlug:null===(t=a.getContext())||void 0===t?void 0:t.repl.slug}}),m=(0,L.Z)(f,2),h=m[0],g=m[1],v=ee.useState(!1),b=(0,L.Z)(v,2),y=b[0],x=b[1],w=md(n),k=(0,Ta.Z)("flag-shellhints");yd((function(e){return"OPEN_SHELL"===e.action.type&&w&&h?(h.focus(),null):null})),ee.useEffect((function(){w&&h&&h.focus()}),[w,h]);var Z=y&&h?(0,B.tZ)(ad.Rh,{findPrevious:h.findPrevious,findNext:h.findNext,exit:function(){return x(!1)}}):(0,B.tZ)(ad.lD,{onClick:function(){return x(!0)}}),j=(0,Gr.Fg)();return(0,B.BX)("div",{className:"jsx-223693752 "+"".concat(Gr.RJ," ").concat(j===Gr.V2.replitSpooky?"spooky":"dark"," container"),children:[k&&!!l.length&&(0,B.tZ)(fd,{hintCards:l,dimensions:n}),k&&!!c&&(0,B.BX)("code",{className:"jsx-223693752 contextual-hint",children:[c.text," ",(0,B.tZ)("a",{target:"_blank",href:c.link,className:"jsx-223693752",children:"Learn more"}),"."]}),(0,B.BX)("div",{onKeyDown:function(e){"f"===e.key&&(0,ll.jh)(e)&&(x(!0),e.preventDefault())},className:"jsx-223693752 root",children:[h?(0,B.tZ)(B.HY,{children:(0,B.BX)("div",{className:"jsx-223693752 controls",children:[Z,(0,B.tZ)(ad.Zr,{onClick:h.clear})]})}):(0,B.tZ)("code",{className:"jsx-223693752",children:"Loading..."}),(0,B.tZ)("div",{ref:g,className:"jsx-223693752 xterm-container"})]}),(0,B.tZ)(q.default,{id:"3182893046",children:[".xterm{height:100%;}",".xterm .xterm-viewport{overflow-y:auto !important;height:100%;}"]}),(0,B.tZ)(q.default,{id:"280083655",children:[".container.jsx-223693752{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;background-color:var(--background-default);border-radius:var(--border-radius-4);}",".root.jsx-223693752{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;height:100%;padding-left:1em;padding-top:var(--space-8);overflow:hidden;border-radius:var(--border-radius-4);z-index:1;}",".xterm-container.jsx-223693752{min-height:1px;height:100%;}","code.jsx-223693752{color:var(--foreground-dimmest);}",".controls.jsx-223693752{position:absolute;top:var(--space-8);right:var(--space-16);z-index:5;height:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".contextual-hint.jsx-223693752{margin:var(--space-8) 0 0 var(--space-16);}"]})]})};!function(e){e[e.Disabled=0]="Disabled",e[e.Idle=1]="Idle",e[e.Testing=2]="Testing",e[e.Preparing=3]="Preparing",e[e.Cleanup=4]="Cleanup"}(gd||(gd={}));var wd=n(58525);function kd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Zd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jd=function(){function e(t){(0,F.Z)(this,e),(0,K.Z)(this,"code",void 0),(0,K.Z)(this,"currentIndent",void 0),(0,K.Z)(this,"lib",void 0),this.code="",this.currentIndent=0,this.lib=t}return(0,z.Z)(e,[{key:"indent",value:function(){this.currentIndent+=1}},{key:"dedent",value:function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1}},{key:"addIndents",value:function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "}},{key:"push",value:function(e){var t,n=kd(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addIndents(),this.code+=r,this.newLine()}}catch(i){n.e(i)}finally{n.f()}}},{key:"newLine",value:function(){this.code+="\n"}},{key:"closeCurly",value:function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()}},{key:"toString",value:function(){return this.code}}]),e}(),Od="_test_runner";function Ed(e){return Od+e}function _d(e){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.code,i=t.filename,a=Ed(i),o=ar.Z.from(r,"utf8"),e.abrupt("return",n.writeFile(a,o));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sd(e){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,X.Z)(U().mark((function e(t){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.readDir(Qr.Q);case 3:if(!(n=e.sent).error){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(n.children.map((function(e){return e.filename.startsWith(Od)?e.type===wn.Tv.File?t.deleteFile(e.filename):t.deleteDir(e.filename):Promise.resolve(null)})));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),pt.$e((function(t){t.setTag("unitTestLib","true"),pt.Tb(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Nd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Td(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Id={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat(Ed(Id.testSuiteName())," {")},classConstructorName:function(){return Ed(Id.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(Id.testIntroPreName()).concat(e).concat(Id.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat(Ed(Id.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new jd(Id);r.push(Id.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(Id.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(Id.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(Id.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i,a=Nd(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.code&&(r.push(Id.testIntro(o.name)),r.indent(),r.push(o.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(s){a.e(s)}finally{a.f()}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return Ld.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=Id.buildSuite({tests:a,meta:o});return Id.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;pt.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),pt.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},Rd="__UNIT_TEST_RESULT_START__",Dd="__UNIT_TEST_RESULT_END__",Ad="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat(Ed(Id.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat(Ed(Id.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(Rd,'");\n        System.out.println(out);\n        System.out.println("').concat(Dd,'");\n    }\n}');function Ld(){return(Ld=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w,k,Z,j,O;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,Sd(r);case 4:return s("Creating your test files 1/2"),e.next=7,_d({fs:r,code:o,filename:"".concat(Id.testSuiteName(),".java")});case 7:if(l=e.sent,!(c=l.error)){e.next=13;break}return"Failed to create suite code file",Id.captureSetupError({tag:"Failed to create suite code file",raw:c}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),e.next=16,_d({fs:r,code:Ad,filename:"".concat(Id.testRunnerName(),".java")});case 16:if(u=e.sent,!(d=u.error)){e.next=22;break}return"Failed to create test runner file",Id.captureSetupError({tag:"Failed to create test runner file",raw:d}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=27,i.installPackages();case 27:if(e.sent){e.next=30;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 30:return a.clearLogs(),s=a.startLogSpinner("Compiling your files"),e.next=34,n.exec("find",".","-type","f","-name","*.java","-print0");case 34:if(p=e.sent,f=p.output,!(m=p.error)){e.next=41;break}return h="Failed to fetch working directory java files",Id.captureSetupError({tag:h,raw:m}),e.abrupt("return",{error:"".concat(h,"\r\n\r\n")+(null===f||void 0===f?void 0:f.replace(/\n/g,"\n\r"))+"\r\n\r\n"+m});case 41:if("string"===typeof f){e.next=43;break}throw new Error("expected working directory files to be a string");case 43:return g=f.slice(0,-1).split("\0"),v=[".","/run_dir/junit-4.12.jar","/run_dir/hamcrest-core-1.3.jar","/run_dir/json-simple-1.1.1.jar","./target/dependency/*"],e.next=47,n.exec.apply(n,["javac","-classpath",v.join(":"),"-d","."].concat((0,Vt.Z)(g)));case 47:if(b=e.sent,y=b.output,!(x=b.error)){e.next=54;break}return w="Failed to compile test runner file",Id.captureSetupError({tag:w,raw:x}),e.abrupt("return",{error:"".concat(w,"\r\n\r\n")+(null===y||void 0===y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x});case 54:return s("Running your tests"),e.next=57,n.exec("java","-classpath",v.join(":"),Ed(Id.testRunnerName()));case 57:if(k=e.sent,Z=k.output,!(j=k.error)){e.next=63;break}return(0,mt.track)(mt.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n\r\n"+j});case 63:if("string"===typeof Z){e.next=65;break}throw new Error("expected runoutput to be a string");case 65:return O=JSON.parse(Z.slice(Z.indexOf(Rd)+Rd.length,Z.lastIndexOf(Dd))),e.abrupt("return",{result:O,error:null});case 67:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bd=Id;function Md(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ud(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ud(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xd={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return Xd.testIntroPreName()+e+Xd.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new jd(Xd);r.push(Xd.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(Xd.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&n.setup.trim().length&&(r.push(Xd.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),n.tearDown&&n.tearDown.trim().length&&(r.push(Xd.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i,a=Md(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.push(Xd.testIntro(o.name)),r.indent(),r.push(o.code||"pass"),r.dedent(),r.newLine()}}catch(s){a.e(s)}finally{a.f()}return r.toString()},runSuite:function(e){return Hd.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=Xd.buildSuite({tests:a,meta:o});return Xd.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;pt.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),pt.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Fd="__UNIT_TEST_RESULT_START__",zd="__UNIT_TEST_RESULT_END__",Vd="import unittest\nimport ".concat(Ed(Xd.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat(Ed(Xd.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Fd,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(zd,"');");function Hd(){return(Hd=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,Sd(r);case 4:return s("Creating your test files 1/2"),e.next=7,_d({fs:r,code:o,filename:"".concat(Xd.testSuiteName(),".py")});case 7:if(l=e.sent,!(c=l.error)){e.next=13;break}return"Failed to create suite code file",Xd.captureSetupError({tag:"Failed to create suite code file",raw:c}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),e.next=16,_d({fs:r,code:Vd,filename:"".concat(Xd.testRunnerName(),".py")});case 16:if(u=e.sent,!(d=u.error)){e.next=22;break}return"Failed to create test runner file",Xd.captureSetupError({tag:"Failed to create test runner file",raw:d}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=27,i.installPackages();case 27:if(e.sent){e.next=30;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 30:return a.clearLogs(),a.startLogSpinner("Running your tests"),e.next=34,n.exec("python","-B",Ed("".concat(Xd.testRunnerName(),".py")));case 34:if(p=e.sent,f=p.output,!(m=p.error)){e.next=40;break}return(0,mt.track)(mt.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===f||void 0===f?void 0:f.replace(/\n/g,"\n\r"))+"\r\n"+m});case 40:if("string"===typeof f){e.next=42;break}throw new Error("expected runoutput to be a string");case 42:return h=JSON.parse(f.slice(f.indexOf(Fd)+Fd.length,f.lastIndexOf(zd))),e.abrupt("return",{result:h,error:null});case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Wd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wd(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Wd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kd={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return Kd.testIntroPreName()+e+Kd.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new jd(Kd);r.push(Kd.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(Kd.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(Kd.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(Kd.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i,a=Gd(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.code&&(r.push(Kd.testIntro(o.name)),r.indent(),r.push(o.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(s){a.e(s)}finally{a.f()}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return qd.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=Kd.buildSuite({tests:a,meta:o});return Kd.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;pt.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),pt.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(add(1, 2)).toBe(3);"}};function qd(){return(qd=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w,k,Z;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,o=t.suiteCode,s=a.startLogSpinner("Setting up the environment"),e.next=4,Sd(r);case 4:return s("Creating your test files 1/2"),e.next=7,_d({fs:r,code:o,filename:"".concat(Kd.testSuiteName(),".js")});case 7:if(l=e.sent,!(c=l.error)){e.next=13;break}return"Failed to create suite code file",Kd.captureSetupError({tag:"Failed to create suite code file",raw:c}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return s("Creating your test files 2/2"),u=69,d="jest.config.json",p={testRegex:Ed("".concat(Kd.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:u},e.next=19,_d({fs:r,code:JSON.stringify(p),filename:d});case 19:if(f=e.sent,!(m=f.error)){e.next=25;break}return"Failed to create config file",Kd.captureSetupError({tag:"Failed to create config file",raw:m}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 25:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=30,i.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return a.clearLogs(),s=a.startLogSpinner("Running your tests"),h=Ed("output.json"),e.next=38,n.exec("jest","--json","--outputFile",h,"--config",Ed(d),"--forceExit","--passWithNoTests");case 38:if(g=e.sent,v=g.output,!(b=g.error)||b.endsWith(u.toString())){e.next=44;break}return(0,mt.track)(mt.events.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+b});case 44:return s("Parsing your test results"),e.next=47,r.readFile(h);case 47:if(!(y=e.sent).error){e.next=52;break}return"Error reading test results",Kd.captureSetupError({tag:"Error reading test results",raw:y.error}),e.abrupt("return",{error:"There was an error getting test results, if this happens please contact support."});case 52:if(x=y.content.toString(),!(w=JSON.parse(x)).success){e.next=56;break}return e.abrupt("return",{error:null,result:{passed:!0,failures:[]}});case 56:if(k=w.testResults[0],(Z=k.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length){e.next=60;break}return e.abrupt("return",{error:k.message.replace(/\n/g,"\r\n")});case 60:return e.abrupt("return",{error:null,result:{passed:!1,failures:Z}});case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yd={java10:Bd,java10_beta:Bd,python3:Xd,python3_beta:Xd,nodejs:Kd,nodejs_beta:Kd};function Qd(e){return e in Yd}function Jd(e){if(!Qd(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(Yd)));return Yd[e]}var $d=n(15998),ep=n(7230),tp=n(50521),np=n(74405),rp=np.q6.define();function ip(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,i=e.skeleton,a=e.path,o=e.skeletonClosingBracket,s=e.indentSize,l=void 0===s?2:s,c=(0,$d.Z)({filePath:a,indentIsSpaces:!0,indentSize:2,fontSize:14}),u=c.view,d=c.ref,p=ee.useRef(i?"".concat(i,"\n"):""),f=ee.useState(!0),m=(0,L.Z)(f,2),h=m[0],g=m[1],v=(0,Gr.Fg)(),b=o?"\n".concat(o):"",y=" ".repeat(l);return ee.useEffect((function(){var e=p.current;p.current=i?"".concat(i,"\n"):"",u&&i&&t&&!h&&u.dispatch({changes:{from:0,to:e.length-1,insert:i},annotations:[np.YW.addToHistory.of(!1),rp.of(!0)]})}),[u,i,t,h]),ee.useEffect((function(){if(u&&n&&a&&t&&r&&v){var e=np.yy.changeFilter.of((function(e){return!!e.annotation(rp)||[0,p.current.length-1]})),i=np.yy.changeFilter.of((function(e){return!(b.length&&!e.annotation(rp))||[e.startState.doc.length-b.length+1,e.startState.doc.length]})),o=tp.tk.updateListener.of((function(e){var t=e.state.doc.slice(p.current.length,e.state.doc.toString().length-b.length).toString();t!=="".concat(y).concat(r,"\n").concat(y)?n(t):n("")})),s="".concat(p.current).concat(y).concat(r,"\n").concat(b);u.dispatch({changes:{from:0,to:u.state.doc.length,insert:s},effects:np.Py.appendConfig.of([e,i,o]),selection:{anchor:s.length},annotations:np.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=u.state.doc.toString().length;u.dispatch({changes:{from:p.current.length,to:t-b.length,insert:e},annotations:np.YW.addToHistory.of(!1)})}},focus:function(){return u.focus()}}),g(!1)}}),[n,a,u,b,t,r,v,y]),(0,B.BX)("div",{className:"jsx-2563325987 editor",children:[h&&(0,B.tZ)("div",{className:"jsx-2563325987 loader",children:(0,B.tZ)(ep.Z,{})}),(0,B.tZ)("div",{ref:d,className:"jsx-2563325987"}),(0,B.tZ)(q.default,{id:"2563325987",children:[".editor.jsx-2563325987{overflow:auto;position:absolute;width:100%;height:100%;}",".loader.jsx-2563325987{height:100%;width:100%;z-index:5;}"]})]})}function ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ap(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ap(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sp(e){var t,n,r,i,a=e.isOpen,o=e.meta,s=e.language,l=e.hasMetadata,c=e.onClose,u=(0,ye.Z)(),d=(0,Wt.Z)().showConfirm,p=ee.useState(null),f=(0,L.Z)(p,2),m=f[0],h=f[1],g=ee.useState(!0),v=(0,L.Z)(g,2),b=v[0],y=v[1],x=ee.useState((null===o||void 0===o?void 0:o.initialization)||""),w=(0,L.Z)(x,2),k=w[0],Z=w[1],j=ee.useState((null===o||void 0===o?void 0:o.imports)||""),O=(0,L.Z)(j,2),E=O[0],_=O[1],C=ee.useState((null===o||void 0===o?void 0:o.setup)||""),S=(0,L.Z)(C,2),P=S[0],N=S[1],T=ee.useState((null===o||void 0===o?void 0:o.tearDown)||""),I=(0,L.Z)(T,2),R=I[0],D=I[1],A=(0,xe.rUq)({onError:function(e){return h(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?h(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:u}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:xe.aAi});return t?op(op({},t),{},{meta:op({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),d("Setup saved!"),c()))}}),M=(0,L.Z)(A,2),U=M[0],X=M[1],F=(0,xe.AFf)({onError:function(e){return h(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?h(t.message):"ReplUnitTestMeta"===t.__typename&&(d("Imports updated!"),c()))}}),z=(0,L.Z)(F,2),V=z[0],H=z[1],G=Jd(s.id),W=E!==(null===o||void 0===o?void 0:o.imports)||k!==(null===o||void 0===o?void 0:o.initialization)||P!==(null===o||void 0===o?void 0:o.setup)||R!==(null===o||void 0===o?void 0:o.tearDown),K=X.loading||H.loading;return(0,B.tZ)(Pt.ZP,{isOpen:a,preventClose:!0,onRequestClose:c,children:(0,B.BX)("div",{className:"jsx-1252880397 content",children:[(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[(0,B.tZ)(cp,{unitTestsLib:G,onChange:_,mainFile:s.mainFile,initialValue:null!==(t=null===o||void 0===o?void 0:o.imports)&&void 0!==t?t:""}),(0,B.tZ)("div",{onClick:function(){return y(!b)},className:"jsx-1252880397 collapse",children:(0,B.BX)(ve.Ug,{spacing:2,align:"baseline",children:[(0,B.tZ)(Ne.Z,{level:3,children:" Advanced"}),(0,B.tZ)(eu.Z,{color:"var(--foreground-default)",size:"large",rotate:b?270:0})]})}),b?null:(0,B.BX)(ve.gC,{align:"stretch",spacing:1,children:[(0,B.tZ)(up,{unitTestsLib:G,onChange:Z,mainFile:s.mainFile,initialValue:null!==(n=null===o||void 0===o?void 0:o.initialization)&&void 0!==n?n:""}),(0,B.tZ)(dp,{unitTestsLib:G,onChange:N,mainFile:s.mainFile,initialValue:null!==(r=null===o||void 0===o?void 0:o.setup)&&void 0!==r?r:""}),(0,B.tZ)(pp,{unitTestsLib:G,onChange:D,mainFile:s.mainFile,initialValue:null!==(i=null===o||void 0===o?void 0:o.tearDown)&&void 0!==i?i:""})]}),(0,B.BX)(ve.Ug,{justify:"space-between",children:[(0,B.tZ)(ge.Z,{style:{color:"var(--accent-negative-default"},children:m}),(0,B.BX)(ve.Ug,{spacing:2,justify:"end",children:[(0,B.tZ)(he.Z,{loading:K,onClick:c,children:"Close"}),(0,B.tZ)(he.Z,{color:"primary",disabled:!W,loading:K,onClick:function(){l?V({variables:{input:{initialization:k,imports:E,setup:P,tearDown:R,replId:u}}}):U({variables:{input:{initialization:k,imports:E,setup:P,tearDown:R,replId:u}}})},children:"Save"})]})]})]}),(0,B.tZ)(q.default,{id:"1252880397",children:[".content.jsx-1252880397{height:100%;width:100%;padding:var(--space-24);}",".editable-area.jsx-1252880397{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-1252880397{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".collapse.jsx-1252880397{cursor:pointer;}"]})]})})}var lp=[".content.jsx-1195244676{height:100%;width:100%;padding:var(--space-24);}",".editable-area.jsx-1195244676{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-1195244676{height:150px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;}"];function cp(e){var t=e.unitTestsLib,n=e.onChange,r=e.mainFile,i=e.initialValue,a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1];ee.useEffect((function(){var e;s&&(null===(e=s.setPath)||void 0===e||e.call(s,r),s.setValue(i),s.focus())}),[s,r,i]);var c=t.defaultImports().trim();return(0,B.BX)(ve.gC,{spacing:1,align:"stretch",children:[(0,B.BX)(ve.Ug,{justify:"space-between",children:[(0,B.tZ)(Ne.Z,{level:3,children:"Imports"}),(0,B.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(lp.__hash),children:(0,B.tZ)(he.Z,{Icon:tt.Z,children:"Docs"})})]}),(0,B.tZ)("div",{className:"jsx-".concat(lp.__hash)+" editable-area",children:(0,B.tZ)("div",{className:"jsx-".concat(lp.__hash)+" editor",children:(0,B.tZ)(ip,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here!"),editorRef:l,path:r,skeleton:c,skeletonClosingBracket:"",indentSize:0})})}),(0,B.tZ)(q.default,{id:lp.__hash,children:lp})]})}function up(e){var t=e.unitTestsLib,n=e.onChange,r=e.mainFile,i=e.initialValue,a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1];ee.useEffect((function(){var e;s&&(null===(e=s.setPath)||void 0===e||e.call(s,r),s.setValue(i))}),[s,r,i]);var c=t.classConstructorName();return(0,B.BX)(ve.gC,{spacing:1,align:"stretch",children:[(0,B.BX)(ve.Ug,{justify:"space-between",children:[(0,B.tZ)(Ne.Z,{level:4,children:"Initialization"}),(0,B.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(lp.__hash),children:(0,B.tZ)(he.Z,{Icon:tt.Z,children:"Docs"})})]}),c&&(0,B.tZ)(ve.Ug,{children:(0,B.BX)(ge.Z,{children:["Hint: constructor name is ",(0,B.tZ)("code",{className:"jsx-".concat(lp.__hash),children:c}),"."]})}),(0,B.tZ)("div",{className:"jsx-".concat(lp.__hash)+" editable-area",children:(0,B.tZ)("div",{className:"jsx-".concat(lp.__hash)+" editor",children:(0,B.tZ)(ip,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here!"),editorRef:l,path:r,skeleton:"",skeletonClosingBracket:"",indentSize:0})})}),(0,B.tZ)(q.default,{id:lp.__hash,children:lp})]})}function dp(e){var t=e.unitTestsLib,n=e.onChange,r=e.mainFile,i=e.initialValue,a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1];ee.useEffect((function(){var e;s&&(null===(e=s.setPath)||void 0===e||e.call(s,r),s.setValue(i))}),[s,r,i]);var c=t.setupIntro().trim();return(0,B.BX)(ve.gC,{spacing:1,align:"stretch",children:[(0,B.BX)(ve.Ug,{justify:"space-between",children:[(0,B.tZ)(Ne.Z,{level:4,children:"Setup"}),(0,B.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(lp.__hash),children:(0,B.tZ)(he.Z,{Icon:tt.Z,children:"Docs"})})]}),(0,B.tZ)("div",{className:"jsx-".concat(lp.__hash)+" editable-area",children:(0,B.tZ)("div",{className:"jsx-".concat(lp.__hash)+" editor",children:(0,B.tZ)(ip,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here!"),editorRef:l,path:r,skeleton:c,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,B.tZ)(q.default,{id:lp.__hash,children:lp})]})}function pp(e){var t=e.unitTestsLib,n=e.onChange,r=e.mainFile,i=e.initialValue,a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1];ee.useEffect((function(){var e;s&&(null===(e=s.setPath)||void 0===e||e.call(s,r),s.setValue(i))}),[s,r,i]);var c=t.tearDownIntro().trim();return(0,B.BX)(ve.gC,{spacing:1,align:"stretch",children:[(0,B.BX)(ve.Ug,{justify:"space-between",children:[(0,B.tZ)(Ne.Z,{level:4,children:"Teardown"}),(0,B.tZ)("a",{href:"https://docs.replit.com/repls/UnitTesting",target:"_blank",className:"jsx-".concat(lp.__hash),children:(0,B.tZ)(he.Z,{Icon:tt.Z,children:"Docs"})})]}),(0,B.tZ)("div",{className:"jsx-".concat(lp.__hash)+" editable-area",children:(0,B.tZ)("div",{className:"jsx-".concat(lp.__hash)+" editor",children:(0,B.tZ)(ip,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here!"),editorRef:l,path:r,skeleton:c,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})}),(0,B.tZ)(q.default,{id:lp.__hash,children:lp})]})}lp.__hash="1195244676";var fp=function(e){var t=e.language,n=e.meta,r=ee.useState(!1),i=(0,L.Z)(r,2),a=i[0],o=i[1];return(0,B.BX)(B.HY,{children:[(0,B.tZ)(he.Z,{Icon:Je.Z,filled:!0,fullWidth:!0,onClick:function(){return o(!0)},children:"Setup"}),(0,B.tZ)(sp,{language:t,isOpen:a,onClose:function(){return o(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n}),(0,B.tZ)(q.default,{id:"4031649501",children:[".collapse.jsx-4031649501{cursor:pointer;}"]})]})},mp=n(30135),hp=n(50882);function gp(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return vp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bp(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xp="\x1b[0;31m",wp="\x1b[0m",kp=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function Zp(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(xp).concat(t).concat(wp,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var jp=function(e){var t=e.language,n=e.unitTests,r=e.onResult,i=e.trackingContext,a=ee.useState(!1),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=(0,Pe.Z)(),u=c.container,d=c.packager,p=c.fs,f=window.store.dispatch,m=null,h=function(){l(!1),Sd(p),m&&(m.stopLogSpinner(),m=null)},g=function(){var e=(0,X.Z)(U().mark((function e(){var a,o,c,g,v,b,y,x,w,k,Z,j,O,E,_,C,S,P;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:if(a=null,m={startLogSpinner:function(e){if(a)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=e,n=0;return a=setInterval((function(){n++;var e=kp[n%kp.length];if(!m)throw new Error("Expected logger");m.clearLine(),m.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){a&&clearInterval(a),a=null},logMessage:function(e){f((0,bt.yY)({wid:"",type:"",raw:!0,message:e}))},clearLine:function(){if(!m)throw new Error("Expected logger");m.logMessage("\x1b[1K\r")},clearLogs:function(){if(f({type:"CLEAR_CONSOLE"}),!m)throw new Error("Expected logger");m.logMessage("\r\n")}},n){e.next=6;break}throw new Error("Run button should not be active if there are no tests");case 6:return l(!0),(0,mt.track)(mt.events.REPL_UNIT_TEST_RUN,{trackingData:{context:i}}),m.clearLogs(),o=Jd(t),e.next=12,o.buildAndRunTests(yp({container:u,fs:p,packager:d,logger:m},n));case 12:if(c=e.sent,m.stopLogSpinner(),m.clearLine(),m.clearLogs(),null===c.error){e.next=21;break}return m.logMessage("".concat(xp).concat(c.error).concat(wp,"\r\n")),h(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),e.abrupt("return");case 21:if(g=c.result.passed?[]:c.result.failures.map((function(e){return o.parseTestResultName(e.name)})),v=[],b=n.tests.map((function(e){return o.getProperTestName(e.name)})),!(y=g.filter((function(e){return!b.includes(e)}))).length){e.next=32;break}x=y[0],w=c.result.failures[0].stack,m.logMessage(Zp({name:x,failureMessage:"The following error occurred but was not related to a single unit test",stack:w})),v.push.apply(v,(0,Vt.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}})))),e.next=56;break;case 32:k=gp(n.tests),e.prev=33,k.s();case 35:if((Z=k.n()).done){e.next=48;break}if(j=Z.value,O=o.getProperTestName(j.name),E=g.indexOf(O),_=-1===E,v.push({testId:j.id,didPass:_}),!_){e.next=44;break}return m.logMessage((N=O,"\u2705\t".concat("\x1b[0;32m").concat(N).concat(wp,"\r\n\r\n"))),e.abrupt("continue",46);case 44:C=c.result.failures[E].stack,m.logMessage(Zp({name:O,failureMessage:j.failureMessage,stack:C}));case 46:e.next=35;break;case 48:e.next=53;break;case 50:e.prev=50,e.t0=e.catch(33),k.e(e.t0);case 53:return e.prev=53,k.f(),e.finish(53);case 56:if(r(v),S=n.tests.length,!c.result.passed){e.next=62;break}return m.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(S,"/").concat(S,"  ").concat(wp,"\r\n")),h(),e.abrupt("return");case 62:P=S-c.result.failures.length,m.logMessage("".concat("\x1b[48;5;88m","  ").concat(P,"/").concat(S," passed, see errors above  ").concat(wp)),h();case 65:case"end":return e.stop()}var N}),e,null,[[33,50,53,56]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g()}catch(t){pt.$e((function(e){e.setTag("unittestsrun","true"),pt.Tb(t)})),m&&m.logMessage("\r\n".concat(xp," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(wp,"\r\n")),h()}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,B.tZ)("div",{className:"run-button",children:(0,B.tZ)(he.Z,{loading:s,fullWidth:!0,color:"blue",filled:!0,Icon:rl.Z,onClick:v,children:s?"Running":"Run tests"})}):null};function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _p(e){var t=e.isOpen,n=e.test,r=e.language,i=e.onClose,a=e.trackingContext,o=(0,ye.Z)(),s=(0,Wt.Z)().showConfirm,l=ee.useState(null),c=(0,L.Z)(l,2),u=c[0],d=c[1],p=ee.useState(""),f=(0,L.Z)(p,2),m=f[0],h=f[1],g=ee.useState(""),v=(0,L.Z)(g,2),b=v[0],y=v[1],x=ee.useState(""),w=(0,L.Z)(x,2),k=w[0],Z=w[1],j=(0,xe.Hd4)({onError:function(e){return Z(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?Z(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:o}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:xe.Rbd});return t?Ep(Ep({},t),{},{tests:[].concat((0,Vt.Z)(t.tests),[n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),s("Test created!"),i()))}}),O=(0,L.Z)(j,2),E=O[0],_=O[1],C=(0,xe.kOV)({onError:function(e){return Z(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?Z(t.message):"ReplUnitTest"===t.__typename&&(s("Test updated!"),i()))}}),S=(0,L.Z)(C,2),P=S[0],N=S[1],T=(0,sr.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0})),I=ee.useState(!1),R=(0,L.Z)(I,2),D=R[0],A=R[1];ee.useEffect((function(){t||A(!1)}),[t]),ee.useEffect((function(){T.setValue((null===n||void 0===n?void 0:n.name)||""),y((null===n||void 0===n?void 0:n.failureMessage)||""),h((null===n||void 0===n?void 0:n.code)||""),u&&u.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,u]),ee.useEffect((function(){Z("")}),[m,Z]),ee.useEffect((function(){var e;u&&(null===(e=u.setPath)||void 0===e||e.call(u,r.mainFile))}),[u,r.mainFile]);var M=Jd(r.id),U=!n||n.name!==T.value||n.code!==m||n.failureMessage!==b,X=_.loading||N.loading,F=M.testIntro(T.value||""),z=M.hasClosingBrackets()?M.getClosingBrackets():"";return(0,B.tZ)(Pt.ZP,{isOpen:t,preventClose:!0,onRequestClose:i,children:(0,B.BX)("div",{className:"jsx-459724546 content",children:[(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[(0,B.BX)(ve.Ug,{spacing:2,wrap:"nowrap",children:[(0,B.tZ)(Ne.Z,{style:{flexShrink:0},level:3,children:"Name"}),(0,B.tZ)(Yt.ZP,{autoFocus:!0,monospace:!0,large:!0,required:!0,onChange:function(e){T.setValue(e.target.value),A(!0)},value:T.value,validationResults:D&&T.error?[{message:T.error.message,state:"error"}]:void 0,placeholder:"Enter test name here!"})]}),(0,B.BX)(ve.Ug,{align:"baseline",justify:"space-between",children:[(0,B.tZ)(Ne.Z,{level:3,children:"Code"}),(0,B.tZ)(he.Z,{Icon:tu.Z,size:"small",onClick:function(){u&&u.setValue("  "+M.exampleTest.code),h(M.exampleTest.code)},children:"Show me an example"})]}),(0,B.tZ)("section",{className:"jsx-459724546",children:(0,B.tZ)("div",{className:"jsx-459724546 editable-area",children:(0,B.tZ)("div",{className:"jsx-459724546 editor",children:(0,B.tZ)(ip,{skeleton:F,skeletonClosingBracket:z,path:r.mainFile,editorRef:d,onChange:h,placeholder:"".concat(M.getCommentChar()," Enter code here")})})})}),(0,B.tZ)("div",{className:"jsx-459724546 test-heading",children:(0,B.tZ)(Ne.Z,{level:3,children:"Failure message"})}),(0,B.tZ)("section",{className:"jsx-459724546",children:(0,B.tZ)(Yt.ZP,{value:b,onChange:function(e){return y(e.target.value)},placeholder:"This will be displayed on test failure"})}),(0,B.BX)(ve.Ug,{justify:"space-between",align:"center",children:[(0,B.tZ)(ge.Z,{style:{color:"var(--accent-negative-default"},children:k}),(0,B.BX)(ve.Ug,{spacing:2,justify:"end",children:[(0,B.tZ)(he.Z,{loading:!1,onClick:i,children:"Close"}),(0,B.tZ)(he.Z,{color:"primary",loading:X,disabled:!U,onClick:function(){T.validate()?A(!0):m.length<=0?Z("Test cannot be empty"):n?(P({variables:{input:{name:T.value,code:m,failureMessage:b,testId:n.id}}}),(0,mt.track)(mt.events.REPL_UNIT_TEST_EDITED,{trackingData:{context:a}})):(E({variables:{input:{name:T.value,code:m,failureMessage:b,replId:o}}}),(0,mt.track)(mt.events.REPL_UNIT_TEST_CREATED,{trackingData:{context:a}}))},children:"Save"})]})]})]}),(0,B.tZ)(q.default,{id:"459724546",children:[".content.jsx-459724546{padding:var(--space-24);}",".editable-area.jsx-459724546{border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor.jsx-459724546{height:200px;padding-bottom:var(--space-8);position:relative;}"]})]})})}function Cp(e){var t=e.testId,n=e.onClose,r=(0,Wt.Z)().showConfirm,i=(0,ye.Z)(),a=(0,xe.IVR)({onError:function(e){return p(e.message)},update:function(e,a){var o,s=null===(o=a.data)||void 0===o?void 0:o.deleteReplUnitTest;s&&("UserError"===s.__typename?p(s.message):"ReplUnitTest"===s.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:i}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return Ep(Ep({},e),{},{tests:(0,Vt.Z)(i)})}}}),r("Test deleted!"),n()))}}),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=ee.useState(""),u=(0,L.Z)(c,2),d=u[0],p=u[1];return(0,B.tZ)(Pt.ZP,{isOpen:Boolean(t),onRequestClose:n,children:(0,B.BX)("div",{className:"jsx-1541601772 content",children:[(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[(0,B.tZ)(Ne.Z,{level:2,children:" Delete test "}),(0,B.tZ)(ge.Z,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,B.BX)(ve.Ug,{justify:"space-between",align:"center",children:[(0,B.tZ)(ge.Z,{style:{color:"var(--accent-negative-default"},children:d}),(0,B.BX)(ve.Ug,{spacing:2,justify:"end",children:[(0,B.tZ)(he.Z,{loading:l.loading,onClick:n,children:"Cancel"}),(0,B.tZ)(he.Z,{color:"negative",loading:l.loading,onClick:function(){if(!t)throw new Error("Expected a testId");s({variables:{testId:t}})},children:"Yes, delete this test"})]})]})]}),(0,B.tZ)(q.default,{id:"1541601772",children:[".content.jsx-1541601772{padding:var(--space-24);}"]})]})})}var Sp=function(e){var t=e.unitTests,n=e.isAddingTest,r=e.onClose,i=e.language,a=e.canWrite,o=e.trackingContext,s=void 0===o?"default":o,l=ee.useState(n),c=(0,L.Z)(l,2),u=c[0],d=c[1],p=ee.useState(null),f=(0,L.Z)(p,2),m=f[0],h=f[1],g=ee.useState(null),v=(0,L.Z)(g,2),b=v[0],y=v[1],x=(0,ye.Z)(),w=(0,xe.lQq)(),k=(0,L.Z)(w,1)[0],Z=(null===t||void 0===t?void 0:t.tests)||[];return(0,B.BX)(ve.gC,{spacing:2,align:"stretch",children:[(0,B.tZ)("div",{className:"jsx-2109177251 run-wrapper",children:(0,B.tZ)(jp,{language:i.id,unitTests:t,onResult:function(e){k({variables:{input:{replId:x,results:e},replId:x}})},trackingContext:s})}),(0,B.tZ)("div",{className:"jsx-2109177251 tests-wrapper",children:Z.length>0?(0,B.tZ)(ve.gC,{spacing:1,align:"stretch",children:Z.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===xe.$I7.Passed?n="passed-test":e.lastRun.status===xe.$I7.Failed&&(n="failed-test")),(0,B.tZ)("div",{className:"jsx-2109177251 "+"test ".concat(n),children:(0,B.BX)(ve.Ug,{wrap:"nowrap",justify:"space-between",align:"center",children:[(0,B.tZ)(ge.Z,{truncate:!0,children:e.name}),a?(0,B.tZ)("div",{className:"jsx-2109177251 test-ctas",children:(0,B.BX)(ve.Ug,{children:[(0,B.tZ)(he.Z,{border:!1,filled:!1,onClick:function(){h(e)},Icon:mp.Z}),(0,B.tZ)(he.Z,{border:!1,filled:!1,onClick:function(){y(e.id)},Icon:hp.Z})]})}):null]})},e.id)}))}):(0,B.tZ)("div",{className:"jsx-2109177251",children:(0,B.BX)(ve.gC,{align:"center",spacing:2,children:[(0,B.tZ)(ge.Z,{align:"center",children:"Looks like you don't have any tests yet!"}),a&&(0,B.tZ)(he.Z,{onClick:function(){return d(!0)},Icon:qt.Z,children:"Add test"})]})})}),(0,B.tZ)(_p,{isOpen:u||Boolean(m)||n,test:m,language:i,onClose:function(){h(null),d(!1),r&&r()},trackingContext:s}),(0,B.tZ)(Cp,{testId:b,onClose:function(){return y(null)}}),(0,B.tZ)(q.default,{id:"2109177251",children:[".tests-wrapper.jsx-2109177251{border-radius:var(--border-radius-4);padding:var(--space-16) 0;width:100%;}",".test.jsx-2109177251{padding:var(--space-8) var(--space-8);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);}",".passed-test.jsx-2109177251{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer);}",".failed-test.jsx-2109177251{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer);}",".test-ctas.jsx-2109177251{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})};function Pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Np(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pp(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tp(){return(0,B.BX)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,B.tZ)("path",{d:"M23 4v6h-6M1 20v-6h6",stroke:"var(--foreground-default)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,B.tZ)("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",stroke:"var(--foreground-default)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}var Ip=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,B.BX)("div",Np(Np({},r),{},{className:"jsx-3302736802 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,B.tZ)(he.Z,{filled:!1,border:!1,size:"small",Icon:Tp,onClick:t,disabled:n,children:"Switch test type"}),(0,B.tZ)(q.default,{id:"3302736802",children:[".back-button.jsx-3302736802{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}))};var Rp=function(e){var t,n,r,i,a=e.onBack,o=(0,ye.Z)(),s=ee.useState(!1),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=(0,xe.CHr)({variables:{replId:o}}),p=null===(t=d.data)||void 0===t?void 0:t.repl;if(d.loading)return(0,B.BX)("div",{className:"jsx-707544915",children:[(0,B.tZ)(Nt.Z,{}),(0,B.tZ)(q.default,{id:"707544915",children:["div.jsx-707544915{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]});if(!p||"Repl"!==p.__typename)return(0,B.BX)("div",{className:"jsx-932640293",children:[(0,B.tZ)(ge.Z,{children:"Unable to fetch tests, please try again"}),(0,B.tZ)(q.default,{id:"932640293",children:["div.jsx-932640293{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);}"]})]});if(!Qd(p.lang.id))return(0,B.BX)("div",{className:"jsx-932640293",children:[(0,B.tZ)(ge.Z,{align:"center",children:"Unit tests are currently only supported in Java, Python, and Node.js repls."}),(0,B.tZ)(q.default,{id:"932640293",children:["div.jsx-932640293{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);}"]})]});var f="default";null!==p&&void 0!==p&&p.isProject?f="project_repl":null!==p&&void 0!==p&&p.isProjectFork&&(f="submission_repl");var m=Boolean((null===(n=p.unitTests)||void 0===n?void 0:n.tests)&&p.unitTests.tests.length>0);return null!==p&&void 0!==p&&null!==(r=p.currentUserPermissions)&&void 0!==r&&r.writeTests?(0,B.BX)(ve.gC,{align:"center",spacing:2,children:[(0,B.tZ)("header",{className:"jsx-1572442350",children:(0,B.BX)(ve.Ug,{wrap:"nowrap",justify:"space-between",align:"baseline",children:[(0,B.tZ)(Ne.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,B.tZ)(he.Z,{role:"tooltip","data-microtip-position":"left","aria-label":"Add test",filled:!1,border:!1,Icon:qt.Z,onClick:function(){return u(!0)}})]})}),(0,B.tZ)("section",{className:"jsx-1572442350",children:(0,B.BX)(ve.gC,{spacing:1,align:"stretch",children:[(0,B.tZ)(fp,{language:p.lang,meta:(null===(i=p.unitTests)||void 0===i?void 0:i.meta)||null}),(0,B.tZ)(Sp,{isAddingTest:c,unitTests:(null===p||void 0===p?void 0:p.unitTests)||null,onClose:function(){return u(!1)},language:p.lang,canWrite:!0,trackingContext:f}),a?(0,B.tZ)(Ip,{hasTests:m,onClick:a}):null]})}),(0,B.tZ)(q.default,{id:"1572442350",children:["header.jsx-1572442350{width:100%;}","section.jsx-1572442350{max-width:275px;width:100%;overflow-y:auto;}"]})]}):(0,B.BX)(ve.gC,{spacing:2,align:"center",children:[(0,B.tZ)("header",{className:"jsx-4196683469",children:(0,B.tZ)(Ne.Z,{truncate:!0,level:4,children:"Unit tests"})}),(0,B.tZ)("section",{className:"jsx-4196683469",children:(0,B.tZ)(Sp,{unitTests:(null===p||void 0===p?void 0:p.unitTests)||null,language:p.lang,isAddingTest:!1,canWrite:!1,trackingContext:f})}),(0,B.tZ)(q.default,{id:"4196683469",children:["header.jsx-4196683469{width:100%;}","section.jsx-4196683469{width:100%;max-width:275px;overflow-y:auto;}"]})]})},Dp=n(1330);function Ap(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,W.Z)(e);if(t){var i=(0,W.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,G.Z)(this,n)}}function Lp(e){switch(e){case xe.Flv.Match:return"The test passes if the expected output is in the actual output.";case xe.Flv.Exact:return"The test passes if the expected output is equal to the actual output.";case xe.Flv.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case xe.Flv.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var Bp=function(e){(0,H.Z)(n,e);var t=Ap(n);function n(){var e;(0,F.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).name=e.constructor.name,e}return n}((0,n(1967).Z)(Error));function Mp(e){var t={id:e.id},n={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":t.output={compatibility:{expected:e.output}};break;case"match":t.output={match:{expected:e.output}};break;case"exact":t.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":t.output={regex:{expression:e.output}}}return{id:e.id,instructions:[n,t]}}function Up(e){var t=e.args,n=e.env,r=t.indexOf("--ps1"),i=t.indexOf("--ps2"),a=t.indexOf("-i");return-1!==r&&null!=t[r+1]&&(t[r+1]=""),-1!==i&&null!=t[i+1]&&(t[i+1]=""),-1!==a&&t.splice(a,1),t.includes("-q")||t.unshift(t.shift(),"-q"),n.PS1="",n.PS2="",{args:t,env:n}}function Xp(e){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,u,d;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRunConfig();case 2:if(r=e.sent){e.next=5;break}throw new Bp("unable to fetch dotreplit run config");case 5:if(!r.interp){e.next=15;break}if("stderred"===(null===(a=null===(i=r.interp)||void 0===i?void 0:i.command)||void 0===a?void 0:a.args[0])&&a.args.shift(),a&&!(a.args.length<1)){e.next=12;break}throw o=new Bp("received interp without command"),pt.Tb(o,(function(e){return e.setExtra("runInfo",d)})),o;case 12:if(!a.args[0].match(/(^|\/)prybar/i)){e.next=14;break}return e.abrupt("return",{execCommand:Up(a)});case 14:return e.abrupt("return",{execCommand:{args:a.args,env:a.env}});case 15:if(null!==(n=r.run)&&void 0!==n&&n.run){e.next=19;break}throw s=new Bp("Bad repl run config received"),pt.Tb(s,(function(e){return e.setExtra("runConfig",r)})),s;case 19:return l=r.run,c=l.run,u=l.compile,c.env.PS1="",c.env.PS2="",d={execCommand:{args:c.args,env:c.env}},u&&(u.env.PS1="",u.env.PS2="",d.buildCommand={args:u.args,env:u.env}),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zp(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hp=function(e){var t=e.test,n=e.onSubmit,r=e.onCancel,i=e.isOpen,a=e.onRequestClose,o=ee.useState({}),s=(0,L.Z)(o,2),l=s[0],c=s[1],u=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||xe.Flv.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},d=(0,Wt.Z)().showError,p=ee.useState(u(t)),f=(0,L.Z)(p,2),m=f[0],h=f[1];ee.useEffect((function(){h(u(t)),c({})}),[t,h]);var g=function(e,t){c((function(n){return Vp(Vp({},n),{},(0,K.Z)({},e,t?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,B.tZ)(Pt.ZP,{isOpen:i,onRequestClose:a,children:(0,B.BX)("div",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,B.tZ)("div",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,B.tZ)(Ne.Z,{level:4,align:"center",children:t?"Edit test: ":"Create test"})}),(0,B.tZ)("div",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,B.tZ)(Yt.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===m||void 0===m?void 0:m.name)||"",validationResults:l.name,onChange:function(e){var t;e.persist(),h((function(t){var n;return Vp(Vp({},t),{},{name:(null===(n=e.target)||void 0===n?void 0:n.value)||""})})),g("name",null===(t=e.target)||void 0===t?void 0:t.value)},maxLength:20})}),(0,B.tZ)("div",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,B.tZ)(Dp.Z,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:m.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),h((function(t){return Vp(Vp({},t),{},{input:e.target.value})}))}})}),(0,B.tZ)("div",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,B.tZ)(Dp.Z,{style:{height:"150px"},label:"Expected output",validationResults:l.output,placeholder:"The expected output for the test",value:m.output,fontFamily:"monospace",translate:"no",onChange:function(e){var t;e.persist(),h((function(t){return Vp(Vp({},t),{},{output:e.target.value})})),g("output",null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,B.tZ)("div",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,B.tZ)("div",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,B.tZ)(au.Z,{items:[xe.Flv.Match,xe.Flv.Exact,xe.Flv.Regex,xe.Flv.Compatibility],renderItemChildComponent:function(e){return(0,B.BX)("a",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,B.tZ)("br",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,B.tZ)(ge.Z,{size:"xsmall",children:Lp(e)})]})},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,go.Z)(e,["innerRef"]);return(0,B.BX)("a",Vp(Vp({ref:t},n),{},{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,B.tZ)(ge.Z,{children:m.type}),(0,B.tZ)(ge.Z,{children:(0,B.tZ)(eu.Z,{})})]}))},onClick:function(e){h((function(t){return Vp(Vp({},t),{},{type:e})}))}})})}),(0,B.BX)("div",{className:q.default.dynamic([["2086048227",[""===m.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,B.tZ)(he.Z,{onClick:r,children:"Cancel"}),(0,B.tZ)(he.Z,{color:"primary",filled:!0,onClick:function(){if(!m.name||!m.output)return d("Test name and expected output must be provided."),m.name||g("name"),void(m.output||g("output"));m.type?(n({testId:null===t||void 0===t?void 0:t.id,name:m.name,input:m.input||"",type:m.type,output:m.output}),h(u(void 0))):d("A test type must be provided")},children:"Save"})]}),(0,B.tZ)(q.default,{id:"2086048227",dynamic:[""===m.type?"--foreground-dimmer":"--foreground-default"],children:[".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;box-sizing:border-box;border-radius:var(--border-radius-4);}",".dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8);}",".dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1;}",".dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;text-align:right;}",".dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var( ".concat(""===m.type?"--foreground-dimmer":"--foreground-default"," );}"),".manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16);}",".manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16);}",".align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8);}",".manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%;}"]})]})})},Gp=function(e){var t=e.test,n=e.onEdit,r=e.onDelete,i=e.onView,a=e.isTeacherView,o=e.status,s=e.isRunning,l=e.onShowFailed,c=e.disableButtons,u="";return o?u=o:s&&(u="Running"),(0,B.BX)("div",{onClick:function(){return i()},className:"jsx-69869520 test",children:[(0,B.BX)("div",{className:"jsx-69869520 test-row",children:[(0,B.tZ)("div",{className:"jsx-69869520 test-text",children:(0,B.tZ)(ge.Z,{size:"large",children:t.name})}),a&&(0,B.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-69869520 test-row",children:(0,B.BX)(B.HY,{children:[(0,B.tZ)(he.Z,{color:"primary",onClick:n,Icon:mp.Z,disabled:c}),(0,B.tZ)(Xs.Z,{width:"var(--space-4)"}),(0,B.tZ)(he.Z,{onClick:r,color:"negative",Icon:hp.Z,disabled:c})]})})]}),(o||s)&&(0,B.BX)(B.HY,{children:[(0,B.tZ)(Xs.Z,{height:2}),(0,B.BX)("div",{className:"jsx-69869520 test-row",children:[(0,B.tZ)("div",{className:"jsx-69869520 test-text",children:(0,B.tZ)(ge.Z,{className:St()([{"status-passed":"Passed"===o},{"status-failed":"Failed"===o}]),children:u})}),(0,B.tZ)(he.Z,{onClick:function(e){return e.stopPropagation(),l(e)},disabled:s,children:"Results"})]})]}),(0,B.tZ)(q.default,{id:"69869520",children:[".test.jsx-69869520{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-8);cursor:pointer;}",".test-row.jsx-69869520 .status-passed{color:var(--accent-positive-default);}",".test-row.jsx-69869520 .status-failed{color:var(--accent-negative-default);}",".test-text.jsx-69869520{width:100%;padding:var(--space-4) 0;padding-right:var(--space-8);word-break:break-all;}",".test.jsx-69869520:hover{background-color:var(--background-higher);}",".test-row.jsx-69869520{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}"]})]})},Wp=function(e){var t=e.text;if(!t)return null;var n=t.split("\n").map((function(e,t){return[e,"".concat(t+1)]}));return""===n[n.length-1][0]&&n.pop(),(0,B.BX)(ve.Ug,{children:[(0,B.tZ)("code",{className:"jsx-3220288616 gutter",children:(0,B.tZ)("pre",{className:"jsx-3220288616",children:n.map((function(e){var t=(0,L.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,B.tZ)("code",{className:"jsx-3220288616 text",children:(0,B.tZ)("pre",{className:"jsx-3220288616",children:t})}),(0,B.tZ)(q.default,{id:"3220288616",children:[".gutter.jsx-3220288616,.text.jsx-3220288616{color:var(--foreground-default);}",".gutter.jsx-3220288616{min-width:1.5em;}",".text.jsx-3220288616{max-width:80%;}"]})]})},Kp=n(37529),qp=n.n(Kp),Yp=function(e){var t=e.expected,n=e.actual;if(!t||!n)return null;var r=n.split("\n"),i=t.split("\n"),a=i.length>r.length?i:r,o=a.map((function(e,t){return[e,"".concat(t+1)]})),s=a.map((function(e,t){var n=t<r.length?r[t]:"",a=t<i.length?i[t]:"";return(0,B.BX)(B.HY,{children:[qp()(n,a).map((function(e,t){var n;return-1===e[0]&&(n={backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}),1===e[0]&&(n={backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}),(0,B.tZ)("span",{style:n,children:e[1]},t)})),(0,B.tZ)("br",{})]})}));return(0,B.BX)(ve.Ug,{children:[(0,B.tZ)("code",{className:"jsx-3220288616 gutter",children:(0,B.tZ)("pre",{className:"jsx-3220288616",children:o.map((function(e){var t=(0,L.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,B.tZ)("code",{className:"jsx-3220288616 text",children:(0,B.tZ)("pre",{className:"jsx-3220288616",children:s})}),(0,B.tZ)(q.default,{id:"3220288616",children:[".gutter.jsx-3220288616,.text.jsx-3220288616{color:var(--foreground-default);}",".gutter.jsx-3220288616{min-width:1.5em;}",".text.jsx-3220288616{max-width:80%;}"]})]})},Qp=function(e){var t,n=e.test,r=e.actualOutput,i=e.isOpen,a=e.isResults,o=e.onRequestClose,s=e.didFail,l=n?Lp(n.type):"",c=null===r||void 0===r?void 0:r.split("\n"),u=null===n||void 0===n?void 0:n.output.split("\n"),d=null===n||void 0===n?void 0:n.output;return s=null!==(t=s)&&void 0!==t?t:"Failed"===(null===n||void 0===n?void 0:n.status),(0,B.BX)(Pt.ZP,{onRequestClose:o,isOpen:i&&void 0!==n,children:[(0,B.BX)("div",{className:"jsx-565168207 test-info",children:[(0,B.BX)(ve.gC,{align:"center",spacing:1,children:[(0,B.BX)(Ne.Z,{level:4,children:[a&&"Test results: ",null===n||void 0===n?void 0:n.name]}),(0,B.BX)(ve.Ug,{spacing:1,children:[(0,B.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":l,className:"jsx-565168207 test-type",children:(0,B.tZ)(ge.Z,{align:"center",size:"small",children:null===n||void 0===n?void 0:n.type})}),a&&(null===n||void 0===n?void 0:n.status)&&(0,B.tZ)("div",{className:"jsx-565168207 "+"test-status ".concat(null===n||void 0===n?void 0:n.status),children:(0,B.tZ)(ge.Z,{align:"center",size:"small",children:null===n||void 0===n?void 0:n.status})})]})]}),(0,B.tZ)(Xs.Z,{height:6}),(0,B.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,B.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,B.tZ)("div",{className:"jsx-565168207 test-io-label",children:a?(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"medium",children:"Expected output"}),(0,B.tZ)(ge.Z,{size:"xsmall",children:(0,B.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-565168207 help",children:"?"})})]}):(0,B.tZ)(ge.Z,{size:"medium",children:"Output"})}),(0,B.tZ)(Xs.Z,{height:"var(--space-8)"}),(0,B.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,B.tZ)(Wp,{text:null===n||void 0===n?void 0:n.output})})]})}),(0,B.tZ)(Xs.Z,{height:2}),(0,B.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,B.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,B.tZ)("div",{className:"jsx-565168207 test-io-label",children:a?(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"medium",children:"Actual output"}),(0,B.tZ)(ge.Z,{size:"xsmall",children:(0,B.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-565168207 help",children:"?"})})]}):(0,B.tZ)(ge.Z,{size:"medium",children:"Input"})}),(0,B.tZ)(Xs.Z,{height:"var(--space-8)"}),(0,B.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,B.tZ)(Wp,{text:a?r:null===n||void 0===n?void 0:n.input})})]})}),a&&(null===n||void 0===n?void 0:n.type)!==xe.Flv.Regex&&s&&u&&c&&(0,B.BX)(B.HY,{children:[(0,B.tZ)(Xs.Z,{height:2}),(0,B.tZ)("div",{className:"jsx-565168207 test-io-row",children:(0,B.BX)("div",{className:"jsx-565168207 test-io-section",children:[(0,B.tZ)("div",{className:"jsx-565168207 test-io-label",children:(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"medium",children:"Difference"}),(0,B.tZ)(ge.Z,{size:"xsmall",children:(0,B.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-565168207 help",children:"?"})})]})}),(0,B.tZ)(Xs.Z,{height:"var(--space-8)"}),(0,B.tZ)("div",{className:"jsx-565168207 test-io-box",children:(0,B.tZ)(Yp,{expected:d,actual:r})})]})})]})]}),(0,B.tZ)(q.default,{id:"565168207",children:[".test-info.jsx-565168207{padding:var(--space-24);display:relative;}",".test-io-line-spacing.jsx-565168207{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".test-io-row.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".test-io-line-number.jsx-565168207{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-io-line.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code);}",".test-io-line-content.jsx-565168207{display:inline-block;}",".test-io-label.jsx-565168207{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-io-label.jsx-565168207 .text{color:var(--foreground-dimmer);}",".test-io-section.jsx-565168207{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;width:100%;}",".test-io-box.jsx-565168207{height:100%;border:1px solid var(--outline-dimmest);box-sizing:border-box;border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow-x:auto;}",".test-io-box.jsx-565168207 .text{white-space:nowrap;}",".test-type.jsx-565168207,.test-status.jsx-565168207{background-color:var(--background-highest);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".test-status.jsx-565168207 .text{color:var(--white);}",".test-status.Passed.jsx-565168207{background-color:var(--accent-positive-default);}",".test-status.Failed.jsx-565168207{background-color:var(--accent-negative-default);}",".help.jsx-565168207{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;}"]})]})};function Jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jp(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ef=function(e){var t,n,r,i,a,o,s=e.wid,l=e.pud,c=(0,Zt.J)(s,l,"autograder"),u=(0,L.Z)(c,1)[0],d=(0,ye.Z)(),p=(0,at.I0)(),f=(0,xe.CHr)({variables:{replId:d}}),m=(0,xe.Nej)({onError:function(e){return C(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?C(e.deleteTemplateTest.message):(S("Test deleted!"),f.refetch())}}),h=(0,L.Z)(m,2),g=h[0],v=h[1],b=(0,xe.AAz)({onError:function(e){return C(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?C(e.updateTemplateTest.message):S("Test updated!")}}),y=(0,L.Z)(b,2),x=y[0],w=y[1],k=(0,xe.pVf)({onError:function(e){return C(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?C(e.createTemplateTest.message):(S("Test created!"),f.refetch())}}),Z=(0,L.Z)(k,2),j=Z[0],O=Z[1],E=v.loading&&v.loading||w.called&&w.loading||O.loading&&O.loading||f.loading,_=(0,Wt.Z)(),C=_.showError,S=_.showConfirm,P=ee.useState(!1),N=(0,L.Z)(P,2),T=N[0],I=N[1],R=ee.useState(!1),D=(0,L.Z)(R,2),A=D[0],M=D[1],U=ee.useState(!1),X=(0,L.Z)(U,2),F=X[0],z=X[1],V=ee.useState(),H=(0,L.Z)(V,2),G=H[0],W=H[1],K=(0,xe.vkX)({onCompleted:function(e){e&&e.saveIOTestResults&&C(e.saveIOTestResults.message)}}),Y=(0,L.Z)(K,1)[0],Q=ee.useState(),J=(0,L.Z)(Q,2),$=J[0],te=J[1];ee.useEffect((function(){var e;if($!==u.status&&u.status===gd.Cleanup&&null!==(e=f.data)&&void 0!==e&&e.repl){var t=f.data.repl;if("Repl"===t.__typename&&t.owner){var n={IOTests:u.IOTests,replId:t.id};u.IOTests.some((function(e){return!e.results}))&&pt.$e((function(e){e.setTag("io-testing","true"),pt.Tb(new Error("Invalid test value received in test cleanup"),{contexts:n})})),Y({variables:{teamId:t.owner.id,replId:t.id,results:u.IOTests.map((function(e){var t,n;return{testId:e.id,status:null!==(t=e.results)&&void 0!==t&&t.passed?xe.kQ0.Passed:xe.kQ0.Failed,output:(null===(n=e.results)||void 0===n?void 0:n.actualOutput)||""}}))}})}}}),[$,u.status,u.IOTests,Y,f.data]),ee.useEffect((function(){te(u.status)}),[u.status]);var ne="Repl"===(null===(t=f.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)?null===(r=f.data)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.ioTests:[];ee.useEffect((function(){var e,t,n;f.loading||"Repl"===(null===(e=f.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)&&p({type:"AUTOGRADER_TESTS_RECEIVED",tests:null===(n=f.data)||void 0===n?void 0:n.repl.ioTests.map((function(e){return $p($p({},e),{},{expectedOutput:e.output})})),wid:s,pud:l})}),[p,l,s,f.loading,f.data]);var re="Repl"===(null===(a=f.data)||void 0===a?void 0:a.repl.__typename)&&f.data.repl.isProject,ie=ee.useCallback((function(e){if(u.IOTests[e]){var t=u.IOTests[e].results;if(void 0!==t)return t.passed?"Passed":"Failed"}}),[u.IOTests]);return f.error?(0,B.BX)("div",{className:"jsx-4204825862 wrapper",children:[(0,B.tZ)(ge.Z,{align:"center",children:"Unable to fetch tests"}),(0,B.tZ)(q.default,{id:"4204825862",children:[".wrapper.jsx-4204825862{padding:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]}):(0,B.BX)("div",{className:"jsx-411072301 tests-panel",children:[(0,B.tZ)("div",{className:"jsx-411072301 tests-header",children:(0,B.tZ)(Ne.Z,{level:4,children:"Input/Output Tests"})}),f.loading?(0,B.tZ)("div",{className:"jsx-411072301 spinner",children:(0,B.tZ)(Nt.Z,{})}):(0,B.BX)("div",{className:"jsx-411072301 tests",children:[(0,B.BX)("div",{className:"jsx-411072301 button-bar",children:[re&&(0,B.tZ)(he.Z,{color:"green",Icon:qt.Z,className:"create-test-button",disabled:u.status!==gd.Idle,onClick:function(){W(void 0),I(!0)},children:"Create test"}),re||0!==u.IOTests.length?(0,B.tZ)(he.Z,{color:"positive",Icon:rl.Z,onClick:function(){return p({type:"START_AUTOGRADER",wid:s,pud:l})},disabled:E||u.status!==gd.Idle,children:"Run tests"}):(0,B.tZ)(ge.Z,{children:"This project has no tests "})]}),ne.map((function(e,t){return(0,B.tZ)(Gp,{test:e,onEdit:function(){W($p($p({},e),{},{index:t,status:ie(t)})),I(!0)},onDelete:function(){g({variables:{testId:e.id}})},onView:function(){W($p($p({},e),{},{index:t,status:ie(t)})),M(!0),z(!1)},onShowFailed:function(){W($p($p({},e),{},{index:t,status:ie(t)})),M(!0),z(!0)},isRunning:u.status!==gd.Idle&&t===u.currentTest,isTeacherView:re,status:ie(t),disableButtons:u.status!==gd.Idle},e.id)})),(0,B.tZ)(Hp,{test:G,isOpen:T,readOnly:!re,onRequestClose:function(){I(!1),W(void 0)},onCancel:function(){I(!1),W(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(x({variables:{input:e}}),W(void 0)):"Repl"===(null===(t=f.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&null!==(r=f.data)&&void 0!==r&&null!==(i=r.repl)&&void 0!==i&&i.template&&j({variables:{input:$p($p({},e),{},{templateId:f.data.repl.template.id})}}),I(!1)}}),(0,B.tZ)(Qp,{test:G,isOpen:A,actualOutput:G&&(null===(o=u.IOTests[G.index].results)||void 0===o?void 0:o.actualOutput),isResults:F,onRequestClose:function(){M(!1),W(void 0)}})]}),(0,B.tZ)(q.default,{id:"411072301",children:[".flex-grow.jsx-411072301{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".spacer-1.jsx-411072301{padding:var(--space-4);}",".tests-header.jsx-411072301{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:relative;height:var(--space-48);padding:var(--space-16) var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".button-bar.jsx-411072301{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);}",".button-bar.jsx-411072301>button{margin-right:var(--space-8);}",".spinner.jsx-411072301{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}",".tests-panel.jsx-411072301{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto;}",".section.jsx-411072301{height:calc(100% - 50px);}"]})]})},tf=n(18947),nf=n(46829),rf=n(14100);function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?af(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sf={name:"xq1r65",styles:"flex:none;flex-grow:0"},lf=function(){var e,t,n,r,i,a,o,s=(0,Pe.Z)(),l=s.iotester,c=s.dotReplit,u=s.container,d=(0,Wt.Z)(),p=d.showError,f=d.showConfirm,m=ee.useState([]),h=(0,L.Z)(m,2),g=h[0],v=h[1],b=ee.useState(),y=(0,L.Z)(b,2),x=y[0],w=y[1],k=ee.useState(u.getConnectionState()),Z=(0,L.Z)(k,2),j=Z[0],O=Z[1],E=ee.useState(l.state),_=(0,L.Z)(E,2),C=_[0],S=_[1],P=ee.useState(),N=(0,L.Z)(P,2),T=N[0],I=N[1],R=(0,nf.useApolloClient)();ee.useEffect((function(){return u.onConnectionStateChanged(O)}),[O,u]);var D=(0,ye.Z)(),A=(0,xe.CHr)({variables:{replId:D}}),M="Repl"===(null===(e=A.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)?A.data.repl:null,U="Team"===(null===M||void 0===M||null===(n=M.owner)||void 0===n?void 0:n.__typename)&&M.owner.id||null,X=(0,xe.vkX)({onCompleted:function(e){e&&e.saveIOTestResults&&p(e.saveIOTestResults.message)}}),F=(0,L.Z)(X,1)[0];ee.useEffect((function(){var e=[l.onStateChanged((function(e){S(e),U&&e===tf.Z.Idle&&v((function(e){return F({variables:{replId:D,results:Object.values(e),teamId:U}}).catch((function(t){pt.Tb(t,(function(t){return t.setExtras({results:e,payload:T})}))})),e}))})),l.onError((function(e){p(e.message)})),l.onTestResult((function(e){v((function(t){var n,r=of(of({},t[e.testId]),{},{testId:e.testId,status:"passed"===e.body?xe.kQ0.Passed:xe.kQ0.Failed});"error"!==e.body||r.output||(r.output=null!==(n=e.error.stderr)&&void 0!==n?n:"");return of(of({},t),{},(0,K.Z)({},e.testId,r))}))})),l.onInstructionResult((function(e){v((function(t){var n,r,i,a,o,s=Math.abs(e.instructionId),l="";switch(e.body){case"passed":l+=null!==(n=e.passed.output)&&void 0!==n?n:"";break;case"failed":l+=null!==(r=e.failed.output)&&void 0!==r?r:"";break;case"timeout":l+=null!==(i=e.timeout.output)&&void 0!==i?i:"";break;case"error":l+=e.error.message}return of(of({},t),{},(0,K.Z)({},s,of(of({},t[s]),{},{testId:s,output:(null!==(a=null===(o=g[s])||void 0===o?void 0:o.output)&&void 0!==a?a:"")+l})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[g,p,S,l,D,U,T,F]),ee.useEffect((function(){var e=function(e){e instanceof Error&&p(e.message),pt.Tb(e)};return Xp(c).then(w).catch(e),c.watch((function(){return Xp(c).then(w).catch(e)}))}),[c,w]);var z=null===M||void 0===M?void 0:M.ioTests,V=(0,xe.Nej)({onError:function(e){return p(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?p(e.deleteTemplateTest.message):(f("Test deleted!"),A.refetch())}}),H=(0,L.Z)(V,2),G=H[0],W=H[1],Y=(0,xe.AAz)({onError:function(e){return p(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?p(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(f("Test updated!"),R.writeFragment({fragment:xe.GgA,data:e.updateTemplateTest}))}}),Q=(0,L.Z)(Y,2),J=Q[0],$=Q[1],te=(0,xe.pVf)({onError:function(e){return p(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?p(e.createTemplateTest.message):(f("Test created!"),A.refetch())}}),ne=(0,L.Z)(te,2),re=ne[0],ie=ne[1],ae=A.loading||W.called&&W.loading||$.called&&$.loading||ie.called&&ie.loading;ee.useEffect((function(){ae||I(x&&z&&z.length>0?{runInfo:x,tests:z.map(Mp)}:void 0)}),[z,x,I,ae]);var oe=ee.useState(!1),se=(0,L.Z)(oe,2),le=se[0],ce=se[1],ue=ee.useState(!1),de=(0,L.Z)(ue,2),pe=de[0],fe=de[1],me=ee.useState(!1),ve=(0,L.Z)(me,2),be=ve[0],we=ve[1],ke=ee.useState(),Ze=(0,L.Z)(ke,2),je=Ze[0],Oe=Ze[1],Ee=(0,Te.Z)("iotester","show_test_update_tooltip"),_e=Ee.shouldDisplay,Ce=Ee.register,Se=Ee.dismiss;ee.useEffect((function(){Ce()}),[Ce]);var Ie="undefined"!==typeof je&&"Repl"===(null===(r=A.data)||void 0===r?void 0:r.repl.__typename)&&A.data.repl.ioTests[je]||void 0,Re="Repl"===(null===(i=A.data)||void 0===i?void 0:i.repl.__typename)&&A.data.repl.isProject;if(A.error)return(0,B.BX)("div",{className:"jsx-707768097 wrapper",children:[(0,B.tZ)(ge.Z,{align:"center",children:"Unable to fetch tests"}),(0,B.tZ)(q.default,{id:"707768097",children:[".wrapper.jsx-707768097{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]});var De=function(e){var t;if(void 0!==(null===(t=g[e])||void 0===t?void 0:t.status))return g[e].status===xe.kQ0.Passed?"Passed":"Failed"};return(0,B.BX)("div",{className:"jsx-2848896096 tests-panel",children:[(0,B.tZ)("div",{className:"jsx-2848896096 tests-header",children:(0,B.tZ)(Ne.Z,{level:4,children:"Input/Output Tests"})}),A.loading?(0,B.tZ)("div",{className:"jsx-2848896096 spinner",children:(0,B.tZ)(Nt.Z,{})}):(0,B.BX)("div",{className:"jsx-2848896096 tests",children:[(0,B.BX)("div",{className:"jsx-2848896096 button-bar",children:[Re&&(0,B.tZ)(he.Z,{color:"green",Icon:qt.Z,className:"create-test-button",disabled:ae||C!==tf.Z.Idle,onClick:function(){Oe(void 0),ce(!0)},children:"Create test"}),!Re&&z&&0===z.length?(0,B.tZ)(ge.Z,{children:"This project has no tests "}):(0,B.tZ)(he.Z,{color:"positive",Icon:rl.Z,onClick:function(){var e;if(!T||"Repl"!==(null===M||void 0===M?void 0:M.__typename)||"Team"!==(null===(e=M.owner)||void 0===e?void 0:e.__typename)||l.state!==tf.Z.Idle){var t=new Error("no tests or run info");throw pt.Tb(t,(function(e){return e.setExtra("payload",T)})),t}v({}),l.run(T).catch((function(e){pt.Tb(e,(function(e){return e.setExtra("payload",T)})),p(e.message)}))},disabled:ae||C!==tf.Z.Idle||!T||j!==rf.e.CONNECTED,children:"Run tests"})]}),_e&&(0,B.BX)(or.Z,{css:[Mn.l0.borderRadius(8),Mn.l0.p(8),{backgroundColor:Mn.TV.accentPositiveDimmest,flexDirection:"row",borderWidth:1,borderColor:Mn.TV.accentPositiveDimmer,alignItems:"center",color:Mn.TV.accentPositiveStrongest},"",""],children:[(0,B.BX)("p",{className:"jsx-2848896096",children:["We\u2019re updating the way I/O tests work on Replit."," ",(0,B.tZ)(jt.default,{href:"https://blog.replit.com/io-testing-v2",children:(0,B.tZ)("a",{css:(0,tr.iv)({color:Mn.TV.accentPositiveStrongest,textDecoration:"underline"},"",""),className:"jsx-2848896096",children:"Read more here."})})]}),(0,B.tZ)(Pn.Z,{alt:"close",colorway:"positive",onClick:function(){return Se()},css:sf,children:(0,B.tZ)(Kt.Z,{})})]}),null===z||void 0===z?void 0:z.map((function(e,t){return(0,B.tZ)(Gp,{test:e,onEdit:function(){Oe(t),ce(!0)},onDelete:function(){G({variables:{testId:e.id}})},onView:function(){Oe(t),fe(!0),we(!1)},onShowFailed:function(){Oe(t),fe(!0),we(!0)},isRunning:C!==tf.Z.Idle&&void 0!==g[e.id]&&void 0===g[e.id].status,isTeacherView:Re,status:De(e.id),disableButtons:ae||C!==tf.Z.Idle},e.id)})),(0,B.tZ)(Hp,{test:Ie,isOpen:le,readOnly:!Re,onRequestClose:function(){ce(!1),Oe(void 0)},onCancel:function(){ce(!1),Oe(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(J({variables:{input:e}}),Oe(void 0)):"Repl"===(null===(t=A.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&null!==(r=A.data)&&void 0!==r&&null!==(i=r.repl)&&void 0!==i&&i.template&&re({variables:{input:of(of({},e),{},{templateId:A.data.repl.template.id})}}),ce(!1)}}),(0,B.tZ)(Qp,{test:Ie,isOpen:pe,actualOutput:"undefined"!==typeof Ie?null===(a=g[Ie.id])||void 0===a?void 0:a.output:void 0,didFail:Ie&&(null===(o=g[Ie.id])||void 0===o?void 0:o.status)===xe.kQ0.Failed,isResults:be,onRequestClose:function(){fe(!1),Oe(void 0)}})]}),(0,B.tZ)(q.default,{id:"2848896096",children:[".flex-grow.jsx-2848896096{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".spacer-1.jsx-2848896096{padding:var(--space-4);}",".tests-header.jsx-2848896096{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4) 0 var(--space-8) 0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}",".button-bar.jsx-2848896096{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8);}",".button-bar.jsx-2848896096>button{margin-right:var(--space-8);margin-bottom:var(--space-8);}",".spinner.jsx-2848896096{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}",".tests-panel.jsx-2848896096{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto;}",".section.jsx-2848896096{height:calc(100% - 50px);}"]})]})};function cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var df,pf=function(e){var t,n=(0,ye.Z)(),r=(0,xe.CHr)({variables:{replId:n}}),i=r.data,a=r.loading,o="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)&&i.repl;return a||!o?(0,B.tZ)(Nt.Z,{}):"Team"===(null===(t=o.owner)||void 0===t?void 0:t.__typename)&&o.owner.hasIOTestingV2?(0,B.tZ)(lf,uf({},e)):(0,B.tZ)(ef,uf({},e))};!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(df||(df={}));var ff=function(e){var t,n,r=e.wid,i=e.pud,a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=ee.useRef(df.None),u=(0,ye.Z)(),d=(0,at.I0)(),p=(0,xe.CHr)({variables:{replId:u}}),f=p.loading;if(ee.useEffect((function(){var e,t,n=null===(e=p.data)||void 0===e?void 0:e.repl;if("Repl"===(null===n||void 0===n?void 0:n.__typename)){var a=n.unitTests,o=n.ioTests,s=df.Choose;(s=o.length>0?df.IO:null!==a&&void 0!==a&&a.tests&&(null===(t=a.tests)||void 0===t?void 0:t.length)>0||null!==a&&void 0!==a&&a.meta?df.Unit:n.currentUserPermissions.writeTests?c.current!==df.None?c.current:df.Choose:df.None)===df.Unit?d({type:"AUTOGRADER_DISABLED",wid:r,pud:i}):s===df.IO&&d({type:"AUTOGRADER_ENABLED",wid:r,pud:i}),l(s)}}),[p.data,r,i,d]),f)return(0,B.BX)("div",{className:"jsx-707544915",children:[(0,B.tZ)(Nt.Z,{}),(0,B.tZ)(q.default,{id:"707544915",children:["div.jsx-707544915{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]});var m="Repl"===(null===(t=p.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&Qd(p.data.repl.lang.id);return(0,B.BX)("div",{className:"jsx-3272328548 testing-controller",children:[s===df.None&&(0,B.tZ)("div",{className:"jsx-3272328548 empty",children:(0,B.tZ)(ge.Z,{children:"No tests found"})}),s===df.Choose&&(0,B.BX)(ve.gC,{align:"center",spacing:2,children:[(0,B.tZ)(Ne.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,B.BX)("div",{onClick:function(){d({type:"AUTOGRADER_DISABLED",wid:r,pud:i}),l(df.Unit),c.current=df.Unit},className:"jsx-3272328548 "+(St()("panel",{"is-disabled":!m})||""),children:[(0,B.tZ)(Ne.Z,{level:4,children:"Unit tests"}),(0,B.tZ)(ge.Z,{align:"center",children:m?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,B.tZ)("div",{onClick:function(){l(df.IO),d({type:"AUTOGRADER_ENABLED",wid:r,pud:i}),c.current=df.IO},className:"jsx-3272328548 panel",children:(0,B.BX)(ve.gC,{spacing:1,align:"center",children:[(0,B.tZ)(Ne.Z,{level:4,children:"Input output tests"}),(0,B.tZ)(ge.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),s===df.IO&&(0,B.tZ)(pf,{wid:r,pud:i}),s===df.Unit&&(0,B.tZ)(Rp,{onBack:function(){return l(df.Choose)}}),(0,B.tZ)(q.default,{id:"3272328548",children:[".empty.jsx-3272328548{padding:var(--space-16);border-radius:var(--border-radius-4);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".testing-controller.jsx-3272328548{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);box-shadow:var(--shadow-1);}",".panel.jsx-3272328548{width:100%;border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8);}",".panel.jsx-3272328548:hover{background-color:var(--background-root);}",".panel.is-disabled.jsx-3272328548{opacity:0.5;pointer-events:none;}"]})]})};function mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mf(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gf=/(^\u001b\[33m\ueea7\u001b\[00m ?)|(\u001b\[33m\ueea7\u001b\[00m ?$)/,vf=/\u001b\[\d{1,2}[a-zA-Z]|\u001b\[?1h|\ueea7/gm,bf=/\s+$|\n/gm;function yf(e){return e.replace(vf,"").replace(bf,"")}function xf(e){return e.messages.join("").replace(gf,"")}var wf=(0,wd.Z)((function(e,t,n,r){switch(n.type){case"START_AUTOGRADER":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,X.Z)(U().mark((function e(r,i){var a;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(a=(0,Zt.Z)(i(),t,n,"autograder")).IOTests.length){e.next=4;break}return r((0,ce.P)({type:"error",content:"No tests available",time:5e3})),e.abrupt("return");case 4:if(a.status===gd.Idle){e.next=6;break}return e.abrupt("return");case 6:r({type:"DISABLE_CONSOLE",wid:t}),r((0,bt.Rl)({wid:t})),r({type:"ENABLE_PIPE_MODE",wid:t}),r({type:"AUTOGRADER_STARTED",wid:t}),r({type:"PREPARE_AUTOGRADER_TEST",wid:t,pud:n}),(0,mt.track)(mt.events.AUTOGRADER_STARTED);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"AUTOGRADER_TEST_TIMEOUT":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,X.Z)(U().mark((function e(r,i){var a;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=(0,Zt.Z)(i(),t,n,"autograder")).status===gd.Testing){e.next=3;break}return e.abrupt("return");case 3:r((0,ce.P)({type:"error",content:"Test timed out",time:5e3})),a.IOTests[a.currentTest].results={passed:!1,actualOutput:xf(a)},r({type:"AUTOGRADER_TEST_COMPLETED",wid:t,IOTests:a.IOTests}),a.currentTest+1===a.IOTests.length?r({type:"CLEANUP_AUTOGRADER",wid:t,pud:n}):r({type:"PREPARE_AUTOGRADER_TEST",wid:t,pud:n});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"PREPARE_AUTOGRADER_TEST":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,X.Z)(U().mark((function e(r,i){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,Zt.Z)(i(),t,n,"autograder").status===gd.Preparing){e.next=3;break}return e.abrupt("return");case 3:r((0,bt.Rl)({wid:t})),r({type:"RUN_REPL",wid:t});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"EVAL_ENDED":return function(e){var t=e.wid,n=e.pud;return function(){var e=(0,X.Z)(U().mark((function e(r,i){var a,o,s,l;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=(0,Zt.Z)(i(),t,n,"autograder")).status===gd.Testing&&a.timeout){e.next=3;break}return e.abrupt("return");case 3:clearTimeout(a.timeout),o=a.IOTests[a.currentTest],s=xf(a).replace("\x1b[0m\x1b[90mHint: hit control+c anytime to enter REPL.\x1b[0m",""),l=!1,e.t0=o.type,e.next="compatibility"===e.t0?10:"exact"===e.t0?12:"match"===e.t0?14:"regex"===e.t0?16:17;break;case 10:return yf(o.expectedOutput).includes(yf(s))||(l=!0),e.abrupt("break",17);case 12:return s!==o.expectedOutput&&s!==o.expectedOutput+"\n"&&(l=!0),e.abrupt("break",17);case 14:return s.includes(o.expectedOutput)||(l=!0),e.abrupt("break",17);case 16:s.match(o.expectedOutput)||(l=!0);case 17:a.IOTests[a.currentTest].results={passed:!l,actualOutput:"compatibility"===o.type?s.replace(vf,""):s},r({type:"AUTOGRADER_TEST_COMPLETED",wid:t,IOTests:a.IOTests}),a.currentTest+1===a.IOTests.length?r({type:"CLEANUP_AUTOGRADER",wid:t,pud:n}):r({type:"PREPARE_AUTOGRADER_TEST",wid:t,pud:n});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t});case"CLEANUP_AUTOGRADER":return function(e){var t=e.wid,n=e.pud,r=e.wait;return function(){var e=(0,X.Z)(U().mark((function e(i,a){var o,s,l;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,Zt.Z)(a(),t,n,"autograder"),s=o.status,l=o.IOTests,s===gd.Cleanup){e.next=3;break}return e.abrupt("return");case 3:return i({type:"DISABLE_PIPE_MODE",wid:t}),e.next=6,r((function(e){return"PIPE_MODE_DISABLED"===e.type}));case 6:return i({type:"RUN_REPL",wid:t}),e.next=9,r((function(e){return"SHELLRUNNER_STARTED"===e.type||"INTERPER_STARTED"===e.type}));case 9:return i({type:"STOP_EVAL",wid:t}),e.next=12,r((function(e){return"EVAL_ENDED"===e.type}));case 12:i({type:"CLEAR_CONSOLE",wid:t}),l.every((function(e){var t;return null===(t=e.results)||void 0===t?void 0:t.passed}))?i((0,ce.P)({type:"confirm",content:"Tests passed",time:5e3})):i((0,ce.P)({type:"error",content:"Tests failed",time:5e3})),i({type:"ENABLE_CONSOLE",wid:t}),i({type:"AUTOGRADER_STOPPED",wid:t});case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t,wait:r});case"AUTOGRADER_TESTS_RECEIVED":return function(e){var t=e.wid,n=e.pud,r=e.action;return function(){var e=(0,X.Z)(U().mark((function e(i,a){var o,s,l;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.tests){e.next=2;break}return e.abrupt("return");case 2:o=(0,Zt.Z)(a(),t,n,"autograder"),s=o.IOTests,l=r.tests.map((function(e){var t=s.find((function(t){return t.id===e.id}));return t&&(null===t||void 0===t?void 0:t.input)===e.input&&(null===t||void 0===t?void 0:t.expectedOutput)===e.expectedOutput?hf(hf({},e),{},{results:t.results}):e})),i({type:"SET_AUTOGRADER_TESTS",tests:l,wid:t});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t,action:n});case"INTERPER_STARTED":case"SHELLRUNNER_STARTED":return function(e){var t=e.wid,n=e.pud,r=e.action;return function(){var e=(0,X.Z)(U().mark((function e(i,a){var o,s,l,c;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=(0,Zt.Z)(a(),t,n,"autograder")).status===gd.Preparing){e.next=3;break}return e.abrupt("return");case 3:i({type:"AUTOGRADER_TEST_READY",wid:t,pud:n}),s=o.IOTests[o.currentTest],l=setTimeout((function(){return i({type:"AUTOGRADER_TEST_TIMEOUT",wid:t,pud:n})}),15e3),"INTERPER_STARTED"===r.type?c="interper":"SHELLRUNNER_STARTED"===r.type&&(c="shellrunner"),i({type:"AUTOGRADER_TEST_STARTED",wid:t,pud:n,timeout:l,service:c}),s.input&&i({type:"CONSOLE_INPUT",wid:t,input:s.input+"\n"});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({wid:e,pud:t,action:n});default:return null}}));function kf(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{IOTests:[],messages:[],status:gd.Idle,currentTest:0},n=arguments.length>1?arguments[1]:void 0;if(t.status===gd.Disabled&&"AUTOGRADER_ENABLED"!==n.type)return t;switch(n.type){case"AUTOGRADER_TEST_COMPLETED":return hf(hf({},t),{},{IOTests:n.IOTests||t.IOTests,currentTest:t.currentTest+1,status:gd.Preparing});case"AUTOGRADER_TEST_READY":return hf(hf({},t),{},{messages:[]});case"AUTOGRADER_TEST_STARTED":return n.timeout?hf(hf({},t),{},{status:gd.Testing,timeout:n.timeout,evalerService:n.service}):t;case"AUTOGRADER_STARTED":return hf(hf({},t),{},{status:gd.Preparing,currentTest:0,IOTests:t.IOTests.map((function(e){return hf(hf({},e),{},{results:void 0})}))});case"SET_AUTOGRADER_TESTS":return n.tests?hf(hf({},t),{},{IOTests:n.tests}):t;case"AUTOGRADER_STOPPED":return hf(hf({},t),{},{status:gd.Idle});case"AUTOGRADER_DISABLED":return hf(hf({},t),{},{status:gd.Disabled});case"AUTOGRADER_ENABLED":return hf(hf({},t),{},{status:gd.Idle});case"NEW_CONSOLE_MESSAGE":return null!==(e=n.message)&&void 0!==e&&e.data?hf(hf({},t),{},{messages:t.messages.concat(n.message.data)}):t;case"CLEANUP_AUTOGRADER":return hf(hf({},t),{},{status:gd.Cleanup});default:return t}}var Zf=function(){return(0,B.BX)("div",{className:"jsx-2087355348 unit-tests",children:[(0,B.tZ)(Rp,{}),(0,B.tZ)(q.default,{id:"2087355348",children:[".unit-tests.jsx-2087355348{background-color:var(--background-default);width:100%;height:100%;overflow-y:auto;padding:var(--space-8);}"]})]})},jf=n(37424),Of=n(67193),Ef=n(47841),_f=n(42436);function Cf(e){var t=function(){var e=ee.useRef(!1),t=ee.useState(!1),n=(0,L.Z)(t,2),r=n[0],i=n[1],a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=ee.useState(null),u=(0,L.Z)(c,2),d=u[0],p=u[1];return ee.useEffect((function(){return e.current=!0,function(){e.current=!1}})),[function(t){i(!0),t.then((function(t){e.current&&(i(!1),l(t))})).catch((function(t){e.current&&(i(!1),p(t))}))},{loading:r,result:s,error:d}]}(),n=(0,L.Z)(t,2),r=n[0],i=n[1],a=i.loading,o=i.error,s=i.result;ee.useEffect((function(){r(window.fetch("https://whatsnew--util.repl.co/".concat(e,".json")).then((function(e){return e.json()})))}),[]);var l=ee.useCallback((function(){if(!s)return!0;var e=window.localStorage.getItem("changelog/read");return!!e&&s.updated<=parseInt(e,10)}),[s]);return{loading:a,error:o,changelog:null===s||void 0===s?void 0:s.log,getReadStatus:l,markRead:function(){s&&window.localStorage.setItem("changelog/read",s.updated.toString())}}}var Sf=n(63169);function Pf(e){var t=e.direction,n=e.url,r=(0,B.BX)("span",{className:q.default.dynamic([["2863519783",["left"===t?"rotate(90deg)":"rotate(-90deg)"]]])+" "+(St()("chevron",{hoverable:void 0!==n})||""),children:[(0,B.tZ)(eu.Z,{size:"large",color:n?"var(--foreground-dimmest)":"var(--background-root)"}),(0,B.tZ)(q.default,{id:"2863519783",dynamic:["left"===t?"rotate(90deg)":"rotate(-90deg)"],children:[".chevron.__jsx-style-dynamic-selector{display:inline-block;border-radius:var(--border-radius-4);-webkit-transition:0.2s all;transition:0.2s all;}",".chevron.__jsx-style-dynamic-selector svg{width:24px;height:24px;-webkit-transform:".concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-ms-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";}"),".hoverable.__jsx-style-dynamic-selector{cursor:pointer;}",".hoverable.chevron.__jsx-style-dynamic-selector svg:hover{stroke:var(--accent-primary-default);}",".hoverable.__jsx-style-dynamic-selector:hover{background:var(--accent-primary-default);}"]})]});return n?(0,B.tZ)(jt.default,{href:n,children:(0,B.tZ)("a",{children:r})}):r}var Nf,Tf=function(){return(0,B.BX)("span",{title:"late",className:"jsx-525860581",children:["late",(0,B.tZ)(q.default,{id:"525860581",children:["span.jsx-525860581{display:inline-block;color:var(--accent-negative-default);border:1px solid var(--accent-negative-default);border-radius:var(--border-radius-4);padding:1px var(--space-4);font-size:var(--font-size-small);}"]})]})};function If(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?If(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):If(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Df(e){var t=Nf.NotStarted,n=Nf.Started,r=Nf.Submitted,i=Nf.Reviewed;switch(e){case t:return"Not Started";case n:return"Not submitted yet";case r:return"Submitted";case i:return"Reviewed";default:return""}}function Af(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?Nf.Submitted:!e.timeSubmitted&&e.timeLastReviewed?Nf.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?Nf.Submitted:Nf.Reviewed:void 0:Nf.Started:Nf.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(Nf||(Nf={}));var Lf=function(e,t){if(e)return t?"".concat(e,"#").concat(t):e};function Bf(e){var t=e.result,n=e.selected,r=e.current,i=e.isLate,a=(0,go.Z)(e,["result","selected","current","isLate"]),o=(0,xn.Z)(),s=r?"":Lf(t.url,o),l=(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)("div",{"data-microtip-position":"right","aria-label":Df(t.status),role:"tooltip",className:"jsx-2023294099 indicator-container",children:(0,B.tZ)("div",{className:"jsx-2023294099 "+(St()("indicator",t.status)||"")})}),(0,B.tZ)(le.Z,{url:t.image}),(0,B.tZ)("div",{className:"jsx-2023294099 name",children:t.name}),i&&(0,B.tZ)(Tf,{}),(0,B.tZ)(q.default,{id:"2023294099",children:[".indicator-container.jsx-2023294099{width:10px;height:10px;box-sizing:content-box;padding:var(--space-4);}",".name.jsx-2023294099{color:var(--foreground-dimmer);font-size:var(--font-size-default);max-width:230px;text-overflow:ellipsis;overflow:hidden;}",".indicator.jsx-2023294099{width:8px;height:8px;border-radius:16px;}",".indicator.submitted.jsx-2023294099{background:var(--accent-yellow-dimmer);}",".indicator.reviewed.jsx-2023294099{background:var(--accent-positive-default);}",".indicator.started.jsx-2023294099{border:2px solid var(--foreground-dimmest);}"]})]});return(0,B.BX)("div",Rf(Rf({},a),{},{className:"jsx-870481965 "+(St()("result",t.status,{selected:n,current:r})||""),children:[s?(0,B.BX)(B.HY,{children:[(0,B.tZ)(jt.default,{href:s,children:(0,B.tZ)("a",{className:"jsx-870481965 result-link",children:l})},t.submissionId),(0,B.tZ)("a",{href:s,target:"_blank",role:"tooltip","data-microtip-position":"left","aria-label":"Open in a new tab",className:"jsx-870481965 result-external-link",children:(0,B.tZ)(Sf.Z,{color:"var(--foreground-default)"})})]}):(0,B.tZ)("div",{className:"jsx-870481965 result-link",children:l}),(0,B.tZ)(q.default,{id:"870481965",children:[".result.jsx-870481965{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;background-color:var(--background-default);}",".result.not-started.jsx-870481965{opacity:0.4;}",".result.current.jsx-870481965{background-color:var(--background-root);}",".selected.jsx-870481965{background-color:var(--background-root);opacity:1 !important;}",".result-link.jsx-870481965{-webkit-text-decoration:none;text-decoration:none;padding:var(--space-8);}",".result-external-link.jsx-870481965{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);opacity:0;margin-left:auto;}",".result.jsx-870481965:hover .result-external-link.jsx-870481965{opacity:1;}",".result-external-link.jsx-870481965 svg{-webkit-transition:0.3s stroke;transition:0.3s stroke;}",".result-external-link.jsx-870481965:hover svg{stroke:var(--accent-primary-default);}"]})]}))}var Mf=function(e){var t,n,r,i=e.team,a=e.submission,o=e.submissionList,s=e.template,l=(0,ae.useRouter)(),c=(0,xn.Z)(),u=ee.useState([]),d=(0,L.Z)(u,2),p=d[0],f=d[1],m=ee.useState(""),h=(0,L.Z)(m,2),g=h[0],v=h[1],b=(0,$t.Kb)({items:p,defaultHighlightedIndex:0,onSelectedItemChange:function(e){var t=e.selectedItem;p.length&&t&&-1!==e.highlightedIndex&&t.url&&l.push(t.url)}}),y=b.isOpen,x=b.getInputProps,w=b.getMenuProps,k=b.getItemProps,Z=b.openMenu,j=b.highlightedIndex,O=ee.useRef(null);ee.useEffect((function(){y&&O.current&&O.current.focus()}),[y]);var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(a.isGroupSubmission){var t=o;0!==e.length&&(t=t.filter((function(t){var n;return null===(n=t.submissionGroup)||void 0===n?void 0:n.users.some((function(t){var n;return null===(n=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var n=t.map((function(e){var t,n=e.submissionGroup.users.map((function(e){return e.fullName||e.username})).join(", ");return{image:e.submissionGroup.users[0].image,name:n,url:null===(t=e.repl)||void 0===t?void 0:t.url,status:Af(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));f((0,Vt.Z)(n))}else{var r=i.students,s=(r=0===e.length?r.filter((function(e){return e.user})).sort((function(e,t){return(e.nickname||e.user.fullName||e.user.username).localeCompare(t.nickname||t.user.fullName||t.user.username)})):r.filter((function(t){var n,r,i;return null===(n=t.nickname||(null===(r=t.user)||void 0===r?void 0:r.fullName)||(null===(i=t.user)||void 0===i?void 0:i.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))).map((function(e){var t,n=o.find((function(t){var n;return(null===(n=t.author)||void 0===n?void 0:n.id)===e.user.id}));return{image:e.user.image,name:e.nickname||e.user.fullName||e.user.username,url:null===n||void 0===n||null===(t=n.repl)||void 0===t?void 0:t.url,status:Af(n),submissionId:null===n||void 0===n?void 0:n.id,timeSubmitted:null===n||void 0===n?void 0:n.timeSubmitted}}));f((0,Vt.Z)(s))}},_=o.findIndex((function(e){return e.id===a.id})),C=o[_-1],S=o[_+1],P=o.filter((function(e){return e.timeLastReviewed})).length,N=function(e){var t=i.students.find((function(t){var n;return(null===(n=t.user)||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)}));return(null===t||void 0===t?void 0:t.nickname)||(null===e||void 0===e?void 0:e.fullName)||"@".concat(null===e||void 0===e?void 0:e.username)};return(0,B.BX)("div",Rf(Rf({},w()),{},{className:"jsx-3541875685 submission-search",children:[y&&(0,B.BX)("div",{className:"jsx-3541875685 dropdown",children:[(0,B.BX)("div",{className:"jsx-3541875685 search-box-container",children:[(0,B.tZ)("div",{className:"jsx-3541875685 search-icon",children:(0,B.tZ)(Sn.Z,{})}),(0,B.tZ)("input",Rf(Rf({},x({value:g,placeholder:"Navigate",onKeyDown:function(e){"Escape"===e.key&&f([])},onChange:function(e){var t=e.target.value;E(t),v(t)},ref:O})),{},{className:"jsx-3541875685 search-box"}))]}),(0,B.tZ)("div",{className:"jsx-3541875685",children:p.map((function(e,t){return(0,B.tZ)(Bf,Rf(Rf({result:e,selected:j===t,current:e.submissionId===a.id},k({index:t,item:e,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{},{isLate:s.dueDate&&e.timeSubmitted&&s.dueDate<e.timeSubmitted}))}))})]}),(0,B.BX)("div",{className:"jsx-3541875685 navigation-element",children:[(0,B.BX)("div",{onClick:function(){Z(),E()},className:"jsx-3541875685 pseudo-search-input",children:[(0,B.tZ)("div",{className:"jsx-3541875685 search-icon",children:(0,B.tZ)(Sn.Z,{})}),(0,B.tZ)("div",{className:"jsx-3541875685",children:"Navigate"})]}),(0,B.BX)("div",{className:"jsx-3541875685 arrow-navigation",children:[(0,B.tZ)(Pf,{direction:"left",url:Lf(null===C||void 0===C||null===(t=C.repl)||void 0===t?void 0:t.url,c)}),(0,B.BX)("div",{className:"jsx-3541875685",children:[P,"/",o.length]}),(0,B.tZ)(Pf,{direction:"right",url:Lf(null===S||void 0===S||null===(n=S.repl)||void 0===n?void 0:n.url,c)})]})]}),(0,B.tZ)("div",{className:"jsx-3541875685 submission-info",children:a.isGroupSubmission?a.submissionGroup.users.map((function(e){return(0,B.tZ)("div",{className:"jsx-3541875685 submitter-row",children:(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(le.Z,{url:null===e||void 0===e?void 0:e.image}),(0,B.tZ)("span",{className:"jsx-3541875685 submission-name",children:N(e)})]})},null===e||void 0===e?void 0:e.id)})):(0,B.tZ)("div",{className:"jsx-3541875685 submission-identity",children:(0,B.tZ)("div",{className:"jsx-3541875685 submitter-row",children:(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(le.Z,{url:null===(r=a.author)||void 0===r?void 0:r.image}),(0,B.tZ)("span",{className:"jsx-3541875685 submission-name",children:N(a.author)})]})})})}),(0,B.tZ)(q.default,{id:"3541875685",children:[".submission-search.jsx-3541875685{width:100%;position:relative;border:1px solid;border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);}",".navigation-element.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".pseudo-search-input.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;color:var(--foreground-dimmer);font-size:var(--font-size-default);}",".arrow-navigation.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--foreground-dimmest);font-size:var(--font-size-small);-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;padding:0 var(--space-8);}",".submitter-row.jsx-3541875685{-webkit-text-decoration:none;text-decoration:none;color:var(--foreground-default);}",".submission-info.jsx-3541875685{display:grid;grid-gap:var(--space-8);padding:var(--space-16);}",".submission-name.jsx-3541875685{color:var(--foreground-dimmer);font-size:var(--font-size-default);}",".search-box.jsx-3541875685{border:none;outline:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;font-size:var(--font-size-default);background-color:inherit;color:var(--foreground-default);}",".search-icon.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--space-16);background-color:inherit;}",".search-box-container.jsx-3541875685{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:var(--background-default);}",".dropdown.jsx-3541875685{position:absolute;background:var(--background-default);z-index:10;width:350px;max-height:426px;overflow-y:scroll;overflow-y:overlay;white-space:nowrap;border:1px solid;border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);margin:-1px;}"]})]}))},Uf=n(30724),Xf=n.n(Uf);function Ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ff(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vf=function(e){var t=Cf("education"),n=t.loading,r=t.error,i=t.changelog,a=t.markRead;ee.useEffect((function(){e.isOpen&&a()}),[e.isOpen]);var o="";return r?o="### Something went wrong :(\n".concat(r.message):n?o="### Loading...":i&&(o=i),(0,B.BX)(Pt.ZP,zf(zf({},e),{},{children:[(0,B.BX)("div",{className:"jsx-2505110200 "+"jsx-".concat(mc.Q.__hash)+" container",children:[(0,B.tZ)("h1",{className:"jsx-2505110200 "+"jsx-".concat(mc.Q.__hash)+" title",children:"What's new in Teams \u2728"}),(0,B.tZ)(Xf(),{source:o,className:"markdown"})]}),(0,B.tZ)(q.default,{id:mc.Q.__hash,children:mc.Q}),(0,B.tZ)(q.default,{id:"2505110200",children:[".container.jsx-2505110200{width:100%;padding:var(--space-32);height:80vh;overflow-y:scroll;grid-row-gap:var(--space-32);display:grid;}",".markdown ul{padding:var(--space-32);}",".markdown img{max-width:100%;}"]})]}))};function Hf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hf(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wf=function(e){return{short:(0,Dc.Z)(e,"do MMM"),long:(0,Dc.Z)(e,"do MMM, KK:mm a")}};function Kf(e){var t=e.submission,n=e.dueDate;return(0,B.BX)("div",{className:"jsx-3108116229 submission-info",children:[t.timeSubmitted?(0,B.BX)(B.HY,{children:[(0,B.tZ)("div",{className:"jsx-3108116229 submitted-header",children:(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)($e.Z,{}),(0,B.tZ)("span",{className:"jsx-3108116229 submitted-text",children:"Submitted"}),n&&n<t.timeSubmitted&&(0,B.tZ)(Tf,{})]})}),(0,B.tZ)("div",{className:"jsx-3108116229 submitted-time",children:(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(Of.Z,{}),(0,B.tZ)("span",{className:"jsx-3108116229",children:Wf(new Date(t.timeSubmitted)).long})]})})]}):(0,B.BX)(B.HY,{children:[(0,B.tZ)("div",{className:"jsx-3108116229 submitted-header",children:(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(Kt.Z,{}),(0,B.tZ)("span",{className:"jsx-3108116229 submitted-text",children:"Not submitted"})]})}),(0,B.tZ)("div",{className:"jsx-3108116229 submitted-time",children:(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(sl.Z,{}),(0,B.BX)("span",{className:"jsx-3108116229",children:["Forked"," ",Wf(new Date(t.repl.timeCreated)).short]})]})})]}),(0,B.tZ)(q.default,{id:"3108116229",children:[".submission-info.jsx-3108116229{padding:var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-8);}",".submitted-header.jsx-3108116229{color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap;}",".submitted-header.jsx-3108116229 svg{width:2em;height:2em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".submitted-time.jsx-3108116229{color:var(--foreground-dimmer);padding:var(--space-8) var(--space-16);white-space:nowrap;font-size:var(--font-size-default);}",".submitted-time.jsx-3108116229 svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})}function qf(e){var t=e.repl,n=e.submission,r=e.onFeedbackCTA,i=void 0===r?function(){}:r,a=(0,jf.H)(),o=(0,Wt.Z)().showError,s=(0,xe.SyV)({onError:function(e){return o(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&o(e.reviewRepl.message)}}),l=(0,L.Z)(s,2),c=l[0],u=l[1].loading,d=(0,xe.F_9)(),p=(0,L.Z)(d,1)[0],f=Boolean(n.timeLastReviewed);return(0,B.BX)(Xn.Z,{css:[Mn.l0.p(8),Mn.l0.borderRadius(8),"",""],children:[(0,B.BX)("div",{className:"jsx-2177615436 feedback-header",children:[(0,B.tZ)(lc.Z,{}),(0,B.tZ)("span",{className:"jsx-2177615436",children:"Feedback"})]}),(0,B.BX)("div",{className:"jsx-2177615436 mark-reviewed",children:[(0,B.tZ)(_f.Z,{id:a("reviewed-status"),disabled:u,checked:f,onChange:function(){return e=!f,void c({variables:{replId:t.id,status:e},optimisticResponse:{reviewRepl:Gf(Gf({},t),{},{submission:Gf(Gf({},n),{},{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,B.tZ)("label",{htmlFor:a("reviewed-status"),className:"jsx-2177615436",children:f?"Reviewed":"Mark as reviewed"})]}),(0,B.BX)("div",{className:"jsx-2177615436 feedback-info",children:[(0,B.tZ)(on.Z,{}),(0,B.tZ)("div",{onClick:i,className:"jsx-2177615436",children:"Code feedback"})]}),n.timeSubmitted&&(0,B.tZ)("div",{className:"jsx-2177615436 unsubmit",children:(0,B.tZ)(he.Z,{onClick:function(){p({variables:{replId:t.id},optimisticResponse:{unsubmitRepl:Gf(Gf({},t),{},{submission:Gf(Gf({},n),{},{timeLastReviewed:null})})}})},fullWidth:!0,children:"Unsubmit"})}),(0,B.tZ)(q.default,{id:"2177615436",children:[".feedback-header.jsx-2177615436{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap;}",".feedback-header.jsx-2177615436 svg{width:1.4em;height:1.4em;padding:0.3em;box-sizing:content-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".mark-reviewed.jsx-2177615436,.feedback-info.jsx-2177615436,.unsubmit.jsx-2177615436{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);padding:var(--space-8) var(--space-16);font-size:var(--font-size-default);cursor:pointer;color:var(--foreground-dimmer);}",".feedback-info.jsx-2177615436 svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}"]})]})}function Yf(){var e=ee.useState(!1),t=(0,L.Z)(e,2),n=t[0],r=t[1],i=ee.useState(!1),a=(0,L.Z)(i,2),o=a[0],s=a[1],l=Cf("education").getReadStatus,c=function(){r(!0),(0,mt.track)(mt.events.EDU_CHANGELOG_OPENED,{unread:!o})};return ee.useEffect((function(){s(l())}),[n,l]),(0,B.BX)("div",{className:"jsx-106980422 whats-new",children:[(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)("span",{onClick:c,className:"jsx-106980422 "+(St()("dot",{unread:!o})||"")}),(0,B.tZ)("span",{onClick:c,className:"jsx-106980422",children:"What's new in teams"})]}),(0,B.tZ)(Vf,{isOpen:n,onRequestClose:function(){return r(!1)}}),(0,B.tZ)(q.default,{id:"106980422",children:[".whats-new.jsx-106980422{font-size:var(--font-size-small);cursor:pointer;}",".dot.jsx-106980422{display:inline-block;width:5px;height:5px;border-radius:10px;}",".dot.unread.jsx-106980422{background-color:var(--accent-negative-default);}"]})]})}function Qf(e){var t=e.replUrl;return(0,B.tZ)(jt.default,{href:"".concat(t,"/history"),children:(0,B.BX)("a",{target:"_blank",className:"jsx-1397023969",children:[(0,B.tZ)(he.Z,{Icon:wr.HistoryIcon,fullWidth:!1,className:"history-button",children:"See Repl History"}),(0,B.tZ)(q.default,{id:"1397023969",children:["a.jsx-1397023969{-webkit-text-decoration:none;text-decoration:none;}",".history-button svg{width:1em;}"]})]})})}function Jf(e){var t,n,r,i=e.data,a=ee.useState(!1),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=(0,Ta.Z)("flag-teams-changelog");if(!i||"Repl"!==i.repl.__typename||"Team"!==(null===(t=i.repl.owner)||void 0===t?void 0:t.__typename)||"ReplSubmission"!==(null===(n=i.repl.submission)||void 0===n?void 0:n.__typename)||"ReplTemplate"!==(null===(r=i.repl.template)||void 0===r?void 0:r.__typename))return null;var u=i.repl.submission,d=i.repl.template.submissions;return(0,B.BX)("div",{className:"jsx-4141385795 education-pane-container",children:[(0,B.BX)("div",{className:"jsx-4141385795 contents",children:[(0,B.tZ)("div",{className:"jsx-4141385795 template-selector-container",children:(0,B.tZ)(Mf,{team:i.repl.owner,template:i.repl.template,submission:u,submissionList:d})}),(0,B.tZ)(Kf,{submission:u,dueDate:i.repl.template.dueDate}),(0,B.tZ)(qf,{repl:i.repl,submission:u,onFeedbackCTA:function(){return l(!0)}}),(0,B.tZ)("div",{className:"jsx-4141385795 buffer"})]}),(0,B.BX)("div",{className:"jsx-4141385795 bottom-dock",children:["Repl"===i.repl.__typename&&(0,B.tZ)(Qf,{replUrl:i.repl.url}),(0,B.tZ)("div",{className:"jsx-4141385795",children:(0,B.tZ)(jt.default,{href:"/team/".concat(i.repl.owner.username,"/templates/").concat(i.repl.template.repl.slug),children:(0,B.tZ)(he.Z,{Icon:Ef.Z,children:"Return to submissions"})})}),c&&(0,B.tZ)(Yf,{})]}),(0,B.tZ)(bn,{isOpen:s,onRequestClose:function(){return l(!1)}}),(0,B.tZ)(q.default,{id:"4141385795",children:[".education-pane-container.jsx-4141385795{padding:var(--space-8);max-width:400px;width:inherit;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;}",".contents.jsx-4141385795{display:grid;grid-gap:var(--space-16);}",".bottom-dock.jsx-4141385795{display:grid;grid-gap:var(--space-8);margin-top:auto;}",".template-selector-container.jsx-4141385795{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})}var $f,em=n(7104),tm=function(e){var t=e.fileName,n=e.docRef,r=e.initialContents,i=(0,$d.Z)({filePath:t,fontSize:14,indentSize:4,indentIsSpaces:!0}),a=i.view,o=i.ref;return ee.useEffect((function(){if(a){var e=tp.tk.updateListener.of((function(e){n.current=e.state.doc}));a.dispatch({effects:np.Py.appendConfig.of(e)}),a.focus()}}),[a,n]),ee.useEffect((function(){a&&(a.state.doc.length||a.dispatch({changes:{from:0,insert:r}}))}),[a,r]),(0,B.BX)("div",{className:"jsx-3673349710 editable-area",children:[(0,B.tZ)("div",{className:"jsx-3673349710 editor-wrapper",children:(0,B.tZ)("div",{className:"jsx-3673349710 editor",children:(0,B.tZ)("div",{ref:o,className:"jsx-3673349710"})})}),(0,B.tZ)(q.default,{id:"3673349710",children:[".editable-area.jsx-3673349710{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);padding:var(--space-8) 0;}",".editor-wrapper.jsx-3673349710{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;}",".editor.jsx-3673349710{overflow:auto;position:absolute;width:100%;height:100%;}",".loader.jsx-3673349710{height:100%;width:100%;z-index:5;}"]})]})},nm=function(e){var t=e.title,n=e.fileName,r=e.initialContents,i=e.isOpen,a=e.onSave,o=e.onCancel,s=ee.useRef(null);return(0,B.BX)(Pt.ZP,{width:"large",isOpen:i,onRequestClose:function(){},preventClose:!0,children:[(0,B.tZ)("div",{className:"jsx-2888062367 editor-modal",children:(0,B.BX)(ve.gC,{align:"stretch",spacing:2,children:[(0,B.BX)(Ne.Z,{level:3,children:["Edit ",t.toLowerCase()]}),(0,B.tZ)(tm,{docRef:s,fileName:n,initialContents:r}),(0,B.tZ)(ve.Ug,{justify:"end",align:"end",children:(0,B.BX)(ve.Ug,{justify:"end",align:"end",spacing:1,children:[(0,B.tZ)(he.Z,{onClick:function(){return o()},children:"Cancel"}),(0,B.tZ)(he.Z,{color:"primary",onClick:function(){var e;return s.current&&a(null===(e=s.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,B.tZ)(q.default,{id:"2888062367",children:[".editor-modal.jsx-2888062367{padding:var(--space-16);}"]})]})};function rm(e){var t="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(t,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(t,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(t,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}($f||($f={}));var im=n(27974),am=n(32997),om=n(25108);function sm(e){var t=e.attachments;return(0,B.tZ)("div",{className:"manage-attachments",children:(0,B.BX)(ve.gC,{spacing:2,children:[(0,B.tZ)(lm,{attachment:t.find((function(e){return e.fileName===$f.LessonPlan})),fileName:$f.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,B.tZ)(lm,{attachment:t.find((function(e){return e.fileName===$f.Instructions})),fileName:$f.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function lm(e){var t,n=e.attachment,r=e.fileName,i=e.label,a=e.helpText,o=(0,im.Z)(),s=(0,Wt.Z)(),l=s.showConfirm,c=s.showError,u=(0,at.I0)(),d=(0,Ut.Z)(),p=(0,xe.RG9)({onCompleted:function(){return l("Updated "+r)},onError:function(e){om.log(e),c("Error")}}),f=(0,L.Z)(p,2),m=f[0],h=f[1],g=ee.useCallback(function(){var e=(0,X.Z)(U().mark((function e(t){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(m({variables:{input:{replId:o.id,fileName:r,contents:t,lastModified:(new Date).toISOString()}}}),r===$f.Instructions&&u({type:"INSTRUCTIONS_UPLOADED",wid:d,contents:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,r,m,d,u]);return o&&(t=r===$f.LessonPlan?function(e){var t=e.language;return"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(rm(t),"\n  ")}({language:o.language}):function(e){var t=e.language;return"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(rm(t),"\n  ")}({language:o.language})),(0,B.tZ)(cm,{loading:!o||h.loading,fileName:r,contents:null===n||void 0===n?void 0:n.contents,defaultContents:t,label:i,helpText:a,attachmentLastUploadedAgo:n?(0,am.Sy)(new Date(n.timeUpdated)):void 0,onUploadFile:g})}function cm(e){var t=e.loading,n=e.fileName,r=e.contents,i=e.defaultContents,a=e.label,o=e.helpText,s=e.attachmentLastUploadedAgo,l=e.onUploadFile,c=ee.useState(!1),u=(0,L.Z)(c,2),d=u[0],p=u[1];return(0,B.BX)("div",{className:"jsx-3069383162 attachment",children:[(0,B.tZ)(nm,{title:a,fileName:n,isOpen:d,initialContents:r||i,onCancel:function(){return p(!1)},onSave:function(e){p(!1),l(e)}}),(0,B.BX)(ve.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.BX)(ve.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,B.tZ)(ge.Z,{fontWeight:"medium",children:a}),(0,B.tZ)(em.Z,{label:o})]}),s&&(0,B.BX)(ge.Z,{size:"xsmall",children:["Uploaded ",s]})]}),t?(0,B.tZ)(Nt.Z,{style:{width:"16px",height:"16px"}}):(0,B.tZ)(he.Z,{border:!1,filled:!1,Icon:mp.Z,onClick:(0,X.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0);case 1:case"end":return e.stop()}}),e)})))})]}),(0,B.tZ)(q.default,{id:"3069383162",children:[".attachment.jsx-3069383162{padding:var(--space-8);background-color:var(--background-root);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]})]})}function um(e){var t,n,r=e.data;return!r||"Repl"!==r.repl.__typename||"Team"!==(null===(t=r.repl.owner)||void 0===t?void 0:t.__typename)||"ReplTemplate"!==(null===(n=r.repl.template)||void 0===n?void 0:n.__typename)||r.repl.submission?null:(0,B.BX)("div",{className:"jsx-2648649354 project-view-container",children:[(0,B.tZ)("div",{className:"jsx-2648649354 project-view-contents",children:(0,B.tZ)(sm,{attachments:r.repl.attachments})}),(0,B.tZ)("div",{className:"jsx-2648649354 bottom-dock",children:(0,B.tZ)(ge.Z,{size:"small",children:(0,B.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-2648649354",children:"Find more curriculum on Curriculum Hub"})})}),(0,B.tZ)(q.default,{id:"2648649354",children:[".project-view-container.jsx-2648649354{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".bottom-dock.jsx-2648649354{display:grid;grid-gap:var(--space-8);margin-top:auto;}"]})]})}var dm=n(25108);function pm(e){var t,n,r,i,a,o,s,l=e.style,c=(0,ye.Z)(),u=(0,xe.SAU)({variables:{replId:c}}),d=u.data,p=u.loading,f=u.error;return p&&(o=(0,B.tZ)("div",{children:"Loading..."})),f&&(dm.error(f),o=(0,B.tZ)("div",{children:"Something went wrong"})),d&&"Repl"===d.repl.__typename&&"Team"===(null===(t=d.repl.owner)||void 0===t?void 0:t.__typename)&&"ReplTemplate"===(null===(n=d.repl.template)||void 0===n?void 0:n.__typename)&&"ReplSubmission"===(null===(r=d.repl.submission)||void 0===r?void 0:r.__typename)&&(o=(0,B.tZ)(Jf,{data:d}),s="Submissions"),d&&"Repl"===d.repl.__typename&&"Team"===(null===(i=d.repl.owner)||void 0===i?void 0:i.__typename)&&"ReplTemplate"===(null===(a=d.repl.template)||void 0===a?void 0:a.__typename)&&!d.repl.submission&&(o=(0,B.tZ)(um,{data:d}),s="Curriculum"),(0,B.BX)("div",{style:l,className:"jsx-1108958607 education-pane",children:[(0,B.tZ)("div",{className:"jsx-1108958607 education-pane-header",children:(0,B.tZ)(Ne.Z,{level:4,children:s})}),o,(0,B.tZ)(q.default,{id:"1108958607",children:[".education-pane.jsx-1108958607{background-color:var(--background-default);color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);}",".education-pane-header.jsx-1108958607{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:relative;color:var(--foreground-default);width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}"]})]})}var fm=n(13162),mm=n(10847),hm=n(28914);function gm(e){try{return!!e&&!!new URL(e)}catch(t){return!1}}var vm=n(72378),bm=n.n(vm),ym=["GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS"];function xm(e){var t=e.url,n=e.method,r=void 0===n?"GET":n,i=e.headers,a=void 0===i?{}:i;if(!t)throw new Error("No URL provided");if(!gm(t))throw new Error("URL is invalid: ".concat(t));if(r=r.toUpperCase(),!ym.find((function(e){return e===r})))throw new Error("Method is invalid: ".concat(r));var o=[];for(var s in a)o.push("-H","".concat(s,": ").concat(a[s]));return["curl","-i","-s","-X",r].concat(o,[t])}function wm(e){if(null!==e&&void 0!==e&&e.matchedAncestors){var t=km(e.matchedAncestors.map((function(e){var t,n;return null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curl})).filter((function(e){return void 0!==e})));return t.method||(t.method="get"),t}}function km(e){return e.reduce((function(e,t){return bm()(e,t)}),{})}function Zm(){return(0,B.BX)("div",{className:"jsx-3039985225 loader-container",children:[(0,B.BX)(Du.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,B.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:"jsx-3039985225"}),(0,B.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:"jsx-3039985225"})]}),(0,B.tZ)(q.default,{id:"3039985225",children:[".loader-container.jsx-3039985225{padding:var(--space-24);}"]})]})}function jm(e){var t=e.html,n=(0,Ta.Z)("flag-curlclui-html-preview"),r=ee.useMemo((function(){return t?function(e){var t=e.html,n=void 0===t?"":t,r=new window.Blob([n],{type:"text/html"});return URL.createObjectURL(r)}({html:t}):null}),[t]);return r?(0,B.BX)("div",{className:"jsx-888912108 html-viewer",children:[n?(0,B.tZ)("a",{target:"_blank",href:r,className:"jsx-888912108",children:"See response"}):(0,B.tZ)("div",{className:"jsx-888912108 response-text",children:t}),(0,B.tZ)(q.default,{id:"888912108",children:[".html-viewer.jsx-888912108{display:block;padding:var(--space-16);background:var(--background-root);}",".response-text.jsx-888912108{overflow-x:hidden;white-space:break-spaces;color:var(--foreground-default);font-family:var(--font-family-code);font-size:var(--font-size-small);}"]})]}):null}function Om(e){var t=e.output,n=e.error;return(0,B.BX)("div",{className:"jsx-1719131076",children:[n&&(0,B.tZ)("div",{className:"jsx-1719131076 error",children:n}),t&&(0,B.tZ)("div",{className:"jsx-1719131076",children:t}),(0,B.tZ)(q.default,{id:"1719131076",children:[".error.jsx-1719131076{color:var(--accent-negative-default);}"]})]})}var Em=(0,Va.default)((function(){return n.e(367).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]},modules:["react-json-view"]}});function _m(e){var t,n=e.jsonString,r=ee.useMemo((function(){try{return[JSON.parse(n),null]}catch(e){return[null,e]}}),[n]),i=(0,L.Z)(r,2),a=i[0],o=i[1];return o?t=(0,B.BX)("div",{className:"jsx-3269560366 json-error",children:[(0,B.BX)("div",{className:"jsx-3269560366 error-message",children:["Error: Failed to parse JSON. ",o.message]}),(0,B.tZ)("div",{className:"jsx-3269560366 raw-json-string",children:n}),(0,B.tZ)(q.default,{id:"3269560366",children:[".json-error.jsx-3269560366{display:grid;grid-gap:var(--space-16);}",".error-message.jsx-3269560366{font-size:var(--font-size-small);}"]})]}):a&&(t=(0,B.tZ)(Em,{src:a,name:!1,displayDataTypes:!1})),(0,B.BX)("div",{className:"jsx-1327275652 json-viewer",children:[t,(0,B.tZ)(q.default,{id:"1327275652",children:[".json-viewer.jsx-1327275652{padding:var(--space-16);background:var(--background-root);}"]})]})}var Cm=n(80983),Sm=n(95493),Pm=n.n(Sm);function Nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tm(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Im(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Im(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Im(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rm=["text/plain","application/json","application/octet-stream"],Dm="gold",Am=function(e,t){if(e===t)return 1;var n=Pm().get(e.toLowerCase(),t.toLowerCase()),r=Math.max(e.length,t.length);return(r-n)/r},Lm=function(e){return Object.keys(Cm.extensions).filter((function(t){return t.includes(e)})).sort((function(t,n){return Am(e,n)-Am(e,t)}))},Bm=function(e){var t=e.name,n=e.value,r=e.commands;return{data:{description:e.description||"".concat(t,": ").concat(n),color:Dm,curl:{headers:(0,K.Z)({},t,n)}},commands:r}},Mm=function(e){var t=e.commands;return{data:{color:Dm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue,r={googlebot:Bm({name:"user-agent",value:"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)",description:"How Google sees your page",commands:t}),"this-browser":Bm({name:"user-agent",value:window.navigator.userAgent,description:"Your browser's user-agent",commands:t})};return n.length?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}((0,K.Z)({},n,Bm({name:"user-agent",value:n,commands:t})),r):r}}};function Um(e){var t=e.commands,n=e.rootArgs;return 1===(null===n||void 0===n?void 0:n.matchedAncestors.length)&&0===(null===n||void 0===n?void 0:n.searchValue.length)?{}:{header:{data:{description:"Add a request header",color:Dm},commands:function(e){var r={},i=e.searchValue.toLowerCase(),a={commands:t,rootArgs:n};return r["content-type"]=function(e){var t=e.commands;return{data:{color:Dm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n,r=e.searchValue.toLowerCase(),i={},a=Tm((0===r.length?Rm:Lm(r)).slice(0,5));try{for(a.s();!(n=a.n()).done;){var o=n.value;i[o]=Bm({name:"content-type",value:o,commands:t})}}catch(s){a.e(s)}finally{a.f()}return i}}}(a),r.authorization=function(e){var t=e.commands;return{data:{color:Dm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue;return n.length?(0,K.Z)({},n,Bm({name:"authorization",value:n,commands:t})):{}}}}(a),r["user-agent"]=Mm(a),r.accept=function(e){var t=e.commands;return{data:{color:Dm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n,r=e.searchValue.toLowerCase(),i={},a=Tm((0===r.length?Rm:Lm(r)).slice(0,5));try{for(a.s();!(n=a.n()).done;){var o=n.value;i[o]=Bm({name:"accept",value:o,commands:t})}}catch(s){a.e(s)}finally{a.f()}return i}}}(a),i.length>0&&!r[i]&&function(e){return/^[a-zA-Z0-9-]+$/.test(e)}(i)&&0===e.relativeSearchDepth&&(r[i]={data:{description:"Add a custom header",color:Dm},commands:function(e){if(e.relativeSearchDepth>0)return{};var n=e.searchValue;return n.length?(0,K.Z)({},n,Bm({name:i,value:n,commands:t})):{}}}),r}}}}function Xm(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Fm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fm(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Fm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zm(e){return{data:{curlType:"body",curl:{headers:{"content-type":"application/json"}},color:"gold",description:"Add a JSON body to your request"},commands:e.commands}}function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gm(e){var t=e.onSelect,n=e.onSetContext,r=e.onGetCurl,i=e.recentUrls,a=void 0===i?[]:i,o=e.replRoot,s=e.parsedPaths;return function e(i){if(i.relativeSearchDepth>0)return{};var l=i.matchedAncestors.find((function(e){var t,n;return"url"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)})),c=i.matchedAncestors.find((function(e){var t,n;return"method"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)})),u=i.matchedAncestors.find((function(e){var t,n;return"body"===(null===(t=e.command)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.curlType)}));return Hm(Hm(Hm(Hm(Hm(Hm({},l?{}:function(e){var t=e.commands,n=e.parsedPaths,r=e.recentUrls,i=e.replRoot,a={},o=e.rootArgs.searchValue,s=function(e,n){return{data:{curlType:"url",commandName:e,description:n,color:"blue",curl:{url:n}},commands:t}};o.startsWith("/")?a[o]=s(o,"".concat(i.replace(/\/+$/,"")).concat(o)):gm(o)&&(a[o]=s(o,o));var l,c=Xm(n);try{for(c.s();!(l=c.n()).done;){var u=l.value;a[u]||(a[u]=s(u,"".concat(null===i||void 0===i?void 0:i.replace(/\/+$/,"")).concat(u)))}}catch(m){c.e(m)}finally{c.f()}var d,p=Xm(r);try{for(p.s();!(d=p.n()).done;){var f=d.value;i&&f.startsWith(i)&&a[new URL(f).pathname]||(a[f]||(a[f]=s(f,f)))}}catch(m){p.e(m)}finally{p.f()}return a}({commands:e,parsedPaths:s,recentUrls:a,replRoot:o,rootArgs:i})),c?{}:function(e){var t=e.commands,n=e.rootArgs,r={};if(0===n.searchValue.length)return r;for(var i=0,a=["get","post","put","delete","head","patch","options"];i<a.length;i++){var o=a[i];if(o.startsWith(n.searchValue)){var s="Create a ".concat(o.toUpperCase()," request");r[o]={data:{curlType:"method",description:s,curl:{method:o},color:"green"},commands:t}}}return r}({commands:e,rootArgs:i})),function(e){var t=e.rootArgs,n=e.onSelect,r=e.onGetCurl;if(t.relativeSearchDepth>0)return{};var i=wm(t);return i&&i.url?{go:{data:{type:"action",description:"Run the request!",color:"red",run:function(){n(i)}}},"get-curl":{data:{type:"action",description:"Returns the equivalent cURL request",color:"red",run:function(){r(i)}}}}:{}}({onSelect:t,rootArgs:i,onGetCurl:r})),u?{}:function(e){var t=e.rootArgs,n=e.commands;return 1===t.matchedAncestors.length?{}:{json:zm({commands:n,rootArgs:t})}}({commands:e,rootArgs:i})),Um({rootArgs:i,commands:e})),function(e){var t=e.onSetContext;if(e.rootArgs.ancestors.length>1)return{};var n=function(e){return{confirm:{data:{type:"action",description:"Click to confirm",color:"teal",run:function(){var n=wm(e);if(!n||!n.headers)return{};t({headers:n.headers})}}}}};return{set:{data:{description:"Set a value to context",color:"teal"},commands:function(e){return Um({rootArgs:e,commands:n})}}}}({onSetContext:n,rootArgs:i}))}}var Wm=function(e){return{data:{type:"root"},commands:Gm({onSelect:e.onSelect,onSetContext:e.onSetContext,onGetCurl:e.onGetCurl,recentUrls:e.recentUrls,replRoot:e.replRoot,parsedPaths:e.parsedPaths})}};function Km(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Km(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Km(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ym(e){var t,n=(0,Pe.Z)().container,r=(0,ye.Z)(),i=(0,xe.Jfm)({variables:{id:r}}).data,a=function(){var e=(0,X.Z)(U().mark((function e(t){var r,i,a,o;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xm(t),e.next=3,n.exec.apply(n,(0,Vt.Z)(r));case 3:return i=e.sent,a=i.output,o=i.error,e.abrupt("return",{output:a,error:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=ee.useState([]),s=(0,L.Z)(o,2),l=s[0],c=s[1],u=ee.useState(null),d=(0,L.Z)(u,2),p=d[0],f=d[1],m=ee.useState(null),h=(0,L.Z)(m,2),g=h[0],v=h[1],b=ee.useState(null),y=(0,L.Z)(b,2),x=y[0],w=y[1],k=ee.useState({}),Z=(0,L.Z)(k,2),j=Z[0],O=Z[1],E=ee.useState(null),_=(0,L.Z)(E,2),C=_[0],S=_[1],P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];c((function(e){return(0,Vt.Z)(new Set([].concat((0,Vt.Z)(e),(0,Vt.Z)(t.filter(gm)))))}))},N=function(){var e=(0,X.Z)(U().mark((function e(t){var n,r,i,o,s,l,c,u;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),v(null),S(null),F(!0),e.next=6,a(km([j,t]));case 6:if(!(n=e.sent).error&&n.output){e.next=11;break}return f(n),F(!1),e.abrupt("return");case 11:for(u in P(t.url),r=(0,mm.LZ)(n.output),i=r.body,o=r.headers,s=r.statusCode,l=r.statusMessage,c={},o)c[u.toLowerCase()]=o[u];v({body:i,headers:c,statusCode:s,statusMessage:l}),F(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=ee.useCallback((function(e){var t={headers:qm(qm({},j.headers),e.headers)};O(t)}),[j]);ee.useEffect((function(){var e;i&&"Repl"===(null===(e=i.repl)||void 0===e?void 0:e.__typename)&&w(i.repl.prodUrl)}),[i]);var I=ee.useState([]),R=(0,L.Z)(I,1)[0],D=ee.useState(!1),A=(0,L.Z)(D,2),M=A[0],F=A[1],z=Wm({onSelect:N,onSetContext:T,onGetCurl:function(e){var t=km([j,e]);S(xm(t).map((function(e){return e.includes(" ")?'"'.concat(e,'"'):e})).join(" ")),v(null),f(null)},recentUrls:l,replRoot:x||"",parsedPaths:R}),V=(null===g||void 0===g||null===(t=g.headers)||void 0===t?void 0:t["content-type"])||"",H=ee.useState(!1),G=(0,L.Z)(H,2),W=G[0],K=G[1];return(0,B.BX)("div",qm(qm({},e),{},{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash)+" cluicurl",children:[(0,B.tZ)(fm.Z,{root:z,disableKeyboardShortcut:!0}),M&&(0,B.tZ)(Zm,{}),C&&(0,B.tZ)("div",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash)+" curl-req-container",children:(0,B.tZ)("pre",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash),children:(0,B.tZ)("code",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash),children:C})})}),(null===g||void 0===g?void 0:g.statusCode)&&(0,B.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash),children:[(0,B.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash)+" response-info",children:[(0,B.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash)+" response-status",children:[(0,B.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash),children:g.statusCode})," ",(0,B.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash),children:function(){if(null===g||void 0===g||!g.statusCode)return"";if(g.statusMessage)return g.statusMessage;try{return(0,hm.BV)(g.statusCode)}catch(e){return""}}()})]}),(0,B.BX)("div",{onClick:function(){return K((function(e){return!e}))},className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash)+" response-headers-button",children:[Object.keys(g.headers).length," headers"]})]}),W&&(0,B.tZ)("div",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash)+" response-headers",children:Object.entries(g.headers).map((function(e){var t=(0,L.Z)(e,2),n=t[0],r=t[1];return(0,B.BX)("div",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash),children:[(0,B.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash)+" header-name",children:n}),":"," ",(0,B.tZ)("span",{className:"jsx-3199020068 "+"jsx-".concat(mc.Q.__hash)+" header-value",children:r})]})}))})]}),p&&(0,B.tZ)(Om,qm({},p)),V.includes("text/html")&&(0,B.tZ)(jm,{html:g.body}),V.includes("application/json")&&(0,B.tZ)(_m,{jsonString:g.body}),(0,B.tZ)(q.default,{id:mc.Q.__hash,children:mc.Q}),(0,B.tZ)(q.default,{id:"3199020068",children:[".cluicurl.jsx-3199020068{overflow:scroll;}",".cluicurl.jsx-3199020068 .input-row{z-index:2 !important;}",".cluicurl.jsx-3199020068 .menu{z-index:1 !important;}",".curl-req-container.jsx-3199020068{padding:var(--space-16);background:var(--background-higher);}",".response-info.jsx-3199020068{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:var(--space-16) var(--space-24);background-color:var(--background-root);font-family:var(--font-family-code);color:var(--foreground-default);border-bottom:1px solid var(--outline-dimmest);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".response-status.jsx-3199020068{font-weight:800;}",".response-headers.jsx-3199020068{font-family:var(--font-family-code);font-size:var(--font-size-small);padding:var(--space-24);color:var(--foreground-default);}",".response-headers-button.jsx-3199020068{font-weight:100;background:var(--background-higher);padding:var(--space-4);border-radius:var(--border-radius-4);cursor:pointer;}",".header-name.jsx-3199020068{font-weight:var(--font-weight-bold);}",".header-value.jsx-3199020068{font-weight:var(--font-weight-regular);}"]})]}))}var Qm=n(34837),Jm=n.n(Qm),$m=n(70641),eh=n(31046);function th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?th(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):th(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rh;function ih(e){var t=ee.useRef(null),n=ee.useRef(null),r=(0,Pe.Z)(),i=r.fs,a=r.broadcast,o=(0,xn.Z)(),s=(0,Wt.Z)(),l=s.showError,c=s.showConfirm,u=(0,Wa.Z)(),d=(0,Jr.Z)(),p=ee.useState(!1),f=(0,L.Z)(p,2),m=f[0],h=f[1],g=(0,Ta.Z)("flag-pedit-multiplayer");return ee.useEffect((function(){function e(){return r.apply(this,arguments)}function r(){return(r=(0,X.Z)(U().mark((function e(){var r,a,c,d,f,m;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return r=o.endsWith(".kbmsprite"),e.next=5,i.readFile(o);case 5:if(a=e.sent,u.current){e.next=8;break}return e.abrupt("return");case 8:if(!a.error){e.next=11;break}return l("failed to read ".concat(o)),e.abrupt("return");case 11:if(c=a.content.toString(),d=c&&JSON.parse(c),!n.current){e.next=17;break}d&&n.current.load(r?(0,eh.C)(d):d),e.next=28;break;case 17:if(t.current){e.next=19;break}return e.abrupt("return");case 19:(f=t.current).width=f.offsetWidth,f.height=f.offsetHeight,(m=Jm()(d?d.fromKaboom?{canvas:f,width:d.width,height:d.height}:{canvas:f,data:r?(0,eh.C)(d):d}:{canvas:f,width:64,height:64})).on("change",s),m.on("save",s),m.on("export",p),n.current=m,f.focus();case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return d.apply(this,arguments)}function d(){return(d=(0,X.Z)(U().mark((function e(){var t,r,s;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.current){e.next=3;break}return l("failed to init pedit ctx"),e.abrupt("return");case 3:if(o){e.next=6;break}return l("failed to get current file"),e.abrupt("return");case 6:if(t=n.current,r=o.endsWith(".kbmsprite"),s=t.save(),!r){e.next=13;break}return e.next=12,(0,eh.u)(s);case 12:s=e.sent;case 13:return e.next=15,i.writeFile(o,ar.Z.from(JSON.stringify(s)));case 15:if(!e.sent.error){e.next=18;break}return e.abrupt("return");case 18:g&&a.broadcastMessage({text:JSON.stringify({action:rh.Update})});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){if(n.current){var e=n.current,t=window.prompt("Export as:");if(t){var r="".concat(t,".png"),a=e.curFrame().toPNG();i.writeFile(r,ar.Z.from(a)).then((function(){c("Successfully exported to ".concat(r))}))}}else l("failed to init pedit ctx")}var f=function(){};return g&&(f=a.onBroadcastReceived((function(t){var n=t.text;switch(JSON.parse(n).action){case rh.Update:e()}}))),e(),function(){n.current&&n.current.cleanUp(),f()}}),[i,a,o,t]),(0,B.BX)("div",nh(nh({},e),{},{className:q.default.dynamic([["4157310935",[d?"0 3px 0 3px ".concat(d):"0"]]])+" pedit",children:[(0,B.tZ)(q.default,{id:"4157310935",dynamic:[d?"0 3px 0 3px ".concat(d):"0"],children:[".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;box-shadow:".concat(d?"0 3px 0 3px ".concat(d):"0",";}"),"canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0;}",".upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none;}",".upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher);}",".upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32);}"]}),(0,B.tZ)("canvas",{ref:t,tabIndex:0,className:q.default.dynamic([["4157310935",[d?"0 3px 0 3px ".concat(d):"0"]]])}),o&&o.endsWith(".kbmsprite")&&(0,B.tZ)("button",{onClick:function(){return h(!0)},className:q.default.dynamic([["4157310935",[d?"0 3px 0 3px ".concat(d):"0"]]])+" upgrade-button",children:"Upgrade"}),(0,B.tZ)(Pt.ZP,{isOpen:m,onRequestClose:function(){return h(!1)},children:(0,B.tZ)($m.Z,{prompt:"Upgrade to '.pedit'?",desc:"You're using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? (It'll create a new '.pedit' file with the same content. If you're using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0)",onCancel:function(){return h(!1)},onConfirm:function(){if(n.current)if(o){var e=n.current,t=o.replace(/\.kbmsprite$/,".pedit"),r=ar.Z.from(JSON.stringify(e.save()));i.writeFile(t,r).then((function(e){e.error?l("Failed to write to ".concat(t)):c("Successfully written to ".concat(t))})),h(!1)}else l("failed to get active file");else l("editor not initialized")}})})]}))}function ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ah(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ah(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sh(e){var t=ee.useState(e),n=(0,L.Z)(t,2),r=n[0],i=n[1];return[r,i,function(e){var t=null;switch(e.currentTarget.type){case"checkbox":t=e.currentTarget.checked;break;case"number":case"range":t=Number(e.currentTarget.value);break;default:t=e.currentTarget.value}i(oh(oh({},r),{},(0,K.Z)({},e.currentTarget.name,t)))}]}!function(e){e.Update="UPDATE"}(rh||(rh={}));var lh=n(46427);var ch=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,i=e.actions,a=void 0===i?[]:i;return(0,B.BX)(ve.Ug,{justify:"space-between",children:[(0,B.tZ)(q.default,{id:"348115206",children:[".section-header-action.jsx-348115206{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);border-radius:var(--border-radius-4);color:var(--foreground-dimmer);}",".section-header-action.jsx-348115206:hover{background:var(--background-higher);cursor:pointer;}"]}),(0,B.tZ)(Ne.Z,{level:r?5:4,children:t}),(0,B.tZ)(ve.Ug,{spacing:"4px",align:"center",children:a&&a.map((function(e,t){return(0,B.tZ)("div",{onClick:e.action,className:"jsx-348115206 section-header-action",children:e.icon},t)}))})]})};var uh,dh=function(e){var t=e.fileDrag,n=e.children,r=ee.useState(!1),i=(0,L.Z)(r,2),a=i[0],o=i[1],s=ee.useRef(0);return(0,B.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var a=r[i];t.accept.includes(a.type)||(n=!1)}n&&(o(!0),s.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current--,0===s.current&&o(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current=0,o(!1),(0,Vt.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-26096692 section",children:[(0,B.tZ)(q.default,{id:"26096692",children:[".section.jsx-26096692{position:relative;width:100%;}",".dragfilter.jsx-26096692{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);border-radius:var(--border-radius-4);opacity:0.2;}",".dragfilter.hidden.jsx-26096692{display:none !important;}"]}),n,(0,B.tZ)("div",{className:"jsx-26096692 "+(St()("dragfilter",{hidden:!a})||"")})]})},ph=["0.5.0","0.4.1","0.3.0","0.2.0","0.1.0","0.0.0","dev"];function fh(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function mh(e,t){uh||(uh=document.createElement("input")).setAttribute("type","file"),uh.setAttribute("accept",t.join(","));uh.addEventListener("change",(function t(){uh.files&&((0,Vt.Z)(uh.files).forEach(e),uh.removeEventListener("change",t))})),uh.click()}function hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hh(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vh(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return bh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bh(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function bh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yh=function(e){var t,n=e.gameConf,r=e.setGameConf,i=(0,Pe.Z)().fs,a=ee.useState(!1),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=(0,zr.Z)({path:"scenes",initialExpanded:!0,fs:i}),u=[];if(c.children){var d,p=vh(c.children);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.type===wn.Tv.File&&u.push((0,kn.eb)(f.filename))}}catch(m){p.e(m)}finally{p.f()}}return(0,B.BX)(dh,{children:[(0,B.tZ)(ch,{title:"Kaboom",actions:[{icon:(0,B.tZ)(eu.Z,{rotate:s?0:-90}),action:function(){return l(!s)}}]}),s&&(0,B.tZ)("div",{className:"box",children:(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Start Scene"}),(0,B.tZ)("select",{name:"startScene",value:n.startScene,onChange:function(e){r(gh(gh({},n),{},{startScene:e.currentTarget.value}))},children:u.map((function(e){return(0,B.tZ)("option",{value:e,children:e},e)}))})]}),(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Full Screen"}),(0,B.tZ)(lh.Z,{isOn:n.fullscreen,onChange:function(e){r(gh(gh({},n),{},{fullscreen:e.target.checked}))}})]}),!n.fullscreen&&(0,B.BX)(ve.Ug,{spacing:1,wrap:"nowrap",children:[(0,B.tZ)(Yt.ZP,{label:"Width",name:"width",value:n.width,onChange:function(e){r(gh(gh({},n),{},{width:Number(e.target.value)}))}}),(0,B.tZ)(Yt.ZP,{label:"Height",name:"height",value:n.height,onChange:function(e){r(gh(gh({},n),{},{height:Number(e.target.value)}))}})]}),(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Scale"}),(0,B.tZ)(he.Z,{size:"medium",onClick:function(){r(gh(gh({},n),{},{scale:Math.max(1,n.scale-1)}))},children:"-"}),(0,B.tZ)(ge.Z,{size:"medium",foreground:"1",fontWeight:"medium",children:n.scale}),(0,B.tZ)(he.Z,{size:"medium",onClick:function(){r(gh(gh({},n),{},{scale:Math.min(4,n.scale+1)}))},children:"+"})]}),(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Clear Color"}),(0,B.tZ)(lh.Z,{isOn:null!==n.clearColor,onChange:function(e){r(gh(gh({},n),{},{clearColor:e.target.checked?[0,0,0,1]:null}))}}),(0,B.tZ)("input",{type:"color",value:n.clearColor?(t=n.clearColor,"#"+((1<<24)+(~~(255*t[0])<<16)+(~~(255*t[1])<<8)+~~(255*t[2])).toString(16).slice(1)):void 0,onChange:function(e){var t=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?t.slice(1).map((function(e){return parseInt(e,16)/255})):null}(e.target.value);t&&r(gh(gh({},n),{},{clearColor:[].concat((0,Vt.Z)(t),[1])}))}})]}),(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Debug"}),(0,B.tZ)(lh.Z,{isOn:n.debug,onChange:function(e){r(gh(gh({},n),{},{debug:e.target.checked}))}})]}),(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Version"}),(0,B.tZ)("select",{name:"version",value:n.version,onChange:function(e){r(gh(gh({},n),{},{version:e.currentTarget.value}))},children:ph.map((function(e){return(0,B.tZ)("option",{value:e,children:e},e)}))})]})]})})]})},xh=n(13855);var wh=function(e){var t=e.isActive,n=e.name,r=e.icon,i=e.options,a=e.onClick,o=e.onRename,s=ee.useState(!1),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=ee.useState(null),p=(0,L.Z)(d,2),f=p[0],m=p[1],h=(0,fc.Z)((function(){u(!1)}),[]),g=(0,fc.Z)((function(){m(null)}),[]);return ee.useEffect((function(){g.current&&null!==f&&g.current.focus()}),[g,f]),(0,B.BX)("div",{onClick:a,className:"jsx-3068685327 "+(St()("entry",{active:t&&null===f})||""),children:[(0,B.tZ)(q.default,{id:"3068685327",children:[".entry.jsx-3068685327{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative;}",".entry.active.jsx-3068685327{background:var(--accent-primary-default) !important;color:var(--white) !important;font-weight:var(--font-weight-medium) !important;}",".entry.jsx-3068685327:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer;}",".options-icon.jsx-3068685327{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest);}",".options-icon.jsx-3068685327:hover{color:var(--foreground-dimmest);}",".options-icon.active.jsx-3068685327{opacity:1 !important;color:var(--white) !important;}",".entry.jsx-3068685327:hover .options-icon.jsx-3068685327{opacity:1;}",".options-box.jsx-3068685327{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular) !important;z-index:500;}",".option.jsx-3068685327{padding:var(--space-8);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".option.danger.jsx-3068685327{color:var(--accent-negative-default);}",".option.jsx-3068685327:hover{background:var(--background-higher);}",".option.danger.jsx-3068685327:hover{background:var(--accent-negative-default);color:var(--white);}"]}),(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[r,null===f?(0,B.tZ)("p",{className:"jsx-3068685327",children:n}):(0,B.tZ)(Yt.ZP,{ref:g,value:f,onChange:function(e){m(e.currentTarget.value)},onKeyDown:fh({Escape:function(){m(null)},Enter:function(){o&&f&&o(f),m(null)}})})]}),i&&i.length>0&&(0,B.tZ)("div",{onClick:function(e){e.stopPropagation(),u(!c)},className:"jsx-3068685327 "+(St()("options-icon",{active:t})||""),children:(0,B.tZ)(xh.Z,{})}),i&&i.length>0&&c&&(0,B.tZ)("div",{ref:h,onKeyDown:fh({Escape:function(){u(!1)}}),className:"jsx-3068685327 options-box",children:i.map((function(e){return e?(0,B.tZ)("div",{onClick:function(t){t.stopPropagation(),u(!1),e.action(),"rename"===e.name&&m(n)},className:"jsx-3068685327 "+(St()("option",{danger:e.danger})||""),children:e.name},e.name):null}))})]})};function kh(e){var t=e.close,n=e.entries,r=(0,Pe.Z)(),i=r.fs,a=r.session,o=(0,fc.Z)(t,[]),s=(0,Wt.Z)().showError,l=sh({name:""}),c=(0,L.Z)(l,3),u=c[0],d=c[2];return ee.useEffect((function(){o.current&&o.current.focus()}),[o]),(0,B.tZ)(Yt.ZP,{ref:o,name:"name",onChange:d,onKeyDown:fh({Escape:t,Enter:function(){var e="".concat(u.name,".js"),r="scenes/".concat(e);n.includes(e)?s("scene '".concat(u.name,"' already exists")):(i.writeFile(r,ar.Z.from("")).then((function(){a.openFile(r)})),t())}})})}var Zh=function(e){var t=e.gameConf,n=(0,Pe.Z)(),r=n.fs,i=n.session,a=(0,xn.Z)(),o=ee.useState(!1),s=(0,L.Z)(o,2),l=s[0],c=s[1],u=(0,Wt.Z)().showError,d=ee.useState(null),p=(0,L.Z)(d,2),f=p[0],m=p[1],h=((0,zr.Z)({path:"scenes",initialExpanded:!0,fs:r}).children||[]).filter((function(e){return e.type===wn.Tv.File})).map((function(e){return e.filename})).sort();return(0,B.BX)(dh,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var t="scenes/".concat(e.name);h.includes(t)?u("scene '".concat((0,kn.eb)(e.name),"' already exists")):e.text().then((function(e){r.writeFile(t,ar.Z.from(e))}))}},children:[(0,B.tZ)(ch,{sub:!0,title:"Scenes",actions:[{icon:(0,B.tZ)(qt.Z,{}),action:function(){return c(!0)}}]}),(0,B.tZ)("div",{children:h.map((function(e){var n="scenes/".concat(e),o=(0,kn.eb)(e),s=[{name:"rename",action:function(){}}];return h.length>1&&s.push({name:"delete",action:function(){return m(n)},danger:!0}),(0,B.tZ)(wh,{isActive:n===a,onClick:function(){return i.openFile(n)},onRename:function(e){r.moveFile(n,"scenes/".concat(e,".js")).then((function(e){e.error&&u("failed to rename")}))},name:o,icon:t.startScene===o&&(0,B.tZ)(rl.Z,{}),options:s},o)}))}),l&&(0,B.tZ)(kh,{entries:h,close:function(){return c(!1)}}),f&&(0,B.tZ)(Pt.ZP,{isOpen:Boolean(f),onRequestClose:function(){return m(null)},children:(0,B.tZ)($m.Z,{danger:!0,prompt:"Delete scene '".concat((0,kn.eb)(f),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return m(null)},onConfirm:function(){r.deleteFile(f),m(null)}})})]})},jh=n(63022),Oh=n(98906),Eh=n(54098),_h=n.n(Eh);var Ch=function(e){var t=e.kind,n=e.renderItem,r=e.onRequestClose,i=e.onAdd,a=(0,Pe.Z)(),o=a.fs,s=a.session,l=ee.useState([]),c=(0,L.Z)(l,2),u=c[0],d=c[1],p=ee.useState(""),f=(0,L.Z)(p,2),m=f[0],h=f[1],g="https://kaboomjs.com/assets/".concat(t),v=(0,Wt.Z)().showError;function b(e){var n="".concat(g,"/").concat(e);_h()(n).then((function(e){return e.arrayBuffer()})).then((function(a){var l="".concat(t,"/").concat(e);o.writeFile(l,ar.Z.from(a)).then((function(t){if(t.error)throw new Error(t.error);s.openFile(l),i&&i(e,n)})),r()})).catch(v)}return ee.useEffect((function(){_h()("".concat(g,"?fmt=json")).then((function(e){return e.json()})).then((function(e){return d(e)})).catch(v)}),[d,v,g]),(0,B.BX)("div",{className:"jsx-309452596 assets",children:[(0,B.BX)(ve.gC,{spacing:2,children:[(0,B.tZ)(Ne.Z,{level:3,children:"Assets Lib (beta)"}),0===u.length?(0,B.tZ)(ge.Z,{foreground:2,children:"Loading..."}):(0,B.BX)(B.HY,{children:[(0,B.tZ)(Yt.ZP,{large:!0,label:"Search",onChange:function(e){h(e.target.value)}}),(0,B.tZ)("div",{className:"jsx-309452596 box",children:u.filter((function(e){return!m||e.includes(m)})).map((function(e){return n({name:e,url:"".concat(g,"/").concat(e),add:function(){return b(e)}})}))}),(0,B.tZ)(he.Z,{size:"small",onClick:function(){u.length>0&&b(u[Math.floor(Math.random()*u.length)])},children:"I'm Feeling Lucky"})]})]}),(0,B.tZ)(q.default,{id:"309452596",children:[".assets.jsx-309452596{padding:var(--space-24);}",".box.jsx-309452596{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll;}"]})]})};function Sh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ph(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sh(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nh(e){var t=e.url,n=e.add;return(0,B.BX)(B.HY,{children:[(0,B.tZ)("img",{src:t,loading:"lazy",onClick:n,className:"jsx-2838917446 entry"}),(0,B.tZ)(q.default,{id:"2838917446",children:[".entry.jsx-2838917446{padding:var(--space-16);height:120px;image-rendering:pixelated;border-radius:var(--border-radius-4);}",".entry.jsx-2838917446:hover{cursor:pointer;background:var(--background-root);}"]})]})}function Th(e){var t=e.close,n=e.entries,r=(0,Pe.Z)(),i=r.fs,a=r.session,o=(0,fc.Z)(t,[]),s=ee.useRef(null),l=(0,Wt.Z)().showError,c=sh({name:"",width:0,height:0}),u=(0,L.Z)(c,3),d=u[0],p=u[2];ee.useEffect((function(){s.current&&s.current.focus()}),[s]);var f=function(){var e=d.width,r=d.height;if(0!==d.name.length)if(isNaN(e)||e<=0||e>256)l("only supports sprites smaller than 256x256 yet");else if(isNaN(r)||r<=0||r>256)l("only supports sprites smaller than 256x256 yet");else{var o="".concat(d.name,".kbmsprite"),s="sprites/".concat(o);n.includes(o)?l("sprite '".concat(d.name,"' already exists")):(i.writeFile(s,ar.Z.from(JSON.stringify({frames:[{pixels:Array(d.width*d.height*4).fill(0),width:d.width,height:d.height}],width:d.width,height:d.height}))).then((function(){a.openFile(s)})),t())}else l("invalid 'name'")};return(0,B.BX)("div",{ref:o,onKeyDown:fh({Escape:t,Enter:f}),className:"jsx-2487777647 root",children:[(0,B.tZ)(q.default,{id:"2487777647",children:[".root.jsx-2487777647{background:var(--background-root);border-radius:var(--border-radius-4);margin:var(--space-8) auto;width:calc(100%);padding:var(--space-16);}"]}),(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)(Yt.ZP,{label:"Name",name:"name",large:!0,ref:s,onChange:p}),(0,B.BX)(ve.Ug,{spacing:1,wrap:"nowrap",children:[(0,B.tZ)(Yt.ZP,{label:"Width",name:"width",large:!0,onChange:p}),(0,B.tZ)(Yt.ZP,{label:"Height",name:"height",large:!0,onChange:p})]}),(0,B.BX)(ve.Ug,{spacing:1,children:[(0,B.tZ)(he.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,B.tZ)(he.Z,{size:"medium",color:"primary",onClick:f,children:"Create"})]})]})]})}var Ih=function(){var e=(0,Pe.Z)(),t=e.fs,n=e.session,r=(0,Wt.Z)().showError,i=(0,xn.Z)(),a=ee.useState(!1),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=ee.useState(!1),u=(0,L.Z)(c,2),d=u[0],p=u[1],f=ee.useState(null),m=(0,L.Z)(f,2),h=m[0],g=m[1],v=ee.useState({}),b=(0,L.Z)(v,2),y=b[0],x=b[1],w=ee.useCallback((function(e){return function(){var n=(0,X.Z)(U().mark((function n(){var r,i,a,o,s,l,c,u,d;return U().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="sprites/".concat(e),n.next=3,t.stat(r);case 3:if((i=n.sent).exists){n.next=7;break}return y[e]&&x((function(t){var n=Ph({},t);return delete n[e],n})),n.abrupt("return");case 7:if(a=i.lastModified.getTime(),!y[e]||y[e].lastMod!==a){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,t.readFile(r);case 12:if(!(o=n.sent).error){n.next=15;break}return n.abrupt("return");case 15:e.endsWith(".kbmsprite")?(s=o.content.toString(),l=JSON.parse(s),x((function(t){return Ph(Ph({},t),{},(0,K.Z)({},e,{lastMod:a,img:l.preview}))}))):e.endsWith("pedit")?(c=o.content.toString(),u=JSON.parse(c),x((function(t){return Ph(Ph({},t),{},(0,K.Z)({},e,{lastMod:a,img:u.frames[0]}))}))):(d=(0,kn.yC)(r))&&x((function(t){return Ph(Ph({},t),{},(0,K.Z)({},e,{lastMod:a,img:"data:".concat(d,";base64,").concat(o.content.toString("base64"))}))}));case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),y[e]?y[e].img:null}),[y,t]),k=((0,zr.Z)({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===wn.Tv.File})).map((function(e){return e.filename})).sort(),Z=["image/png","image/jpeg",".pedit",".kbmsprite"],j=function(e){var n="sprites/".concat(e.name);k.includes(n)?r("sprite '".concat((0,kn.eb)(e.name),"' already exists")):e.arrayBuffer().then((function(e){t.writeFile(n,ar.Z.from(e))}))},O=[{icon:(0,B.tZ)(jh.Z,{}),action:function(){return p(!0)}},{icon:(0,B.tZ)(Oh.Z,{}),action:function(){return mh(j,Z)}},{icon:(0,B.tZ)(qt.Z,{}),action:function(){return l(!0)}}];return(0,B.BX)(dh,{fileDrag:{accept:Z,onDrop:j},children:[(0,B.tZ)(ch,{sub:!0,title:"Sprites",actions:O}),(0,B.tZ)("div",{className:"jsx-3831399815",children:k.map((function(e){var a="sprites/".concat(e),o=(0,kn.eb)(e),s=w(e);return(0,B.tZ)(wh,{isActive:a===i,onClick:function(){return n.openFile(a)},onRename:function(n){t.moveFile(a,"sprites/".concat(n,".").concat((0,kn.r6)(e))).then((function(e){e.error&&r("failed to rename")}))},icon:(0,B.tZ)("div",{className:"jsx-3831399815 preview-img",children:s&&(0,B.tZ)("img",{src:s,className:"jsx-3831399815"})}),name:o,options:[{name:"rename",action:function(){}},{name:"delete",action:function(){return g(a)},danger:!0}]},o)}))}),s&&(0,B.tZ)(Th,{entries:k,close:function(){return l(!1)}}),h&&(0,B.tZ)(Pt.ZP,{isOpen:Boolean(h),onRequestClose:function(){return g(null)},children:(0,B.tZ)($m.Z,{danger:!0,prompt:"Delete sprite '".concat((0,kn.eb)(h),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return g(null)},onConfirm:function(){t.deleteFile(h),g(null)}})}),(0,B.tZ)(Pt.ZP,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,B.tZ)(Ch,{kind:"sprites",renderItem:Nh,onRequestClose:function(){return p(!1)}})}),(0,B.tZ)(q.default,{id:"3831399815",children:[".preview-img.jsx-3831399815{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;}",".preview-img.jsx-3831399815 img.jsx-3831399815{width:100%;image-rendering:pixelated;image-rendering:crisp-edges;}"]})]})};function Rh(e){var t=e.name,n=e.url,r=e.add;return(0,B.BX)(ve.Ug,{justify:"space-between",align:"center",children:[(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)(ge.Z,{children:t}),(0,B.tZ)("audio",{src:n,controls:!0})]}),(0,B.tZ)(he.Z,{onClick:r,children:"Import"})]})}var Dh=function(){var e=(0,Pe.Z)(),t=e.fs,n=e.session,r=(0,xn.Z)(),i=(0,Wt.Z)().showError,a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=ee.useState(!1),u=(0,L.Z)(c,2),d=u[0],p=u[1],f=((0,zr.Z)({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===wn.Tv.File})).map((function(e){return e.filename})).sort(),m=["audio/ogg","audio/mpeg","audio/wav"],h=function(e){var n="sounds/".concat(e.name);f.includes(n)?i("sound '".concat((0,kn.eb)(e.name),"' already exists")):e.arrayBuffer().then((function(e){t.writeFile(n,ar.Z.from(e))}))},g=[{icon:(0,B.tZ)(jh.Z,{}),action:function(){return p(!0)}},{icon:(0,B.tZ)(Oh.Z,{}),action:function(){return mh(h,m)}}];return(0,B.BX)(dh,{fileDrag:{accept:m,onDrop:h},children:[(0,B.tZ)(ch,{sub:!0,title:"Sounds",actions:g}),(0,B.tZ)("div",{children:f.map((function(e){var a=(0,kn.eb)(e),o="sounds/".concat(e);return(0,B.tZ)(wh,{isActive:o===r,onClick:function(){return n.openFile(o)},onRename:function(n){t.moveFile(o,"sounds/".concat(n,".").concat((0,kn.r6)(e))).then((function(e){e.error&&i("failed to rename")}))},name:a,options:[{name:"rename",action:function(){}},{name:"delete",action:function(){return l(o)},danger:!0}]},a)}))}),s&&(0,B.tZ)(Pt.ZP,{isOpen:Boolean(s),onRequestClose:function(){return l(null)},children:(0,B.tZ)($m.Z,{danger:!0,prompt:"Delete sound '".concat((0,kn.eb)(s),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return l(null)},onConfirm:function(){t.deleteFile(s),l(null)}})}),(0,B.tZ)(Pt.ZP,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,B.tZ)(Ch,{kind:"sounds",renderItem:Rh,onRequestClose:function(){return p(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},Ah=n(25757);function Lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lh(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mh=function(e){var t=e.wid,n=e.debugState,r=e.version,i=e.setDebugState,a=e.handleDebugStateInput,o=(0,at.I0)(),s=ee.useState(!1),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=ee.useState(!1),p=(0,L.Z)(d,2),f=p[0],m=p[1],h=(0,Wa.Z)(),g=ee.useCallback((function(e){h.current&&o({type:"EVAL_CODE",wid:t,clean:!1,silent:!0,code:e})}),[o,t,h]),v=(0,Ah.H)(r,"0.3.0"),b=(0,Ah.H)(r,"0.4.0"),y=(0,Ah.H)(r,"0.5.0"),x=y?"debug":b?"dbg()":"kaboom.debug";return ee.useEffect((function(){v||g("pause(".concat(c,")"))}),[r,g,c]),ee.useEffect((function(){v&&g("".concat(x,".paused = ").concat(n.paused?"true":"false"))}),[r,g,n.paused]),ee.useEffect((function(){g("".concat(x,".showArea = ").concat(n.showArea?"true":"false"))}),[g,n.showArea]),ee.useEffect((function(){g("".concat(x,".hoverInfo = ").concat(n.hoverInfo?"true":"false"))}),[g,n.hoverInfo]),ee.useEffect((function(){g("".concat(x,".timeScale = ").concat(n.timeScale))}),[g,n.timeScale]),(0,B.BX)(dh,{children:[(0,B.tZ)(ch,{sub:!0,title:"Debug",actions:[{icon:(0,B.tZ)(eu.Z,{rotate:f?0:-90}),action:function(){return m(!f)}}]}),f&&(0,B.tZ)("div",{className:"box",children:(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)(he.Z,{size:"medium",onClick:function(){v?i(Bh(Bh({},n),{},{paused:!n.paused})):u(!c)},children:(v?n.paused:c)?"Unpause":"Pause"}),(0,B.tZ)(he.Z,{size:"medium",onClick:function(){o({type:"EVAL_CODE",wid:t,clean:!1,silent:!0,code:y?"debug.stepFrame()":"stepFrame()"})},children:"Step Frame"}),(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Show Area"}),(0,B.tZ)(lh.Z,{isOn:n.showArea,onChange:function(e){i(Bh(Bh({},n),{},{showArea:e.currentTarget.checked}))}})]}),(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Hover Info"}),(0,B.tZ)(lh.Z,{isOn:n.hoverInfo,onChange:function(e){i(Bh(Bh({},n),{},{hoverInfo:e.currentTarget.checked}))}})]}),(0,B.tZ)(ge.Z,{size:"small",foreground:"2",children:"Time Scale"}),(0,B.BX)(ve.Ug,{spacing:1,wrap:"nowrap",children:[(0,B.tZ)("input",{type:"range",name:"timeScale",min:"0",max:"2",value:n.timeScale,step:"0.25",onChange:a}),(0,B.tZ)(ge.Z,{size:"small",foreground:"1",children:n.timeScale})]})]})})]})},Uh=[{title:"Building Asteroids in Kaboom.js",url:"https://docs.replit.com/tutorials/23-build-asteroids-with-kaboom",img:"https://docs.replit.com/images/tutorials/23-asteroids-kaboom/asteroids-game.gif"},{title:"Building Snake in Kaboom.js",url:"https://docs.replit.com/tutorials/21-build-snake-with-kaboom",img:"https://docs.replit.com/images/tutorials/21-snake-kaboom/updated-graphic.gif"},{title:"Build a Space Shooter with Kaboom.js",url:"https://docs.replit.com/tutorials/24-build-space-shooter-with-kaboom",img:"https://docs.replit.com/images/tutorials/24-space-shooter-kaboom/gameplay.gif"}];function Xh(e){return(0,B.BX)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"jsx-1860337860 entry",children:[(0,B.tZ)("img",{src:e.img,className:"jsx-1860337860 img"}),(0,B.tZ)(ge.Z,{children:e.title}),(0,B.tZ)(q.default,{id:"1860337860",children:[".entry.jsx-1860337860{width:100%;border-radius:var(--border-radius-4);padding:var(--space-16);display:block;}",".entry.jsx-1860337860:hover{-webkit-text-decoration:none;text-decoration:none;background:var(--background-root);}",".entry.jsx-1860337860:focus{-webkit-text-decoration:none;text-decoration:none;}",".img.jsx-1860337860{width:100%;height:120px;border-radius:var(--border-radius-4);}"]})]})}var Fh=function(){return(0,B.BX)("div",{className:"jsx-2193845616 tutorials",children:[(0,B.tZ)(Ne.Z,{level:4,children:"Kaboom Tutorials"}),(0,B.tZ)("div",{className:"jsx-2193845616 entries",children:Uh.map(Xh)}),(0,B.tZ)(q.default,{id:"2193845616",children:[".tutorials.jsx-2193845616{padding:var(--space-32);box-sizing:border-box;}",".entries.jsx-2193845616{margin-top:var(--space-16);display:grid;grid-template-columns:repeat(2,auto);}"]})]})};function zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zh(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hh=(0,Na.Z)(["KABOOM_RUN_COMPLETE"]),Gh=Hh.receiver,Wh=Hh.useReceiver;function Kh(e){var t=e.wid,n=(0,at.I0)(),r=(0,Pe.Z)().fs,i=(0,Wt.Z)().showError,a=(0,Wa.Z)(),o=ee.useState(!1),s=(0,L.Z)(o,2),l=s[0],c=s[1];n({type:"LOAD_FILE",wid:t,path:"scenes/main.js"});var u=ph[0],d=ee.useState({fullscreen:!0,width:240,height:240,scale:2,startScene:"main",debug:!0,clearColor:null,version:u}),p=(0,L.Z)(d,2),f=p[0],m=p[1],h=sh({showArea:!1,hoverInfo:!1,timeScale:1,paused:!1}),g=(0,L.Z)(h,3),v=g[0],b=g[1],y=g[2];return ee.useEffect((function(){(function(){var e=(0,X.Z)(U().mark((function e(){var t,n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.readFile("conf.json");case 2:if((t=e.sent)&&!t.error){e.next=6;break}return i("failed to read conf.json"),e.abrupt("return");case 6:(n=JSON.parse(t.content.toString())).version||(n.version=u),"master"===n.version&&(n.version="0.0.0"),m(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),ee.useEffect((function(){a.current&&r.writeFile("conf.json",ar.Z.from(JSON.stringify(f))).then((function(e){e.error&&i("failed to write config")}))}),[f]),Wh((function(e){switch(e.action.type){case"KABOOM_RUN_COMPLETE":var r="\nkaboom.debug.showArea = ".concat(v.showArea,";\nkaboom.debug.hoverInfo = ").concat(v.hoverInfo,";\nkaboom.debug.timeScale = ").concat(v.timeScale,";\n");n({type:"EVAL_CODE",wid:t,clean:!1,code:r,silent:!0})}})),(0,B.BX)("div",Vh(Vh({},e),{},{className:"jsx-743611975 kaboom",children:[(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)(yh,{gameConf:f,setGameConf:m}),(0,B.tZ)(Zh,{gameConf:f}),(0,B.tZ)(Ih,{}),(0,B.tZ)(Dh,{}),(0,B.tZ)(Mh,{wid:t,version:f.version,debugState:v,setDebugState:b,handleDebugStateInput:y}),(0,B.tZ)(he.Z,{fullWidth:!1,onClick:function(){return c(!0)},children:"Tutorials"}),(0,B.tZ)(Pt.ZP,{isOpen:l,onRequestClose:function(){return c(!1)},children:(0,B.tZ)(Fh,{})})]}),(0,B.tZ)(q.default,{id:"743611975",children:[".kaboom.jsx-743611975{color:var(--foreground-default);background:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow-y:scroll;width:100%;}",".kaboom.jsx-743611975>*.jsx-743611975{margin-bottom:var(--space-8);}",".kaboom.jsx-743611975:last-child{margin-bottom:0;}",".kaboom.jsx-743611975 .box{padding:var(--space-8);}",".kaboom.jsx-743611975 select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--background-higher);border:1px solid var(--outline-dimmest);padding:var(--space-8);color:var(--foreground-default);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-medium);border-radius:var(--border-radius-4);}",".kaboom.jsx-743611975 select:hover{background-color:var(--background-higher);cursor:pointer;}",".kaboom.jsx-743611975 select:focus{outline:none;}",".kaboom.jsx-743611975 input[type='range']{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--background-higher);border-radius:var(--border-radius-4);height:var(--space-8);}",".kaboom.jsx-743611975 input[type='range']:focus{outline:none;}",".kaboom.jsx-743611975 input[type='range']::-webkit-slider-thumb{-webkit-appearance:none;background:var(--foreground-dimmest);width:var(--space-16);height:var(--space-16);border-radius:var(--space-8);}",".tut-btn.jsx-743611975{margin-top:var(--space-8);padding:0 var(--space-8);}"]})]}))}var qh=n(14179);var Yh=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,i=e.actions,a=void 0===i?[]:i;return(0,B.BX)(ve.Ug,{justify:"space-between",align:"center",children:[(0,B.tZ)(q.default,{id:"2650311974",children:[".header-action.jsx-2650311974{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);border-radius:var(--border-radius-4);color:var(--foreground-dimmer);}",".header-action.jsx-2650311974:hover{background:var(--background-higher);cursor:pointer;}"]}),(0,B.tZ)(Ne.Z,{level:r?5:4,children:t}),(0,B.tZ)(ve.Ug,{spacing:"4px",align:"center",children:a&&a.map((function(e,t){return(0,B.tZ)("div",{onClick:e.action,className:"jsx-2650311974 header-action",children:e.icon},t)}))})]})};var Qh=function(e){var t=e.fileDrag,n=e.children,r=ee.useState(!1),i=(0,L.Z)(r,2),a=i[0],o=i[1],s=ee.useRef(0);return(0,B.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var a=r[i];t.accept.includes(a.type)||(n=!1)}n&&(o(!0),s.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current--,0===s.current&&o(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),s.current=0,o(!1),(0,Vt.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-26096692 section",children:[(0,B.tZ)(q.default,{id:"26096692",children:[".section.jsx-26096692{position:relative;width:100%;}",".dragfilter.jsx-26096692{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);border-radius:var(--border-radius-4);opacity:0.2;}",".dragfilter.hidden.jsx-26096692{display:none !important;}"]}),n,(0,B.tZ)("div",{className:"jsx-26096692 "+(St()("dragfilter",{hidden:!a})||"")})]})};var Jh,$h=function(){var e=(0,Pe.Z)().session,t=ee.useState(!1),n=(0,L.Z)(t,2),r=n[0],i=n[1];return(0,B.BX)(Qh,{children:[(0,B.tZ)(Yh,{title:"Kaboom",actions:[{icon:(0,B.tZ)(eu.Z,{rotate:r?0:-90}),action:function(){return i(!r)}}]}),r&&(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)("div",{}),(0,B.tZ)(he.Z,{Icon:mp.Z,size:"small",onClick:function(){return e.openFile("template.html")},children:"Edit HTML Template"})]})]})};function eg(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function tg(e,t){Jh||(Jh=document.createElement("input")).setAttribute("type","file"),Jh.setAttribute("accept",t.join(","));Jh.addEventListener("change",(function t(){Jh.files&&((0,Vt.Z)(Jh.files).forEach(e),Jh.removeEventListener("change",t))})),Jh.click()}var ng=function(e){var t=e.isActive,n=e.name,r=e.icon,i=e.options,a=e.onClick,o=e.onRename,s=ee.useState(!1),l=(0,L.Z)(s,2),c=l[0],u=l[1],d=ee.useState(null),p=(0,L.Z)(d,2),f=p[0],m=p[1],h=(0,fc.Z)((function(){u(!1)}),[]),g=(0,fc.Z)((function(){m(null)}),[]);return ee.useEffect((function(){g.current&&null!==f&&g.current.focus()}),[g,f]),(0,B.BX)("div",{onClick:a,className:"jsx-2923745127 "+(St()("entry",{active:t&&null===f})||""),children:[(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[r,null===f?(0,B.tZ)("p",{className:"jsx-2923745127",children:n}):(0,B.tZ)(Yt.ZP,{ref:g,value:f,onChange:function(e){m(e.currentTarget.value)},onKeyDown:eg({Escape:function(){m(null)},Enter:function(){o&&f&&o(f),m(null)}})})]}),i&&i.length>0&&(0,B.tZ)("div",{onClick:function(e){e.stopPropagation(),u(!c)},className:"jsx-2923745127 "+(St()("options-icon",{active:t})||""),children:(0,B.tZ)(xh.Z,{})}),i&&i.length>0&&c&&(0,B.tZ)("div",{ref:h,onKeyDown:eg({Escape:function(){u(!1)}}),className:"jsx-2923745127 options-box",children:i.map((function(e){return e?(0,B.tZ)("div",{onClick:function(t){t.stopPropagation(),u(!1),e.action(),"Rename"===e.name&&m(n)},className:"jsx-2923745127 "+(St()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}),(0,B.tZ)(q.default,{id:"2923745127",children:[".entry.jsx-2923745127{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative;}",".entry.active.jsx-2923745127{background:var(--accent-primary-default) !important;color:var(--white) !important;font-weight:var(--font-weight-medium) !important;}",".entry.jsx-2923745127:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer;}",".options-icon.jsx-2923745127{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest);}",".options-icon.jsx-2923745127:hover{color:var(--foreground-dimmest);}",".options-icon.active.jsx-2923745127{opacity:1 !important;color:var(--white) !important;}",".entry.jsx-2923745127:hover .options-icon.jsx-2923745127{opacity:1;}",".options-box.jsx-2923745127{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular) !important;z-index:500;}",".option.jsx-2923745127{padding:var(--space-8);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".option.danger.jsx-2923745127{color:var(--accent-negative-default);}",".option.jsx-2923745127:hover{background:var(--background-higher);}",".option.danger.jsx-2923745127:hover{background:var(--accent-negative-default);color:var(--white);}"]})]})};function rg(e){var t=e.close,n=e.entries,r=(0,Pe.Z)(),i=r.fs,a=r.session,o=(0,fc.Z)(t,[]),s=(0,Wt.Z)().showError,l=sh({name:""}),c=(0,L.Z)(l,3),u=c[0],d=c[2];return ee.useEffect((function(){o.current&&o.current.focus()}),[o]),(0,B.tZ)(Yt.ZP,{ref:o,name:"name",onChange:d,onKeyDown:eg({Escape:t,Enter:function(){var e="".concat(u.name,".js"),r="code/".concat(e);n.includes(e)?s("file '".concat(u.name,"' already exists")):(i.writeFile(r,ar.Z.from("")).then((function(){a.openFile(r)})),t())}})})}var ig=function(){var e=(0,Pe.Z)(),t=e.fs,n=e.session,r=(0,xn.Z)(),i=ee.useState(!1),a=(0,L.Z)(i,2),o=a[0],s=a[1],l=(0,Wt.Z)().showError,c=ee.useState(null),u=(0,L.Z)(c,2),d=u[0],p=u[1],f=((0,zr.Z)({path:"code",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===wn.Tv.File})).map((function(e){return e.filename})).sort();return(0,B.BX)(Qh,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var n="code/".concat(e.name);f.includes(n)?l("scene '".concat((0,kn.eb)(e.name),"' already exists")):e.text().then((function(e){t.writeFile(n,ar.Z.from(e))}))}},children:[(0,B.tZ)(Yh,{sub:!0,title:"Code",actions:[{icon:(0,B.tZ)(qt.Z,{}),action:function(){return s(!0)}}]}),(0,B.tZ)(Xs.Z,{height:"4px"}),(0,B.tZ)("div",{children:f.map((function(e){var i="code/".concat(e),a=(0,kn.eb)(e),o=[{name:"Rename",action:function(){}}];return"main"!==a&&o.push({name:"Delete",action:function(){return p(i)},danger:!0}),(0,B.tZ)(ng,{isActive:i===r,onClick:function(){return n.openFile(i)},onRename:function(e){t.moveFile(i,"code/".concat(e,".js")).then((function(e){e.error&&l("failed to rename")}))},name:a,options:o},a)}))}),o&&(0,B.tZ)(rg,{entries:f,close:function(){return s(!1)}}),d&&(0,B.tZ)(Pt.ZP,{isOpen:Boolean(d),onRequestClose:function(){return p(null)},children:(0,B.tZ)($m.Z,{danger:!0,prompt:"Delete scene '".concat((0,kn.eb)(d),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return p(null)},onConfirm:function(){t.deleteFile(d),p(null)}})})]})};var ag=function(e){var t=e.kind,n=e.renderItem,r=e.onRequestClose,i=e.onAdd,a=(0,Pe.Z)(),o=a.fs,s=a.session,l=ee.useState([]),c=(0,L.Z)(l,2),u=c[0],d=c[1],p=ee.useState(""),f=(0,L.Z)(p,2),m=f[0],h=f[1],g="https://kaboomjs.com/".concat(t),v=(0,Wt.Z)().showError;function b(e){var n="".concat(g,"/").concat(e);_h()(n).then((function(e){return e.arrayBuffer()})).then((function(a){var l="".concat(t,"/").concat(e);o.writeFile(l,ar.Z.from(a)).then((function(t){if(t.error)throw new Error(t.error);s.openFile(l),i&&i(e,n)})),r()})).catch((function(){return v("Failed to fetch ".concat(e))}))}return ee.useEffect((function(){_h()("https://kaboomjs.com/api/assets/".concat(t)).then((function(e){return e.json()})).then((function(e){return d(e)})).catch((function(){return v("Failed to fetch assets lib listing")}))}),[d,v,g]),(0,B.BX)("div",{className:"jsx-309452596 assets",children:[(0,B.BX)(ve.gC,{spacing:2,children:[(0,B.tZ)(Ne.Z,{level:3,children:"Assets Lib (beta)"}),0===u.length?(0,B.tZ)(ge.Z,{foreground:2,children:"Loading..."}):(0,B.BX)(B.HY,{children:[(0,B.tZ)(Yt.ZP,{large:!0,label:"Search",onChange:function(e){h(e.target.value)}}),(0,B.tZ)("div",{className:"jsx-309452596 box",children:u.filter((function(e){return!m||e.includes(m)})).map((function(e){return(0,B.tZ)(ee.Fragment,{children:n({name:e,url:"".concat(g,"/").concat(e),add:function(){return b(e)}})},e)}))}),(0,B.tZ)(he.Z,{size:"small",onClick:function(){u.length>0&&b(u[Math.floor(Math.random()*u.length)])},children:"I'm Feeling Lucky"})]})]}),(0,B.tZ)(q.default,{id:"309452596",children:[".assets.jsx-309452596{padding:var(--space-24);}",".box.jsx-309452596{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll;}"]})]})};function og(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?og(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):og(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lg(e){var t=e.url,n=e.add;return(0,B.BX)(B.HY,{children:[(0,B.tZ)("img",{src:t,loading:"lazy",onClick:n,className:"jsx-2838917446 entry"}),(0,B.tZ)(q.default,{id:"2838917446",children:[".entry.jsx-2838917446{padding:var(--space-16);height:120px;image-rendering:pixelated;border-radius:var(--border-radius-4);}",".entry.jsx-2838917446:hover{cursor:pointer;background:var(--background-root);}"]})]})}function cg(e){var t=e.close,n=e.entries,r=(0,Pe.Z)(),i=r.fs,a=r.session,o=(0,fc.Z)(t,[]),s=ee.useRef(null),l=(0,Wt.Z)().showError,c=ee.useState({name:"",width:32,height:32}),u=(0,L.Z)(c,2),d=u[0],p=u[1];ee.useEffect((function(){s.current&&s.current.focus()}),[s]);var f=function(){if(0!==d.name.length){var e=d.width,r=d.height;if(isNaN(e)||isNaN(r)||e<=0||r<=0)l("invalid width / height!");else if(e>256||r>256)l("only supports sprites smaller than 256x256 yet");else{var o="".concat(d.name,".pedit"),s="sprites/".concat(o);n.includes(o)?l("sprite '".concat(d.name,"' already exists")):(i.writeFile(s,ar.Z.from(JSON.stringify({fromKaboom:!0,width:d.width,height:d.height}))).then((function(){a.openFile(s)})),t())}}else l("invalid 'name'")};return(0,B.BX)("div",{ref:o,onKeyDown:eg({Escape:t,Enter:f}),className:"jsx-3766385775 dialog",children:[(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)(Yt.ZP,{label:"Name",name:"name",large:!0,ref:s,value:d.name,onChange:function(e){p(sg(sg({},d),{},{name:e.target.value}))}}),(0,B.BX)(ve.Ug,{spacing:1,wrap:"nowrap",children:[(0,B.tZ)(Yt.ZP,{label:"Width",name:"width",large:!0,value:d.width,onChange:function(e){return p(sg(sg({},d),{},{width:parseInt(e.target.value,10)||0}))}}),(0,B.tZ)(Yt.ZP,{label:"Height",name:"height",large:!0,value:d.height,onChange:function(e){return p(sg(sg({},d),{},{height:parseInt(e.target.value,10)||0}))}})]}),(0,B.BX)(ve.Ug,{spacing:1,children:[(0,B.tZ)(he.Z,{size:"medium",onClick:t,children:"Cancel"}),(0,B.tZ)(he.Z,{size:"medium",color:"primary",onClick:f,children:"Create"})]})]}),(0,B.tZ)(q.default,{id:"3766385775",children:[".dialog.jsx-3766385775{background:var(--background-root);border-radius:var(--border-radius-4);margin:var(--space-8) auto;width:calc(100%);padding:var(--space-16);}"]})]})}var ug=function(){var e=(0,Pe.Z)(),t=e.fs,n=e.session,r=(0,Wt.Z)().showError,i=(0,xn.Z)(),a=ee.useState(!1),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=ee.useState(!1),u=(0,L.Z)(c,2),d=u[0],p=u[1],f=ee.useState(null),m=(0,L.Z)(f,2),h=m[0],g=m[1],v=ee.useState({}),b=(0,L.Z)(v,2),y=b[0],x=b[1],w=(0,Fs.Z)(),k=ee.useCallback((function(e){return function(){var n=(0,X.Z)(U().mark((function n(){var r,i,a,o,s,l,c;return U().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="sprites/".concat(e),n.next=3,t.stat(r);case 3:if((i=n.sent).exists){n.next=7;break}return y[e]&&x((function(t){var n=sg({},t);return delete n[e],n})),n.abrupt("return");case 7:if(a=i.lastModified.getTime(),!y[e]||y[e].lastMod!==a){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,t.readFile(r);case 12:if(!(o=n.sent).error){n.next=15;break}return n.abrupt("return");case 15:e.endsWith("pedit")?(s=o.content.toString(),(l=JSON.parse(s)).fromKaboom||x((function(t){return sg(sg({},t),{},(0,K.Z)({},e,{lastMod:a,img:l.frames[0]}))}))):(c=(0,kn.yC)(r))&&x((function(t){return sg(sg({},t),{},(0,K.Z)({},e,{lastMod:a,img:"data:".concat(c,";base64,").concat(o.content.toString("base64"))}))}));case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),y[e]?y[e].img:null}),[y,t]),Z=((0,zr.Z)({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===wn.Tv.File})).map((function(e){return e.filename})).sort(),j=["image/png","image/jpeg",".pedit"],O=function(e){var n="sprites/".concat(e.name);if(Z.includes(n))return r("sprite '".concat((0,kn.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(n,ar.Z.from(e))}))},E=[{icon:(0,B.tZ)(jh.Z,{}),action:function(){return p(!0)}},{icon:(0,B.tZ)(Oh.Z,{}),action:function(){return tg(O,j)}},{icon:(0,B.tZ)(qt.Z,{}),action:function(){return l(!0)}}];return(0,B.BX)(Qh,{fileDrag:{accept:j,onDrop:O},children:[(0,B.tZ)(Yh,{sub:!0,title:"Sprites",actions:E}),(0,B.tZ)(Xs.Z,{height:"4px"}),(0,B.tZ)("div",{className:"jsx-3831399815",children:Z.map((function(e){var a="sprites/".concat(e),o=(0,kn.r6)(e),s=(0,kn.eb)(e),l=k(e),c=w?[{name:"Insert load code",action:function(){var e="".concat("pedit"===o?"loadPedit":"loadSprite","(").concat(JSON.stringify(s),", ").concat(JSON.stringify(a),");");w({code:e})}}]:[];return(0,B.tZ)(ng,{isActive:a===i,onClick:function(){return n.openFile(a)},onRename:function(e){t.moveFile(a,"sprites/".concat(e,".").concat(o)).then((function(e){e.error&&r("failed to rename")}))},icon:(0,B.tZ)("div",{className:"jsx-3831399815 preview-img",children:l&&(0,B.tZ)("img",{src:l,className:"jsx-3831399815"})}),name:s,options:[].concat(c,[{name:"Rename",action:function(){}},{name:"Delete",action:function(){return g(a)},danger:!0}])},s)}))}),s&&(0,B.tZ)(cg,{entries:Z,close:function(){return l(!1)}}),h&&(0,B.tZ)(Pt.ZP,{isOpen:Boolean(h),onRequestClose:function(){return g(null)},children:(0,B.tZ)($m.Z,{danger:!0,prompt:"Delete sprite '".concat((0,kn.eb)(h),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return g(null)},onConfirm:function(){t.deleteFile(h),g(null)}})}),(0,B.tZ)(Pt.ZP,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,B.tZ)(ag,{kind:"sprites",renderItem:lg,onRequestClose:function(){return p(!1)}})}),(0,B.tZ)(q.default,{id:"3831399815",children:[".preview-img.jsx-3831399815{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;}",".preview-img.jsx-3831399815 img.jsx-3831399815{width:100%;image-rendering:pixelated;image-rendering:crisp-edges;}"]})]})};function dg(e){var t=e.name,n=e.url,r=e.add;return(0,B.BX)(ve.Ug,{justify:"space-between",align:"center",children:[(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)(ge.Z,{children:t}),(0,B.tZ)("audio",{src:n,controls:!0})]}),(0,B.tZ)(he.Z,{onClick:r,children:"Import"})]})}var pg=function(){var e=(0,Pe.Z)(),t=e.fs,n=e.session,r=(0,xn.Z)(),i=(0,Wt.Z)().showError,a=ee.useState(null),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=ee.useState(!1),u=(0,L.Z)(c,2),d=u[0],p=u[1],f=(0,Fs.Z)(),m=((0,zr.Z)({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===wn.Tv.File})).map((function(e){return e.filename})).sort(),h=["audio/ogg","audio/mpeg","audio/wav"],g=function(e){var n="sounds/".concat(e.name);if(m.includes(n))return i("sound '".concat((0,kn.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(n,ar.Z.from(e))}))},v=[{icon:(0,B.tZ)(jh.Z,{}),action:function(){return p(!0)}},{icon:(0,B.tZ)(Oh.Z,{}),action:function(){return tg(g,h)}}];return(0,B.BX)(Qh,{fileDrag:{accept:h,onDrop:g},children:[(0,B.tZ)(Yh,{sub:!0,title:"Sounds",actions:v}),(0,B.tZ)(Xs.Z,{height:"4px"}),(0,B.tZ)("div",{children:m.map((function(e){var a=(0,kn.eb)(e),o="sounds/".concat(e),s=f?[{name:"Insert load code",action:function(){return f({code:"loadSound(".concat(JSON.stringify(a),", ").concat(JSON.stringify(o),");")})}}]:[];return(0,B.tZ)(ng,{isActive:o===r,onClick:function(){return n.openFile(o)},onRename:function(n){t.moveFile(o,"sounds/".concat(n,".").concat((0,kn.r6)(e))).then((function(e){e.error&&i("failed to rename")}))},name:a,options:[].concat(s,[{name:"Rename",action:function(){}},{name:"Delete",action:function(){return l(o)},danger:!0}])},a)}))}),s&&(0,B.tZ)(Pt.ZP,{isOpen:Boolean(s),onRequestClose:function(){return l(null)},children:(0,B.tZ)($m.Z,{danger:!0,prompt:"Delete sound '".concat((0,kn.eb)(s),"' ?"),desc:"Are you sure? This cannot be undone.",onCancel:function(){return l(null)},onConfirm:function(){t.deleteFile(s),l(null)}})}),(0,B.tZ)(Pt.ZP,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,B.tZ)(ag,{kind:"sounds",renderItem:dg,onRequestClose:function(){return p(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})};function fg(e){var t=e.file,n=e.name,r=(0,Pe.Z)().session,i=(0,Yr.Z)()===t;return(0,B.BX)("div",{onClick:function(){r.setPreviewedFile(null),r.setPreviewedFile(t)},className:"jsx-4087658189 entry",children:[(0,B.BX)(ve.Ug,{spacing:1,align:"center",children:[i?(0,B.tZ)(tt.Z,{}):(0,B.tZ)(Hu.Z,{}),(0,B.tZ)(ge.Z,{foreground:i?1:2,fontWeight:i?"medium":"regular",children:null!==n&&void 0!==n?n:(0,kn.eb)(t)})]}),(0,B.tZ)(q.default,{id:"4087658189",children:[".entry.jsx-4087658189{cursor:pointer;}"]})]})}var mg=function(){var e=ee.useState(!0),t=(0,L.Z)(e,2),n=t[0],r=t[1],i=ee.useState(!1),a=(0,L.Z)(i,2),o=a[0],s=a[1],l=(0,Pe.Z)().fs,c=(0,at.I0)(),u=(0,Ut.Z)(),d=(0,zr.Z)({path:"learn",initialExpanded:!0,fs:l});ee.useEffect((function(){var e=!1;return l.stat("README.md").then((function(t){e||t.exists&&(s(!0),c({wid:u,type:"LOAD_FILE",path:"README.md"}))})),function(){e=!0}}),[]);var p=(d.children||[]).filter((function(e){return e.type===wn.Tv.File&&e.filename.endsWith(".md")})).map((function(e){return e.filename})).sort();return ee.useEffect((function(){p.forEach((function(e){c({wid:u,type:"LOAD_FILE",path:"learn/".concat(e)})}))}),[p]),(0,B.BX)(Qh,{children:[(0,B.tZ)(Yh,{sub:!0,title:"Learn",actions:[{icon:(0,B.tZ)(eu.Z,{rotate:n?0:-90}),action:function(){return r(!n)}}]}),n&&(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)("div",{}),o&&(0,B.tZ)(fg,{name:"Intro",file:"README.md"}),p.map((function(e){return(0,B.tZ)(fg,{file:"learn/".concat(e)},e)}))]})]})};function hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hg(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vg(e){var t=ee.useState(!1),n=(0,L.Z)(t,2),r=n[0],i=n[1];return(0,B.BX)("div",gg(gg({},e),{},{className:"jsx-3983311616 kaboom",children:[(0,B.BX)(ve.gC,{spacing:1,children:[(0,B.tZ)($h,{}),(0,B.tZ)(ig,{}),(0,B.tZ)(ug,{}),(0,B.tZ)(pg,{}),(0,B.tZ)(mg,{}),(0,B.tZ)("div",{className:"jsx-3983311616"}),(0,B.tZ)(he.Z,{Icon:Sf.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,B.tZ)(he.Z,{Icon:Sf.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,B.tZ)(he.Z,{Icon:qh.Z,size:"small",onClick:function(){return i(!0)},children:"What's new"})]}),(0,B.tZ)(Pt.ZP,{isOpen:r,onRequestClose:function(){return i(!1)},children:(0,B.tZ)(or.Z,{css:[Mn.l0.colWithGap(16),Mn.l0.p(32),"",""],children:(0,B.tZ)(Ka.Z,{source:'\n# New Kaboom Workspace\n\n- **No weird delay when run after editing.** Just press Cmd + S to refresh webview and quickly iterate!\n- **Helpful error reporting.** No need to go into browser console every time. The kaboom console displays your errors nicely.\n- **Support NPM packages and typescript by default.** Kaboom dev server builds your code with esbuild on the fly.\n- **Replit DB and Auth integration.** Make a score board even multiplayer with DB and Auth!\n- **In editor tutorial.** The template comes with a nice intro tutorial which you can learn and code along.\n- **Autocomplete.** Updated kaboom lib comes with detailed jsdoc for every function. No need to pull your hair out to figure out how certain functions work!\n- **HTML template.** Easily customize the html for your game.\n- **Total control over which version of Kaboom you use.** it\'s managed by NPM.\n- **Assets Library** Grab some quick assets to test out a game idea.\n- **Transparent dev server.** The dev server scripts are just in the repl, customize them or toss them out if you want to. Or turn it into a multiplayer game server!\n- **New library version** The template comes with kaboom2000 (beta), with bunch of [new stuff and improvements](https://github.com/replit/kaboom/blob/master/CHANGELOG.md)\n\n## Migration Guide\n\n- The kaboom template now will not generate the initializing and assets loading code (`kaboom()`, `loadSprite()` etc.) for you, allowing more customized setup, and making it more portable with using kaboom outside replit.\n\n```js\nimport kaboom from "kaboom";\n\n// initialize context\nkaboom();\n\n// load assets\nloadSprite("bean", "sprites/bean.png");\nloadSound("coin", "sounds/coin.mp3");\n\n// the rest is the same\nconst player = add([\n\tsprite("bean"),\n\tarea(),\n]);\n```\n\nFor easier assets loading, use the "Insert load code" option in the asset entry option menu.\n\n- The template by default is running `kaboom@next`, which is currently the beta version of kaboom2000. It contains breaking changes, all listed in [CHANGELOG.md](https://github.com/replit/kaboom/blob/master/CHANGELOG.md). If you don\'t feel like migrating now, you can always `npm install kaboom@5.1`\n',renderers:{code:qa.Z,link:Ya._}})})}),(0,B.tZ)(q.default,{id:"3983311616",children:[".kaboom.jsx-3983311616{background:var(--background-default);padding:var(--space-8);border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);overflow-y:scroll;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]})]}))}var bg=n(33178),yg=n(25267);function xg(e){var t,n=e.wid,r=(0,Pe.Z)().debuggest,i=(0,Bn.Z)(r.mainClient),a=(0,Bn.Z)(i?i.stackFrames:null);ee.useEffect((function(){r.connect()}),[r]);var o=(0,at.I0)(),s=null===a||void 0===a?void 0:a[0],l=null===s||void 0===s||null===(t=s.source)||void 0===t?void 0:t.path,c=null===s||void 0===s?void 0:s.line;return ee.useEffect((function(){if(l&&c&&i){var e=(0,yg.om)(l);e?o({type:"OPEN_DEEP_LINK",path:e,line:c,wid:n}):i.stepOut()}}),[o,n,i,l,c]),null}function wg(e){return(0,B.BX)(B.HY,{children:[(0,B.tZ)(Ne.Z,{truncate:!0,level:5,children:"Call stack"}),(0,B.tZ)(ve.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(t){return(0,B.tZ)(kg,{frame:t,onClick:e.onFrameClick},t.id)}))})]})}function kg(e){var t,n,r=e.frame,i=e.onClick,a=null===(t=r.source)||void 0===t?void 0:t.name,o=null===(n=r.source)||void 0===n?void 0:n.path,s=a&&(0,yg.om)(a),l=o&&(0,yg.om)(o),c=o&&(0,yg.IT)(o);return(0,B.BX)(B.HY,{children:[(0,B.BX)("div",{onClick:function(){return c&&i(c,r.line)},className:"jsx-1840827836 frame",children:[(0,B.tZ)("div",{className:"jsx-1840827836 label name",children:r.name}),(0,B.BX)("div",{className:"jsx-1840827836 label path",children:[(0,B.tZ)("span",{className:"jsx-1840827836 line",children:r.line}),s||l||a||o]})]}),(0,B.tZ)(q.default,{id:"1840827836",children:[".frame.jsx-1840827836{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code);}",".frame.jsx-1840827836:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".label.jsx-1840827836{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".name.jsx-1840827836{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}",".path.jsx-1840827836{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;}",".line.jsx-1840827836{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}"]})]})}function Zg(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return jg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Og(e){var t,n=[],r=(0,Ta.Z)("flag-debugger-v2"),i=Zg(e.breakpoints);try{for(i.s();!(t=i.n()).done;){var a,o=(0,L.Z)(t.value,2),s=o[0],l=Zg(o[1]);try{for(l.s();!(a=l.n()).done;){var c=a.value;n.push((0,B.tZ)(Eg,{breakpoint:c,file:s,line:c.line,verified:c.verified,supportsLogPoints:r,logMessage:c.logMessage,onClick:e.onBreakpointClick,onUpdate:e.onUpdate},"".concat(s,":").concat(c.line,":").concat(c.pid1Id,":").concat(c.dapId)))}}catch(u){l.e(u)}finally{l.f()}}}catch(u){i.e(u)}finally{i.f()}return(0,B.BX)(B.HY,{children:[(0,B.tZ)(Ne.Z,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,B.tZ)(ve.gC,{align:"stretch",constrainWidth:!0,children:n}):(0,B.BX)(ge.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,B.tZ)("span",{className:"jsx-1723460320 breakpoint"})," by clicking on the line number.",(0,B.tZ)(q.default,{id:"1723460320",children:[".breakpoint.jsx-1723460320{display:inline-block;background-color:var(--accent-primary-default);border-radius:50%;width:8px;height:8px;}"]})]})]})}function Eg(e){var t=e.breakpoint,n=e.file,r=e.line,i=e.verified,a=e.supportsLogPoints,o=e.logMessage,s=e.onClick,l=e.onUpdate,c=(0,yg.om)(n),u=ee.useState(Boolean(o)),d=(0,L.Z)(u,2),p=d[0],f=d[1],m=ee.useState(null!==o&&void 0!==o?o:""),h=(0,L.Z)(m,2),g=h[0],v=h[1];return(0,B.BX)(B.HY,{children:[(0,B.BX)(ve.gC,{spacing:1,align:"stretch",children:[(0,B.BX)("div",{className:"jsx-3045418693 breakpoint",children:[(0,B.BX)("div",{onClick:function(){s(n,r)},className:"jsx-3045418693 frame",children:[(0,B.tZ)("div",{className:"jsx-3045418693 "+(St()("circle",{verified:i})||"")}),(0,B.tZ)("div",{className:"jsx-3045418693 line",children:r}),(0,B.tZ)("div",{className:"jsx-3045418693 location",children:(0,B.tZ)("span",{className:"jsx-3045418693 path",children:c||n})})]}),a&&(0,B.tZ)(eu.Z,{size:"medium",className:"chevron",rotate:p?180:0,onClick:function(){return f(!p)}})]}),p&&(0,B.BX)(ve.gC,{spacing:1,align:"stretch",children:[(0,B.tZ)(Yt.ZP,{label:"log message",name:"logMessage",value:g,onChange:function(e){return v(e.currentTarget.value)},spellCheck:!1}),(0,B.tZ)(he.Z,{onClick:function(){return l({breakpoint:t,logMessage:g})},children:"Save"})]})]}),(0,B.tZ)(q.default,{id:"3045418693",children:[".breakpoint.jsx-3045418693{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".frame.jsx-3045418693{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-default);}",".frame.jsx-3045418693:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".circle.jsx-3045418693{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:0.5;}",".verified.jsx-3045418693{opacity:1;}",".line.jsx-3045418693{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;border-radius:2px;}",".location.jsx-3045418693{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);}",".path.jsx-3045418693{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}",".chevron.jsx-3045418693{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;padding:var(--space-16);}"]})]})}function _g(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Cg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cg(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sg(e){var t=ee.useState(!1),n=(0,L.Z)(t,2),r=n[0],i=n[1],a=[],o=[];if(e.variables.length>0){var s,l=e.variables[0].parentVariableReference,c=_g(e.variables);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.parentVariableReference===l?a.push(u):o.push(u)}}catch(d){c.e(d)}finally{c.f()}}return(0,B.BX)(B.HY,{children:[(0,B.tZ)(Ne.Z,{truncate:!0,level:5,children:"Variables"}),(0,B.BX)(ve.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(t){return(0,B.tZ)(Pg,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),o.length>0&&(0,B.BX)(B.HY,{children:[(0,B.BX)(he.Z,{filled:!1,border:!1,onClick:function(){return i((function(e){return!e}))},children:["See ",r?"Less":"More"]}),r&&o.map((function(t){return(0,B.tZ)(Pg,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function Pg(e){var t=e.depth,n=e.variable,r=e.client,i=ee.useState(!1),a=(0,L.Z)(i,2),o=a[0],s=a[1],l=ee.useState([]),c=(0,L.Z)(l,2),u=c[0],d=c[1];return ee.useEffect((function(){o&&r.fetchVariables(n.variablesReference).then((function(e){return d(e)}),(function(){return s(!1)}))}),[o,r,n.variablesReference]),(0,B.BX)(B.HY,{children:[(0,B.BX)("div",{onClick:function(){n.variablesReference>0&&s((function(e){return!e}))},className:q.default.dynamic([["3900605597",[o?0:-90,t]]])+" variable",children:[(0,B.tZ)("div",{className:q.default.dynamic([["3900605597",[o?0:-90,t]]])+" gutter",children:n.variablesReference>0?(0,B.tZ)("div",{className:q.default.dynamic([["3900605597",[o?0:-90,t]]])+" chevron",children:(0,B.tZ)(eu.Z,{})}):null}),(0,B.BX)("div",{className:q.default.dynamic([["3900605597",[o?0:-90,t]]])+" label",children:[n.name,""!==n.value&&": "]}),(0,B.tZ)("div",{className:q.default.dynamic([["3900605597",[o?0:-90,t]]])+" label value",children:n.value})]}),o?(0,B.tZ)(ve.gC,{align:"stretch",constrainWidth:!0,children:u.map((function(e){return(0,B.tZ)(Pg,{depth:t+1,variable:e,client:r},e.parentVariableReference+"/"+e.name)}))}):null,(0,B.tZ)(q.default,{id:"3900605597",dynamic:[o?0:-90,t],children:[".chevron.__jsx-style-dynamic-selector{-webkit-transform:rotate(".concat(o?0:-90,"deg);-ms-transform:rotate(").concat(o?0:-90,"deg);transform:rotate(").concat(o?0:-90,"deg);-webkit-transition:0.1s -webkit-transform;-webkit-transition:0.1s transform;transition:0.1s transform;}"),".gutter.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:calc(".concat(t," * var(--space-16));font-family:var(--font-family-code);}"),".variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default);}",".label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}",".value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;}"]})]})}function Ng(e){var t=e.client,n=(0,Bn.Z)(null===t||void 0===t?void 0:t.state),r=(0,Bn.Z)(null===t||void 0===t?void 0:t.supportsStepBack);return(0,B.BX)("div",{className:"jsx-305172235 controls",children:[(0,B.BX)(ve.ZP,{wrap:"nowrap",children:[r&&(0,B.BX)(B.HY,{children:[(0,B.tZ)(he.Z,{border:!1,filled:!1,disabled:!t||"terminated"===n,onClick:function(){return null===t||void 0===t?void 0:t.reverseContinue()},"aria-label":"Last Breakpoint","data-microtip-position":"bottom",role:"tooltip",children:Tg}),(0,B.tZ)(he.Z,{border:!1,filled:!1,disabled:!t||"terminated"===n,onClick:function(){return null===t||void 0===t?void 0:t.back()},"aria-label":"Step Back","data-microtip-position":"bottom",role:"tooltip",children:Ig})]}),"terminated"===n&&(0,B.tZ)(he.Z,{border:!1,filled:!1,disabled:!t,onClick:function(){return null===t||void 0===t?void 0:t.start()},"aria-label":"Run","data-microtip-position":"bottom",role:"tooltip",children:Rg}),"terminated"!==n&&(0,B.tZ)(he.Z,{border:!1,filled:!1,disabled:!t,onClick:function(){return null===t||void 0===t?void 0:t.stop()},"aria-label":"Stop","data-microtip-position":"bottom",role:"tooltip",children:Dg}),(0,B.tZ)(he.Z,{border:!1,filled:!1,disabled:!t||"terminated"===n,onClick:function(){return null===t||void 0===t?void 0:t.next()},"aria-label":"Next Step","data-microtip-position":"bottom",role:"tooltip",children:Ag}),(0,B.tZ)(he.Z,{border:!1,filled:!1,disabled:!t||"terminated"===n,onClick:function(){return null===t||void 0===t?void 0:t.continue()},"aria-label":"Next Breakpoint","data-microtip-position":"bottom",role:"tooltip",children:Lg})]}),(0,B.tZ)(q.default,{id:"305172235",children:[".controls.jsx-305172235 button{padding:0;width:44px;height:44px;}"]})]})}var Tg=(0,B.BX)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,B.tZ)("path",{d:"M29 28L23 22L29 16",stroke:"#707070",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,B.tZ)("path",{d:"M21 28L15 22L21 16",stroke:"#707070",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ig=(0,B.tZ)("svg",{width:"45",height:"44",viewBox:"0 0 45 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,B.tZ)("path",{d:"M25.25 28L19.25 22L25.25 16",stroke:"#707070",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Rg=(0,B.tZ)("svg",{width:"43",height:"42",viewBox:"0 0 43 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,B.tZ)("path",{d:"M28.4026 20.6714C28.6616 20.8139 28.6616 21.1861 28.4026 21.3286L14.5557 28.9444C14.3058 29.0818 14 28.901 14 28.6158L14 13.3842C14 13.099 14.3058 12.9182 14.5557 13.0556L28.4026 20.6714Z",fill:"#3485E4",stroke:"#3485E4",strokeWidth:"1.5"})}),Dg=(0,B.tZ)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,B.tZ)("rect",{x:"13",y:"13",width:"18",height:"18",rx:"4",fill:"#707070"})}),Ag=(0,B.tZ)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,B.tZ)("path",{d:"M19.75 28L25.75 22L19.75 16",stroke:"#707070",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Lg=(0,B.BX)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,B.tZ)("path",{d:"M15 28L21 22L15 16",stroke:"#707070",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,B.tZ)("path",{d:"M23 28L29 22L23 16",stroke:"#707070",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});function Bg(e){var t=e.children;return(0,B.BX)("div",{className:"jsx-3346976004 debugger",children:[(0,B.BX)(ve.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,B.BX)(ve.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:[(0,B.tZ)(Ne.Z,{truncate:!0,level:4,children:"Debugger"}),(0,B.tZ)(Au.Z,{link:"https://replit.canny.io/general-feedback/p/debugger-feedback"})]}),(0,B.tZ)("a",{href:"https://replit.canny.io/general-feedback/p/debugger-feedback",target:"_blank",rel:"noopener",className:"jsx-3346976004",children:"Send feedback"}),t]}),(0,B.tZ)(q.default,{id:"3346976004",children:[".debugger.jsx-3346976004{height:100%;width:100%;border-top-right-radius:var(--border-radius-4);background-color:var(--background-default);padding:var(--space-8);overflow:auto;}","a.jsx-3346976004{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium);}"]})]})}function Mg(e){var t=e.wid,n=(0,Pe.Z)().debuggest,r=(0,Bn.Z)(n.mainClient),i=(0,Bn.Z)(r?r.state:null),a=(0,Bn.Z)(r?r.stackFrames:null),o=(0,Bn.Z)(r?r.variables:null),s=(0,Bn.Z)(r?r.breakpoints:null),l=(0,at.I0)(),c=ee.useCallback((function(e,n){var r=(0,yg.om)(e);r&&l({type:"OPEN_DEEP_LINK",path:r,line:n,wid:t})}),[l,t]);return(0,B.BX)(Bg,{children:[(0,B.tZ)(Ng,{client:r}),s&&(0,B.tZ)(Og,{breakpoints:s,onBreakpointClick:c,onUpdate:function(e){var t=e.breakpoint,n=e.logMessage;r&&t.pid1Id&&r.updateBreakpoint(t.pid1Id,{logMessage:n})}}),o&&r&&"paused"===i&&(0,B.tZ)(Sg,{client:r,variables:o}),a&&"paused"===i&&(0,B.tZ)(wg,{frames:a,onFrameClick:c}),r&&(0,B.tZ)("div",{className:"jsx-3516069037 logs-button",children:(0,B.tZ)(he.Z,{size:"small",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var t=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.download="debugger-logs.txt",n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((function(){URL.revokeObjectURL(n.href)}),1500)}(r.getDebugLogs())},children:"Download Logs"})}),(0,B.tZ)(q.default,{id:"3516069037",children:[".instructions.jsx-3516069037{height:var(--space-16);}",".logs-button.jsx-3516069037{position:absolute;bottom:var(--space-8);right:var(--space-8);}"]})]})}var Ug=n(30853);function Xg(){var e=(0,Pe.Z)().session,t=ee.useState(e.getPreviewedYoutubeVideo()),n=(0,L.Z)(t,2),r=n[0],i=n[1];return ee.useEffect((function(){return i(e.getPreviewedYoutubeVideo()),e.onPreviewedYoutubeVideoChanged(i)}),[e]),r}function Fg(e){var t=e.video,n=e.onClick,r=Xg(),i=t.videoId===r;return(0,B.BX)("div",{onClick:function(){return n(t.videoId)},className:"jsx-1680913095 "+(St()("youtube-video",{"is-selected":i})||""),children:[(0,B.BX)("div",{className:"jsx-1680913095 thumbnail-container",children:[(0,B.tZ)(Ug.Z,{width:"320px",height:"180px",src:t.thumbnail,alt:t.title}),(0,B.tZ)("span",{className:"jsx-1680913095 duration",children:t.duration})]}),(0,B.BX)(ve.gC,{children:[(0,B.tZ)(Ne.Z,{level:3,className:"yt-video-title",children:t.title}),(0,B.BX)(ve.Ug,{children:[(0,B.BX)(ge.Z,{className:"yt-video-views",children:[t.viewCount," views"]}),(0,B.tZ)(ge.Z,{className:"yt-video-published-at",children:t.publishedAt})]})]}),(0,B.tZ)(q.default,{id:"1680913095",children:[".youtube-video.jsx-1680913095{font-family:Roboto,Arial,sans-serif;margin:0 8px 20px 8px;position:relative;max-width:320px;min-width:260px;width:100%;cursor:pointer;}",".is-selected.jsx-1680913095,.youtube-video.jsx-1680913095:hover{background-color:var(--background-root);}",".thumbnail-container.jsx-1680913095{position:relative;}",".duration.jsx-1680913095{position:absolute;bottom:3px;right:0;font-family:Roboto,Arial,sans-serif;font-weight:500;font-size:12px;line-height:12px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:4px;background-color:rgba(0,0,0,0.8);color:#fff;padding:3px 4px;height:12px;border-radius:2px;-webkit-letter-spacing:0.35px;-moz-letter-spacing:0.35px;-ms-letter-spacing:0.35px;letter-spacing:0.35px;box-sizing:content-box;}",".youtube-video.jsx-1680913095 .yt-video-title{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;max-height:40px;font-family:Roboto,Arial,sans-serif;color:#030303;font-weight:500;font-size:14px;white-space:normal;text-overflow:ellipsis;line-height:20px;-webkit-letter-spacing:0.25px;-moz-letter-spacing:0.25px;-ms-letter-spacing:0.25px;letter-spacing:0.25px;margin:6px 0;overflow:hidden;}",".youtube-video.jsx-1680913095 .yt-video-views::after{content:'\u2022';margin:0 4px;}",".youtube-video.jsx-1680913095 .yt-video-views,.youtube-video.jsx-1680913095 .yt-video-published-at{color:#606060;font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;line-height:18px;}",".replit-ui-theme-root.dark .yt-video-views,.replit-ui-theme-root.dark .yt-video-published-at{color:#aaa;}",".replit-ui-theme-root.dark .yt-video-title{color:#fff;}"]})]})}function zg(){var e,t=(0,Pe.Z)().session,n=(0,ye.Z)(),r=(0,xe.Jge)({variables:{replId:n}}),i=r.data,a=r.error,o=r.loading,s=(null===i||void 0===i?void 0:i.sampleYoutubeVideos)||[];return(0,B.BX)("div",{className:"jsx-3650882523 youtube-plugin",children:[a?null:(0,B.tZ)(ve.gC,{className:"heading-container",align:"center",justify:"center",children:(0,B.tZ)(Ne.Z,{level:3,children:"Recommended Tutorials"})}),s.map((function(e){return(0,B.tZ)(Fg,{video:e,onClick:function(r){var a;if(r!==t.getPreviewedYoutubeVideo()){if("Repl"!==(null===i||void 0===i||null===(a=i.repl)||void 0===a?void 0:a.__typename))throw new Error("Expected repl from graph");var o=i.repl,s=o.language,l=o.title;(0,mt.track)(mt.events.YOUTUBE_VIDEO_SELECTED,{video:e.title,replId:n,language:s,replTitle:l}),t.setPreviewedYoutubeVideo(r)}else t.setPreviewedYoutubeVideo(null)}},e.videoId)})),o||"Repl"!==(null===i||void 0===i||null===(e=i.repl)||void 0===e?void 0:e.__typename)?(0,B.tZ)("div",{className:"jsx-3650882523 spinner-container",children:(0,B.tZ)(Nt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}})}):null,a?(0,B.tZ)(ve.gC,{className:"error-container",align:"center",justify:"center",children:(0,B.tZ)(ge.Z,{className:"error-text",children:"Something went wrong trying to load videos. Please refresh and try again."})}):null,(0,B.tZ)(q.default,{id:"3650882523",children:[".youtube-plugin.jsx-3650882523{background-color:var(--background-default);overflow-y:auto;height:100%;width:100%;}",".youtube-plugin.jsx-3650882523 .heading-container{width:100%;max-width:320px;margin:var(--space-8);}",".youtube-plugin.jsx-3650882523 .spinner-container.jsx-3650882523{width:100%;max-width:320px;}",".youtube-plugin.jsx-3650882523 .error-container{margin:var(--space-8);}",".youtube-plugin.jsx-3650882523 .error-text{color:var(--accent-negative-default);}"]})]})}function Vg(e){var t=e.id,n="".concat("https://www.youtube.com/embed/").concat(t,"?rel=0");return(0,B.BX)("div",{className:"jsx-2201796602 embed",children:[(0,B.tZ)("iframe",{src:n,frameBorder:"0",className:"jsx-2201796602 iframe"}),(0,B.tZ)(q.default,{id:"2201796602",children:[".embed.jsx-2201796602{position:relative;padding:var(--space-8);width:100%;height:100%;overflow:hidden;}",".iframe.jsx-2201796602{width:100%;height:100%;}"]})]})}function Hg(){var e=Xg(),t=(0,Pe.Z)().session;return(0,B.BX)("div",{className:"jsx-1571942811 youtube-preview-plugin",children:[e?(0,B.BX)(B.HY,{children:[(0,B.tZ)(Vg,{id:e}),(0,B.tZ)("div",{"aria-label":"Close","data-microtip-position":"left",role:"tooltip",className:"jsx-1571942811 close-button",children:(0,B.tZ)(he.Z,{Icon:Kt.Z,border:!0,filled:!0,onClick:function(){return t.setPreviewedYoutubeVideo(null)}})})]}):(0,B.tZ)("div",{className:"jsx-1571942811 loading",children:(0,B.tZ)(Nt.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}})}),(0,B.tZ)(q.default,{id:"1571942811",children:[".youtube-preview-plugin.jsx-1571942811{background-color:var(--background-default);height:100%;width:100%;}",".youtube-preview-plugin.jsx-1571942811:hover .close-button.jsx-1571942811{opacity:1;}",".loading.jsx-1571942811{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".close-button.jsx-1571942811{position:absolute;top:var(--space-8);right:var(--space-8);cursor:pointer;-webkit-transition:0.2s;transition:0.2s;opacity:0;}"]})]})}var Gg=n(29305),Wg=n(9302);function Kg(e){(0,Wg.Z)(e),e.register("runflow",x),e.register("header",r),e.register("config",i),e.register("sidenav",a),e.register("filetree",Ar),e.register("fileheader",o),e.register("editor",s),e.register("terminal2",ca),e.register("console",ua),e.register("replboxconsole",da),e.register("floatingrun",pa),e.register("help",l),e.register("libsearch",ha),e.register("packager",ga),e.register("mediaview",c),e.register("preferences",ka),e.register("git",Za),e.register("replboxdisplay2",ja),e.register("snack",u),e.register("vnc",_a),e.register("webview",Ca),e.register("fileviewercontroller",d),e.register("markdownviewer",p),e.register("instructionsviewer",f),e.register("instructionsviewer2",m),e.register("adminpanel",h),e.register("blank",Uo),e.register("lock",g),e.register("hackerupgradeprompt",v),e.register("desktoplayout",b),e.register("audio",y),e.register("deeplink",Zs),e.register("browsernotifications",w),e.register("database",k),e.register("commandbar",Z),e.register("annotations",j),e.register("shell",O),e.register("autograder",E),e.register("unittests",_),e.register("educationpane",C),e.register("cluicurl",S),e.register("pedit",P),e.register("kaboombar",N),e.register("kaboombar2",T),e.register("enveditor",bg),e.register("debugclient",I),e.register("debugpanel",R),e.register("youtube",D),e.register("youtubepreview",A),e.register("codemirror",Gg)}var qg=n(25025),Yg=n(5846),Qg=n(69085),Jg=n(49743),$g=n(88377),ev=n(90088),tv=n(61532),nv=n(27646),rv=n(3105);function iv(){return(iv=(0,X.Z)(U().mark((function e(t){var n,r;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($o.l){e.next=2;break}throw new Error("Expected Apollo client");case 2:return e.next=4,$o.l.query({query:xe.UxF,variables:{id:t}});case 4:return n=e.sent,r=n.data,e.abrupt("return","Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.title:null);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function av(e){var t=(0,Pe.Z)(),n=t.container,r=t.presence,i=e.wid;ee.useEffect((function(){var e=r.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var a=t.username;return function(e){return iv.apply(this,arguments)}(i.id).then((function(e){e&&Ds({title:"",body:"".concat(a," joined ").concat(e),tag:"".concat(i.id,"-").concat(a,"-joined"),iconByUsername:a,cacheDuration:9e5})})),function(){e()}}}))}),[i,r,n,e])}var ov=n(34014);var sv=n(26830);function lv(e,t){var n=".cursor-".concat(uv(e)," {\n  position: relative;\n  background-color: var(--accent-primary-strongest);\n  border-left: 2px solid ").concat(t,";\n  pointer-events: none;\n}\n.selection-").concat(uv(e)," {\n  position: relative;\n  background-color: ").concat(t,";\n  opacity: 0.2;\n  pointer-events: none;\n}\n.cursor-tag-").concat(uv(e),'::after {\n  content: "').concat(e,'";\n  position: relative;\n  bottom: calc(100% - 4px);\n  left: -2px;\n  background-color: ').concat(t,";\n  color: white;\n  z-index: 10;\n  padding: 1px;\n  border-radius: 3px;\n  pointer-events: none;\n  animation: fadeOut 2s ease-in forwards;\n}\n\n@keyframes fadeOut {\n  0% {opacity: 1;}\n  100% {opacity: 0;} \n}\n"),r=document.createElement("style");r.type="text/css",r.id=cv(e),r.appendChild(document.createTextNode(n)),document.head&&document.head.appendChild(r)}function cv(e){return"".concat(e,"-multiplayer-cursor-style")}function uv(e){return e.replace(/_/g,"-")}function dv(e){var t=(0,Pe.Z)(),n=t.presence,r=t.session;ee.useEffect((function(){var e=!1,t=n.onActiveUsersChange((function(t){e?e=!1:t.forEach((function(e){lv(e.username,e.color)}))})),r=n.onUserJoin((function(t){var n=t.username,r=t.color;e=!0,lv(n,r)})),i=n.onUserLeave((function(t){e=!0,function(e){var t=document.getElementById(cv(e));document.head&&t&&document.head.removeChild(t)}(t.username)}));return function(){t(),r(),i()}}),[e,n,r])}function pv(e){var t=e.ws,n=e.user,r=(0,Pe.Z)().dotReplit;ee.useEffect((function(){if(n)return r.watch((function(e){var n;e.error||null!==(n=e.config.debugger)&&void 0!==n&&n.support&&function(e){var t=e.wid,n=e.store,r=n.dispatch,i=(0,n.getState)(),a=i.plugins,o=i.layout,s="debugpanel",l="debugpanel";Object.values(a).find((function(e){return e.type===l}))||(r({type:"LOAD_PLUGIN",pluginPud:s,pluginType:l,title:"debugpanel"}),r({type:"ADD_SIDE_NAV_ITEM",navItem:{pud:s,pluginType:l,tooltip:"Debugger",svg:"Debugger"}}));var c="debugclient";if(!gt.e$(o,c)){var u=gt.$T(o,c,"inside",["floating"]),d=u.path,p=u.to;r((0,bt.fc)({wid:t,path:d,to:p,property:null}))}}(t)}))}),[r,t,n])}var fv=n(56479),mv=n(66354),hv=n(25108);var gv=n(41446);function vv(e){return bv.apply(this,arguments)}function bv(){return(bv=(0,X.Z)(U().mark((function e(t){var n;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getConfig();case 2:if(!(n=e.sent).error){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return","kaboom"===n.config.language);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yv(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return xv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xv(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function xv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wv(e){var t=e.ws,n=e.user,r=e.isOwner;return function(e){var t=e.customConnectionMetadata,n=(0,Pe.Z)().container,r=(0,ye.Z)(),i=ee.useState(null),a=(0,L.Z)(i,2),o=a[0],s=a[1],l=(0,xe.SPw)({variables:{id:r}}),c=l.data,u=l.loading;ee.useEffect((function(){(0,Zo.Z)().then((function(e){s((0,nv.t)(e))}))}),[s]),ee.useEffect((function(){return function(){n.destroy()}}),[n]);var d=(0,rv.b)("Repl"===(null===c||void 0===c?void 0:c.repl.__typename)?{repl:c.repl,currentUser:c.currentUser||void 0}:null);ee.useEffect((function(){if(!u&&null!==o&&d){var e=n.client().addDebugFunc((function(e){if("breadcrumb"===e.type){pt.n_({category:"crosisV6",message:e.message,data:e.data});var t={data:e.data,message:e.message,replId:d.repl.id,language:d.repl.language};switch(e.message){case"connecting":(0,mt.track)(mt.events.CROSIS_CONNECTION_ATTEMPTED,t);break;case"error":(0,mt.track)(mt.events.CROSIS_ERROR,t);break;case"connect timeout":(0,mt.track)(mt.events.CROSIS_CONNECTION_TIMEOUT,t);break;case"retrying":(0,mt.track)(mt.events.CROSIS_CONNECTION_RETRYING,t);break;case"reconnecting":(0,mt.track)(mt.events.CROSIS_CONNECTION_RECONNECTING,t);break;case"connect failed":(0,mt.track)(mt.events.CROSIS_CONNECTION_FAILED,t);break;case"falling back to polling":(0,mt.track)(mt.events.CROSIS_CONNECTION_FALLING_BACK_TO_POLLING,t)}}}));return n.connect({overrideClusterMetadata:o,customConnectionMetadata:t,context:d}),function(){e()}}}),[n,o,u,d,t])}({customConnectionMetadata:e.customConnectionMetadata}),function(e){var t=(0,Pe.Z)().packager,n=e.wid,r=e.store.dispatch,i=function(e){r((0,bt.yY)({wid:n,message:e,type:"",raw:!1}))},a=function(){r((0,bt.yY)({wid:n,message:"\n\nReplit: Package operation failed.\n\n",type:"error",raw:!1}))},o=function(e){if(e)return r({type:"PACKAGER_STARTED",wid:n}),void r((0,bt.yY)({wid:n,message:"\n\nReplit: Updating package configuration\n\n",type:"",raw:!1}));r({type:"PACKAGER_ENDED",wid:n})};ee.useEffect((function(){var e=t.onOutput(i),n=t.onError(a),r=t.onStateChanged(o);return function(){e(),n(),r()}}),[])}(t),av(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,ye.Z)(),i=(0,xe.dtd)({variables:{id:r}}),a=i.data,o=i.loading;ee.useEffect((function(){!o&&a&&"Repl"===a.repl.__typename&&a.repl.permissions.length&&n({type:"REQUEST_NOTIFICATION_PERMS",wid:t})}),[a,n,t,e,o])}(t),function(){var e=(0,Pe.Z)().presence;ee.useEffect((function(){return e.onFollowingUsersChanged((function(e){var t=e.followingUsers,n=e.type,r=t.length;"follow"===n?(0,mt.track)(ov.events.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,mt.track)(ov.events.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),function(e){var t=ee.useRef(""),n=(0,Pe.Z)().container,r=e.wid,i=e.store.dispatch;ee.useEffect((function(){return n.onConnectionStateChanged(function(){var e=(0,X.Z)(U().mark((function e(a){var o,s,l,c,u;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a===sv.e.CONNECTED){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.exec("pwd");case 4:if(o=e.sent,s=o.output){e.next=8;break}return e.abrupt("return");case 8:""===t.current&&(c=null===(l=n.getContext())||void 0===l?void 0:l.repl)&&(t.current="/home/runner/".concat(c.slug)),(u=s.replace("\n",""))!==t.current&&(i({type:"UPDATE_WORKING_DIRECTORY",wid:r,path:u}),t.current=u);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n,i,r])}(t),dv(t.wid),function(){var e=(0,Pe.Z)().presence,t=(0,ye.Z)(),n=(0,xe.al4)({variables:{id:t}}),r=n.data,i=n.loading,a=n.error;ee.useEffect((function(){if(!i)if(a)pt.Tb(a);else if(r&&"Repl"===r.repl.__typename){var t=r.currentUser,n=r.repl;if(n.isProjectFork&&n.owner&&"Team"===n.owner.__typename){var o=n.owner.id;if(null!==t&&void 0!==t&&t.teams.some((function(e){var t=e.id,n=e.isAdmin;return t===o&&n})))return e.onActiveUsersChange((function(e){e.length>1&&(0,mt.trackOnce)(ov.events.TEAMS_ADMIN_STUDENT_MULTIPLAYER,{replId:n.id,language:n.language,url:n.url,teamId:o})}))}}}),[e,r,i,t,a])}(),(0,$g.Z)(),pv({ws:t,user:n}),function(e){var t=(0,Pe.Z)().debuggest,n=(0,Bn.Z)(t.mainClient);ee.useEffect((function(){if(n){var e=n.onStarted((function(e){(0,mt.track)(ov.events.DEBUGGER_STARTED,{joined:e})})),t=n.onPaused((function(e){(0,mt.track)(ov.events.DEBUGGER_PAUSED,{reason:e})})),r=n.onBreakpoint((function(e){(0,mt.track)(ov.events.DEBUGGER_BREAKPOINT_TOGGLED,{action:e,state:n.state.current})}));return function(){e(),t(),r()}}}),[n]);var r=e.wid,i=e.store.dispatch,a=ee.useCallback((function(e){i((0,bt.yY)({wid:r,message:e,type:"",raw:!1}))}),[r,i]);ee.useEffect((function(){return null===n||void 0===n?void 0:n.onOutput(a)}),[n,a])}(t),function(){var e=(0,xn.Z)(),t=(0,Pe.Z)().presence;ee.useEffect((function(){t.updateOpenFile(e)}),[e,t])}(),function(e){var t=(0,Pe.Z)(),n=t.presence,r=t.session,i=(0,$r.Z)(),a=e.wid,o=e.store.dispatch;ee.useEffect((function(){if(i){var e=r.getActiveFile();e===n.getActiveFileForUser(i.id)&&o({type:"SCROLL_TO_FOLLOWED_USERS_CURSOR",wid:a,path:e})}}),[a,i,o,n,r])}(t),function(e){var t=(0,Pe.Z)(),n=t.container,r=t.session,i=e.wid,a=e.store.dispatch;ee.useEffect((function(){return n.onConnectionStateChanged((function(e){if(e===sv.e.CONNECTED){var t=r.getActiveFile(),n=r.getPreviewedFile();n&&t!==n&&a({type:"LOAD_FILE",path:n,wid:i})}}))}),[n,r,a,i])}(t),function(){var e=(0,Pe.Z)(),t=e.presence,n=e.session;ee.useEffect((function(){var e=function(){if("visible"===document.visibilityState){var e=n.getActiveFile()||null;t.updateSessionTimestamp(),t.updateOpenFile(e)}};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[t,n])}(),function(){var e=(0,Pe.Z)(),t=e.session,n=e.presence;ee.useEffect((function(){return n.onUserOpenedFile((function(e){var r=e.file,i=e.user,a=n.getFollowedUser();a&&i.username===a.username&&r&&t.openFile(r)}))}),[n,t])}(),function(e,t){var n=(0,ye.Z)(),r=!e||!e.isLoggedIn;(0,xe.Vgw)({skip:r||t,variables:{replId:n},onSubscriptionData:function(e){var t;!1===(null===(t=e.subscriptionData.data)||void 0===t?void 0:t.currentUserCanWrite)&&window.location.reload()}})}(n,r),function(){var e=(0,Pe.Z)().session,t=(0,ye.Z)(),n=(0,xe.O8x)({variables:{replId:t}}).data,r="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:null;ee.useEffect((function(){var t;r&&null!==(t=r.templateInfo)&&void 0!==t&&t.label.includes("Nix")&&e.setAreConfigFilesVisible(!0)}),[e,r])}(),function(e){var t,n,r,i=(0,ye.Z)(),a=(0,Pe.Z)().fs,o=(0,xe.t8A)({variables:{id:i}}).data,s=e.wid,l=e.store.dispatch,c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null,u="CurrentUser"===(null===o||void 0===o||null===(t=o.currentUser)||void 0===t?void 0:t.__typename)?o.currentUser:null,d=c&&c.origin||null,p="Team"===(null===c||void 0===c||null===(n=c.owner)||void 0===n?void 0:n.__typename)&&(null===(r=c.owner)||void 0===r?void 0:r.hasAuthoringV2),f=(0,rv.b)("Repl"===(null===d||void 0===d?void 0:d.__typename)?{repl:d,currentUser:u||void 0}:null);ee.useEffect((function(){c&&u&&p&&c.isProject&&a.stat(".lesson").then((function(e){e.exists||a.createDir(".lesson")}))}),[a,u,c,p]),ee.useEffect((function(){if(c&&p&&c.isProjectFork&&d&&f){var e=(0,rf.Z)({onUnrecoverableError:function(e){hv.error(e),pt.$e((function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",d.id),t.setExtra("replId",c.id),pt.Tb(e)}))}}),t=(0,fv.Z)({container:e});e.connect({context:f,fetchConnectionMetadata:function(){return(0,mv.Z)({url:"/data/repls/".concat(c.id,"/get_repl_origin_guest_connection_metadata")})}});var n=e.onConnectionStateChanged(function(){var r=(0,X.Z)(U().mark((function r(i){var o;return U().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i!==sv.e.CONNECTED){r.next=22;break}return n(),r.prev=2,r.next=5,a.copyDirFromRemote(".lesson",".lesson",t);case 5:if(!(o=r.sent).error){r.next=10;break}pt.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",d.id),e.setExtra("replId",c.id),pt.Tb({message:"Error copying lesson: ".concat(o.error)})})),r.next=14;break;case 10:return r.next=12,a.stat(".lesson/instructions.md");case 12:r.sent.exists&&l({type:"ADD_INSTRUCTIONS2_TAB",wid:s});case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(2),pt.$e((function(e){e.setTag("curriculum-authoring",!0),pt.Tb(r.t0)}));case 19:return r.prev=19,e.destroy(),r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[2,16,19,22]])})));return function(e){return r.apply(this,arguments)}}());return function(){return e.destroy()}}}),[p,s,a,f,c,l,d]),ee.useEffect((function(){c&&!p&&c.attachments.find((function(e){return"instructions.md"===e.fileName}))&&l({type:"ADD_INSTRUCTIONS_TAB",wid:s})}),[s,l,c,p])}(t),function(e){var t=e.store.dispatch,n=Xg(),r=(0,ae.useRouter)(),i=Boolean(r.query.lite)||Boolean(r.query.embed);ee.useEffect((function(){if(!i){var r=e.wid,a=e.store.getState(),o=a.layout,s=a.plugins,l="youtubepreview",c=gt.PP(o,s,l);if(n){if(!c){var u=gt.PP(o,s,"shell");if(!u)throw new Error("Expected shell path");var d=gt.Il(gt.Il(u)),p=gt.$T(o,l,"below",d),f=p.path,m=p.to;t({type:"UPDATE_LAYOUT",wid:r,path:f,to:m})}}else{if(!c)return;var h=gt.Od(o,l),g=h.path,v=h.to;t({type:"UPDATE_LAYOUT",wid:r,path:g,to:v})}}}),[n,t,e,i])}(t),function(e){var t=(0,im.Z)(),n=(0,Pe.Z)().dotReplit;ee.useEffect((function(){if(t&&t.flagOwnerDotReplitPackager&&t.language.includes("nix")){var r="packager";return n.watch((function(t){var n,i;t.error?t.error===gv.Y.NotFound&&e.store.dispatch({type:"REMOVE_SIDE_NAV_ITEM",navItemPud:r}):null!==(n=t.config.packager)&&void 0!==n&&null!==(i=n.features)&&void 0!==i&&i.packageSearch?(e.store.getState().plugins.packager||e.store.dispatch({type:"LOAD_PLUGIN",pluginType:"packager",pluginPud:r,title:"packages"}),e.store.dispatch({type:"ADD_SIDE_NAV_ITEM",index:2,navItem:{pud:r,pluginType:"packager",tooltip:"Packages",svg:"Packages"}})):e.store.dispatch({type:"REMOVE_SIDE_NAV_ITEM",navItemPud:r})}))}}),[t,n,e])}(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,Pe.Z)(),i=r.session,a=r.fs,o=(0,Pe.Z)().dotReplit,s=(0,Ta.Z)("flag-readme-preview");ee.useEffect((function(){!function(){var e=(0,X.Z)(U().mark((function e(){var r,l,c,u,d;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vv(o);case 2:return r=e.sent,e.next=5,a.readDir(Qr.Q);case 5:if(l=e.sent,(r||s)&&!l.error){e.next=8;break}return e.abrupt("return");case 8:c=yv(l.children),e.prev=9,c.s();case 11:if((u=c.n()).done){e.next=19;break}if(!(d=u.value).filename.toLowerCase().includes("readme")){e.next=17;break}return n({type:"LOAD_FILE",path:d.filename,wid:t}),i.setPreviewedFile(d.filename),e.abrupt("break",19);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[9,21,24,27]])})));return function(){return e.apply(this,arguments)}}()()}),[t,n,i,a,o,s])}(t),function(e){var t=e.wid,n=e.store.dispatch,r=(0,Pe.Z)(),i=r.session,a=r.dotReplit;ee.useEffect((function(){!function(){var t=(0,X.Z)(U().mark((function t(){var n,r;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vv(a);case 2:if(n=t.sent,r="kaboombar2",n){t.next=6;break}return t.abrupt("return");case 6:e.store.getState().plugins[r]||e.store.dispatch({type:"LOAD_PLUGIN",pluginType:"kaboombar2",pluginPud:r,title:"kaboombar2"}),e.store.dispatch({type:"ADD_SIDE_NAV_ITEM",index:0,navItem:{pud:r,pluginType:"kaboombar2",tooltip:"Kaboom",icon:Me}}),e.store.dispatch({type:"OPEN_SIDE_NAV_ITEM",navItem:{pud:r}});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[t,n,i,a])}(t),(0,ev.Z)(),(0,tv.Z)(),function(){var e=(0,Pe.Z)().container,t=(0,Ta.Z)("flag-seccomp-port-detection");ee.useEffect((function(){if(t)return e.openChannel({service:"replnet",name:"replnet"},(function(){}))}),[e,t])}(),null}function kv(e){var t=e.stacked,n=e.lite;return(0,B.BX)("div",{className:q.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" "+(St()("root",{stacked:t,lite:n})||""),children:[(0,B.tZ)("div",{className:q.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" header"}),(0,B.tZ)("div",{className:q.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" sidenav"}),(0,B.tZ)("div",{className:q.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" sidebar"}),(0,B.BX)("div",{className:q.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" content",children:[(0,B.tZ)("div",{className:q.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" file"}),(0,B.tZ)("div",{className:q.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" spacer"}),(0,B.tZ)("div",{className:q.default.dynamic([["1050128889",[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"]]])+" output"})]}),(0,B.tZ)(q.default,{id:"1050128889",dynamic:[n?0:"var(--space-8)",n?0:"var(--space-8)",n?"calc(-1*var(--space-8))":0,n?0:"var(--space-8)",n?0:"var(--space-8)"],children:[".root.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;width:100%;height:100%;display:grid;grid-template-areas: 'header header header header' 'sidenav sidebar content content';grid-template-columns: 50px calc(((100vw - 50px) * 0.15 - 3px)) ".concat(n?0:"var(--space-8)"," 1fr;grid-gap:var(--space-8);grid-template-rows:auto 1fr;background-color:var(--background-root);padding-bottom:").concat(n?0:"var(--space-8)",";}"),".header.__jsx-style-dynamic-selector{grid-area:header;height:60px;margin-bottom:".concat(n?"calc(-1*var(--space-8))":0,";background-color:var(--background-default);box-shadow:var(--shadow-1);border-bottom:0.5px solid var(--background-higher);}"),".sidenav.__jsx-style-dynamic-selector{width:50px;grid-area:sidenav;background-color:var(--background-default);margin-left:".concat(n?0:"var(--space-8)",";border-top-left-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);}"),".sidebar.__jsx-style-dynamic-selector{grid-area:sidebar;background-color:var(--background-default);border-radius:var(--border-radius-4);}",".content.__jsx-style-dynamic-selector{grid-area:content;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-right:".concat(n?0:"var(--space-8)",";border-radius:var(--border-radius-4);}"),".file.__jsx-style-dynamic-selector,.output.__jsx-style-dynamic-selector{height:100%;border-radius:var(--border-radius-4);}",".file.__jsx-style-dynamic-selector{background-color:var(--background-default);width:calc(50% + var(--space-8));}",".output.__jsx-style-dynamic-selector{background-color:var(--background-root);width:50%;}",".spacer.__jsx-style-dynamic-selector{width:var(--space-8);height:var(--space-8);}",".lite.__jsx-style-dynamic-selector .sidebar.__jsx-style-dynamic-selector{display:none;}",".lite.__jsx-style-dynamic-selector{grid-template-areas: 'header header' 'sidenav content';grid-template-columns:50px 1fr;grid-template-rows:auto 1fr;}",".lite.__jsx-style-dynamic-selector .header.__jsx-style-dynamic-selector{height:40px;}",".stacked.__jsx-style-dynamic-selector .content.__jsx-style-dynamic-selector{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".stacked.__jsx-style-dynamic-selector .file.__jsx-style-dynamic-selector,.stacked.__jsx-style-dynamic-selector .output.__jsx-style-dynamic-selector{width:100%;height:50%;}"]})]})}var Zv={overlimit:{title:"Multiplayer Limit Reached",body:"Repl reached its multiplayer limit. Please contact the owner."},notfound:{title:"Invite Link 404",body:"Multiplayer invite link not found. Please contact the owner."}};function jv(e){var t,n,r=e.language,i=(0,ae.useRouter)().query,a=ee.useState(!1),o=(0,L.Z)(a,2),s=o[0],l=o[1],c=null,u=fe().get(r)?null:r;i.classroom_template?c={title:"Project Template",body:"This is the template that students will be given to fork. When you are finished, close this tab, go back to the classroom, and create the project."}:u?c={title:"Unsupported Language",body:(0,B.BX)("div",{children:[(0,B.tZ)("p",{children:"We encountered an internal error while loading your repl"}),(0,B.tZ)("br",{}),(0,B.BX)("p",{children:['The language "',u,"\" doesn't exist.",(0,B.tZ)("br",{}),(0,B.tZ)("br",{}),"You can still view your repl but many features may not work.",(0,B.tZ)("br",{}),"Our engineers have been notified and we will have a fix for this soon."]})]})}:i.error&&(c=Zv[i.error.toString()]||{title:"Error",body:"Somethng went wrong"});var d=!s&&Boolean(c);return(0,B.tZ)(Pt.ZP,{onRequestClose:function(){return l(!0)},isOpen:d,children:(0,B.BX)("div",{className:q.default.dynamic([["2125406062",[me.j.mobileMax]]])+" content",children:[(0,B.tZ)(Ne.Z,{level:3,children:null===(t=c)||void 0===t?void 0:t.title}),null===(n=c)||void 0===n?void 0:n.body,(0,B.tZ)("div",{className:q.default.dynamic([["2125406062",[me.j.mobileMax]]]),children:(0,B.tZ)(he.Z,{children:"Continue"})}),(0,B.tZ)(q.default,{id:"2125406062",dynamic:[me.j.mobileMax],children:[".content.__jsx-style-dynamic-selector{color:var(--foreground-default);padding:var(--space-16);display:grid;grid-gap:var(--space-16);}","@media screen and (min-width:".concat(me.j.mobileMax,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48);}}")]})]})})}var Ov=n(71798);function Ev(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ev(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ev(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cv(e,t){var n=t.session,r=e.wid,i=e.store;n.onSessionStateChanged((function(e){var t=e.openFiles[e.activeTab],a=n.getPreviewedFile(),o=Boolean(a);t!==i.getState().activeFile&&i.dispatch({type:"OPEN_FILE",wid:r,path:t,session:!0}),t?o&&a!==t&&"md"===(0,kn.r6)(t)&&n.setPreviewedFile(t):i.dispatch((0,Pa.Z)({wid:r}))})),n.onPreviewedFileChanged((function(e){e?i.dispatch({type:"ADD_MARKDOWN_TAB",wid:r}):i.dispatch({type:"REMOVE_MARKDOWN_TAB",wid:r})})),e.register("services",{receiver:function(e,t,i){return"OPEN_FILE"===i.type?function(){if(void 0!==i.path&&!i.session){var e=i.path,t=i.tabIndex,r=i.newTab;n.openFile(e,{tabIndex:t,newTab:r})}}:"MOVE_FILE"===i.type?function(){var e=i.path,t=i.to;n.moveFile(e,t)}:"DELETE_FILE"===i.type?function(){var e=i.path;n.deleteFile(e)}:"CLOSE_HEADER_TAB"===i.type?function(){var e=n.getState().openFiles.indexOf(i.path);n.closeTab(e)}:"UPDATE_FILE_CURSORS"===i.type?function(){var e=i.selections;if(e.length<0)throw new Error("Expected cursor selections");var t=e[0],r=t.rawPosition,a=t.position;n.setCursorPosition(_v(_v({},r),{},{offset:a}))}:"ADD_MARKDOWN_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(!gt.PP(i,a,"markdownviewer")){var o=gt.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:gt.Il(gt.Il(o)),layout:{type:"pane",pud:"markdownviewer"},setActiveTab:!0,wid:r})}}:"ADD_INSTRUCTIONS_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(!gt.PP(i,a,"instructionsviewer")){var o=gt.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:gt.Il(gt.Il(o)),layout:{type:"pane",pud:"instructionsviewer"},setActiveTab:!0,wid:r})}}:"ADD_INSTRUCTIONS2_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(!gt.PP(i,a,"instructionsviewer2")){var o=gt.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"NEW_TAB",path:gt.Il(gt.Il(o)),layout:{type:"pane",pud:"instructionsviewer2"},setActiveTab:!0,wid:r})}}:"REMOVE_MARKDOWN_TAB"===i.type?function(e,t){var n=t().workspace[r],i=n.layout,a=n.plugins;if(gt.PP(i,a,"markdownviewer")){var o=gt.PP(i,a,"shell");if(!o)throw new Error("Expected shell path");e({type:"CLOSE_TAB",path:gt.Il(gt.Il(o)),tabPud:"markdownviewer",wid:r})}}:"ADD_CLUI_CURL_TAB"===i.type?function(e,t){if(!(0,dt.Z)(t().user.userInfo,"flag-cluicurl"))return null;var n=t().workspace[r],i=n.layout,a=n.plugins,o=gt.PP(i,a,"cluicurl");if(o)e({type:"SET_ACTIVE_TAB",path:gt.Il(gt.Il(o)),tabIndex:o[o.length-1],wid:r});else{var s=gt.PP(i,a,"shell");if(!s)throw new Error("Expected shell path");e({type:"NEW_TAB",path:gt.Il(gt.Il(s)),layout:{type:"pane",pud:"cluicurl"},setActiveTab:!0,wid:r})}}:null}}),e.register("fsreduxbridge",(0,Ov.Z)({fs:t.fs}))}var Sv=n(19037),Pv=n(31128),Nv=n(87712),Tv=n(8506),Iv=n(71614),Rv=n(64181),Dv=n(73210),Av=n(25108);function Lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lv(Object(n),!0).forEach((function(t){(0,K.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,W.Z)(e);if(t){var i=(0,W.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,G.Z)(this,n)}}var Uv=function(e){return JSON.parse(JSON.stringify(e))};function Xv(e){if(!Object.values(e.getState().plugins).find((function(e){return"adminpanel"===e.type}))){var t="adminpanel";e.dispatch({type:"LOAD_PLUGIN",pluginPud:t,pluginType:"adminpanel",title:"adminpanel"}),e.dispatch({type:"ADD_SIDE_NAV_ITEM",navItem:{pud:t,pluginType:"adminpanel",tooltip:"Crosis Logs",svg:"Alien"}})}}function Fv(e){var t=e.children,n=ee.useRef({fileMap:{}});return(0,B.tZ)(Dv.Z.Provider,{value:n,children:t})}var zv=function(e){var t=function(t){(0,H.Z)(r,t);var n=Mv(r);function r(){return(0,F.Z)(this,r),n.apply(this,arguments)}return(0,z.Z)(r,[{key:"render",value:function(){var t=this;return(0,B.tZ)(at.ET.Consumer,{children:function(n){var r=n.store;return(0,B.tZ)(e,Bv(Bv({},t.props),{},{reduxStore:r}))}})}}]),r}(ee.Component);return(0,K.Z)(t,"displayName","withStore(ReplEnvironment)"),re()(t,e)}(function(e){(0,H.Z)(n,e);var t=Mv(n);function n(){var e;(0,F.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,K.Z)((0,V.Z)(e),"ws",void 0),(0,K.Z)((0,V.Z)(e),"services",void 0),(0,K.Z)((0,V.Z)(e),"unmounted",void 0),(0,K.Z)((0,V.Z)(e),"WsComponent",void 0),(0,K.Z)((0,V.Z)(e),"state",{forking:!1,isWorkspaceCrashed:!1,sentryEventId:null,isMounted:!1,showAuthOnForkPrompt:!1,serverConnectionMetadataUsed:!1,unreachable:!1}),(0,K.Z)((0,V.Z)(e),"createNewWorkspace",(function(){var t=!1,n=new ht.Z;n.injectServices(e.services),n.registerErrorHandler((function(n){var r=n.error,i=n.pluginType,a=n.pud,o=n.source;if(!t){t=!0,Av.error("Plugin with type ",i," and pud ",a," errored in ",o),Av.error(r);var s=null,l=null;if(r instanceof qg.default){s=r.extras;try{Av.log("CustomSentryError extra",JSON.stringify(r.extras))}catch(c){Av.log("CustomSentryError extra",r.extras)}l=r.tags,Av.log("CustomSentryError tags",r.tags)}pt.$e((function(t){var n;t.setTags(Bv({pluginType:i,workspaceSource:o,workspaceError:"true",bsod:!0},null!==(n=l)&&void 0!==n?n:{})),s&&t.setExtras(s);var a=(0,Rv.Q)(r,t)||null;pt.Tb(r),e.setState({isWorkspaceCrashed:!0,sentryEventId:a||null})}))}})),Kg(n),n.register("audio",y),n.register("bsoder",{receiver:function(t,r,i){"BSOD"===i.type&&(e.setState({isWorkspaceCrashed:!0,sentryEventId:i.sentryEventId||null}),n.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT",wid:t}),i.crasherPud&&n.store.dispatch({type:"PLUGIN_BROKE",pud:i.crasherPud,message:"No message"}),i.originalError&&(Av.error("".concat(i.crasherPud||"plugin"," crashed}")),Av.error(i.originalError)))}}),n.register("replforker",{receiver:function(t,n,r){return"OT_FILE_OP"===r.type&&"containerfs"!==r.changeSource&&!e.props.repl.isOwner&&e.setState({showAuthOnForkPrompt:!0}),null}}),n.register("replupdater",{receiver:function(t,n,r){return"REQUEST_REPL_UPDATE"===r.type?function(){var n=(0,X.Z)(U().mark((function n(i){var a,o;return U().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=e.props.repl,o=a.id,a.isOwner||pt.$e((function(e){e.setExtra("updates",r.updates),pt.Tb(new Error("Trying to update repl without perms"))})),e.props.updateRepl(o,r.updates),i({wid:t,type:"REPL_UPDATED",updates:r.updates}),r.refresh&&window.location.replace(window.location.pathname);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}():"REPL_UPDATED"===r.type?function(){e.props.updateReplSuccess(Bv(Bv({},e.props.repl),r.updates))}:null}}),Cv(n,e.services);var r=e.props,i=r.repl,a=r.user,o=r.router,s=r.showShareToTalkPromo,l=r.shouldShowMPInviteTour,c=r.shouldShowEducationPane,u=r.shouldShowAutograderPane,d=r.shouldShowUnitTestPane,p=r.shouldShowYoutubePane;n.yikesInjectStore(e.props.reduxStore);var f=(0,te.isMobile)({ua:window.navigator.userAgent,tablet:!0});window.mobileTaint=f,window.anonTaint=!a.isLoggedIn;var m=function(){var t=(0,st.Z)(a);o.query.lite&&((t=st.L).codeIntelligence=!1);var n=(0,dt.Z)(a,"windowing")&&!o.query.lite,r=Boolean(window.AudioContext||window.webkitAudioContext),m=(0,dt.Z)(e.props.user,"flag-cluicurl"),h=a&&a.isLoggedIn&&a.roles.includes("admin"),g=(0,dt.Z)(a,"flag-yt-in-the-ws")&&i.language.includes("python")&&p;return it({lang:i.language,lite:o.query.lite,outputonly:Boolean(o.query.outputonly),sharing:!i.isOwner,isMobile:f,preferences:t,isServer:i.config.isServer||!1,isVnc:i.config.isVnc||!1,gitRemoteUrl:i.config.gitRemoteUrl,inspector:Boolean(o.query.inspector),showShareToTalkPromo:s,shouldShowMPInviteTour:l,shouldShowEducationPane:c,shouldShowAutograderPane:u,shouldShowUnitTestPane:d,isWindowingEnabled:n,hasAudioContext:r,shouldLoadAdminPanel:h,isCluiCurlEnabled:m,isLoggedIn:e.props.user.isLoggedIn,shouldLoadYoutubePane:g})}();n.bootstrap(m),n.store.dispatch({type:"REPL_UPDATED",updates:i});var h=window.performance.now(),g=e.state.serverConnectionMetadataUsed?void 0:e.props.connectionMetadata;n.store.dispatch({type:"GOVAL_CONNECT",customConnectionMetadata:g}),e.setState({serverConnectionMetadataUsed:!0}),n.govalConnectionStarted=h,e.props.doRunFlow&&((0,mt.track)(mt.events.REPL_CREATED,{isSignup:!1,isOnboarding:!1,isForked:!1,isPrivate:i.isPrivate,replId:i.id,isRenamed:!1,language:i.language,isSelfForked:!1,isGithubImport:!0}),n.store.dispatch({type:"LOAD_PLUGIN",pluginPud:"runflow",pluginType:"runflow"}),n.store.dispatch(Bv({type:"UPDATE_LAYOUT"},gt.$T(n.store.getState().layout,"runflow","inside",gt.cV())))),n.store.dispatch({type:"UPDATE_WORKSPACE_PREFERENCES",updates:m.preferences});var v="/home/runner/".concat(i.slug);n.store.dispatch({type:"UPDATE_WORKING_DIRECTORY",path:v}),window.debug=function(){return Xv(n.store)},o.query.debug&&(Xv(n.store),n.store.dispatch({type:"START_CROSIS_ADMIN_LOGS"})),e.ws=n,e.WsComponent=n.component()})),(0,K.Z)((0,V.Z)(e),"handleBeforePopState",(function(e){var t=e.as;return!e.options.shallow||(window.location.href=t,window.location.reload(),!1)})),(0,K.Z)((0,V.Z)(e),"handleRouteChange",(function(){if(e.props.router.query.replUrl!==e.props.repl.url){var t=e.props.replsByUrl[e.props.router.query.replUrl];if(!t)return;e.props.setActiveReplId({replId:t})}})),e}return(0,z.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;if((0,ut.Fy)(this.props.repl),!this.props.shouldRedirectToExpired&&!this.props.shouldRedirectToDepricated){(0,dt.Z)(this.props.user,"flag-handicap-goval-conn")&&setInterval((function(){window.v1ws&&(window.v1ws.close(),window.v1ws=null),window.v6ws&&(window.v6ws.close(),window.v6ws=null)}),6e4),window["flag-windowing"]=(0,dt.Z)(this.props.user,"windowing"),window["flag-ot-high-consitency"]=(0,dt.Z)(this.props.user,"flag-ot-high-consitency"),window["open-markdown-split"]=(0,dt.Z)(this.props.user,"open-markdown-split"),this.services=(0,Qg.Z)({onUnrecoverableError:function(t){t.message.toLowerCase().includes("repl not found")?ae.default.push("/home","~/"):pt.$e((function(n){n.setTag("bsod","true"),n.setTag("replenvironmentservices","true"),Av.error(t),pt.Tb(t);var r=(0,Rv.Q)(t,n)||null;e.setState({isWorkspaceCrashed:!0,sentryEventId:r})}))}}),this.createNewWorkspace(),this.props.router.events.on("routeChangeComplete",this.handleRouteChange),window.performance&&window.performance.navigation&&1===window.performance.navigation.type&&(0,mt.track)(mt.events.PAGE_RELOADED,{repl:this.props.repl});var t=this.services.presence.onActiveUsersChange((function(){var n;t(),(0,mt.track)(mt.events.MULTIPLAYER_REPL_OPENED,{replId:e.props.repl.id,participantsCount:e.props.multiplayers,usersOnlineCount:null===(n=e.services)||void 0===n?void 0:n.presence.getActiveUsers().length,threadsVariant:"replace-chat"})}));(0,mt.track)(mt.events.CLIENT_PING,{});var n=ut.kg.timeStart();(0,ot.LK)("/data/t/ping").then((function(){n("latency to node server")}))}}},{key:"componentDidMount",value:function(){var e=this;this.setState({isMounted:!0});var t=this.props,n=t.repl,r=t.router,i=t.shouldRedirectToExpired,a=t.shouldRedirectToDepricated,o=t.user;r.beforePopState(this.handleBeforePopState);var s=n.url.split("/")[1].slice(1);if(i)r.replace({pathname:"/expiredPrivateRepl",query:{isOwner:n.isOwner,ownerUsername:s,replId:n.id}},r.asPath);else if(a)r.replace({pathname:"/deprecatedLangauge",query:{replId:n.id}},r.asPath);else{if((0,dt.Z)(o,"flag-replco-probe")){var l={replId:n.id,slug:n.slug,user:s};(0,Tv.dp)(l,(function(t){e.setState({unreachable:!t})}))}o&&!n.isOwner&&(0,mt.track)(mt.events.REPL_GUEST_VIEW,{page:"replEnvironment"})}}},{key:"componentWillUnmount",value:function(){this.props.router.beforePopState((function(){return!0})),this.props.router.events.off("routeChangeComplete",this.handleRouteChange),window.debug=void 0,window.__SOCIAL_VIEW_FORK=void 0,this.services&&this.services.container.destroy(),(0,Tv._Y)(this.props.repl.id),this.unmounted=!0,(0,ut.dv)()}},{key:"componentDidUpdate",value:function(e){var t=e.repl.id!==this.props.repl.id,n=e.repl.url!==this.props.repl.url;if(t||n){var r=this.props.repl,i=r.url,a=Bv(Bv({},this.props.router.query),{},{replUrl:r.url}),o=(0,vt.Z)(a);ae.default.push({pathname:"/replEnvironment",query:a},{pathname:i,query:o},{shallow:!0}),this.state.forking||t&&this.services&&(window.location.href=r.url)}}},{key:"getDescription",value:function(e){return this.props.repl.description?this.props.repl.description:this.props.profile?"A ".concat(e," repl by ").concat(this.props.profile.username):"A ".concat(e," repl created by an anonymous user")}},{key:"render",value:function(){var e=this,t=this.props,n=t.shouldRedirectToExpired,r=t.shouldRedirectToDepricated;if(n||r)return null;var i=this.props,a=i.profile,o=void 0===a?{}:a,s=i.lite,l=i.repl,c=i.user,u=i.stacked,d=i.connectionMetadata,p="https://replit.com"+l.url,f=fe().get(l.language).displayName,m=this.getDescription(f),h=l.userId===c.id,g=le.Z.getImage({emailHash:o.emailHash,image:o.icon,id:o.id}).url,v=this.WsComponent;return(0,B.tZ)(zn.E,{children:(0,B.tZ)("div",{className:St()("workspace-wrapper",{desktop:!s,lite:s}),id:Sv.b,tabIndex:1,children:(0,B.tZ)(ct.Z,{children:(0,B.BX)(oe.Z,{title:l.title,oembedUrl:p,description:m||void 0,image:g,noHeader:!0,noFooter:!0,forceDrawer:!0,hideEmailVerify:!0,children:[(0,B.tZ)(jv,{language:l.language}),this.state.isWorkspaceCrashed&&(0,B.tZ)(Jg.Z,{devHide:function(){return e.setState({isWorkspaceCrashed:!1})}}),(0,B.tZ)("div",{className:"jsx-1703838917 "+(St()("workspace-page-wrapper",{desktop:!s,lite:s})||""),children:v&&this.ws&&this.services&&this.state.isMounted?(0,B.tZ)(Yg.Z.Provider,{value:this.services,children:(0,B.tZ)(Pv.Z.Provider,{value:l.id,children:(0,B.BX)(uu,{children:[(0,B.tZ)(Iv.F.Provider,{value:this.state.unreachable,children:(0,B.tZ)(Fv,{children:(0,B.tZ)(v,{className:"jsx-1703838917"})})}),(0,B.tZ)(wv,{ws:this.ws,user:c,isOwner:h,customConnectionMetadata:d})]})})}):(0,B.tZ)(kv,{lite:Boolean(s),stacked:u})}),this.props.repl.isOwner?null:(0,B.tZ)(Nv.Z,{isLoggedIn:this.props.user.isLoggedIn,isOpen:this.state.showAuthOnForkPrompt,onRequestClose:function(){return e.setState({showAuthOnForkPrompt:!1})},replId:l.id}),(0,B.tZ)(q.default,{id:"1705417764",children:["html,body{-webkit-scrollbar-width:none;-moz-scrollbar-width:none;-ms-scrollbar-width:none;scrollbar-width:none;}"]}),(0,B.tZ)(q.default,{id:"4238172360",children:[".workspace-page-wrapper.jsx-1703838917{height:100%;width:100%;position:fixed;left:0px;right:0px;top:0;bottom:0px;background-color:var(--background-root);}",".workspace-page-wrapper.desktop.jsx-1703838917{padding:var(--space-8);padding-top:0;}",".banner+.content>.workspace-page-wrapper.jsx-1703838917{height:calc(100% - 36px);top:36px;}"]})]})})})})}}],[{key:"getInitialProps",value:function(){var e=(0,X.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,u,d,p,f,m,h,g,v,b,y,x,w,k,Z,j,O,E,_,C,S,P,N,T,I,R,D,A,B,M,X,F,z,V,H,G;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.req,r=t.store,i=t.query,a=t.apolloClient){e.next=3;break}throw new Error("Expected apolloClient");case 3:if(o="string"===typeof i.lite&&i.lite?i.lite:!!i.lite,c=!1,i.replUrl){e.next=7;break}throw new Error("Please add replUrl to query");case 7:return u=i.replUrl.split("/"),d=(0,L.Z)(u,3),p=d[1],f=d[2],m="/data/repls/","repls"!==p?(g=p.replace(/^@/,""),h=(0,ot.LK)("/data/profiles/".concat(g)),m+=p+"/"):m+="anon/",e.next=13,Promise.all([(0,ot.LK)("".concat(m).concat(f)),h,(0,ft.Z)(n,r)]);case 13:v=e.sent,b=(0,L.Z)(v,2),s=b[0],l=b[1],c=Boolean(s.is_mobile),e.next=31;break;case 20:if(n&&n.headers["user-agent"]){e.next=22;break}throw new Error("Invalid request");case 22:return s=Uv(n.repl),c=Uv(n.isMobile),n.profile&&(l=Uv(n.profile)),e.next=27,(0,ft.Z)(n,r);case 27:if(y=e.sent,!(x=y.error)){e.next=31;break}return e.abrupt("return",{error:x});case 31:if((w=r.getState().user.userInfo).isLoggedIn||(w=null),k=(0,st.Z)(w),i.lite&&((k=st.L).codeIntelligence=!1),r.dispatch((0,lt.h$)(s)),Z=r.getState().repls.data[s.id],(0,ut.Fy)(Z),r.dispatch(se({replId:Z.id})),O=!1,E=!1,_=!1,C=!1,S=!1,P=!1,N=!1,T=!0,I=!0,R=0,!w){e.next=56;break}return e.next=52,a.query({query:xe.dFe,variables:{replId:Z.id}});case 52:D=e.sent,null!==(A=D.data)&&void 0!==A&&A.currentUser&&(O=!A.currentUser.shareToTalkPromoSeen,C=!A.currentUser.shouldShowMPInviteTour,"Repl"===(null===A||void 0===A||null===(B=A.repl)||void 0===B?void 0:B.__typename)?(A.repl.lang.isDeprecated&&(_=!0),"Team"===(null===(X=A.repl.owner)||void 0===X?void 0:X.__typename)&&(T=!1),A.repl.isProject||A.repl.isProjectFork?P=!0:N=!0,I=!1,V="Team"===(null===(F=A.repl.owner)||void 0===F?void 0:F.__typename)&&A.repl.owner.isAdmin,A.repl.isProjectFork?S=V:A.repl.isProject&&(S=V&&(0,dt.Z)(w,"flag-curriculum-authoring")),j=null===A||void 0===A||null===(z=A.repl)||void 0===z?void 0:z.owner):"SubscriptionExpiredError"===(null===A||void 0===A||null===(M=A.repl)||void 0===M?void 0:M.__typename)&&(E=!0)),"Repl"===A.repl.__typename&&(R=A.repl.multiplayers.length,"User"===(null===(H=A.repl.owner)||void 0===H?void 0:H.__typename)&&(R+=1));case 56:return i.token&&i.gurl&&i.conmanURL&&(G={token:i.token,gurl:i.gurl,conmanURL:i.conmanURL}),e.abrupt("return",{profile:$()(l),doRunFlow:Boolean(i.doRunFlow),owner:j,showShareToTalkPromo:O,shouldRedirectToExpired:E,shouldRedirectToDepricated:_,shouldShowMPInviteTour:C,isMobile:c,shouldShowEducationPane:S,shouldShowAutograderPane:P,shouldShowUnitTestPane:N,shouldShowYoutubePane:T,shouldEnableChat:I,multiplayers:R,lite:o,connectionMetadata:G,stacked:c||Boolean(o)||k.isLayoutStacked});case 58:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ee.Component)),Vv=(0,at.$j)((function(e){var t=e.repls.data[e.replEnvironment.activeReplId];return Bv(Bv({},e.replEnvironment),{},{repl:t,replsByUrl:e.replsByUrl,isAnon:!e.user.userInfo.isLoggedIn,user:e.user.userInfo})}),(function(e){return(0,ie.DE)({showMessage:ce.P,setActiveReplId:se,updateRepl:lt.rM,updateReplSuccess:lt.G5},e)}))((0,ae.withRouter)(zv))},47169:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment",function(){return n(6668)}])}},function(e){e.O(0,[9774,5762,2240,6344,6351,9351,127,2461,724,6346,2830,5835,4778,7529,9328,4261,1596,9710,8944,561,7539,6320,6884,4274,2379,8641,3423,2973,2378,4584,7570,6503,9630,815,3620,9522,1364,2092,3247,4555,1371,7792,1953,1593,9430],(function(){return t=47169,e(e.s=t);var t}));var t=e.O();_N_E=t}]);